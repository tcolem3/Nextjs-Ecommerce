(()=>{var e={};e.id=867,e.ids=[867],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},66541:e=>{"use strict";e.exports=require("@prisma/client/runtime/library")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},86067:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>n});var s=r(70260),a=r(28203),i=r(25155),o=r.n(i),d=r(67292),c={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);r.d(t,c);let n=["",{children:["(root)",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54765)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\cart\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,44751)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\layout.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,82819)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,61129)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\cart\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(root)/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},6466:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed":()=>s.BP,"0063481ceb220ca367b0bfd81f4b7e7bb8a5412c3c":()=>a.P_,"4006037fbd5f93e00a275688371d306ee0c10f0e9c":()=>s.cE,"401c9b575412be014157debf32a1a1378158b2c6c3":()=>s.xu,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9":()=>s.kl,"4071e420d37979b01d6488c32f7874c7e8b25f49a6":()=>a.Mr,"40d284a28645fa75db43c5e69c2454b9cbdf6b7927":()=>a.I1,"60214fc46e351a83723c4e63b39e498fe69676b5ca":()=>s.VR,"6076f8d318fdf5837c18b232d3912ca52665d432e4":()=>s.Wd});var s=r(67185),a=r(34296)},60679:(e,t,r)=>{Promise.resolve().then(r.bind(r,91521))},26175:(e,t,r)=>{Promise.resolve().then(r.bind(r,17981))},17981:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var s=r(45512),a=r(79334),i=r(91542),o=r(58009),d=r(11127),c=r(55233),n=r(22084),l=r(60791),u=r(46335),p=r(18333),m=r(28531),f=r.n(m),h=r(45103),x=r(13393),b=r(87021),g=r(59462),v=r(97643);let j=({cart:e})=>{let t=(0,a.useRouter)(),[r,m]=(0,o.useTransition)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"py-4 h2-bold",children:"Shopping Cart"}),e&&0!==e.items.length?(0,s.jsxs)("div",{className:"grid md:grid-cols-4 md:gap-5",children:[(0,s.jsx)("div",{className:"overflow-x-auto md:col-span-3",children:(0,s.jsxs)(x.XI,{children:[(0,s.jsx)(x.A0,{children:(0,s.jsxs)(x.Hj,{children:[(0,s.jsx)(x.nd,{children:"Item"}),(0,s.jsx)(x.nd,{className:"text-center",children:"Quantity"}),(0,s.jsx)(x.nd,{className:"text-right",children:"Price"})]})}),(0,s.jsx)(x.BF,{children:e.items.map(e=>(0,s.jsxs)(x.Hj,{children:[(0,s.jsx)(x.nA,{children:(0,s.jsxs)(f(),{href:`/product/${e.slug}`,className:"flex items-center",children:[(0,s.jsx)(h.default,{src:e.image,alt:e.name,width:50,height:50}),(0,s.jsx)("span",{className:"x-2",children:e.name})]})}),(0,s.jsxs)(x.nA,{className:"flex-center gap-2",children:[(0,s.jsx)(b.$,{disabled:r,variant:"outline",type:"button",onClick:()=>m(async()=>{let t=await (0,d.I)(e.productId);t.success||i.o.error(t.message)}),children:r?(0,s.jsx)(n.A,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(l.A,{className:"w-4 h-4"})}),(0,s.jsx)("span",{children:e.qty}),(0,s.jsx)(b.$,{disabled:r,variant:"outline",type:"button",onClick:()=>m(async()=>{let t=await (0,c.M)(e);t.success||i.o.error(t.message)}),children:r?(0,s.jsx)(n.A,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(u.A,{className:"w-4 h-4"})})]}),(0,s.jsx)(x.nA,{className:"text-right",children:e.price})]},e.slug))})]})}),(0,s.jsx)(v.Zp,{children:(0,s.jsxs)(v.Wu,{className:"p-4 gap-4",children:[(0,s.jsxs)("div",{className:"pb-3 text-xl",children:["Subtotal (",e.items.reduce((e,t)=>e+t.qty,0),"):",(0,s.jsx)("span",{className:"font-bold",children:(0,g.vv)(e.itemsPrice)})]}),(0,s.jsxs)(b.$,{className:"w-full",disabled:r,onClick:()=>m(()=>t.push("/shipping-address")),children:[r?(0,s.jsx)(n.A,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(p.A,{className:"w-4 h-4"})," ","Proceed to Checkout"]})]})})]}):(0,s.jsxs)("div",{children:["Cart is empty. ",(0,s.jsx)(f(),{href:"/",children:"Go Shopping"})]})]})}},97643:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>d,Zp:()=>o});var s=r(45512),a=r(58009),i=r(59462);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},13393:(e,t,r)=>{"use strict";r.d(t,{A0:()=>d,BF:()=>c,Hj:()=>n,XI:()=>o,nA:()=>u,nd:()=>l});var s=r(45512),a=r(58009),i=r(59462);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})}));o.displayName="Table";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,i.cn)("[&_tr]:border-b",e),...t}));d.displayName="TableHeader";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t}));c.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let n=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));n.displayName="TableRow";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));l.displayName="TableHead";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},79334:(e,t,r)=>{"use strict";var s=r(58686);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},91521:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\colep\\\\Desktop\\\\git\\\\Nextjs-Ecommerce\\\\app\\\\(root)\\\\cart\\\\cart-table.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\cart\\cart-table.tsx","default")},54765:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>o});var s=r(62740),a=r(91521),i=r(34296);let o={title:"Shopping Cart"},d=async()=>{let e=await (0,i.P_)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.default,{cart:e})})}},34296:(e,t,r)=>{"use strict";r.d(t,{I1:()=>f,Mr:()=>p,P_:()=>m});var s=r(88977);r(98063);var a=r(44512),i=r(55946),o=r(67905),d=r(21320),c=r(84976),n=r(61482),l=r(56215);let u=e=>{let t=(0,i.X4)(e.reduce((e,t)=>e+Number(t.price)*t.qty,0)),r=(0,i.X4)(t>100?0:10),s=(0,i.X4)(.15*t),a=(0,i.X4)(t+s+r);return{itemsPrice:t.toFixed(2),shippingPrice:r.toFixed(2),taxPrice:s.toFixed(2),totalPrice:a.toFixed(2)}};async function p(e){try{let t=(await a.UL()).get("sessionCartId")?.value;if(!t)throw Error("Cart session not found");let r=await (0,o.j2)(),s=r?.user?.id?r.user.id:void 0,i=await m(),l=c.HS.parse(e),p=await d.z.product.findFirst({where:{id:l.productId}});if(!p)throw Error("Product not found");if(i){let e=i.items.find(e=>e.productId===l.productId);if(e){if(p.stock<e.qty+1)throw Error("Not enough stock");i.items.find(e=>e.productId===l.productId).qty=e.qty+1}else{if(p.stock<1)throw Error("Not enough stock");i.items.push(l)}return await d.z.cart.update({where:{id:i.id},data:{items:i.items,...u(i.items)}}),(0,n.revalidatePath)(`/product/${p.slug}`),{success:!0,message:`${p.name} ${e?"updated in":"added to"} cart`}}{let e=c.rZ.parse({userId:s,items:[l],sessionCartId:t,...u([l])});return await d.z.cart.create({data:e}),(0,n.revalidatePath)(`/product/${p.slug}`),{success:!0,message:`${p.name} added to cart`}}}catch(e){return{success:!1,message:(0,i.Wk)(e)}}}async function m(){let e=(await a.UL()).get("sessionCartId")?.value;if(!e)throw Error("Cart session not found");let t=await (0,o.j2)(),r=t?.user?.id?t.user.id:void 0,s=await d.z.cart.findFirst({where:r?{userId:r}:{sessionCartId:e}});if(s)return(0,i.W4)({...s,items:s.items,itemsPrice:s.itemsPrice.toString(),totalPrice:s.totalPrice.toString(),shippingPrice:s.shippingPrice.toString(),taxPrice:s.taxPrice.toString()})}async function f(e){try{if(!(await a.UL()).get("sessionCartId")?.value)throw Error("Cart session not found");let t=await d.z.product.findFirst({where:{id:e}});if(!t)throw Error("Product not found");let r=await m();if(!r)throw Error("Cart not found");let s=r.items.find(t=>t.productId===e);if(!s)throw Error("Item not found");return 1===s.qty?r.items=r.items.filter(e=>e.productId!=s.productId):r.items.find(t=>t.productId===e).qty=s.qty-1,await d.z.cart.update({where:{id:r.id},data:{items:r.items,...u(r.items)}}),(0,n.revalidatePath)(`/product/${t.slug}`),{success:!0,message:`${t.name} was removed from cart`}}catch(e){return{success:!1,message:(0,i.Wk)(e)}}}(0,l.D)([p,m,f]),(0,s.A)(p,"4071e420d37979b01d6488c32f7874c7e8b25f49a6",null),(0,s.A)(m,"0063481ceb220ca367b0bfd81f4b7e7bb8a5412c3c",null),(0,s.A)(f,"40d284a28645fa75db43c5e69c2454b9cbdf6b7927",null)},55233:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var s=r(26248);let a=(0,s.createServerReference)("4071e420d37979b01d6488c32f7874c7e8b25f49a6",s.callServer,void 0,s.findSourceMapURL,"addItemToCart")},11127:(e,t,r)=>{"use strict";r.d(t,{I:()=>a});var s=r(26248);let a=(0,s.createServerReference)("40d284a28645fa75db43c5e69c2454b9cbdf6b7927",s.callServer,void 0,s.findSourceMapURL,"removeItemFromCart")},18333:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(94825).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},22084:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(94825).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},60791:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(94825).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},46335:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(94825).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,187,8,3,670,95,351,777,567],()=>r(86067));module.exports=s})();