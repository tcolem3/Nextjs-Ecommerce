(()=>{var e={};e.id=883,e.ids=[883],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},66541:e=>{"use strict";e.exports=require("@prisma/client/runtime/library")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},69547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>d});var a=r(70260),s=r(28203),n=r(25155),o=r.n(n),i=r(67292),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let d=["",{children:["(root)",{children:["order",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,77641)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\order\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,44751)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\layout.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,82819)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,61129)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\order\\[id]\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(root)/order/[id]/page",pathname:"/order/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},98331:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed":()=>a.BP,"0063481ceb220ca367b0bfd81f4b7e7bb8a5412c3c":()=>n.P_,"009354b2c685f8183e27b43b6c9ba079b5e5dfbd20":()=>s.fS,"4006037fbd5f93e00a275688371d306ee0c10f0e9c":()=>a.cE,"401c9b575412be014157debf32a1a1378158b2c6c3":()=>a.xu,"403cdf99df8430942dbac8263bae7b8de3b5c4ecb4":()=>s.Yq,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9":()=>a.kl,"4071e420d37979b01d6488c32f7874c7e8b25f49a6":()=>n.Mr,"40d284a28645fa75db43c5e69c2454b9cbdf6b7927":()=>n.I1,"40efcb2c47378c67bb23c7193b509b4fb00045e8c7":()=>s.p,"60214fc46e351a83723c4e63b39e498fe69676b5ca":()=>a.VR,"6076f8d318fdf5837c18b232d3912ca52665d432e4":()=>a.Wd,"60c3c6fe4fa488a80553280995f2a486feabdc1e9a":()=>s.PC});var a=r(67185),s=r(49782),n=r(34296)},71737:(e,t,r)=>{Promise.resolve().then(r.bind(r,22936))},42361:(e,t,r)=>{Promise.resolve().then(r.bind(r,93378))},93378:(e,t,r)=>{"use strict";r.d(t,{default:()=>Y});var a,s,n,o=r(45512),i=r(58009),c=r.n(i),d=r(21643),l=r(59462);let u=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function p({className:e,variant:t,...r}){return(0,o.jsx)("div",{className:(0,l.cn)(u({variant:t}),e),...r})}var f=r(97643),m=r(13393),h=r(28531),b=r.n(h),v=r(45103);(function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"})(a||(a={})),function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"}(s||(s={})),function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"}(n||(n={}));var y=function(){return(y=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function x(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}function g(e,t,r){if(r||2==arguments.length)for(var a,s=0,n=t.length;s<n;s++)!a&&s in t||(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var P="data-react-paypal-script-id",E={DATA_CLIENT_TOKEN:"dataClientToken",DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource",DATA_USER_ID_TOKEN:"dataUserIdToken"},A="paypal";function w(e){return void 0===e&&(e=A),window[e]}function N(e){var t=e.reactComponentName,r=e.sdkComponentKey,a=e.sdkRequestedComponents,s=void 0===a?"":a,n=e.sdkDataNamespace,o=r.charAt(0).toUpperCase().concat(r.substring(1)),i="Unable to render <".concat(t," /> because window.").concat(void 0===n?A:n,".").concat(o," is undefined."),c="string"==typeof s?s:s.join(",");if(!c.includes(r)){var d=[c,r].filter(Boolean).join();i+="\nTo fix the issue, add '".concat(r,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(d,"'}}>`.")}return i}function j(e){e[P];var t=x(e,[P+""]);return"react-paypal-js-".concat(function(e){for(var t="",r=0;r<e.length;r++){var a=e[r].charCodeAt(0)*r;e[r+1]&&(a+=e[r+1].charCodeAt(0)*(r-1)),t+=String.fromCharCode(97+Math.abs(a)%26)}return t}(JSON.stringify(t)))}function S(e,t){var r,n,o,i;switch(t.type){case s.LOADING_STATUS:if("object"==typeof t.value)return y(y({},e),{loadingStatus:t.value.state,loadingStatusErrorMessage:t.value.message});return y(y({},e),{loadingStatus:t.value});case s.RESET_OPTIONS:return o=e.options[P],(null==(i=self.document.querySelector("script[".concat(P,'="').concat(o,'"]')))?void 0:i.parentNode)&&i.parentNode.removeChild(i),y(y({},e),{loadingStatus:a.PENDING,options:y(y(((r={})[E.DATA_SDK_INTEGRATION_SOURCE]=E.DATA_LIBRARY_VALUE,r),t.value),((n={})[P]="".concat(j(t.value)),n))});case s.SET_BRAINTREE_INSTANCE:return y(y({},e),{braintreePayPalCheckoutInstance:t.value});default:return e}}var I=(0,i.createContext)(null);function T(){var e=function(e){if("function"==typeof(null==e?void 0:e.dispatch)&&0!==e.dispatch.length)return e;throw Error("usePayPalScriptReducer must be used within a PayPalScriptProvider")}((0,i.useContext)(I));return[y(y({},e),{isInitial:e.loadingStatus===a.INITIAL,isPending:e.loadingStatus===a.PENDING,isResolved:e.loadingStatus===a.RESOLVED,isRejected:e.loadingStatus===a.REJECTED}),e.dispatch]}(0,i.createContext)({});var O=function(e){var t,r,a=e.className,s=e.disabled,n=void 0!==s&&s,o=e.children,d=e.forceReRender,l=x(e,["className","disabled","children","forceReRender"]),u="".concat(void 0===a?"":a," ").concat(n?"paypal-buttons-disabled":"").trim(),p=(0,i.useRef)(null),f=(0,i.useRef)(null),m=((t=(0,i.useRef)(new Proxy({},{get:function(e,t,r){return"function"==typeof e[t]?function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e[t].apply(e,r)}:Reflect.get(e,t,r)}}))).current=Object.assign(t.current,l),t.current),h=T()[0],b=h.isResolved,v=h.options,P=(0,i.useState)(null),A=P[0],j=P[1],S=(0,i.useState)(!0),I=S[0],R=S[1],C=(0,i.useState)(null)[1];function _(){null!==f.current&&f.current.close().catch(function(){})}return(null===(r=f.current)||void 0===r?void 0:r.updateProps)&&f.current.updateProps({message:l.message}),(0,i.useEffect)(function(){if(!1===b)return _;var e=w(v.dataNamespace);if(void 0===e||void 0===e.Buttons)return C(function(){throw Error(N({reactComponentName:O.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:v.components,sdkDataNamespace:v[E.DATA_NAMESPACE]}))}),_;try{f.current=e.Buttons(y(y({},m),{onInit:function(e,t){j(t),"function"==typeof l.onInit&&l.onInit(e,t)}}))}catch(e){return C(function(){throw Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(e))})}return!1===f.current.isEligible()?R(!1):p.current&&f.current.render(p.current).catch(function(e){null!==p.current&&0!==p.current.children.length&&C(function(){throw Error("Failed to render <PayPalButtons /> component. ".concat(e))})}),_},g(g([b],void 0===d?[]:d,!0),[l.fundingSource],!1)),(0,i.useEffect)(function(){null!==A&&(!0===n?A.disable().catch(function(){}):A.enable().catch(function(){}))},[n,A]),c().createElement(c().Fragment,null,I?c().createElement("div",{ref:p,style:n?{opacity:.38}:{},className:u}):o)};function R(e,t){void 0===t&&(t={});var r=document.createElement("script");return r.src=e,Object.keys(t).forEach(function(e){r.setAttribute(e,t[e]),"data-csp-nonce"===e&&r.setAttribute("nonce",t["data-csp-nonce"])}),r}function C(e,t){if("object"!=typeof e||null===e)throw Error("Expected an options object.");var r=e.environment;if(r&&"production"!==r&&"sandbox"!==r)throw Error('The `environment` option must be either "production" or "sandbox".');if(void 0!==t&&"function"!=typeof t)throw Error("Expected PromisePonyfill to be a function.")}O.displayName="PayPalButtons","function"==typeof SuppressedError&&SuppressedError;var _=function(e){var t=e.className,r=e.children,a=x(e,["className","children"]),s=T()[0],n=s.isResolved,o=s.options,d=(0,i.useRef)(null),l=(0,i.useState)(!0),u=l[0],p=l[1],f=(0,i.useState)(null)[1],m=function(e){var t=d.current;if(!t||!e.isEligible())return p(!1);t.firstChild&&t.removeChild(t.firstChild),e.render(t).catch(function(e){null!==t&&0!==t.children.length&&f(function(){throw Error("Failed to render <PayPalMarks /> component. ".concat(e))})})};return(0,i.useEffect)(function(){if(!1!==n){var e=w(o[E.DATA_NAMESPACE]);if(void 0===e||void 0===e.Marks)return f(function(){throw Error(N({reactComponentName:_.displayName,sdkComponentKey:"marks",sdkRequestedComponents:o.components,sdkDataNamespace:o[E.DATA_NAMESPACE]}))});m(e.Marks(y({},a)))}},[n,a.fundingSource]),c().createElement(c().Fragment,null,u?c().createElement("div",{ref:d,className:void 0===t?"":t}):r)};_.displayName="PayPalMarks";var D=function(e){var t=e.className,r=e.forceReRender,a=x(e,["className","forceReRender"]),s=T()[0],n=s.isResolved,o=s.options,d=(0,i.useRef)(null),l=(0,i.useRef)(null),u=(0,i.useState)(null)[1];return(0,i.useEffect)(function(){if(!1!==n){var e=w(o[E.DATA_NAMESPACE]);if(void 0===e||void 0===e.Messages)return u(function(){throw Error(N({reactComponentName:D.displayName,sdkComponentKey:"messages",sdkRequestedComponents:o.components,sdkDataNamespace:o[E.DATA_NAMESPACE]}))});l.current=e.Messages(y({},a)),l.current.render(d.current).catch(function(e){null!==d.current&&0!==d.current.children.length&&u(function(){throw Error("Failed to render <PayPalMessages /> component. ".concat(e))})})}},g([n],void 0===r?[]:r,!0)),c().createElement("div",{ref:d,className:void 0===t?"":t})};D.displayName="PayPalMessages";var k=function(e){var t,r=e.options,n=void 0===r?{clientId:"test"}:r,o=e.children,d=e.deferLoading,l=void 0!==d&&d,u=(0,i.useReducer)(S,{options:y(y({},n),((t={})[E.DATA_JS_SDK_LIBRARY]=E.DATA_LIBRARY_VALUE,t[E.DATA_SDK_INTEGRATION_SOURCE]=E.DATA_LIBRARY_VALUE,t[P]="".concat(j(n)),t)),loadingStatus:l?a.INITIAL:a.PENDING}),p=u[0],f=u[1];return(0,i.useEffect)(function(){if(!1===l&&p.loadingStatus===a.INITIAL)return f({type:s.LOADING_STATUS,value:a.PENDING});if(p.loadingStatus===a.PENDING){var e=!0;return(function(e,t){if(void 0===t&&(t=Promise),C(e,t),"undefined"==typeof document)return t.resolve(null);var r,a,s,n,o,i,c,d,l=(a=e.sdkBaseUrl,s=e.environment,n=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}(e,["sdkBaseUrl","environment"]),o=a||("sandbox"===s?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"),c=(i=Object.keys(n).filter(function(e){return void 0!==n[e]&&null!==n[e]&&""!==n[e]}).reduce(function(e,t){var r=n[t].toString();return"data"===(t=t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()})).substring(0,4)||"crossorigin"===t?e.attributes[t]=r:e.queryParams[t]=r,e},{queryParams:{},attributes:{}})).queryParams,d=i.attributes,c["merchant-id"]&&-1!==c["merchant-id"].indexOf(",")&&(d["data-merchant-id"]=c["merchant-id"],c["merchant-id"]="*"),{url:"".concat(o,"?").concat((r="",Object.keys(c).forEach(function(e){0!==r.length&&(r+="&"),r+=e+"="+c[e]}),r)),attributes:d}),u=l.url,p=l.attributes,f=p["data-namespace"]||"paypal",m=window[f];return(p["data-js-sdk-library"]||(p["data-js-sdk-library"]="paypal-js"),function(e,t){var r=document.querySelector('script[src="'.concat(e,'"]'));if(null===r)return null;var a=R(e,t),s=r.cloneNode();if(delete s.dataset.uidAuto,Object.keys(s.dataset).length!==Object.keys(a.dataset).length)return null;var n=!0;return Object.keys(s.dataset).forEach(function(e){s.dataset[e]!==a.dataset[e]&&(n=!1)}),n?r:null}(u,p)&&m)?t.resolve(m):(function(e,t){void 0===t&&(t=Promise),C(e,t);var r=e.url,a=e.attributes;if("string"!=typeof r||0===r.length)throw Error("Invalid url.");if(void 0!==a&&"object"!=typeof a)throw Error("Expected attributes to be an object.");return new t(function(e,t){var s,n,o,i,c,d;if("undefined"==typeof document)return e();n=(s={url:r,attributes:a,onSuccess:function(){return e()},onError:function(){return t(Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.')))}}).url,o=s.attributes,i=s.onSuccess,c=s.onError,(d=R(n,o)).onerror=c,d.onload=i,document.head.insertBefore(d,document.head.firstElementChild)})})({url:u,attributes:p},t).then(function(){var e=window[f];if(e)return e;throw Error("The window.".concat(f," global variable is not available."))})})(p.options).then(function(){e&&f({type:s.LOADING_STATUS,value:a.RESOLVED})}).catch(function(t){console.error("".concat("Failed to load the PayPal JS SDK script."," ").concat(t)),e&&f({type:s.LOADING_STATUS,value:{state:a.REJECTED,message:String(t)}})}),function(){e=!1}}},[p.options,l,p.loadingStatus]),c().createElement(I.Provider,{value:y(y({},p),{dispatch:f})},o)};function L(){}(0,i.createContext)({cardFieldsForm:null,fields:{},registerField:L,unregisterField:L});var q={IDEAL:"ideal",BANCONTACT:"bancontact",GIROPAY:"giropay",SOFORT:"sofort",EPS:"eps",MYBANK:"mybank",P24:"p24",PAYU:"payu",BLIK:"blik",TRUSTLY:"trustly",OXXO:"oxxo",BOLETO:"boleto",BOLETOBANCARIO:"boletobancario",WECHATPAY:"wechatpay",MERCADOPAGO:"mercadopago",MULTIBANCO:"multibanco",SATISPAY:"satispay",PAIDY:"paidy",ZIMPLER:"zimpler",MAXIMA:"maxima"};q.IDEAL,q.BANCONTACT,q.GIROPAY,q.SOFORT,q.EPS,q.MYBANK,q.P24,q.PAYU,q.BLIK,q.TRUSTLY,q.OXXO,q.BOLETO,q.BOLETOBANCARIO,q.WECHATPAY,q.MERCADOPAGO,q.MULTIBANCO,q.SATISPAY,q.PAIDY,q.MAXIMA,q.ZIMPLER;var M=r(26248);let U=(0,M.createServerReference)("403cdf99df8430942dbac8263bae7b8de3b5c4ecb4",M.callServer,void 0,M.findSourceMapURL,"createPayPalOrder"),B=(0,M.createServerReference)("60c3c6fe4fa488a80553280995f2a486feabdc1e9a",M.callServer,void 0,M.findSourceMapURL,"approvePayPalOrder");var F=r(91542);let Y=({order:e,paypalClientId:t})=>{let{id:r,shippingAddress:a,orderitems:s,itemsPrice:n,shippingPrice:i,taxPrice:c,totalPrice:d,paymentMethod:u,isDelivered:h,isPaid:y,paidAt:x,deliveredAt:g}=e,P=async()=>{let t=await U(e.id);return t.success||F.o.error(t.message),t.data},E=async t=>{let r=await B(e.id,t);r.success?F.o.message(r.message):F.o.error(r.message)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("h1",{className:"py-4 text-2xl",children:["Order ",(0,l.hX)(r)]}),(0,o.jsxs)("div",{className:"grid md:grid-cols-3 md:gap-5",children:[(0,o.jsxs)("div",{className:"col-span-2 space-4-y overlow-x-auto",children:[(0,o.jsx)(f.Zp,{children:(0,o.jsxs)(f.Wu,{className:"p-4 gap-4",children:[(0,o.jsx)("h2",{className:"text-xl pb-4",children:" Payment Method "}),(0,o.jsx)("p",{className:"mb-2",children:u}),y?(0,o.jsxs)(p,{variant:"secondary",children:["Paid at ",(0,l.r6)(x).dateTime]}):(0,o.jsx)(p,{variant:"destructive",children:"Not paid"})]})}),(0,o.jsx)(f.Zp,{className:"my-2",children:(0,o.jsxs)(f.Wu,{className:"p-4 gap-4",children:[(0,o.jsx)("h2",{className:"text-xl pb-4",children:" Shipping Address "}),(0,o.jsx)("p",{children:a.fullName}),(0,o.jsxs)("p",{className:"mb-2",children:[a.streetAddress,", ",a.city,", ",a.postalCode,", ",a.country]}),h?(0,o.jsxs)(p,{variant:"secondary",children:["Paid at ",(0,l.r6)(g).dateTime]}):(0,o.jsx)(p,{variant:"destructive",children:"Not Delivered"})]})}),(0,o.jsx)(f.Zp,{children:(0,o.jsxs)(f.Wu,{className:"p-4 gap-4",children:[(0,o.jsx)("h2",{className:"text-xl pb-4",children:"Order Items"}),(0,o.jsxs)(m.XI,{children:[(0,o.jsx)(m.A0,{children:(0,o.jsxs)(m.Hj,{children:[(0,o.jsx)(m.nd,{children:"Item"}),(0,o.jsx)(m.nd,{children:"Quantity"}),(0,o.jsx)(m.nd,{children:"Price"})]})}),(0,o.jsx)(m.BF,{children:s.map(e=>(0,o.jsxs)(m.Hj,{children:[(0,o.jsx)(m.nA,{children:(0,o.jsxs)(b(),{href:"/product/{item.slug}",className:"flex items-center",children:[(0,o.jsx)(v.default,{src:e.image,alt:e.name,width:50,height:50}),(0,o.jsx)("span",{className:"px-2",children:e.name})]})}),(0,o.jsx)(m.nA,{children:(0,o.jsx)("span",{className:"px-2",children:e.qty})}),(0,o.jsxs)(m.nA,{className:"text-right",children:["$",e.price]})]},e.slug))})]})]})})]}),(0,o.jsx)("div",{children:(0,o.jsx)(f.Zp,{children:(0,o.jsxs)(f.Wu,{className:"p-4 gap-4 space-y-4",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("div",{children:"Item"}),(0,o.jsx)("div",{children:(0,l.vv)(n)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("div",{children:"Tax"}),(0,o.jsx)("div",{children:(0,l.vv)(c)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("div",{children:"Shipping"}),(0,o.jsx)("div",{children:(0,l.vv)(i)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("p",{children:"Total"}),(0,o.jsx)("div",{children:(0,l.vv)(d)})]}),!y&&"PayPal"===u&&(0,o.jsx)("div",{children:(0,o.jsxs)(k,{options:{clientId:t},children:[(0,o.jsx)(()=>{let[{isPending:e,isRejected:t}]=T(),r="";return e?r="Loading PayPal.....":t&&(r="Error Loading PayPal"),r},{}),(0,o.jsx)(O,{createOrder:P,onApprove:E})]})})]})})})]})]})}},97643:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>i,Zp:()=>o});var a=r(45512),s=r(58009),n=r(59462);let o=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let i=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));i.displayName="CardContent",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},13393:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>c,Hj:()=>d,XI:()=>o,nA:()=>u,nd:()=>l});var a=r(45512),s=r(58009),n=r(59462);let o=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));o.displayName="Table";let i=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let c=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));c.displayName="TableBody",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let l=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));l.displayName="TableHead";let u=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},22936:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\colep\\\\Desktop\\\\git\\\\Nextjs-Ecommerce\\\\app\\\\(root)\\\\order\\\\[id]\\\\order-details-table.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\order\\[id]\\order-details-table.tsx","default")},77641:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>i});var a=r(62740),s=r(49782),n=r(31831),o=r(22936);let i={title:"Order Details"},c=async e=>{let{id:t}=await e.params,r=await (0,s.p)(t);return r||(0,n.notFound)(),(0,a.jsx)(o.default,{order:{...r,shippingAddress:r.shippingAddress},paypalClientId:process.env.PAYPAL_CLIENT_ID||"sb"})}},34296:(e,t,r)=>{"use strict";r.d(t,{I1:()=>m,Mr:()=>p,P_:()=>f});var a=r(88977);r(98063);var s=r(44512),n=r(55946),o=r(67905),i=r(21320),c=r(84976),d=r(61482),l=r(56215);let u=e=>{let t=(0,n.X4)(e.reduce((e,t)=>e+Number(t.price)*t.qty,0)),r=(0,n.X4)(t>100?0:10),a=(0,n.X4)(.15*t),s=(0,n.X4)(t+a+r);return{itemsPrice:t.toFixed(2),shippingPrice:r.toFixed(2),taxPrice:a.toFixed(2),totalPrice:s.toFixed(2)}};async function p(e){try{let t=(await s.UL()).get("sessionCartId")?.value;if(!t)throw Error("Cart session not found");let r=await (0,o.j2)(),a=r?.user?.id?r.user.id:void 0,n=await f(),l=c.HS.parse(e),p=await i.z.product.findFirst({where:{id:l.productId}});if(!p)throw Error("Product not found");if(n){let e=n.items.find(e=>e.productId===l.productId);if(e){if(p.stock<e.qty+1)throw Error("Not enough stock");n.items.find(e=>e.productId===l.productId).qty=e.qty+1}else{if(p.stock<1)throw Error("Not enough stock");n.items.push(l)}return await i.z.cart.update({where:{id:n.id},data:{items:n.items,...u(n.items)}}),(0,d.revalidatePath)(`/product/${p.slug}`),{success:!0,message:`${p.name} ${e?"updated in":"added to"} cart`}}{let e=c.rZ.parse({userId:a,items:[l],sessionCartId:t,...u([l])});return await i.z.cart.create({data:e}),(0,d.revalidatePath)(`/product/${p.slug}`),{success:!0,message:`${p.name} added to cart`}}}catch(e){return{success:!1,message:(0,n.Wk)(e)}}}async function f(){let e=(await s.UL()).get("sessionCartId")?.value;if(!e)throw Error("Cart session not found");let t=await (0,o.j2)(),r=t?.user?.id?t.user.id:void 0,a=await i.z.cart.findFirst({where:r?{userId:r}:{sessionCartId:e}});if(a)return(0,n.W4)({...a,items:a.items,itemsPrice:a.itemsPrice.toString(),totalPrice:a.totalPrice.toString(),shippingPrice:a.shippingPrice.toString(),taxPrice:a.taxPrice.toString()})}async function m(e){try{if(!(await s.UL()).get("sessionCartId")?.value)throw Error("Cart session not found");let t=await i.z.product.findFirst({where:{id:e}});if(!t)throw Error("Product not found");let r=await f();if(!r)throw Error("Cart not found");let a=r.items.find(t=>t.productId===e);if(!a)throw Error("Item not found");return 1===a.qty?r.items=r.items.filter(e=>e.productId!=a.productId):r.items.find(t=>t.productId===e).qty=a.qty-1,await i.z.cart.update({where:{id:r.id},data:{items:r.items,...u(r.items)}}),(0,d.revalidatePath)(`/product/${t.slug}`),{success:!0,message:`${t.name} was removed from cart`}}catch(e){return{success:!1,message:(0,n.Wk)(e)}}}(0,l.D)([p,f,m]),(0,a.A)(p,"4071e420d37979b01d6488c32f7874c7e8b25f49a6",null),(0,a.A)(f,"0063481ceb220ca367b0bfd81f4b7e7bb8a5412c3c",null),(0,a.A)(m,"40d284a28645fa75db43c5e69c2454b9cbdf6b7927",null)},49782:(e,t,r)=>{"use strict";r.d(t,{PC:()=>x,fS:()=>b,Yq:()=>y,p:()=>v});var a=r(88977);r(98063);var s=r(23543),n=r(55946),o=r(67905),i=r(34296),c=r(67185),d=r(84976),l=r(21320);let u=process.env.PAYPAL_API_URL||"https://api-m.sandbox.paypal.com",p={createOrder:async function(e){let t=await f(),r=`${u}/v2/checkout/orders`;return m(await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:e}}]})}))},capturePayment:async function(e){let t=await f(),r=`${u}/v2/checkout/orders/${e}/capture`;return m(await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}))}};async function f(){let{PAYPAL_CLIENT_ID:e,PAYPAL_APP_SECRET:t}=process.env,r=Buffer.from(`${e}:${t}`).toString("base64"),a=await fetch(`${u}/v1/oauth2/token`,{method:"POST",body:"grant_type=client_credentials",headers:{Authorization:`Basic ${r}`,"Content-Type":"application/x-www-form-urlencoded"}});return(await m(a)).access_token}async function m(e){if(e.ok)return e.json();throw Error(await e.text())}var h=r(61482);async function b(){try{let e=await (0,o.j2)();if(!e)throw Error("User is not authenticated");let t=await (0,i.P_)(),r=e?.user?.id;if(!r)throw Error("User not found");let a=await (0,c.kl)(r);if(!t||0===t.items.length)return{success:!1,message:"Your cart is empty",redirectTo:"/cart"};if(!a.address)return{success:!1,message:"No shipping address",redirectTo:"/shipping-address"};if(!a.paymentMethod)return{success:!1,message:"No payment method",redirectTo:"/payment-method"};let s=d.Lc.parse({userId:a.id,shippingAddress:a.address,paymentMethod:a.paymentMethod,itemsPrice:t.itemsPrice,shippingPrice:t.shippingPrice,taxPrice:t.taxPrice,totalPrice:t.totalPrice}),n=await l.z.$transaction(async e=>{let r=await e.order.create({data:s});for(let a of t.items)await e.orderItem.create({data:{...a,price:a.price,orderId:r.id}});return await e.cart.update({where:{id:t.id},data:{items:[],totalPrice:0,taxPrice:0,shippingPrice:0,itemsPrice:0}}),r.id});if(!n)throw Error("Order not created");return{success:!0,message:"Order created",redirectTo:`/order/${n}`}}catch(e){if((0,s.isRedirectError)(e))throw e;return{success:!1,message:(0,n.Wk)(e)}}}async function v(e){let t=await l.z.order.findFirst({where:{id:e},include:{orderitems:!0,user:{select:{name:!0,email:!0}}}});return(0,n.W4)(t)}async function y(e){try{let t=await l.z.order.findFirst({where:{id:e}});if(t){let r=await p.createOrder(Number(t.totalPrice));return await l.z.order.update({where:{id:e},data:{paymentResult:{id:r.id,email_address:"",status:"",pricePaid:0}}}),{success:!0,message:"Item order created successfully",data:r.id}}throw Error("Order not found")}catch(e){return{succes:!1,message:(0,n.Wk)(e)}}}async function x(e,t){try{let r=await l.z.order.findFirst({where:{id:e}});if(!r)throw Error("Order not found");let a=await p.capturePayment(t.orderID);if(!a||a.id!==r.paymentResult?.id||"COMPLETED"!==a.status)throw Error("Eror in PayPal payment");return await g({orderId:e,paymentResult:{id:a.id,status:a.status,email_address:a.payer.email_address,pricePaid:a.purchase_units[0]?.payments?.captures[0]?.amount?.value}}),(0,h.revalidatePath)(`/order/${e}`),{success:!0,message:"Your order has been paid"}}catch(e){return{success:!1,message:(0,n.Wk)(e)}}}async function g({orderId:e,paymentResult:t}){let r=await l.z.order.findFirst({where:{id:e},include:{orderitems:!0}});if(!r)throw Error("Order not found");if(r.isPaid)throw Error("Order is already paid");if(await l.z.$transaction(async a=>{for(let e of r.orderitems)await a.product.update({where:{id:e.productId},data:{stock:{increment:-e.qty}}});await a.order.update({where:{id:e},data:{isPaid:!0,paidAt:new Date,paymentResult:t}})}),!await l.z.order.findFirst({where:{id:e},include:{orderitems:!0,user:{select:{name:!0,email:!0}}}}))throw Error("Order not found")}(0,r(56215).D)([b,v,y,x]),(0,a.A)(b,"009354b2c685f8183e27b43b6c9ba079b5e5dfbd20",null),(0,a.A)(v,"40efcb2c47378c67bb23c7193b509b4fb00045e8c7",null),(0,a.A)(y,"403cdf99df8430942dbac8263bae7b8de3b5c4ecb4",null),(0,a.A)(x,"60c3c6fe4fa488a80553280995f2a486feabdc1e9a",null)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,187,8,3,670,95,351,777,567],()=>r(69547));module.exports=a})();