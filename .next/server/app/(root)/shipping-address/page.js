(()=>{var e={};e.id=142,e.ids=[142],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},66541:e=>{"use strict";e.exports=require("@prisma/client/runtime/library")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},76403:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>c});var s=t(70260),i=t(28203),a=t(25155),o=t.n(a),n=t(67292),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(r,d);let c=["",{children:["(root)",{children:["shipping-address",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,34812)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\shipping-address\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,44751)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\layout.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,19611)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,82819)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,61129)),"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\shipping-address\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(root)/shipping-address/page",pathname:"/shipping-address",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6466:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed":()=>s.BP,"0063481ceb220ca367b0bfd81f4b7e7bb8a5412c3c":()=>i.P_,"4006037fbd5f93e00a275688371d306ee0c10f0e9c":()=>s.cE,"401c9b575412be014157debf32a1a1378158b2c6c3":()=>s.xu,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9":()=>s.kl,"4071e420d37979b01d6488c32f7874c7e8b25f49a6":()=>i.Mr,"40d284a28645fa75db43c5e69c2454b9cbdf6b7927":()=>i.I1,"60214fc46e351a83723c4e63b39e498fe69676b5ca":()=>s.VR,"6076f8d318fdf5837c18b232d3912ca52665d432e4":()=>s.Wd});var s=t(67185),i=t(34296)},33321:(e,r,t)=>{Promise.resolve().then(t.bind(t,89353))},23593:(e,r,t)=>{Promise.resolve().then(t.bind(t,58135))},58135:(e,r,t)=>{"use strict";t.d(r,{default:()=>b});var s=t(45512),i=t(79334),a=t(91542),o=t(58009),n=t(39900),d=t(81914),c=t(6868),l=t(69093),u=t(94727),m=t(25409),p=t(87021),f=t(22084),x=t(18333),h=t(26248);let g=(0,h.createServerReference)("401c9b575412be014157debf32a1a1378158b2c6c3",h.callServer,void 0,h.findSourceMapURL,"updateUserAddress"),b=({address:e})=>{let r=(0,i.useRouter)(),t=(0,c.mN)({resolver:(0,d.u)(n.g),defaultValues:e||l.GC}),[h,b]=(0,o.useTransition)(),j=async e=>{b(async()=>{let t=await g(e);if(!t.success){a.o.success(t.message,{action:{label:"Go to Cart",onClick:()=>r.push("/cart")}});return}r.push("/payment-method")})};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,s.jsx)("h1",{className:"h2-bold mt-4",children:"Shipping Address"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please enter an address to ship to"}),(0,s.jsx)(u.lV,{...t,children:(0,s.jsxs)("form",{method:"POST",className:"space-y-4",onSubmit:t.handleSubmit(j),children:[(0,s.jsx)("div",{className:"flex flex-col md:flex-row gap-5",children:(0,s.jsx)(u.zB,{control:t.control,name:"fullName",render:({field:e})=>(0,s.jsxs)(u.eI,{className:"w-full",children:[(0,s.jsx)(u.lR,{children:"Full Name"}),(0,s.jsx)(u.MJ,{children:(0,s.jsx)(m.p,{placeholder:"Enter full name",...e})}),(0,s.jsx)(u.C5,{})]})})}),(0,s.jsx)("div",{className:"flex flex-col md:flex-row gap-5",children:(0,s.jsx)(u.zB,{control:t.control,name:"streetAddress",render:({field:e})=>(0,s.jsxs)(u.eI,{className:"w-full",children:[(0,s.jsx)(u.lR,{children:"Address"}),(0,s.jsx)(u.MJ,{children:(0,s.jsx)(m.p,{placeholder:"Enter address",...e})}),(0,s.jsx)(u.C5,{})]})})}),(0,s.jsx)("div",{className:"flex flex-col md:flex-row gap-5",children:(0,s.jsx)(u.zB,{control:t.control,name:"city",render:({field:e})=>(0,s.jsxs)(u.eI,{className:"w-full",children:[(0,s.jsx)(u.lR,{children:"City"}),(0,s.jsx)(u.MJ,{children:(0,s.jsx)(m.p,{placeholder:"Enter city",...e})}),(0,s.jsx)(u.C5,{})]})})}),(0,s.jsx)("div",{className:"flex flex-col md:flex-row gap-5",children:(0,s.jsx)(u.zB,{control:t.control,name:"postalCode",render:({field:e})=>(0,s.jsxs)(u.eI,{className:"w-full",children:[(0,s.jsx)(u.lR,{children:"Postal Code"}),(0,s.jsx)(u.MJ,{children:(0,s.jsx)(m.p,{placeholder:"Enter Postal Code",...e})}),(0,s.jsx)(u.C5,{})]})})}),(0,s.jsx)("div",{className:"flex flex-col md:flex-row gap-5",children:(0,s.jsx)(u.zB,{control:t.control,name:"country",render:({field:e})=>(0,s.jsxs)(u.eI,{className:"w-full",children:[(0,s.jsx)(u.lR,{children:"Country"}),(0,s.jsx)(u.MJ,{children:(0,s.jsx)(m.p,{placeholder:"Enter Country",...e})}),(0,s.jsx)(u.C5,{})]})})}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(p.$,{type:"submit",disabled:h,children:[h?(0,s.jsx)(f.A,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(x.A,{className:"w-4 h-4"}),"Continue"]})})]})})]})})}},94727:(e,r,t)=>{"use strict";t.d(r,{C5:()=>g,MJ:()=>h,eI:()=>f,lR:()=>x,lV:()=>c,zB:()=>u});var s=t(45512),i=t(58009),a=t(12705),o=t(6868),n=t(59462),d=t(47699);let c=o.Op,l=i.createContext({}),u=({...e})=>(0,s.jsx)(l.Provider,{value:{name:e.name},children:(0,s.jsx)(o.xI,{...e})}),m=()=>{let e=i.useContext(l),r=i.useContext(p),{getFieldState:t,formState:s}=(0,o.xW)(),a=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...a}},p=i.createContext({}),f=i.forwardRef(({className:e,...r},t)=>{let a=i.useId();return(0,s.jsx)(p.Provider,{value:{id:a},children:(0,s.jsx)("div",{ref:t,className:(0,n.cn)("space-y-2",e),...r})})});f.displayName="FormItem";let x=i.forwardRef(({className:e,...r},t)=>{let{error:i,formItemId:a}=m();return(0,s.jsx)(d.J,{ref:t,className:(0,n.cn)(i&&"text-destructive",e),htmlFor:a,...r})});x.displayName="FormLabel";let h=i.forwardRef(({...e},r)=>{let{error:t,formItemId:i,formDescriptionId:o,formMessageId:n}=m();return(0,s.jsx)(a.DX,{ref:r,id:i,"aria-describedby":t?`${o} ${n}`:`${o}`,"aria-invalid":!!t,...e})});h.displayName="FormControl",i.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:i}=m();return(0,s.jsx)("p",{ref:t,id:i,className:(0,n.cn)("text-sm text-muted-foreground",e),...r})}).displayName="FormDescription";let g=i.forwardRef(({className:e,children:r,...t},i)=>{let{error:a,formMessageId:o}=m(),d=a?String(a?.message??""):r;return d?(0,s.jsx)("p",{ref:i,id:o,className:(0,n.cn)("text-sm font-medium text-destructive",e),...t,children:d}):null});g.displayName="FormMessage"},25409:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(45512),i=t(58009),a=t(59462);let o=i.forwardRef(({className:e,type:r,...t},i)=>(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...t}));o.displayName="Input"},47699:(e,r,t)=>{"use strict";t.d(r,{J:()=>c});var s=t(45512),i=t(58009),a=t(92405),o=t(21643),n=t(59462);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)(a.b,{ref:t,className:(0,n.cn)(d(),e),...r}));c.displayName=a.b.displayName},39900:(e,r,t)=>{"use strict";t.d(r,{bY:()=>c,g:()=>d});var s=t(16131),i=t(59462),a=t(69093);let o=s.z.string().refine(e=>/^\d+(\.\d{2})?$/.test((0,i.eT)(Number(e))),"Price must have exactly two decimal places");s.z.object({name:s.z.string().min(3,"Name must be at least 3 characters"),slug:s.z.string().min(3,"Slug must be at least 3 characters"),category:s.z.string().min(3,"Category must be at least 3 characters"),brand:s.z.string().min(3,"Brand must be at least 3 characters"),description:s.z.string().min(3,"Description must be at least 3 characters"),stock:s.z.coerce.number(),images:s.z.array(s.z.string()).min(1,"Product must have at least one image"),isFeatured:s.z.boolean(),banner:s.z.string().nullable(),price:o}),s.z.object({email:s.z.string().email("Invalid email address"),password:s.z.string().min(6,"Password must be at least 6 characters")}),s.z.object({name:s.z.string().min(3,"Message must be at least 3 characters"),email:s.z.string().email("Invalid email address"),password:s.z.string().min(6,"Password must be at least 6 characters"),confirmPassword:s.z.string().min(6,"Password must be at least 6 characters")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});let n=s.z.object({productId:s.z.string().min(1,"Product is required"),name:s.z.string().min(1,"Name is required"),slug:s.z.string().min(1,"Slug is required"),qty:s.z.number().int().nonnegative("Quantity must be a positive number"),image:s.z.string().min(1,"Image is required"),price:o});s.z.object({items:s.z.array(n),itemsPrice:o,totalPrice:o,shippingPrice:o,taxPrice:o,sessionCartId:s.z.string().min(1,"Session cart id is required"),userId:s.z.string().optional().nullable()});let d=s.z.object({fullName:s.z.string().min(3,"Name must be at least 3 characters"),streetAddress:s.z.string().min(3,"Address must be at least 3 characters"),city:s.z.string().min(3,"City must be at least 3 characters"),postalCode:s.z.string().min(3,"Postal code must be at least 3 characters"),country:s.z.string().min(3,"Country must be at least 3 characters"),lat:s.z.number().optional(),lng:s.z.number().optional()}),c=s.z.object({type:s.z.string().min(1,"Payment method is required")}).refine(e=>a.uq?.includes(e.type),{path:["type"],message:"Invalid payment method"});s.z.object({userId:s.z.string().min(1,"User is required"),itemsPrice:o,totalPrice:o,shippingPrice:o,taxPrice:o,paymentMethod:s.z.string().refine(e=>a.uq.includes(e),{message:"Invalid payment method"}),shippingAddress:d}),s.z.object({productId:s.z.string(),slug:s.z.string(),image:s.z.string(),name:s.z.string(),price:o,qty:s.z.number()})},34812:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u,metadata:()=>l});var s=t(62740),i=t(67905),a=t(34296),o=t(31831),n=t(67185),d=t(89353),c=t(22496);let l={title:"Shipping Address"},u=async()=>{let e=await (0,a.P_)();e&&0!==e.items.length||(0,o.redirect)("/cart");let r=await (0,i.j2)(),t=r?.user?.id;if(!t)throw Error("No user ID");let l=await (0,n.kl)(t);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{current:1}),(0,s.jsx)(d.default,{address:l.address})]})}},89353:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\colep\\\\Desktop\\\\git\\\\Nextjs-Ecommerce\\\\app\\\\(root)\\\\shipping-address\\\\shipping-address-form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\colep\\Desktop\\git\\Nextjs-Ecommerce\\app\\(root)\\shipping-address\\shipping-address-form.tsx","default")},22496:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(62740),i=t(76301),a=t.n(i),o=t(55946);let n=({current:e=0})=>(0,s.jsx)("div",{className:"flex-between flex-col md:flex-row space-x-2 space-y-2 mb-10",children:["User Login","Shipping Address","Payment Method","Place Order"].map((r,t)=>(0,s.jsxs)(a().Fragment,{children:[(0,s.jsx)("div",{className:(0,o.cn)("p-2 w-56 rounded-full text-center text-sm",t===e?"bg-secondary":""),children:r}),"Place Order"!==r&&(0,s.jsx)("hr",{className:"w-16 border-t border-gray-300 mx-2"})]},r))})},34296:(e,r,t)=>{"use strict";t.d(r,{I1:()=>f,Mr:()=>m,P_:()=>p});var s=t(88977);t(98063);var i=t(44512),a=t(55946),o=t(67905),n=t(21320),d=t(84976),c=t(61482),l=t(56215);let u=e=>{let r=(0,a.X4)(e.reduce((e,r)=>e+Number(r.price)*r.qty,0)),t=(0,a.X4)(r>100?0:10),s=(0,a.X4)(.15*r),i=(0,a.X4)(r+s+t);return{itemsPrice:r.toFixed(2),shippingPrice:t.toFixed(2),taxPrice:s.toFixed(2),totalPrice:i.toFixed(2)}};async function m(e){try{let r=(await i.UL()).get("sessionCartId")?.value;if(!r)throw Error("Cart session not found");let t=await (0,o.j2)(),s=t?.user?.id?t.user.id:void 0,a=await p(),l=d.HS.parse(e),m=await n.z.product.findFirst({where:{id:l.productId}});if(!m)throw Error("Product not found");if(a){let e=a.items.find(e=>e.productId===l.productId);if(e){if(m.stock<e.qty+1)throw Error("Not enough stock");a.items.find(e=>e.productId===l.productId).qty=e.qty+1}else{if(m.stock<1)throw Error("Not enough stock");a.items.push(l)}return await n.z.cart.update({where:{id:a.id},data:{items:a.items,...u(a.items)}}),(0,c.revalidatePath)(`/product/${m.slug}`),{success:!0,message:`${m.name} ${e?"updated in":"added to"} cart`}}{let e=d.rZ.parse({userId:s,items:[l],sessionCartId:r,...u([l])});return await n.z.cart.create({data:e}),(0,c.revalidatePath)(`/product/${m.slug}`),{success:!0,message:`${m.name} added to cart`}}}catch(e){return{success:!1,message:(0,a.Wk)(e)}}}async function p(){let e=(await i.UL()).get("sessionCartId")?.value;if(!e)throw Error("Cart session not found");let r=await (0,o.j2)(),t=r?.user?.id?r.user.id:void 0,s=await n.z.cart.findFirst({where:t?{userId:t}:{sessionCartId:e}});if(s)return(0,a.W4)({...s,items:s.items,itemsPrice:s.itemsPrice.toString(),totalPrice:s.totalPrice.toString(),shippingPrice:s.shippingPrice.toString(),taxPrice:s.taxPrice.toString()})}async function f(e){try{if(!(await i.UL()).get("sessionCartId")?.value)throw Error("Cart session not found");let r=await n.z.product.findFirst({where:{id:e}});if(!r)throw Error("Product not found");let t=await p();if(!t)throw Error("Cart not found");let s=t.items.find(r=>r.productId===e);if(!s)throw Error("Item not found");return 1===s.qty?t.items=t.items.filter(e=>e.productId!=s.productId):t.items.find(r=>r.productId===e).qty=s.qty-1,await n.z.cart.update({where:{id:t.id},data:{items:t.items,...u(t.items)}}),(0,c.revalidatePath)(`/product/${r.slug}`),{success:!0,message:`${r.name} was removed from cart`}}catch(e){return{success:!1,message:(0,a.Wk)(e)}}}(0,l.D)([m,p,f]),(0,s.A)(m,"4071e420d37979b01d6488c32f7874c7e8b25f49a6",null),(0,s.A)(p,"0063481ceb220ca367b0bfd81f4b7e7bb8a5412c3c",null),(0,s.A)(f,"40d284a28645fa75db43c5e69c2454b9cbdf6b7927",null)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,187,8,3,670,95,482,813,777,567],()=>t(76403));module.exports=s})();