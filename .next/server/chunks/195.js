exports.id=195,exports.ids=[195],exports.modules={16483:(e,a,r)=>{"use strict";r.r(a),r.d(a,{"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed":()=>F,"401c9b575412be014157debf32a1a1378158b2c6c3":()=>q,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9":()=>E,"60214fc46e351a83723c4e63b39e498fe69676b5ca":()=>U,"6076f8d318fdf5837c18b232d3912ca52665d432e4":()=>k});var s=r(21590);r(70376);var t=r(16500);async function i(e){if("ZodError"===e.name)return Object.keys(e.errors).map(a=>e.errors[a].message).join(".");if("PrismaClientKnownRequestError"!==e.name||"P2002"!==e.code)return"string"==typeof e.message?e.message:JSON.stringify(e.message);{let a=e.meta?.target?e.meta.target[0]:"Field";return`${a.charAt(0).toUpperCase()+a.slice(1)} already exist`}}new Intl.NumberFormat("en-US",{currency:"USD",style:"currency",minimumFractionDigits:2});let n=t.z.string().refine(e=>/^\d+(\.\d{2})?$/.test(function(e){let[a,r]=e.toString().split(".");return r?`${a}.${r.padEnd(2,"0")}`:`${a}.00`}(Number(e))),"Price must have exactly two decimal places");t.z.object({name:t.z.string().min(3,"Name must be at least 3 characters"),slug:t.z.string().min(3,"Slug must be at least 3 characters"),category:t.z.string().min(3,"Category must be at least 3 characters"),brand:t.z.string().min(3,"Brand must be at least 3 characters"),description:t.z.string().min(3,"Description must be at least 3 characters"),stock:t.z.coerce.number(),images:t.z.array(t.z.string()).min(1,"Product must have at least one image"),isFeatured:t.z.boolean(),banner:t.z.string().nullable(),price:n});let d=t.z.object({email:t.z.string().email("Invalid email address"),password:t.z.string().min(6,"Password must be at least 6 characters")}),c=t.z.object({name:t.z.string().min(3,"Message must be at least 3 characters"),email:t.z.string().email("Invalid email address"),password:t.z.string().min(6,"Password must be at least 6 characters"),confirmPassword:t.z.string().min(6,"Password must be at least 6 characters")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),o=t.z.object({productId:t.z.string().min(1,"Product is required"),name:t.z.string().min(1,"Name is required"),slug:t.z.string().min(1,"Slug is required"),qty:t.z.number().int().nonnegative("Quantity must be a positive number"),image:t.z.string().min(1,"Image is required"),price:n});t.z.object({items:t.z.array(o),itemsPrice:n,totalPrice:n,shippingPrice:n,taxPrice:n,sessionCartId:t.z.string().min(1,"Session cart id is required"),userId:t.z.string().optional().nullable()});let l=t.z.object({fullName:t.z.string().min(3,"Name must be at least 3 characters"),streetAddress:t.z.string().min(3,"Address must be at least 3 characters"),city:t.z.string().min(3,"City must be at least 3 characters"),postalCode:t.z.string().min(3,"Postal code must be at least 3 characters"),country:t.z.string().min(3,"Country must be at least 3 characters"),lat:t.z.number().optional(),lng:t.z.number().optional()});var m=r(12406),u=r(37067),f=r(25079),g=r(47948),p=r(96330),b=r(41622);f.Vz.webSocketConstructor=b.Ay;let w=`${process.env.DATABASE_URL}`,y=new f.bC({connectionString:w}),h=new g.J(y),z=new p.PrismaClient({adapter:h}).$extends({result:{product:{price:{compute:e=>e.price.toString()},rating:{compute:e=>e.rating.toString()}}}});var x=r(4497),v=r(19352),N=r(42385),C=r(6332);let P={pages:{signIn:"/sign-in",error:"/sign-in"},session:{strategy:"jwt",maxAge:2592e3},adapter:(0,u.y)(z),providers:[(0,x.A)({credentials:{email:{type:"email"},password:{type:"password"}},async authorize(e){if(null==e)return null;let a=await z.user.findFirst({where:{email:e.email}});return a&&a.password&&(0,v.Dm)(e.password,a.password)?{id:a.id,name:a.name,email:a.email,role:a.role}:null}})],callbacks:{session:async({session:e,user:a,trigger:r,token:s})=>(e.user.id=s.sub,e.user.role=s.role,e.user.name=s.name,"update"===r&&(e.user.name=a.name),e),async jwt({token:e,user:a,trigger:r,session:s}){if(a&&(e.id=a.id,e.role=a.role,"NO_NAME"===a.name&&(e.name=a.email.split("@")[0],await z.user.update({where:{id:a.id},data:{name:e.name}})),"signIn"===r||"signUp"===r)){let e=await (0,N.UL)(),r=e.get("sessionCartId")?.value;if(r){let e=await z.cart.findFirst({where:{sessionCartId:r}});e&&(await z.cart.deleteMany({where:{userId:a.id}}),await z.cart.update({where:{id:e.id},data:{userId:a.id}}))}}return s?.user.name&&"update"===r&&(e.name=s.user.name),e},authorized({request:e,auth:a}){if(e.cookies.get("sessionCartId"))return!0;{let a=crypto.randomUUID(),r=new Headers(e.headers),s=C.NextResponse.next({request:{headers:r}});return s.cookies.set("sessionCartId",a),s}}}},{handlers:j,auth:I,signIn:A,signOut:R}=(0,m.Ay)(P);var S=r(58512);async function U(e,a){try{let e=d.parse({email:a.get("email"),password:a.get("password")});return await A("credentials",e),{success:!0,message:"Signed in successfully"}}catch(e){if((0,S.isRedirectError)(e))throw e;return{success:!1,message:"Invalid email or password"}}}async function F(){await R()}async function k(e,a){try{let e=c.parse({name:a.get("name"),email:a.get("email"),password:a.get("password"),confirmPassword:a.get("confirmPassword")}),r=e.password;return e.password=(0,v.Y8)(e.password,10),await z.user.create({data:{name:e.name,email:e.email,password:e.password}}),await A("credentials",{email:e.email,password:r}),{success:!0,message:"User registered successfully"}}catch(e){if((0,S.isRedirectError)(e))throw e;return{success:!1,message:i(e)}}}async function E(e){let a=await z.user.findFirst({where:{id:e}});if(!a)throw Error("User not found");return a}async function q(e){try{let a=await I(),r=await z.user.findFirst({where:{id:a?.user?.id}});if(!r)throw Error("User not found");let s=l.parse(e);return await z.user.update({where:{id:r.id},data:{address:s}}),{success:!0,message:"user updated successfully"}}catch(e){return{success:!1,message:i(e)}}}(0,r(99344).D)([U,F,k,E,q]),(0,s.A)(U,"60214fc46e351a83723c4e63b39e498fe69676b5ca",null),(0,s.A)(F,"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed",null),(0,s.A)(k,"6076f8d318fdf5837c18b232d3912ca52665d432e4",null),(0,s.A)(E,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9",null),(0,s.A)(q,"401c9b575412be014157debf32a1a1378158b2c6c3",null)},96487:()=>{},78335:()=>{},25409:(e,a,r)=>{"use strict";r.d(a,{p:()=>n});var s=r(45512),t=r(58009),i=r(59462);let n=t.forwardRef(({className:e,type:a,...r},t)=>(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...r}));n.displayName="Input"},47699:(e,a,r)=>{"use strict";r.d(a,{J:()=>o});var s=r(45512),t=r(58009),i=r(92405),n=r(21643),d=r(59462);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef(({className:e,...a},r)=>(0,s.jsx)(i.b,{ref:r,className:(0,d.cn)(c(),e),...a}));o.displayName=i.b.displayName},17509:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});var s=r(62740);function t({children:e}){return(0,s.jsx)("div",{className:"flex-center min-h-screen w-full",children:e})}},19935:(e,a,r)=>{"use strict";r.d(a,{BT:()=>o,Wu:()=>l,ZB:()=>c,Zp:()=>n,aR:()=>d});var s=r(62740),t=r(76301),i=r(55946);let n=t.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));n.displayName="Card";let d=t.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a}));d.displayName="CardHeader";let c=t.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));c.displayName="CardTitle";let o=t.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));o.displayName="CardDescription";let l=t.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...a}));l.displayName="CardContent",t.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"}};