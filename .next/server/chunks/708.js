"use strict";exports.id=708,exports.ids=[708],exports.modules={50982:(e,r,t)=>{t.d(r,{CI:()=>g,Jv:()=>p,j2:()=>l});var s=t(12406),a=t(37067),i=t(68729),n=t(4497),c=t(19352),d=t(42385),o=t(6332);let m={pages:{signIn:"/sign-in",error:"/sign-in"},session:{strategy:"jwt",maxAge:2592e3},adapter:(0,a.y)(i.z),providers:[(0,n.A)({credentials:{email:{type:"email"},password:{type:"password"}},async authorize(e){if(null==e)return null;let r=await i.z.user.findFirst({where:{email:e.email}});return r&&r.password&&(0,c.Dm)(e.password,r.password)?{id:r.id,name:r.name,email:r.email,role:r.role}:null}})],callbacks:{session:async({session:e,user:r,trigger:t,token:s})=>(e.user.id=s.sub,e.user.role=s.role,e.user.name=s.name,"update"===t&&(e.user.name=r.name),e),async jwt({token:e,user:r,trigger:t,session:s}){if(r&&(e.id=r.id,e.role=r.role,"NO_NAME"===r.name&&(e.name=r.email.split("@")[0],await i.z.user.update({where:{id:r.id},data:{name:e.name}})),"signIn"===t||"signUp"===t)){let e=await (0,d.UL)(),t=e.get("sessionCartId")?.value;if(t){let e=await i.z.cart.findFirst({where:{sessionCartId:t}});e&&(await i.z.cart.deleteMany({where:{userId:r.id}}),await i.z.cart.update({where:{id:e.id},data:{userId:r.id}}))}}return s?.user.name&&"update"===t&&(e.name=s.user.name),e},authorized({request:e,auth:r}){if(e.cookies.get("sessionCartId"))return!0;{let r=crypto.randomUUID(),t=new Headers(e.headers),s=o.NextResponse.next({request:{headers:t}});return s.cookies.set("sessionCartId",r),s}}}},{handlers:u,auth:l,signIn:p,signOut:g}=(0,s.Ay)(m)},19935:(e,r,t)=>{t.d(r,{BT:()=>o,Wu:()=>m,ZB:()=>d,Zp:()=>n,aR:()=>c});var s=t(62740),a=t(76301),i=t(55946);let n=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));c.displayName="CardHeader";let d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let m=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...r}));m.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},68729:(e,r,t)=>{t.d(r,{z:()=>m});var s=t(25079),a=t(47948),i=t(96330),n=t(41622);s.Vz.webSocketConstructor=n.Ay;let c=`${process.env.DATABASE_URL}`,d=new s.bC({connectionString:c}),o=new a.J(d),m=new i.PrismaClient({adapter:o}).$extends({result:{product:{price:{compute:e=>e.price.toString()},rating:{compute:e=>e.rating.toString()}},cart:{itemsPrice:{needs:{itemsPrice:!0},compute:e=>e.itemsPrice.toString()},taxPrice:{needs:{taxPrice:!0},compute:e=>e.taxPrice.toString()},totalPrice:{needs:{totalPrice:!0},compute:e=>e.totalPrice.toString()},shippingPrice:{needs:{shippingPrice:!0},compute:e=>e.shippingPrice.toString()}},order:{itemsPrice:{needs:{itemsPrice:!0},compute:e=>e.itemsPrice.toString()},taxPrice:{needs:{taxPrice:!0},compute:e=>e.taxPrice.toString()},totalPrice:{needs:{totalPrice:!0},compute:e=>e.totalPrice.toString()},shippingPrice:{needs:{shippingPrice:!0},compute:e=>e.shippingPrice.toString()}},orderItem:{price:{compute:e=>e.price.toString()}}}})},34006:(e,r,t)=>{t.d(r,{BP:()=>u,VR:()=>m,Wd:()=>l,cE:()=>f,kl:()=>p,xu:()=>g});var s=t(21590);t(70376);var a=t(71203),i=t(50982),n=t(58512),c=t(19352),d=t(68729),o=t(93879);async function m(e,r){try{let e=a.yb.parse({email:r.get("email"),password:r.get("password")});return await (0,i.Jv)("credentials",e),{success:!0,message:"Signed in successfully"}}catch(e){if((0,n.isRedirectError)(e))throw e;return{success:!1,message:"Invalid email or password"}}}async function u(){await (0,i.CI)()}async function l(e,r){try{let e=a.m4.parse({name:r.get("name"),email:r.get("email"),password:r.get("password"),confirmPassword:r.get("confirmPassword")}),t=e.password;return e.password=(0,c.Y8)(e.password,10),await d.z.user.create({data:{name:e.name,email:e.email,password:e.password}}),await (0,i.Jv)("credentials",{email:e.email,password:t}),{success:!0,message:"User registered successfully"}}catch(e){if((0,n.isRedirectError)(e))throw e;return{success:!1,message:(0,o.Wk)(e)}}}async function p(e){let r=await d.z.user.findFirst({where:{id:e}});if(!r)throw Error("User not found");return r}async function g(e){try{let r=await (0,i.j2)(),t=await d.z.user.findFirst({where:{id:r?.user?.id}});if(!t)throw Error("User not found");let s=a.g.parse(e);return await d.z.user.update({where:{id:t.id},data:{address:s}}),{success:!0,message:"user updated successfully"}}catch(e){return{success:!1,message:(0,o.Wk)(e)}}}async function f(e){try{let r=await (0,i.j2)(),t=await d.z.user.findFirst({where:{id:r?.user?.id}});if(!t)throw Error("User Not found");let s=a.bY.parse(e);return await d.z.user.update({where:{id:t.id},data:{paymentMethod:s.type}}),{success:!0,message:"User updated successfully"}}catch(e){return{success:!1,message:(0,o.Wk)(e)}}}(0,t(99344).D)([m,u,l,p,g,f]),(0,s.A)(m,"60214fc46e351a83723c4e63b39e498fe69676b5ca",null),(0,s.A)(u,"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed",null),(0,s.A)(l,"6076f8d318fdf5837c18b232d3912ca52665d432e4",null),(0,s.A)(p,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9",null),(0,s.A)(g,"401c9b575412be014157debf32a1a1378158b2c6c3",null),(0,s.A)(f,"4006037fbd5f93e00a275688371d306ee0c10f0e9c",null)},93879:(e,r,t)=>{function s(e){return JSON.parse(JSON.stringify(e))}function a(e){let[r,t]=e.toString().split(".");return t?`${r}.${t.padEnd(2,"0")}`:`${r}.00`}async function i(e){if("ZodError"===e.name)return Object.keys(e.errors).map(r=>e.errors[r].message).join(".");if("PrismaClientKnownRequestError"!==e.name||"P2002"!==e.code)return"string"==typeof e.message?e.message:JSON.stringify(e.message);{let r=e.meta?.target?e.meta.target[0]:"Field";return`${r.charAt(0).toUpperCase()+r.slice(1)} already exist`}}function n(e){if("number"==typeof e)return Math.round((e+Number.EPSILON)*100)/100;if("string"==typeof e)return Math.round((Number(e)+Number.EPSILON)*100)/100;throw Error("value is not a number or string")}t.d(r,{W4:()=>s,Wk:()=>i,X4:()=>n,eT:()=>a}),new Intl.NumberFormat("en-US",{currency:"USD",style:"currency",minimumFractionDigits:2})},71203:(e,r,t)=>{t.d(r,{HS:()=>o,rZ:()=>m,Lc:()=>p,bY:()=>l,g:()=>u,yb:()=>c,m4:()=>d});var s=t(16500),a=t(93879);process.env.NEXT_PUBLIC_APP_NAME,process.env.NEXT_PUBLIC_APP_DESCRIPTION,process.env.NEXT_PUBLIC_SERVER_URL,process.env.LATEST_PRODUCTS_LIMIT;let i=process.env.PAYMENT_METHODS?process.env.PAYMENT_METHODS?.split(", "):["PayPal","Stripe","CashOnDelivery"];process.env.DEFAULT_PAYMENT_METHOD;let n=s.z.string().refine(e=>/^\d+(\.\d{2})?$/.test((0,a.eT)(Number(e))),"Price must have exactly two decimal places");s.z.object({name:s.z.string().min(3,"Name must be at least 3 characters"),slug:s.z.string().min(3,"Slug must be at least 3 characters"),category:s.z.string().min(3,"Category must be at least 3 characters"),brand:s.z.string().min(3,"Brand must be at least 3 characters"),description:s.z.string().min(3,"Description must be at least 3 characters"),stock:s.z.coerce.number(),images:s.z.array(s.z.string()).min(1,"Product must have at least one image"),isFeatured:s.z.boolean(),banner:s.z.string().nullable(),price:n});let c=s.z.object({email:s.z.string().email("Invalid email address"),password:s.z.string().min(6,"Password must be at least 6 characters")}),d=s.z.object({name:s.z.string().min(3,"Message must be at least 3 characters"),email:s.z.string().email("Invalid email address"),password:s.z.string().min(6,"Password must be at least 6 characters"),confirmPassword:s.z.string().min(6,"Password must be at least 6 characters")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),o=s.z.object({productId:s.z.string().min(1,"Product is required"),name:s.z.string().min(1,"Name is required"),slug:s.z.string().min(1,"Slug is required"),qty:s.z.number().int().nonnegative("Quantity must be a positive number"),image:s.z.string().min(1,"Image is required"),price:n}),m=s.z.object({items:s.z.array(o),itemsPrice:n,totalPrice:n,shippingPrice:n,taxPrice:n,sessionCartId:s.z.string().min(1,"Session cart id is required"),userId:s.z.string().optional().nullable()}),u=s.z.object({fullName:s.z.string().min(3,"Name must be at least 3 characters"),streetAddress:s.z.string().min(3,"Address must be at least 3 characters"),city:s.z.string().min(3,"City must be at least 3 characters"),postalCode:s.z.string().min(3,"Postal code must be at least 3 characters"),country:s.z.string().min(3,"Country must be at least 3 characters"),lat:s.z.number().optional(),lng:s.z.number().optional()}),l=s.z.object({type:s.z.string().min(1,"Payment method is required")}).refine(e=>i?.includes(e.type),{path:["type"],message:"Invalid payment method"}),p=s.z.object({userId:s.z.string().min(1,"User is required"),itemsPrice:n,totalPrice:n,shippingPrice:n,taxPrice:n,paymentMethod:s.z.string().refine(e=>i.includes(e),{message:"Invalid payment method"}),shippingAddress:u});s.z.object({productId:s.z.string(),slug:s.z.string(),image:s.z.string(),name:s.z.string(),price:n,qty:s.z.number()}),s.z.object({id:s.z.string(),status:s.z.string(),email_address:s.z.string(),pricePaid:s.z.string()})}};