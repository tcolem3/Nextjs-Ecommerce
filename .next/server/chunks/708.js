"use strict";exports.id=708,exports.ids=[708],exports.modules={50982:(e,r,s)=>{s.d(r,{CI:()=>g,Jv:()=>p,j2:()=>l});var t=s(12406),a=s(37067),i=s(68729),n=s(4497),c=s(19352),d=s(42385),o=s(6332);let m={pages:{signIn:"/sign-in",error:"/sign-in"},session:{strategy:"jwt",maxAge:2592e3},adapter:(0,a.y)(i.z),providers:[(0,n.A)({credentials:{email:{type:"email"},password:{type:"password"}},async authorize(e){if(null==e)return null;let r=await i.z.user.findFirst({where:{email:e.email}});return r&&r.password&&(0,c.Dm)(e.password,r.password)?{id:r.id,name:r.name,email:r.email,role:r.role}:null}})],callbacks:{session:async({session:e,user:r,trigger:s,token:t})=>(e.user.id=t.sub,e.user.role=t.role,e.user.name=t.name,"update"===s&&(e.user.name=r.name),e),async jwt({token:e,user:r,trigger:s,session:t}){if(r&&(e.id=r.id,e.role=r.role,"NO_NAME"===r.name&&(e.name=r.email.split("@")[0],await i.z.user.update({where:{id:r.id},data:{name:e.name}})),"signIn"===s||"signUp"===s)){let e=await (0,d.UL)(),s=e.get("sessionCartId")?.value;if(s){let e=await i.z.cart.findFirst({where:{sessionCartId:s}});e&&(await i.z.cart.deleteMany({where:{userId:r.id}}),await i.z.cart.update({where:{id:e.id},data:{userId:r.id}}))}}return t?.user.name&&"update"===s&&(e.name=t.user.name),e},authorized({request:e,auth:r}){if(e.cookies.get("sessionCartId"))return!0;{let r=crypto.randomUUID(),s=new Headers(e.headers),t=o.NextResponse.next({request:{headers:s}});return t.cookies.set("sessionCartId",r),t}}}},{handlers:u,auth:l,signIn:p,signOut:g}=(0,t.Ay)(m)},19935:(e,r,s)=>{s.d(r,{BT:()=>o,Wu:()=>m,ZB:()=>d,Zp:()=>n,aR:()=>c});var t=s(62740),a=s(76301),i=s(55946);let n=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let c=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));c.displayName="CardHeader";let d=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let m=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...r}));m.displayName="CardContent",a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},68729:(e,r,s)=>{s.d(r,{z:()=>m});var t=s(25079),a=s(47948),i=s(96330),n=s(41622);t.Vz.webSocketConstructor=n.Ay;let c=`${process.env.DATABASE_URL}`,d=new t.bC({connectionString:c}),o=new a.J(d),m=new i.PrismaClient({adapter:o}).$extends({result:{product:{price:{compute:e=>e.price.toString()},rating:{compute:e=>e.rating.toString()}},cart:{itemsPrice:{needs:{itemsPrice:!0},compute:e=>e.itemsPrice.toString()},taxPrice:{needs:{taxPrice:!0},compute:e=>e.taxPrice.toString()},totalPrice:{needs:{totalPrice:!0},compute:e=>e.totalPrice.toString()},shippingPrice:{needs:{shippingPrice:!0},compute:e=>e.shippingPrice.toString()}},order:{itemsPrice:{needs:{itemsPrice:!0},compute:e=>e.itemsPrice.toString()},taxPrice:{needs:{taxPrice:!0},compute:e=>e.taxPrice.toString()},totalPrice:{needs:{totalPrice:!0},compute:e=>e.totalPrice.toString()},shippingPrice:{needs:{shippingPrice:!0},compute:e=>e.shippingPrice.toString()}},orderItem:{price:{compute:e=>e.price.toString()}}}})},34006:(e,r,s)=>{s.d(r,{BP:()=>u,VR:()=>m,Wd:()=>l,cE:()=>f,kl:()=>p,r7:()=>w,xu:()=>g});var t=s(21590);s(70376);var a=s(56545),i=s(50982),n=s(58512),c=s(19352),d=s(68729),o=s(93879);async function m(e,r){try{let e=a.yb.parse({email:r.get("email"),password:r.get("password")});return await (0,i.Jv)("credentials",e),{success:!0,message:"Signed in successfully"}}catch(e){if((0,n.isRedirectError)(e))throw e;return{success:!1,message:"Invalid email or password"}}}async function u(){await (0,i.CI)()}async function l(e,r){try{let e=a.m4.parse({name:r.get("name"),email:r.get("email"),password:r.get("password"),confirmPassword:r.get("confirmPassword")}),s=e.password;return e.password=(0,c.Y8)(e.password,10),await d.z.user.create({data:{name:e.name,email:e.email,password:e.password}}),await (0,i.Jv)("credentials",{email:e.email,password:s}),{success:!0,message:"User registered successfully"}}catch(e){if((0,n.isRedirectError)(e))throw e;return{success:!1,message:(0,o.Wk)(e)}}}async function p(e){let r=await d.z.user.findFirst({where:{id:e}});if(!r)throw Error("User not found");return r}async function g(e){try{let r=await (0,i.j2)(),s=await d.z.user.findFirst({where:{id:r?.user?.id}});if(!s)throw Error("User not found");let t=a.g.parse(e);return await d.z.user.update({where:{id:s.id},data:{address:t}}),{success:!0,message:"user updated successfully"}}catch(e){return{success:!1,message:(0,o.Wk)(e)}}}async function f(e){try{let r=await (0,i.j2)(),s=await d.z.user.findFirst({where:{id:r?.user?.id}});if(!s)throw Error("User Not found");let t=a.bY.parse(e);return await d.z.user.update({where:{id:s.id},data:{paymentMethod:t.type}}),{success:!0,message:"User updated successfully"}}catch(e){return{success:!1,message:(0,o.Wk)(e)}}}async function w(e){try{let r=await (0,i.j2)(),s=await d.z.user.findFirst({where:{id:r?.user?.id}});if(!s)throw Error("User not found");return await d.z.user.update({where:{id:s.id},data:{name:e.name}}),{success:!0,message:"User updated successfully"}}catch(e){return{success:!1,message:(0,o.Wk)(e)}}}(0,s(99344).D)([m,u,l,p,g,f,w]),(0,t.A)(m,"60214fc46e351a83723c4e63b39e498fe69676b5ca",null),(0,t.A)(u,"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed",null),(0,t.A)(l,"6076f8d318fdf5837c18b232d3912ca52665d432e4",null),(0,t.A)(p,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9",null),(0,t.A)(g,"401c9b575412be014157debf32a1a1378158b2c6c3",null),(0,t.A)(f,"4006037fbd5f93e00a275688371d306ee0c10f0e9c",null),(0,t.A)(w,"403e6290781810115d3000cea33c599da96621d1de",null)},91878:(e,r,s)=>{s.d(r,{md:()=>a,uq:()=>t}),process.env.NEXT_PUBLIC_APP_NAME,process.env.NEXT_PUBLIC_APP_DESCRIPTION,process.env.NEXT_PUBLIC_SERVER_URL,process.env.LATEST_PRODUCTS_LIMIT;let t=process.env.PAYMENT_METHODS?process.env.PAYMENT_METHODS?.split(", "):["PayPal","Stripe","CashOnDelivery"];process.env.DEFAULT_PAYMENT_METHOD;let a=Number(process.env.PAGE_SIZE)||3},93879:(e,r,s)=>{function t(e){return JSON.parse(JSON.stringify(e))}function a(e){let[r,s]=e.toString().split(".");return s?`${r}.${s.padEnd(2,"0")}`:`${r}.00`}async function i(e){if("ZodError"===e.name)return Object.keys(e.errors).map(r=>e.errors[r].message).join(".");if("PrismaClientKnownRequestError"!==e.name||"P2002"!==e.code)return"string"==typeof e.message?e.message:JSON.stringify(e.message);{let r=e.meta?.target?e.meta.target[0]:"Field";return`${r.charAt(0).toUpperCase()+r.slice(1)} already exist`}}function n(e){if("number"==typeof e)return Math.round((e+Number.EPSILON)*100)/100;if("string"==typeof e)return Math.round((Number(e)+Number.EPSILON)*100)/100;throw Error("value is not a number or string")}s.d(r,{W4:()=>t,Wk:()=>i,X4:()=>n,eT:()=>a}),new Intl.NumberFormat("en-US",{currency:"USD",style:"currency",minimumFractionDigits:2})},56545:(e,r,s)=>{s.d(r,{HS:()=>o,Lc:()=>p,bY:()=>l,g:()=>u,m4:()=>d,rZ:()=>m,yb:()=>c});var t=s(16500),a=s(93879),i=s(91878);let n=t.z.string().refine(e=>/^\d+(\.\d{2})?$/.test((0,a.eT)(Number(e))),"Price must have exactly two decimal places");t.z.object({name:t.z.string().min(3,"Name must be at least 3 characters"),slug:t.z.string().min(3,"Slug must be at least 3 characters"),category:t.z.string().min(3,"Category must be at least 3 characters"),brand:t.z.string().min(3,"Brand must be at least 3 characters"),description:t.z.string().min(3,"Description must be at least 3 characters"),stock:t.z.coerce.number(),images:t.z.array(t.z.string()).min(1,"Product must have at least one image"),isFeatured:t.z.boolean(),banner:t.z.string().nullable(),price:n});let c=t.z.object({email:t.z.string().email("Invalid email address"),password:t.z.string().min(6,"Password must be at least 6 characters")}),d=t.z.object({name:t.z.string().min(3,"Message must be at least 3 characters"),email:t.z.string().email("Invalid email address"),password:t.z.string().min(6,"Password must be at least 6 characters"),confirmPassword:t.z.string().min(6,"Password must be at least 6 characters")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),o=t.z.object({productId:t.z.string().min(1,"Product is required"),name:t.z.string().min(1,"Name is required"),slug:t.z.string().min(1,"Slug is required"),qty:t.z.number().int().nonnegative("Quantity must be a positive number"),image:t.z.string().min(1,"Image is required"),price:n}),m=t.z.object({items:t.z.array(o),itemsPrice:n,totalPrice:n,shippingPrice:n,taxPrice:n,sessionCartId:t.z.string().min(1,"Session cart id is required"),userId:t.z.string().optional().nullable()}),u=t.z.object({fullName:t.z.string().min(3,"Name must be at least 3 characters"),streetAddress:t.z.string().min(3,"Address must be at least 3 characters"),city:t.z.string().min(3,"City must be at least 3 characters"),postalCode:t.z.string().min(3,"Postal code must be at least 3 characters"),country:t.z.string().min(3,"Country must be at least 3 characters"),lat:t.z.number().optional(),lng:t.z.number().optional()}),l=t.z.object({type:t.z.string().min(1,"Payment method is required")}).refine(e=>i.uq?.includes(e.type),{path:["type"],message:"Invalid payment method"}),p=t.z.object({userId:t.z.string().min(1,"User is required"),itemsPrice:n,totalPrice:n,shippingPrice:n,taxPrice:n,paymentMethod:t.z.string().refine(e=>i.uq.includes(e),{message:"Invalid payment method"}),shippingAddress:u});t.z.object({productId:t.z.string(),slug:t.z.string(),image:t.z.string(),name:t.z.string(),price:n,qty:t.z.number()}),t.z.object({id:t.z.string(),status:t.z.string(),email_address:t.z.string(),pricePaid:t.z.string()}),t.z.object({name:t.z.string().min(3,"Name must be at least 3 characters"),email:t.z.string().min(3,"Email must be at least 3 characters")})}};