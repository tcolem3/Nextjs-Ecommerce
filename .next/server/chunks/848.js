exports.id=848,exports.ids=[848],exports.modules={80242:(e,s,r)=>{"use strict";r.r(s),r.d(s,{"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed":()=>_,"4006037fbd5f93e00a275688371d306ee0c10f0e9c":()=>q,"401c9b575412be014157debf32a1a1378158b2c6c3":()=>F,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9":()=>M,"60214fc46e351a83723c4e63b39e498fe69676b5ca":()=>T,"6076f8d318fdf5837c18b232d3912ca52665d432e4":()=>D});var a=r(21590);r(70376);var t=r(16500);async function i(e){if("ZodError"===e.name)return Object.keys(e.errors).map(s=>e.errors[s].message).join(".");if("PrismaClientKnownRequestError"!==e.name||"P2002"!==e.code)return"string"==typeof e.message?e.message:JSON.stringify(e.message);{let s=e.meta?.target?e.meta.target[0]:"Field";return`${s.charAt(0).toUpperCase()+s.slice(1)} already exist`}}new Intl.NumberFormat("en-US",{currency:"USD",style:"currency",minimumFractionDigits:2}),process.env.NEXT_PUBLIC_APP_NAME,process.env.NEXT_PUBLIC_APP_DESCRIPTION,process.env.NEXT_PUBLIC_SERVER_URL,process.env.LATEST_PRODUCTS_LIMIT;let n=process.env.PAYMENT_METHODS?process.env.PAYMENT_METHODS?.split(", "):["PayPal","Stripe","CashOnDelivery"];process.env.DEFAULT_PAYMENT_METHOD;let d=t.z.string().refine(e=>/^\d+(\.\d{2})?$/.test(function(e){let[s,r]=e.toString().split(".");return r?`${s}.${r.padEnd(2,"0")}`:`${s}.00`}(Number(e))),"Price must have exactly two decimal places");t.z.object({name:t.z.string().min(3,"Name must be at least 3 characters"),slug:t.z.string().min(3,"Slug must be at least 3 characters"),category:t.z.string().min(3,"Category must be at least 3 characters"),brand:t.z.string().min(3,"Brand must be at least 3 characters"),description:t.z.string().min(3,"Description must be at least 3 characters"),stock:t.z.coerce.number(),images:t.z.array(t.z.string()).min(1,"Product must have at least one image"),isFeatured:t.z.boolean(),banner:t.z.string().nullable(),price:d});let c=t.z.object({email:t.z.string().email("Invalid email address"),password:t.z.string().min(6,"Password must be at least 6 characters")}),o=t.z.object({name:t.z.string().min(3,"Message must be at least 3 characters"),email:t.z.string().email("Invalid email address"),password:t.z.string().min(6,"Password must be at least 6 characters"),confirmPassword:t.z.string().min(6,"Password must be at least 6 characters")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),l=t.z.object({productId:t.z.string().min(1,"Product is required"),name:t.z.string().min(1,"Name is required"),slug:t.z.string().min(1,"Slug is required"),qty:t.z.number().int().nonnegative("Quantity must be a positive number"),image:t.z.string().min(1,"Image is required"),price:d});t.z.object({items:t.z.array(l),itemsPrice:d,totalPrice:d,shippingPrice:d,taxPrice:d,sessionCartId:t.z.string().min(1,"Session cart id is required"),userId:t.z.string().optional().nullable()});let m=t.z.object({fullName:t.z.string().min(3,"Name must be at least 3 characters"),streetAddress:t.z.string().min(3,"Address must be at least 3 characters"),city:t.z.string().min(3,"City must be at least 3 characters"),postalCode:t.z.string().min(3,"Postal code must be at least 3 characters"),country:t.z.string().min(3,"Country must be at least 3 characters"),lat:t.z.number().optional(),lng:t.z.number().optional()}),u=t.z.object({type:t.z.string().min(1,"Payment method is required")}).refine(e=>n?.includes(e.type),{path:["type"],message:"Invalid payment method"});t.z.object({userId:t.z.string().min(1,"User is required"),itemsPrice:d,totalPrice:d,shippingPrice:d,taxPrice:d,paymentMethod:t.z.string().refine(e=>n.includes(e),{message:"Invalid payment method"}),shippingAddress:m}),t.z.object({productId:t.z.string(),slug:t.z.string(),image:t.z.string(),name:t.z.string(),price:d,qty:t.z.number()});var p=r(12406),f=r(37067),g=r(25079),b=r(47948),w=r(96330),y=r(41622);g.Vz.webSocketConstructor=y.Ay;let h=`${process.env.DATABASE_URL}`,z=new g.bC({connectionString:h}),v=new b.J(z),P=new w.PrismaClient({adapter:v}).$extends({result:{product:{price:{compute:e=>e.price.toString()},rating:{compute:e=>e.rating.toString()}}}});var x=r(4497),N=r(19352),I=r(42385),A=r(6332);let C={pages:{signIn:"/sign-in",error:"/sign-in"},session:{strategy:"jwt",maxAge:2592e3},adapter:(0,f.y)(P),providers:[(0,x.A)({credentials:{email:{type:"email"},password:{type:"password"}},async authorize(e){if(null==e)return null;let s=await P.user.findFirst({where:{email:e.email}});return s&&s.password&&(0,N.Dm)(e.password,s.password)?{id:s.id,name:s.name,email:s.email,role:s.role}:null}})],callbacks:{session:async({session:e,user:s,trigger:r,token:a})=>(e.user.id=a.sub,e.user.role=a.role,e.user.name=a.name,"update"===r&&(e.user.name=s.name),e),async jwt({token:e,user:s,trigger:r,session:a}){if(s&&(e.id=s.id,e.role=s.role,"NO_NAME"===s.name&&(e.name=s.email.split("@")[0],await P.user.update({where:{id:s.id},data:{name:e.name}})),"signIn"===r||"signUp"===r)){let e=await (0,I.UL)(),r=e.get("sessionCartId")?.value;if(r){let e=await P.cart.findFirst({where:{sessionCartId:r}});e&&(await P.cart.deleteMany({where:{userId:s.id}}),await P.cart.update({where:{id:e.id},data:{userId:s.id}}))}}return a?.user.name&&"update"===r&&(e.name=a.user.name),e},authorized({request:e,auth:s}){if(e.cookies.get("sessionCartId"))return!0;{let s=crypto.randomUUID(),r=new Headers(e.headers),a=A.NextResponse.next({request:{headers:r}});return a.cookies.set("sessionCartId",s),a}}}},{handlers:E,auth:j,signIn:U,signOut:R}=(0,p.Ay)(C);var S=r(58512);async function T(e,s){try{let e=c.parse({email:s.get("email"),password:s.get("password")});return await U("credentials",e),{success:!0,message:"Signed in successfully"}}catch(e){if((0,S.isRedirectError)(e))throw e;return{success:!1,message:"Invalid email or password"}}}async function _(){await R()}async function D(e,s){try{let e=o.parse({name:s.get("name"),email:s.get("email"),password:s.get("password"),confirmPassword:s.get("confirmPassword")}),r=e.password;return e.password=(0,N.Y8)(e.password,10),await P.user.create({data:{name:e.name,email:e.email,password:e.password}}),await U("credentials",{email:e.email,password:r}),{success:!0,message:"User registered successfully"}}catch(e){if((0,S.isRedirectError)(e))throw e;return{success:!1,message:i(e)}}}async function M(e){let s=await P.user.findFirst({where:{id:e}});if(!s)throw Error("User not found");return s}async function F(e){try{let s=await j(),r=await P.user.findFirst({where:{id:s?.user?.id}});if(!r)throw Error("User not found");let a=m.parse(e);return await P.user.update({where:{id:r.id},data:{address:a}}),{success:!0,message:"user updated successfully"}}catch(e){return{success:!1,message:i(e)}}}async function q(e){try{let s=await j(),r=await P.user.findFirst({where:{id:s?.user?.id}});if(!r)throw Error("User Not found");let a=u.parse(e);return await P.user.update({where:{id:r.id},data:{paymentMethod:a.type}}),{success:!0,message:"User updated successfully"}}catch(e){return{success:!1,message:i(e)}}}(0,r(99344).D)([T,_,D,M,F,q]),(0,a.A)(T,"60214fc46e351a83723c4e63b39e498fe69676b5ca",null),(0,a.A)(_,"0041061ba5e3b6d0936cd61fbecddc17b8c23f81ed",null),(0,a.A)(D,"6076f8d318fdf5837c18b232d3912ca52665d432e4",null),(0,a.A)(M,"404125e7a6a2f0a516a9634afd9d946ea3ca503de9",null),(0,a.A)(F,"401c9b575412be014157debf32a1a1378158b2c6c3",null),(0,a.A)(q,"4006037fbd5f93e00a275688371d306ee0c10f0e9c",null)},96487:()=>{},78335:()=>{},25409:(e,s,r)=>{"use strict";r.d(s,{p:()=>n});var a=r(45512),t=r(58009),i=r(59462);let n=t.forwardRef(({className:e,type:s,...r},t)=>(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...r}));n.displayName="Input"},47699:(e,s,r)=>{"use strict";r.d(s,{J:()=>o});var a=r(45512),t=r(58009),i=r(92405),n=r(21643),d=r(59462);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(i.b,{ref:r,className:(0,d.cn)(c(),e),...s}));o.displayName=i.b.displayName},17509:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});var a=r(62740);function t({children:e}){return(0,a.jsx)("div",{className:"flex-center min-h-screen w-full",children:e})}},19935:(e,s,r)=>{"use strict";r.d(s,{BT:()=>o,Wu:()=>l,ZB:()=>c,Zp:()=>n,aR:()=>d});var a=r(62740),t=r(76301),i=r(55946);let n=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));d.displayName="CardHeader";let c=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let l=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...s}));l.displayName="CardContent",t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"}};