"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@auth";
exports.ids = ["vendor-chunks/@auth"];
exports.modules = {

/***/ "(action-browser)/./node_modules/@auth/core/errors.js":
/*!*******************************************!*\
  !*** ./node_modules/@auth/core/errors.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AccessDenied: () => (/* binding */ AccessDenied),\n/* harmony export */   AccountNotLinked: () => (/* binding */ AccountNotLinked),\n/* harmony export */   AdapterError: () => (/* binding */ AdapterError),\n/* harmony export */   AuthError: () => (/* binding */ AuthError),\n/* harmony export */   CallbackRouteError: () => (/* binding */ CallbackRouteError),\n/* harmony export */   CredentialsSignin: () => (/* binding */ CredentialsSignin),\n/* harmony export */   DuplicateConditionalUI: () => (/* binding */ DuplicateConditionalUI),\n/* harmony export */   EmailSignInError: () => (/* binding */ EmailSignInError),\n/* harmony export */   ErrorPageLoop: () => (/* binding */ ErrorPageLoop),\n/* harmony export */   EventError: () => (/* binding */ EventError),\n/* harmony export */   ExperimentalFeatureNotEnabled: () => (/* binding */ ExperimentalFeatureNotEnabled),\n/* harmony export */   InvalidCallbackUrl: () => (/* binding */ InvalidCallbackUrl),\n/* harmony export */   InvalidCheck: () => (/* binding */ InvalidCheck),\n/* harmony export */   InvalidEndpoints: () => (/* binding */ InvalidEndpoints),\n/* harmony export */   InvalidProvider: () => (/* binding */ InvalidProvider),\n/* harmony export */   JWTSessionError: () => (/* binding */ JWTSessionError),\n/* harmony export */   MissingAdapter: () => (/* binding */ MissingAdapter),\n/* harmony export */   MissingAdapterMethods: () => (/* binding */ MissingAdapterMethods),\n/* harmony export */   MissingAuthorize: () => (/* binding */ MissingAuthorize),\n/* harmony export */   MissingCSRF: () => (/* binding */ MissingCSRF),\n/* harmony export */   MissingSecret: () => (/* binding */ MissingSecret),\n/* harmony export */   MissingWebAuthnAutocomplete: () => (/* binding */ MissingWebAuthnAutocomplete),\n/* harmony export */   OAuthAccountNotLinked: () => (/* binding */ OAuthAccountNotLinked),\n/* harmony export */   OAuthCallbackError: () => (/* binding */ OAuthCallbackError),\n/* harmony export */   OAuthProfileParseError: () => (/* binding */ OAuthProfileParseError),\n/* harmony export */   OAuthSignInError: () => (/* binding */ OAuthSignInError),\n/* harmony export */   SessionTokenError: () => (/* binding */ SessionTokenError),\n/* harmony export */   SignInError: () => (/* binding */ SignInError),\n/* harmony export */   SignOutError: () => (/* binding */ SignOutError),\n/* harmony export */   UnknownAction: () => (/* binding */ UnknownAction),\n/* harmony export */   UnsupportedStrategy: () => (/* binding */ UnsupportedStrategy),\n/* harmony export */   UntrustedHost: () => (/* binding */ UntrustedHost),\n/* harmony export */   Verification: () => (/* binding */ Verification),\n/* harmony export */   WebAuthnVerificationError: () => (/* binding */ WebAuthnVerificationError),\n/* harmony export */   isClientError: () => (/* binding */ isClientError)\n/* harmony export */ });\n/**\n * Base error class for all Auth.js errors.\n * It's optimized to be printed in the server logs in a nicely formatted way\n * via the [`logger.error`](https://authjs.dev/reference/core#logger) option.\n */\nclass AuthError extends Error {\n    constructor(message, errorOptions) {\n        if (message instanceof Error) {\n            super(undefined, {\n                cause: { err: message, ...message.cause, ...errorOptions },\n            });\n        }\n        else if (typeof message === \"string\") {\n            if (errorOptions instanceof Error) {\n                errorOptions = { err: errorOptions, ...errorOptions.cause };\n            }\n            super(message, errorOptions);\n        }\n        else {\n            super(undefined, message);\n        }\n        this.name = this.constructor.name;\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/3841\n        this.type = this.constructor.type ?? \"AuthError\";\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/3841\n        this.kind = this.constructor.kind ?? \"error\";\n        Error.captureStackTrace?.(this, this.constructor);\n        const url = `https://errors.authjs.dev#${this.type.toLowerCase()}`;\n        this.message += `${this.message ? \". \" : \"\"}Read more at ${url}`;\n    }\n}\nclass SignInError extends AuthError {\n}\nSignInError.kind = \"signIn\";\n/**\n * One of the database [`Adapter` methods](https://authjs.dev/reference/core/adapters#methods)\n * failed during execution.\n *\n * :::tip\n * If `debug: true` is set, you can check out `[auth][debug]` in the logs to learn more about the failed adapter method execution.\n * @example\n * ```sh\n * [auth][debug]: adapter_getUserByEmail\n * { \"args\": [undefined] }\n * ```\n * :::\n */\nclass AdapterError extends AuthError {\n}\nAdapterError.type = \"AdapterError\";\n/**\n * Thrown when the execution of the [`signIn` callback](https://authjs.dev/reference/core/types#signin) fails\n * or if it returns `false`.\n */\nclass AccessDenied extends AuthError {\n}\nAccessDenied.type = \"AccessDenied\";\n/**\n * This error occurs when the user cannot finish login.\n * Depending on the provider type, this could have happened for multiple reasons.\n *\n * :::tip\n * Check out `[auth][details]` in the logs to know which provider failed.\n * @example\n * ```sh\n * [auth][details]: { \"provider\": \"github\" }\n * ```\n * :::\n *\n * For an [OAuth provider](https://authjs.dev/getting-started/authentication/oauth), possible causes are:\n * - The user denied access to the application\n * - There was an error parsing the OAuth Profile:\n *   Check out the provider's `profile` or `userinfo.request` method to make sure\n *   it correctly fetches the user's profile.\n * - The `signIn` or `jwt` callback methods threw an uncaught error:\n *   Check the callback method implementations.\n *\n * For an [Email provider](https://authjs.dev/getting-started/authentication/email), possible causes are:\n * - The provided email/token combination was invalid/missing:\n *   Check if the provider's `sendVerificationRequest` method correctly sends the email.\n * - The provided email/token combination has expired:\n *   Ask the user to log in again.\n * - There was an error with the database:\n *   Check the database logs.\n *\n * For a [Credentials provider](https://authjs.dev/getting-started/authentication/credentials), possible causes are:\n * - The `authorize` method threw an uncaught error:\n *   Check the provider's `authorize` method.\n * - The `signIn` or `jwt` callback methods threw an uncaught error:\n *   Check the callback method implementations.\n *\n * :::tip\n * Check out `[auth][cause]` in the error message for more details.\n * It will show the original stack trace.\n * :::\n */\nclass CallbackRouteError extends AuthError {\n}\nCallbackRouteError.type = \"CallbackRouteError\";\n/**\n * Thrown when Auth.js is misconfigured and accidentally tried to require authentication on a custom error page.\n * To prevent an infinite loop, Auth.js will instead render its default error page.\n *\n * To fix this, make sure that the `error` page does not require authentication.\n *\n * Learn more at [Guide: Error pages](https://authjs.dev/guides/pages/error)\n */\nclass ErrorPageLoop extends AuthError {\n}\nErrorPageLoop.type = \"ErrorPageLoop\";\n/**\n * One of the [`events` methods](https://authjs.dev/reference/core/types#eventcallbacks)\n * failed during execution.\n *\n * Make sure that the `events` methods are implemented correctly and uncaught errors are handled.\n *\n * Learn more at [`events`](https://authjs.dev/reference/core/types#eventcallbacks)\n */\nclass EventError extends AuthError {\n}\nEventError.type = \"EventError\";\n/**\n * Thrown when Auth.js is unable to verify a `callbackUrl` value.\n * The browser either disabled cookies or the `callbackUrl` is not a valid URL.\n *\n * Somebody might have tried to manipulate the callback URL that Auth.js uses to redirect the user back to the configured `callbackUrl`/page.\n * This could be a malicious hacker trying to redirect the user to a phishing site.\n * To prevent this, Auth.js checks if the callback URL is valid and throws this error if it is not.\n *\n * There is no action required, but it might be an indicator that somebody is trying to attack your application.\n */\nclass InvalidCallbackUrl extends AuthError {\n}\nInvalidCallbackUrl.type = \"InvalidCallbackUrl\";\n/**\n * Can be thrown from the `authorize` callback of the Credentials provider.\n * When an error occurs during the `authorize` callback, two things can happen:\n * 1. The user is redirected to the signin page, with `error=CredentialsSignin&code=credentials` in the URL. `code` is configurable.\n * 2. If you throw this error in a framework that handles form actions server-side, this error is thrown, instead of redirecting the user, so you'll need to handle.\n */\nclass CredentialsSignin extends SignInError {\n    constructor() {\n        super(...arguments);\n        /**\n         * The error code that is set in the `code` query parameter of the redirect URL.\n         *\n         *\n         * âš  NOTE: This property is going to be included in the URL, so make sure it does not hint at sensitive errors.\n         *\n         * The full error is always logged on the server, if you need to debug.\n         *\n         * Generally, we don't recommend hinting specifically if the user had either a wrong username or password specifically,\n         * try rather something like \"Invalid credentials\".\n         */\n        this.code = \"credentials\";\n    }\n}\nCredentialsSignin.type = \"CredentialsSignin\";\n/**\n * One of the configured OAuth or OIDC providers is missing the `authorization`, `token` or `userinfo`, or `issuer` configuration.\n * To perform OAuth or OIDC sign in, at least one of these endpoints is required.\n *\n * Learn more at [`OAuth2Config`](https://authjs.dev/reference/core/providers#oauth2configprofile) or [Guide: OAuth Provider](https://authjs.dev/guides/configuring-oauth-providers)\n */\nclass InvalidEndpoints extends AuthError {\n}\nInvalidEndpoints.type = \"InvalidEndpoints\";\n/**\n * Thrown when a PKCE, state or nonce OAuth check could not be performed.\n * This could happen if the OAuth provider is configured incorrectly or if the browser is blocking cookies.\n *\n * Learn more at [`checks`](https://authjs.dev/reference/core/providers#checks)\n */\nclass InvalidCheck extends AuthError {\n}\nInvalidCheck.type = \"InvalidCheck\";\n/**\n * Logged on the server when Auth.js could not decode or encode a JWT-based (`strategy: \"jwt\"`) session.\n *\n * Possible causes are either a misconfigured `secret` or a malformed JWT or `encode/decode` methods.\n *\n * :::note\n * When this error is logged, the session cookie is destroyed.\n * :::\n *\n * Learn more at [`secret`](https://authjs.dev/reference/core#secret), [`jwt.encode`](https://authjs.dev/reference/core/jwt#encode-1) or [`jwt.decode`](https://authjs.dev/reference/core/jwt#decode-2) for more information.\n */\nclass JWTSessionError extends AuthError {\n}\nJWTSessionError.type = \"JWTSessionError\";\n/**\n * Thrown if Auth.js is misconfigured. This could happen if you configured an Email provider but did not set up a database adapter,\n * or tried using a `strategy: \"database\"` session without a database adapter.\n * In both cases, make sure you either remove the configuration or add the missing adapter.\n *\n * Learn more at [Database Adapters](https://authjs.dev/getting-started/database), [Email provider](https://authjs.dev/getting-started/authentication/email) or [Concept: Database session strategy](https://authjs.dev/concepts/session-strategies#database-session)\n */\nclass MissingAdapter extends AuthError {\n}\nMissingAdapter.type = \"MissingAdapter\";\n/**\n * Thrown similarily to [`MissingAdapter`](https://authjs.dev/reference/core/errors#missingadapter), but only some required methods were missing.\n *\n * Make sure you either remove the configuration or add the missing methods to the adapter.\n *\n * Learn more at [Database Adapters](https://authjs.dev/getting-started/database)\n */\nclass MissingAdapterMethods extends AuthError {\n}\nMissingAdapterMethods.type = \"MissingAdapterMethods\";\n/**\n * Thrown when a Credentials provider is missing the `authorize` configuration.\n * To perform credentials sign in, the `authorize` method is required.\n *\n * Learn more at [Credentials provider](https://authjs.dev/getting-started/authentication/credentials)\n */\nclass MissingAuthorize extends AuthError {\n}\nMissingAuthorize.type = \"MissingAuthorize\";\n/**\n * Auth.js requires a secret or multiple secrets to be set, but none was not found. This is used to encrypt cookies, JWTs and other sensitive data.\n *\n * :::note\n * If you are using a framework like Next.js, we try to automatically infer the secret from the `AUTH_SECRET`, `AUTH_SECRET_1`, etc. environment variables.\n * Alternatively, you can also explicitly set the [`AuthConfig.secret`](https://authjs.dev/reference/core#secret) option.\n * :::\n *\n *\n * :::tip\n * To generate a random string, you can use the Auth.js CLI: `npx auth secret`\n * :::\n */\nclass MissingSecret extends AuthError {\n}\nMissingSecret.type = \"MissingSecret\";\n/**\n * Thrown when an Email address is already associated with an account\n * but the user is trying an OAuth account that is not linked to it.\n *\n * For security reasons, Auth.js does not automatically link OAuth accounts to existing accounts if the user is not signed in.\n *\n * :::tip\n * If you trust the OAuth provider to have verified the user's email address,\n * you can enable automatic account linking by setting [`allowDangerousEmailAccountLinking: true`](https://authjs.dev/reference/core/providers#allowdangerousemailaccountlinking)\n * in the provider configuration.\n * :::\n */\nclass OAuthAccountNotLinked extends SignInError {\n}\nOAuthAccountNotLinked.type = \"OAuthAccountNotLinked\";\n/**\n * Thrown when an OAuth provider returns an error during the sign in process.\n * This could happen for example if the user denied access to the application or there was a configuration error.\n *\n * For a full list of possible reasons, check out the specification [Authorization Code Grant: Error Response](https://www.rfc-editor.org/rfc/rfc6749#section-4.1.2.1)\n */\nclass OAuthCallbackError extends SignInError {\n}\nOAuthCallbackError.type = \"OAuthCallbackError\";\n/**\n * This error occurs during an OAuth sign in attempt when the provider's\n * response could not be parsed. This could for example happen if the provider's API\n * changed, or the [`OAuth2Config.profile`](https://authjs.dev/reference/core/providers#oauth2configprofile) method is not implemented correctly.\n */\nclass OAuthProfileParseError extends AuthError {\n}\nOAuthProfileParseError.type = \"OAuthProfileParseError\";\n/**\n * Logged on the server when Auth.js could not retrieve a session from the database (`strategy: \"database\"`).\n *\n * The database adapter might be misconfigured or the database is not reachable.\n *\n * Learn more at [Concept: Database session strategy](https://authjs.dev/concepts/session-strategies#database)\n */\nclass SessionTokenError extends AuthError {\n}\nSessionTokenError.type = \"SessionTokenError\";\n/**\n * Happens when login by [OAuth](https://authjs.dev/getting-started/authentication/oauth) could not be started.\n *\n * Possible causes are:\n * - The Authorization Server is not compliant with the [OAuth 2.0](https://www.ietf.org/rfc/rfc6749.html) or the [OIDC](https://openid.net/specs/openid-connect-core-1_0.html) specification.\n *   Check the details in the error message.\n *\n * :::tip\n * Check out `[auth][details]` in the logs to know which provider failed.\n * @example\n * ```sh\n * [auth][details]: { \"provider\": \"github\" }\n * ```\n * :::\n */\nclass OAuthSignInError extends SignInError {\n}\nOAuthSignInError.type = \"OAuthSignInError\";\n/**\n * Happens when the login by an [Email provider](https://authjs.dev/getting-started/authentication/email) could not be started.\n *\n * Possible causes are:\n * - The email sent from the client is invalid, could not be normalized by [`EmailConfig.normalizeIdentifier`](https://authjs.dev/reference/core/providers/email#normalizeidentifier)\n * - The provided email/token combination has expired:\n *   Ask the user to log in again.\n * - There was an error with the database:\n *   Check the database logs.\n */\nclass EmailSignInError extends SignInError {\n}\nEmailSignInError.type = \"EmailSignInError\";\n/**\n * Represents an error that occurs during the sign-out process. This error\n * is logged when there are issues in terminating a user's session, either\n * by failing to delete the session from the database (in database session\n * strategies) or encountering issues during other parts of the sign-out\n * process, such as emitting sign-out events or clearing session cookies.\n *\n * The session cookie(s) are emptied even if this error is logged.\n *\n */\nclass SignOutError extends AuthError {\n}\nSignOutError.type = \"SignOutError\";\n/**\n * Auth.js was requested to handle an operation that it does not support.\n *\n * See [`AuthAction`](https://authjs.dev/reference/core/types#authaction) for the supported actions.\n */\nclass UnknownAction extends AuthError {\n}\nUnknownAction.type = \"UnknownAction\";\n/**\n * Thrown when a Credentials provider is present but the JWT strategy (`strategy: \"jwt\"`) is not enabled.\n *\n * Learn more at [`strategy`](https://authjs.dev/reference/core#strategy) or [Credentials provider](https://authjs.dev/getting-started/authentication/credentials)\n */\nclass UnsupportedStrategy extends AuthError {\n}\nUnsupportedStrategy.type = \"UnsupportedStrategy\";\n/** Thrown when an endpoint was incorrectly called without a provider, or with an unsupported provider. */\nclass InvalidProvider extends AuthError {\n}\nInvalidProvider.type = \"InvalidProvider\";\n/**\n * Thrown when the `trustHost` option was not set to `true`.\n *\n * Auth.js requires the `trustHost` option to be set to `true` since it's relying on the request headers' `host` value.\n *\n * :::note\n * Official Auth.js libraries might attempt to automatically set the `trustHost` option to `true` if the request is coming from a trusted host on a trusted platform.\n * :::\n *\n * Learn more at [`trustHost`](https://authjs.dev/reference/core#trusthost) or [Guide: Deployment](https://authjs.dev/getting-started/deployment)\n */\nclass UntrustedHost extends AuthError {\n}\nUntrustedHost.type = \"UntrustedHost\";\n/**\n * The user's email/token combination was invalid.\n * This could be because the email/token combination was not found in the database,\n * or because the token has expired. Ask the user to log in again.\n */\nclass Verification extends AuthError {\n}\nVerification.type = \"Verification\";\n/**\n * Error for missing CSRF tokens in client-side actions (`signIn`, `signOut`, `useSession#update`).\n * Thrown when actions lack the double submit cookie, essential for CSRF protection.\n *\n * CSRF ([Cross-Site Request Forgery](https://owasp.org/www-community/attacks/csrf))\n * is an attack leveraging authenticated user credentials for unauthorized actions.\n *\n * Double submit cookie pattern, a CSRF defense, requires matching values in a cookie\n * and request parameter. More on this at [MDN Web Docs](https://developer.mozilla.org/en-US/docs/Glossary/CSRF).\n */\nclass MissingCSRF extends SignInError {\n}\nMissingCSRF.type = \"MissingCSRF\";\nconst clientErrors = new Set([\n    \"CredentialsSignin\",\n    \"OAuthAccountNotLinked\",\n    \"OAuthCallbackError\",\n    \"AccessDenied\",\n    \"Verification\",\n    \"MissingCSRF\",\n    \"AccountNotLinked\",\n    \"WebAuthnVerificationError\",\n]);\n/**\n * Used to only allow sending a certain subset of errors to the client.\n * Errors are always logged on the server, but to prevent leaking sensitive information,\n * only a subset of errors are sent to the client as-is.\n * @internal\n */\nfunction isClientError(error) {\n    if (error instanceof AuthError)\n        return clientErrors.has(error.type);\n    return false;\n}\n/**\n * Thrown when multiple providers have `enableConditionalUI` set to `true`.\n * Only one provider can have this option enabled at a time.\n */\nclass DuplicateConditionalUI extends AuthError {\n}\nDuplicateConditionalUI.type = \"DuplicateConditionalUI\";\n/**\n * Thrown when a WebAuthn provider has `enableConditionalUI` set to `true` but no formField has `webauthn` in its autocomplete param.\n *\n * The `webauthn` autocomplete param is required for conditional UI to work.\n */\nclass MissingWebAuthnAutocomplete extends AuthError {\n}\nMissingWebAuthnAutocomplete.type = \"MissingWebAuthnAutocomplete\";\n/**\n * Thrown when a WebAuthn provider fails to verify a client response.\n */\nclass WebAuthnVerificationError extends AuthError {\n}\nWebAuthnVerificationError.type = \"WebAuthnVerificationError\";\n/**\n * Thrown when an Email address is already associated with an account\n * but the user is trying an account that is not linked to it.\n *\n * For security reasons, Auth.js does not automatically link accounts to existing accounts if the user is not signed in.\n */\nclass AccountNotLinked extends SignInError {\n}\nAccountNotLinked.type = \"AccountNotLinked\";\n/**\n * Thrown when an experimental feature is used but not enabled.\n */\nclass ExperimentalFeatureNotEnabled extends AuthError {\n}\nExperimentalFeatureNotEnabled.type = \"ExperimentalFeatureNotEnabled\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixpREFBaUQ7QUFDMUUsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsd0JBQXdCO0FBQ3pFLDJCQUEyQix5QkFBeUIsZUFBZSxJQUFJO0FBQ3ZFO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQmFzZSBlcnJvciBjbGFzcyBmb3IgYWxsIEF1dGguanMgZXJyb3JzLlxuICogSXQncyBvcHRpbWl6ZWQgdG8gYmUgcHJpbnRlZCBpbiB0aGUgc2VydmVyIGxvZ3MgaW4gYSBuaWNlbHkgZm9ybWF0dGVkIHdheVxuICogdmlhIHRoZSBbYGxvZ2dlci5lcnJvcmBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZSNsb2dnZXIpIG9wdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEF1dGhFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBlcnJvck9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgc3VwZXIodW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgY2F1c2U6IHsgZXJyOiBtZXNzYWdlLCAuLi5tZXNzYWdlLmNhdXNlLCAuLi5lcnJvck9wdGlvbnMgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3JPcHRpb25zIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBlcnJvck9wdGlvbnMgPSB7IGVycjogZXJyb3JPcHRpb25zLCAuLi5lcnJvck9wdGlvbnMuY2F1c2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2UsIGVycm9yT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBlcih1bmRlZmluZWQsIG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzM4NDFcbiAgICAgICAgdGhpcy50eXBlID0gdGhpcy5jb25zdHJ1Y3Rvci50eXBlID8/IFwiQXV0aEVycm9yXCI7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8zODQxXG4gICAgICAgIHRoaXMua2luZCA9IHRoaXMuY29uc3RydWN0b3Iua2luZCA/PyBcImVycm9yXCI7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlPy4odGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL2Vycm9ycy5hdXRoanMuZGV2IyR7dGhpcy50eXBlLnRvTG93ZXJDYXNlKCl9YDtcbiAgICAgICAgdGhpcy5tZXNzYWdlICs9IGAke3RoaXMubWVzc2FnZSA/IFwiLiBcIiA6IFwiXCJ9UmVhZCBtb3JlIGF0ICR7dXJsfWA7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNpZ25JbkVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cblNpZ25JbkVycm9yLmtpbmQgPSBcInNpZ25JblwiO1xuLyoqXG4gKiBPbmUgb2YgdGhlIGRhdGFiYXNlIFtgQWRhcHRlcmAgbWV0aG9kc10oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL2FkYXB0ZXJzI21ldGhvZHMpXG4gKiBmYWlsZWQgZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiA6Ojp0aXBcbiAqIElmIGBkZWJ1ZzogdHJ1ZWAgaXMgc2V0LCB5b3UgY2FuIGNoZWNrIG91dCBgW2F1dGhdW2RlYnVnXWAgaW4gdGhlIGxvZ3MgdG8gbGVhcm4gbW9yZSBhYm91dCB0aGUgZmFpbGVkIGFkYXB0ZXIgbWV0aG9kIGV4ZWN1dGlvbi5cbiAqIEBleGFtcGxlXG4gKiBgYGBzaFxuICogW2F1dGhdW2RlYnVnXTogYWRhcHRlcl9nZXRVc2VyQnlFbWFpbFxuICogeyBcImFyZ3NcIjogW3VuZGVmaW5lZF0gfVxuICogYGBgXG4gKiA6OjpcbiAqL1xuZXhwb3J0IGNsYXNzIEFkYXB0ZXJFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5BZGFwdGVyRXJyb3IudHlwZSA9IFwiQWRhcHRlckVycm9yXCI7XG4vKipcbiAqIFRocm93biB3aGVuIHRoZSBleGVjdXRpb24gb2YgdGhlIFtgc2lnbkluYCBjYWxsYmFja10oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL3R5cGVzI3NpZ25pbikgZmFpbHNcbiAqIG9yIGlmIGl0IHJldHVybnMgYGZhbHNlYC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFjY2Vzc0RlbmllZCBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5BY2Nlc3NEZW5pZWQudHlwZSA9IFwiQWNjZXNzRGVuaWVkXCI7XG4vKipcbiAqIFRoaXMgZXJyb3Igb2NjdXJzIHdoZW4gdGhlIHVzZXIgY2Fubm90IGZpbmlzaCBsb2dpbi5cbiAqIERlcGVuZGluZyBvbiB0aGUgcHJvdmlkZXIgdHlwZSwgdGhpcyBjb3VsZCBoYXZlIGhhcHBlbmVkIGZvciBtdWx0aXBsZSByZWFzb25zLlxuICpcbiAqIDo6OnRpcFxuICogQ2hlY2sgb3V0IGBbYXV0aF1bZGV0YWlsc11gIGluIHRoZSBsb2dzIHRvIGtub3cgd2hpY2ggcHJvdmlkZXIgZmFpbGVkLlxuICogQGV4YW1wbGVcbiAqIGBgYHNoXG4gKiBbYXV0aF1bZGV0YWlsc106IHsgXCJwcm92aWRlclwiOiBcImdpdGh1YlwiIH1cbiAqIGBgYFxuICogOjo6XG4gKlxuICogRm9yIGFuIFtPQXV0aCBwcm92aWRlcl0oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZC9hdXRoZW50aWNhdGlvbi9vYXV0aCksIHBvc3NpYmxlIGNhdXNlcyBhcmU6XG4gKiAtIFRoZSB1c2VyIGRlbmllZCBhY2Nlc3MgdG8gdGhlIGFwcGxpY2F0aW9uXG4gKiAtIFRoZXJlIHdhcyBhbiBlcnJvciBwYXJzaW5nIHRoZSBPQXV0aCBQcm9maWxlOlxuICogICBDaGVjayBvdXQgdGhlIHByb3ZpZGVyJ3MgYHByb2ZpbGVgIG9yIGB1c2VyaW5mby5yZXF1ZXN0YCBtZXRob2QgdG8gbWFrZSBzdXJlXG4gKiAgIGl0IGNvcnJlY3RseSBmZXRjaGVzIHRoZSB1c2VyJ3MgcHJvZmlsZS5cbiAqIC0gVGhlIGBzaWduSW5gIG9yIGBqd3RgIGNhbGxiYWNrIG1ldGhvZHMgdGhyZXcgYW4gdW5jYXVnaHQgZXJyb3I6XG4gKiAgIENoZWNrIHRoZSBjYWxsYmFjayBtZXRob2QgaW1wbGVtZW50YXRpb25zLlxuICpcbiAqIEZvciBhbiBbRW1haWwgcHJvdmlkZXJdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvYXV0aGVudGljYXRpb24vZW1haWwpLCBwb3NzaWJsZSBjYXVzZXMgYXJlOlxuICogLSBUaGUgcHJvdmlkZWQgZW1haWwvdG9rZW4gY29tYmluYXRpb24gd2FzIGludmFsaWQvbWlzc2luZzpcbiAqICAgQ2hlY2sgaWYgdGhlIHByb3ZpZGVyJ3MgYHNlbmRWZXJpZmljYXRpb25SZXF1ZXN0YCBtZXRob2QgY29ycmVjdGx5IHNlbmRzIHRoZSBlbWFpbC5cbiAqIC0gVGhlIHByb3ZpZGVkIGVtYWlsL3Rva2VuIGNvbWJpbmF0aW9uIGhhcyBleHBpcmVkOlxuICogICBBc2sgdGhlIHVzZXIgdG8gbG9nIGluIGFnYWluLlxuICogLSBUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgZGF0YWJhc2U6XG4gKiAgIENoZWNrIHRoZSBkYXRhYmFzZSBsb2dzLlxuICpcbiAqIEZvciBhIFtDcmVkZW50aWFscyBwcm92aWRlcl0oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZC9hdXRoZW50aWNhdGlvbi9jcmVkZW50aWFscyksIHBvc3NpYmxlIGNhdXNlcyBhcmU6XG4gKiAtIFRoZSBgYXV0aG9yaXplYCBtZXRob2QgdGhyZXcgYW4gdW5jYXVnaHQgZXJyb3I6XG4gKiAgIENoZWNrIHRoZSBwcm92aWRlcidzIGBhdXRob3JpemVgIG1ldGhvZC5cbiAqIC0gVGhlIGBzaWduSW5gIG9yIGBqd3RgIGNhbGxiYWNrIG1ldGhvZHMgdGhyZXcgYW4gdW5jYXVnaHQgZXJyb3I6XG4gKiAgIENoZWNrIHRoZSBjYWxsYmFjayBtZXRob2QgaW1wbGVtZW50YXRpb25zLlxuICpcbiAqIDo6OnRpcFxuICogQ2hlY2sgb3V0IGBbYXV0aF1bY2F1c2VdYCBpbiB0aGUgZXJyb3IgbWVzc2FnZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogSXQgd2lsbCBzaG93IHRoZSBvcmlnaW5hbCBzdGFjayB0cmFjZS5cbiAqIDo6OlxuICovXG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tSb3V0ZUVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbkNhbGxiYWNrUm91dGVFcnJvci50eXBlID0gXCJDYWxsYmFja1JvdXRlRXJyb3JcIjtcbi8qKlxuICogVGhyb3duIHdoZW4gQXV0aC5qcyBpcyBtaXNjb25maWd1cmVkIGFuZCBhY2NpZGVudGFsbHkgdHJpZWQgdG8gcmVxdWlyZSBhdXRoZW50aWNhdGlvbiBvbiBhIGN1c3RvbSBlcnJvciBwYWdlLlxuICogVG8gcHJldmVudCBhbiBpbmZpbml0ZSBsb29wLCBBdXRoLmpzIHdpbGwgaW5zdGVhZCByZW5kZXIgaXRzIGRlZmF1bHQgZXJyb3IgcGFnZS5cbiAqXG4gKiBUbyBmaXggdGhpcywgbWFrZSBzdXJlIHRoYXQgdGhlIGBlcnJvcmAgcGFnZSBkb2VzIG5vdCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uLlxuICpcbiAqIExlYXJuIG1vcmUgYXQgW0d1aWRlOiBFcnJvciBwYWdlc10oaHR0cHM6Ly9hdXRoanMuZGV2L2d1aWRlcy9wYWdlcy9lcnJvcilcbiAqL1xuZXhwb3J0IGNsYXNzIEVycm9yUGFnZUxvb3AgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuRXJyb3JQYWdlTG9vcC50eXBlID0gXCJFcnJvclBhZ2VMb29wXCI7XG4vKipcbiAqIE9uZSBvZiB0aGUgW2BldmVudHNgIG1ldGhvZHNdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS90eXBlcyNldmVudGNhbGxiYWNrcylcbiAqIGZhaWxlZCBkdXJpbmcgZXhlY3V0aW9uLlxuICpcbiAqIE1ha2Ugc3VyZSB0aGF0IHRoZSBgZXZlbnRzYCBtZXRob2RzIGFyZSBpbXBsZW1lbnRlZCBjb3JyZWN0bHkgYW5kIHVuY2F1Z2h0IGVycm9ycyBhcmUgaGFuZGxlZC5cbiAqXG4gKiBMZWFybiBtb3JlIGF0IFtgZXZlbnRzYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL3R5cGVzI2V2ZW50Y2FsbGJhY2tzKVxuICovXG5leHBvcnQgY2xhc3MgRXZlbnRFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5FdmVudEVycm9yLnR5cGUgPSBcIkV2ZW50RXJyb3JcIjtcbi8qKlxuICogVGhyb3duIHdoZW4gQXV0aC5qcyBpcyB1bmFibGUgdG8gdmVyaWZ5IGEgYGNhbGxiYWNrVXJsYCB2YWx1ZS5cbiAqIFRoZSBicm93c2VyIGVpdGhlciBkaXNhYmxlZCBjb29raWVzIG9yIHRoZSBgY2FsbGJhY2tVcmxgIGlzIG5vdCBhIHZhbGlkIFVSTC5cbiAqXG4gKiBTb21lYm9keSBtaWdodCBoYXZlIHRyaWVkIHRvIG1hbmlwdWxhdGUgdGhlIGNhbGxiYWNrIFVSTCB0aGF0IEF1dGguanMgdXNlcyB0byByZWRpcmVjdCB0aGUgdXNlciBiYWNrIHRvIHRoZSBjb25maWd1cmVkIGBjYWxsYmFja1VybGAvcGFnZS5cbiAqIFRoaXMgY291bGQgYmUgYSBtYWxpY2lvdXMgaGFja2VyIHRyeWluZyB0byByZWRpcmVjdCB0aGUgdXNlciB0byBhIHBoaXNoaW5nIHNpdGUuXG4gKiBUbyBwcmV2ZW50IHRoaXMsIEF1dGguanMgY2hlY2tzIGlmIHRoZSBjYWxsYmFjayBVUkwgaXMgdmFsaWQgYW5kIHRocm93cyB0aGlzIGVycm9yIGlmIGl0IGlzIG5vdC5cbiAqXG4gKiBUaGVyZSBpcyBubyBhY3Rpb24gcmVxdWlyZWQsIGJ1dCBpdCBtaWdodCBiZSBhbiBpbmRpY2F0b3IgdGhhdCBzb21lYm9keSBpcyB0cnlpbmcgdG8gYXR0YWNrIHlvdXIgYXBwbGljYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkQ2FsbGJhY2tVcmwgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuSW52YWxpZENhbGxiYWNrVXJsLnR5cGUgPSBcIkludmFsaWRDYWxsYmFja1VybFwiO1xuLyoqXG4gKiBDYW4gYmUgdGhyb3duIGZyb20gdGhlIGBhdXRob3JpemVgIGNhbGxiYWNrIG9mIHRoZSBDcmVkZW50aWFscyBwcm92aWRlci5cbiAqIFdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyB0aGUgYGF1dGhvcml6ZWAgY2FsbGJhY2ssIHR3byB0aGluZ3MgY2FuIGhhcHBlbjpcbiAqIDEuIFRoZSB1c2VyIGlzIHJlZGlyZWN0ZWQgdG8gdGhlIHNpZ25pbiBwYWdlLCB3aXRoIGBlcnJvcj1DcmVkZW50aWFsc1NpZ25pbiZjb2RlPWNyZWRlbnRpYWxzYCBpbiB0aGUgVVJMLiBgY29kZWAgaXMgY29uZmlndXJhYmxlLlxuICogMi4gSWYgeW91IHRocm93IHRoaXMgZXJyb3IgaW4gYSBmcmFtZXdvcmsgdGhhdCBoYW5kbGVzIGZvcm0gYWN0aW9ucyBzZXJ2ZXItc2lkZSwgdGhpcyBlcnJvciBpcyB0aHJvd24sIGluc3RlYWQgb2YgcmVkaXJlY3RpbmcgdGhlIHVzZXIsIHNvIHlvdSdsbCBuZWVkIHRvIGhhbmRsZS5cbiAqL1xuZXhwb3J0IGNsYXNzIENyZWRlbnRpYWxzU2lnbmluIGV4dGVuZHMgU2lnbkluRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVycm9yIGNvZGUgdGhhdCBpcyBzZXQgaW4gdGhlIGBjb2RlYCBxdWVyeSBwYXJhbWV0ZXIgb2YgdGhlIHJlZGlyZWN0IFVSTC5cbiAgICAgICAgICpcbiAgICAgICAgICpcbiAgICAgICAgICog4pqgIE5PVEU6IFRoaXMgcHJvcGVydHkgaXMgZ29pbmcgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIFVSTCwgc28gbWFrZSBzdXJlIGl0IGRvZXMgbm90IGhpbnQgYXQgc2Vuc2l0aXZlIGVycm9ycy5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGZ1bGwgZXJyb3IgaXMgYWx3YXlzIGxvZ2dlZCBvbiB0aGUgc2VydmVyLCBpZiB5b3UgbmVlZCB0byBkZWJ1Zy5cbiAgICAgICAgICpcbiAgICAgICAgICogR2VuZXJhbGx5LCB3ZSBkb24ndCByZWNvbW1lbmQgaGludGluZyBzcGVjaWZpY2FsbHkgaWYgdGhlIHVzZXIgaGFkIGVpdGhlciBhIHdyb25nIHVzZXJuYW1lIG9yIHBhc3N3b3JkIHNwZWNpZmljYWxseSxcbiAgICAgICAgICogdHJ5IHJhdGhlciBzb21ldGhpbmcgbGlrZSBcIkludmFsaWQgY3JlZGVudGlhbHNcIi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29kZSA9IFwiY3JlZGVudGlhbHNcIjtcbiAgICB9XG59XG5DcmVkZW50aWFsc1NpZ25pbi50eXBlID0gXCJDcmVkZW50aWFsc1NpZ25pblwiO1xuLyoqXG4gKiBPbmUgb2YgdGhlIGNvbmZpZ3VyZWQgT0F1dGggb3IgT0lEQyBwcm92aWRlcnMgaXMgbWlzc2luZyB0aGUgYGF1dGhvcml6YXRpb25gLCBgdG9rZW5gIG9yIGB1c2VyaW5mb2AsIG9yIGBpc3N1ZXJgIGNvbmZpZ3VyYXRpb24uXG4gKiBUbyBwZXJmb3JtIE9BdXRoIG9yIE9JREMgc2lnbiBpbiwgYXQgbGVhc3Qgb25lIG9mIHRoZXNlIGVuZHBvaW50cyBpcyByZXF1aXJlZC5cbiAqXG4gKiBMZWFybiBtb3JlIGF0IFtgT0F1dGgyQ29uZmlnYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL3Byb3ZpZGVycyNvYXV0aDJjb25maWdwcm9maWxlKSBvciBbR3VpZGU6IE9BdXRoIFByb3ZpZGVyXShodHRwczovL2F1dGhqcy5kZXYvZ3VpZGVzL2NvbmZpZ3VyaW5nLW9hdXRoLXByb3ZpZGVycylcbiAqL1xuZXhwb3J0IGNsYXNzIEludmFsaWRFbmRwb2ludHMgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuSW52YWxpZEVuZHBvaW50cy50eXBlID0gXCJJbnZhbGlkRW5kcG9pbnRzXCI7XG4vKipcbiAqIFRocm93biB3aGVuIGEgUEtDRSwgc3RhdGUgb3Igbm9uY2UgT0F1dGggY2hlY2sgY291bGQgbm90IGJlIHBlcmZvcm1lZC5cbiAqIFRoaXMgY291bGQgaGFwcGVuIGlmIHRoZSBPQXV0aCBwcm92aWRlciBpcyBjb25maWd1cmVkIGluY29ycmVjdGx5IG9yIGlmIHRoZSBicm93c2VyIGlzIGJsb2NraW5nIGNvb2tpZXMuXG4gKlxuICogTGVhcm4gbW9yZSBhdCBbYGNoZWNrc2BdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS9wcm92aWRlcnMjY2hlY2tzKVxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZENoZWNrIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbkludmFsaWRDaGVjay50eXBlID0gXCJJbnZhbGlkQ2hlY2tcIjtcbi8qKlxuICogTG9nZ2VkIG9uIHRoZSBzZXJ2ZXIgd2hlbiBBdXRoLmpzIGNvdWxkIG5vdCBkZWNvZGUgb3IgZW5jb2RlIGEgSldULWJhc2VkIChgc3RyYXRlZ3k6IFwiand0XCJgKSBzZXNzaW9uLlxuICpcbiAqIFBvc3NpYmxlIGNhdXNlcyBhcmUgZWl0aGVyIGEgbWlzY29uZmlndXJlZCBgc2VjcmV0YCBvciBhIG1hbGZvcm1lZCBKV1Qgb3IgYGVuY29kZS9kZWNvZGVgIG1ldGhvZHMuXG4gKlxuICogOjo6bm90ZVxuICogV2hlbiB0aGlzIGVycm9yIGlzIGxvZ2dlZCwgdGhlIHNlc3Npb24gY29va2llIGlzIGRlc3Ryb3llZC5cbiAqIDo6OlxuICpcbiAqIExlYXJuIG1vcmUgYXQgW2BzZWNyZXRgXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUjc2VjcmV0KSwgW2Bqd3QuZW5jb2RlYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL2p3dCNlbmNvZGUtMSkgb3IgW2Bqd3QuZGVjb2RlYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL2p3dCNkZWNvZGUtMikgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBKV1RTZXNzaW9uRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuSldUU2Vzc2lvbkVycm9yLnR5cGUgPSBcIkpXVFNlc3Npb25FcnJvclwiO1xuLyoqXG4gKiBUaHJvd24gaWYgQXV0aC5qcyBpcyBtaXNjb25maWd1cmVkLiBUaGlzIGNvdWxkIGhhcHBlbiBpZiB5b3UgY29uZmlndXJlZCBhbiBFbWFpbCBwcm92aWRlciBidXQgZGlkIG5vdCBzZXQgdXAgYSBkYXRhYmFzZSBhZGFwdGVyLFxuICogb3IgdHJpZWQgdXNpbmcgYSBgc3RyYXRlZ3k6IFwiZGF0YWJhc2VcImAgc2Vzc2lvbiB3aXRob3V0IGEgZGF0YWJhc2UgYWRhcHRlci5cbiAqIEluIGJvdGggY2FzZXMsIG1ha2Ugc3VyZSB5b3UgZWl0aGVyIHJlbW92ZSB0aGUgY29uZmlndXJhdGlvbiBvciBhZGQgdGhlIG1pc3NpbmcgYWRhcHRlci5cbiAqXG4gKiBMZWFybiBtb3JlIGF0IFtEYXRhYmFzZSBBZGFwdGVyc10oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZC9kYXRhYmFzZSksIFtFbWFpbCBwcm92aWRlcl0oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZC9hdXRoZW50aWNhdGlvbi9lbWFpbCkgb3IgW0NvbmNlcHQ6IERhdGFiYXNlIHNlc3Npb24gc3RyYXRlZ3ldKGh0dHBzOi8vYXV0aGpzLmRldi9jb25jZXB0cy9zZXNzaW9uLXN0cmF0ZWdpZXMjZGF0YWJhc2Utc2Vzc2lvbilcbiAqL1xuZXhwb3J0IGNsYXNzIE1pc3NpbmdBZGFwdGVyIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbk1pc3NpbmdBZGFwdGVyLnR5cGUgPSBcIk1pc3NpbmdBZGFwdGVyXCI7XG4vKipcbiAqIFRocm93biBzaW1pbGFyaWx5IHRvIFtgTWlzc2luZ0FkYXB0ZXJgXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUvZXJyb3JzI21pc3NpbmdhZGFwdGVyKSwgYnV0IG9ubHkgc29tZSByZXF1aXJlZCBtZXRob2RzIHdlcmUgbWlzc2luZy5cbiAqXG4gKiBNYWtlIHN1cmUgeW91IGVpdGhlciByZW1vdmUgdGhlIGNvbmZpZ3VyYXRpb24gb3IgYWRkIHRoZSBtaXNzaW5nIG1ldGhvZHMgdG8gdGhlIGFkYXB0ZXIuXG4gKlxuICogTGVhcm4gbW9yZSBhdCBbRGF0YWJhc2UgQWRhcHRlcnNdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvZGF0YWJhc2UpXG4gKi9cbmV4cG9ydCBjbGFzcyBNaXNzaW5nQWRhcHRlck1ldGhvZHMgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuTWlzc2luZ0FkYXB0ZXJNZXRob2RzLnR5cGUgPSBcIk1pc3NpbmdBZGFwdGVyTWV0aG9kc1wiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiBhIENyZWRlbnRpYWxzIHByb3ZpZGVyIGlzIG1pc3NpbmcgdGhlIGBhdXRob3JpemVgIGNvbmZpZ3VyYXRpb24uXG4gKiBUbyBwZXJmb3JtIGNyZWRlbnRpYWxzIHNpZ24gaW4sIHRoZSBgYXV0aG9yaXplYCBtZXRob2QgaXMgcmVxdWlyZWQuXG4gKlxuICogTGVhcm4gbW9yZSBhdCBbQ3JlZGVudGlhbHMgcHJvdmlkZXJdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvYXV0aGVudGljYXRpb24vY3JlZGVudGlhbHMpXG4gKi9cbmV4cG9ydCBjbGFzcyBNaXNzaW5nQXV0aG9yaXplIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbk1pc3NpbmdBdXRob3JpemUudHlwZSA9IFwiTWlzc2luZ0F1dGhvcml6ZVwiO1xuLyoqXG4gKiBBdXRoLmpzIHJlcXVpcmVzIGEgc2VjcmV0IG9yIG11bHRpcGxlIHNlY3JldHMgdG8gYmUgc2V0LCBidXQgbm9uZSB3YXMgbm90IGZvdW5kLiBUaGlzIGlzIHVzZWQgdG8gZW5jcnlwdCBjb29raWVzLCBKV1RzIGFuZCBvdGhlciBzZW5zaXRpdmUgZGF0YS5cbiAqXG4gKiA6Ojpub3RlXG4gKiBJZiB5b3UgYXJlIHVzaW5nIGEgZnJhbWV3b3JrIGxpa2UgTmV4dC5qcywgd2UgdHJ5IHRvIGF1dG9tYXRpY2FsbHkgaW5mZXIgdGhlIHNlY3JldCBmcm9tIHRoZSBgQVVUSF9TRUNSRVRgLCBgQVVUSF9TRUNSRVRfMWAsIGV0Yy4gZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICogQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBhbHNvIGV4cGxpY2l0bHkgc2V0IHRoZSBbYEF1dGhDb25maWcuc2VjcmV0YF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlI3NlY3JldCkgb3B0aW9uLlxuICogOjo6XG4gKlxuICpcbiAqIDo6OnRpcFxuICogVG8gZ2VuZXJhdGUgYSByYW5kb20gc3RyaW5nLCB5b3UgY2FuIHVzZSB0aGUgQXV0aC5qcyBDTEk6IGBucHggYXV0aCBzZWNyZXRgXG4gKiA6OjpcbiAqL1xuZXhwb3J0IGNsYXNzIE1pc3NpbmdTZWNyZXQgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuTWlzc2luZ1NlY3JldC50eXBlID0gXCJNaXNzaW5nU2VjcmV0XCI7XG4vKipcbiAqIFRocm93biB3aGVuIGFuIEVtYWlsIGFkZHJlc3MgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYW4gYWNjb3VudFxuICogYnV0IHRoZSB1c2VyIGlzIHRyeWluZyBhbiBPQXV0aCBhY2NvdW50IHRoYXQgaXMgbm90IGxpbmtlZCB0byBpdC5cbiAqXG4gKiBGb3Igc2VjdXJpdHkgcmVhc29ucywgQXV0aC5qcyBkb2VzIG5vdCBhdXRvbWF0aWNhbGx5IGxpbmsgT0F1dGggYWNjb3VudHMgdG8gZXhpc3RpbmcgYWNjb3VudHMgaWYgdGhlIHVzZXIgaXMgbm90IHNpZ25lZCBpbi5cbiAqXG4gKiA6Ojp0aXBcbiAqIElmIHlvdSB0cnVzdCB0aGUgT0F1dGggcHJvdmlkZXIgdG8gaGF2ZSB2ZXJpZmllZCB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MsXG4gKiB5b3UgY2FuIGVuYWJsZSBhdXRvbWF0aWMgYWNjb3VudCBsaW5raW5nIGJ5IHNldHRpbmcgW2BhbGxvd0Rhbmdlcm91c0VtYWlsQWNjb3VudExpbmtpbmc6IHRydWVgXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUvcHJvdmlkZXJzI2FsbG93ZGFuZ2Vyb3VzZW1haWxhY2NvdW50bGlua2luZylcbiAqIGluIHRoZSBwcm92aWRlciBjb25maWd1cmF0aW9uLlxuICogOjo6XG4gKi9cbmV4cG9ydCBjbGFzcyBPQXV0aEFjY291bnROb3RMaW5rZWQgZXh0ZW5kcyBTaWduSW5FcnJvciB7XG59XG5PQXV0aEFjY291bnROb3RMaW5rZWQudHlwZSA9IFwiT0F1dGhBY2NvdW50Tm90TGlua2VkXCI7XG4vKipcbiAqIFRocm93biB3aGVuIGFuIE9BdXRoIHByb3ZpZGVyIHJldHVybnMgYW4gZXJyb3IgZHVyaW5nIHRoZSBzaWduIGluIHByb2Nlc3MuXG4gKiBUaGlzIGNvdWxkIGhhcHBlbiBmb3IgZXhhbXBsZSBpZiB0aGUgdXNlciBkZW5pZWQgYWNjZXNzIHRvIHRoZSBhcHBsaWNhdGlvbiBvciB0aGVyZSB3YXMgYSBjb25maWd1cmF0aW9uIGVycm9yLlxuICpcbiAqIEZvciBhIGZ1bGwgbGlzdCBvZiBwb3NzaWJsZSByZWFzb25zLCBjaGVjayBvdXQgdGhlIHNwZWNpZmljYXRpb24gW0F1dGhvcml6YXRpb24gQ29kZSBHcmFudDogRXJyb3IgUmVzcG9uc2VdKGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM2NzQ5I3NlY3Rpb24tNC4xLjIuMSlcbiAqL1xuZXhwb3J0IGNsYXNzIE9BdXRoQ2FsbGJhY2tFcnJvciBleHRlbmRzIFNpZ25JbkVycm9yIHtcbn1cbk9BdXRoQ2FsbGJhY2tFcnJvci50eXBlID0gXCJPQXV0aENhbGxiYWNrRXJyb3JcIjtcbi8qKlxuICogVGhpcyBlcnJvciBvY2N1cnMgZHVyaW5nIGFuIE9BdXRoIHNpZ24gaW4gYXR0ZW1wdCB3aGVuIHRoZSBwcm92aWRlcidzXG4gKiByZXNwb25zZSBjb3VsZCBub3QgYmUgcGFyc2VkLiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGhhcHBlbiBpZiB0aGUgcHJvdmlkZXIncyBBUElcbiAqIGNoYW5nZWQsIG9yIHRoZSBbYE9BdXRoMkNvbmZpZy5wcm9maWxlYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL3Byb3ZpZGVycyNvYXV0aDJjb25maWdwcm9maWxlKSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkIGNvcnJlY3RseS5cbiAqL1xuZXhwb3J0IGNsYXNzIE9BdXRoUHJvZmlsZVBhcnNlRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuT0F1dGhQcm9maWxlUGFyc2VFcnJvci50eXBlID0gXCJPQXV0aFByb2ZpbGVQYXJzZUVycm9yXCI7XG4vKipcbiAqIExvZ2dlZCBvbiB0aGUgc2VydmVyIHdoZW4gQXV0aC5qcyBjb3VsZCBub3QgcmV0cmlldmUgYSBzZXNzaW9uIGZyb20gdGhlIGRhdGFiYXNlIChgc3RyYXRlZ3k6IFwiZGF0YWJhc2VcImApLlxuICpcbiAqIFRoZSBkYXRhYmFzZSBhZGFwdGVyIG1pZ2h0IGJlIG1pc2NvbmZpZ3VyZWQgb3IgdGhlIGRhdGFiYXNlIGlzIG5vdCByZWFjaGFibGUuXG4gKlxuICogTGVhcm4gbW9yZSBhdCBbQ29uY2VwdDogRGF0YWJhc2Ugc2Vzc2lvbiBzdHJhdGVneV0oaHR0cHM6Ly9hdXRoanMuZGV2L2NvbmNlcHRzL3Nlc3Npb24tc3RyYXRlZ2llcyNkYXRhYmFzZSlcbiAqL1xuZXhwb3J0IGNsYXNzIFNlc3Npb25Ub2tlbkVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cblNlc3Npb25Ub2tlbkVycm9yLnR5cGUgPSBcIlNlc3Npb25Ub2tlbkVycm9yXCI7XG4vKipcbiAqIEhhcHBlbnMgd2hlbiBsb2dpbiBieSBbT0F1dGhdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvYXV0aGVudGljYXRpb24vb2F1dGgpIGNvdWxkIG5vdCBiZSBzdGFydGVkLlxuICpcbiAqIFBvc3NpYmxlIGNhdXNlcyBhcmU6XG4gKiAtIFRoZSBBdXRob3JpemF0aW9uIFNlcnZlciBpcyBub3QgY29tcGxpYW50IHdpdGggdGhlIFtPQXV0aCAyLjBdKGh0dHBzOi8vd3d3LmlldGYub3JnL3JmYy9yZmM2NzQ5Lmh0bWwpIG9yIHRoZSBbT0lEQ10oaHR0cHM6Ly9vcGVuaWQubmV0L3NwZWNzL29wZW5pZC1jb25uZWN0LWNvcmUtMV8wLmh0bWwpIHNwZWNpZmljYXRpb24uXG4gKiAgIENoZWNrIHRoZSBkZXRhaWxzIGluIHRoZSBlcnJvciBtZXNzYWdlLlxuICpcbiAqIDo6OnRpcFxuICogQ2hlY2sgb3V0IGBbYXV0aF1bZGV0YWlsc11gIGluIHRoZSBsb2dzIHRvIGtub3cgd2hpY2ggcHJvdmlkZXIgZmFpbGVkLlxuICogQGV4YW1wbGVcbiAqIGBgYHNoXG4gKiBbYXV0aF1bZGV0YWlsc106IHsgXCJwcm92aWRlclwiOiBcImdpdGh1YlwiIH1cbiAqIGBgYFxuICogOjo6XG4gKi9cbmV4cG9ydCBjbGFzcyBPQXV0aFNpZ25JbkVycm9yIGV4dGVuZHMgU2lnbkluRXJyb3Ige1xufVxuT0F1dGhTaWduSW5FcnJvci50eXBlID0gXCJPQXV0aFNpZ25JbkVycm9yXCI7XG4vKipcbiAqIEhhcHBlbnMgd2hlbiB0aGUgbG9naW4gYnkgYW4gW0VtYWlsIHByb3ZpZGVyXShodHRwczovL2F1dGhqcy5kZXYvZ2V0dGluZy1zdGFydGVkL2F1dGhlbnRpY2F0aW9uL2VtYWlsKSBjb3VsZCBub3QgYmUgc3RhcnRlZC5cbiAqXG4gKiBQb3NzaWJsZSBjYXVzZXMgYXJlOlxuICogLSBUaGUgZW1haWwgc2VudCBmcm9tIHRoZSBjbGllbnQgaXMgaW52YWxpZCwgY291bGQgbm90IGJlIG5vcm1hbGl6ZWQgYnkgW2BFbWFpbENvbmZpZy5ub3JtYWxpemVJZGVudGlmaWVyYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL3Byb3ZpZGVycy9lbWFpbCNub3JtYWxpemVpZGVudGlmaWVyKVxuICogLSBUaGUgcHJvdmlkZWQgZW1haWwvdG9rZW4gY29tYmluYXRpb24gaGFzIGV4cGlyZWQ6XG4gKiAgIEFzayB0aGUgdXNlciB0byBsb2cgaW4gYWdhaW4uXG4gKiAtIFRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBkYXRhYmFzZTpcbiAqICAgQ2hlY2sgdGhlIGRhdGFiYXNlIGxvZ3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBFbWFpbFNpZ25JbkVycm9yIGV4dGVuZHMgU2lnbkluRXJyb3Ige1xufVxuRW1haWxTaWduSW5FcnJvci50eXBlID0gXCJFbWFpbFNpZ25JbkVycm9yXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYW4gZXJyb3IgdGhhdCBvY2N1cnMgZHVyaW5nIHRoZSBzaWduLW91dCBwcm9jZXNzLiBUaGlzIGVycm9yXG4gKiBpcyBsb2dnZWQgd2hlbiB0aGVyZSBhcmUgaXNzdWVzIGluIHRlcm1pbmF0aW5nIGEgdXNlcidzIHNlc3Npb24sIGVpdGhlclxuICogYnkgZmFpbGluZyB0byBkZWxldGUgdGhlIHNlc3Npb24gZnJvbSB0aGUgZGF0YWJhc2UgKGluIGRhdGFiYXNlIHNlc3Npb25cbiAqIHN0cmF0ZWdpZXMpIG9yIGVuY291bnRlcmluZyBpc3N1ZXMgZHVyaW5nIG90aGVyIHBhcnRzIG9mIHRoZSBzaWduLW91dFxuICogcHJvY2Vzcywgc3VjaCBhcyBlbWl0dGluZyBzaWduLW91dCBldmVudHMgb3IgY2xlYXJpbmcgc2Vzc2lvbiBjb29raWVzLlxuICpcbiAqIFRoZSBzZXNzaW9uIGNvb2tpZShzKSBhcmUgZW1wdGllZCBldmVuIGlmIHRoaXMgZXJyb3IgaXMgbG9nZ2VkLlxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIFNpZ25PdXRFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5TaWduT3V0RXJyb3IudHlwZSA9IFwiU2lnbk91dEVycm9yXCI7XG4vKipcbiAqIEF1dGguanMgd2FzIHJlcXVlc3RlZCB0byBoYW5kbGUgYW4gb3BlcmF0aW9uIHRoYXQgaXQgZG9lcyBub3Qgc3VwcG9ydC5cbiAqXG4gKiBTZWUgW2BBdXRoQWN0aW9uYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL3R5cGVzI2F1dGhhY3Rpb24pIGZvciB0aGUgc3VwcG9ydGVkIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBVbmtub3duQWN0aW9uIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cblVua25vd25BY3Rpb24udHlwZSA9IFwiVW5rbm93bkFjdGlvblwiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiBhIENyZWRlbnRpYWxzIHByb3ZpZGVyIGlzIHByZXNlbnQgYnV0IHRoZSBKV1Qgc3RyYXRlZ3kgKGBzdHJhdGVneTogXCJqd3RcImApIGlzIG5vdCBlbmFibGVkLlxuICpcbiAqIExlYXJuIG1vcmUgYXQgW2BzdHJhdGVneWBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZSNzdHJhdGVneSkgb3IgW0NyZWRlbnRpYWxzIHByb3ZpZGVyXShodHRwczovL2F1dGhqcy5kZXYvZ2V0dGluZy1zdGFydGVkL2F1dGhlbnRpY2F0aW9uL2NyZWRlbnRpYWxzKVxuICovXG5leHBvcnQgY2xhc3MgVW5zdXBwb3J0ZWRTdHJhdGVneSBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5VbnN1cHBvcnRlZFN0cmF0ZWd5LnR5cGUgPSBcIlVuc3VwcG9ydGVkU3RyYXRlZ3lcIjtcbi8qKiBUaHJvd24gd2hlbiBhbiBlbmRwb2ludCB3YXMgaW5jb3JyZWN0bHkgY2FsbGVkIHdpdGhvdXQgYSBwcm92aWRlciwgb3Igd2l0aCBhbiB1bnN1cHBvcnRlZCBwcm92aWRlci4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkUHJvdmlkZXIgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuSW52YWxpZFByb3ZpZGVyLnR5cGUgPSBcIkludmFsaWRQcm92aWRlclwiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiB0aGUgYHRydXN0SG9zdGAgb3B0aW9uIHdhcyBub3Qgc2V0IHRvIGB0cnVlYC5cbiAqXG4gKiBBdXRoLmpzIHJlcXVpcmVzIHRoZSBgdHJ1c3RIb3N0YCBvcHRpb24gdG8gYmUgc2V0IHRvIGB0cnVlYCBzaW5jZSBpdCdzIHJlbHlpbmcgb24gdGhlIHJlcXVlc3QgaGVhZGVycycgYGhvc3RgIHZhbHVlLlxuICpcbiAqIDo6Om5vdGVcbiAqIE9mZmljaWFsIEF1dGguanMgbGlicmFyaWVzIG1pZ2h0IGF0dGVtcHQgdG8gYXV0b21hdGljYWxseSBzZXQgdGhlIGB0cnVzdEhvc3RgIG9wdGlvbiB0byBgdHJ1ZWAgaWYgdGhlIHJlcXVlc3QgaXMgY29taW5nIGZyb20gYSB0cnVzdGVkIGhvc3Qgb24gYSB0cnVzdGVkIHBsYXRmb3JtLlxuICogOjo6XG4gKlxuICogTGVhcm4gbW9yZSBhdCBbYHRydXN0SG9zdGBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZSN0cnVzdGhvc3QpIG9yIFtHdWlkZTogRGVwbG95bWVudF0oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZC9kZXBsb3ltZW50KVxuICovXG5leHBvcnQgY2xhc3MgVW50cnVzdGVkSG9zdCBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5VbnRydXN0ZWRIb3N0LnR5cGUgPSBcIlVudHJ1c3RlZEhvc3RcIjtcbi8qKlxuICogVGhlIHVzZXIncyBlbWFpbC90b2tlbiBjb21iaW5hdGlvbiB3YXMgaW52YWxpZC5cbiAqIFRoaXMgY291bGQgYmUgYmVjYXVzZSB0aGUgZW1haWwvdG9rZW4gY29tYmluYXRpb24gd2FzIG5vdCBmb3VuZCBpbiB0aGUgZGF0YWJhc2UsXG4gKiBvciBiZWNhdXNlIHRoZSB0b2tlbiBoYXMgZXhwaXJlZC4gQXNrIHRoZSB1c2VyIHRvIGxvZyBpbiBhZ2Fpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFZlcmlmaWNhdGlvbiBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5WZXJpZmljYXRpb24udHlwZSA9IFwiVmVyaWZpY2F0aW9uXCI7XG4vKipcbiAqIEVycm9yIGZvciBtaXNzaW5nIENTUkYgdG9rZW5zIGluIGNsaWVudC1zaWRlIGFjdGlvbnMgKGBzaWduSW5gLCBgc2lnbk91dGAsIGB1c2VTZXNzaW9uI3VwZGF0ZWApLlxuICogVGhyb3duIHdoZW4gYWN0aW9ucyBsYWNrIHRoZSBkb3VibGUgc3VibWl0IGNvb2tpZSwgZXNzZW50aWFsIGZvciBDU1JGIHByb3RlY3Rpb24uXG4gKlxuICogQ1NSRiAoW0Nyb3NzLVNpdGUgUmVxdWVzdCBGb3JnZXJ5XShodHRwczovL293YXNwLm9yZy93d3ctY29tbXVuaXR5L2F0dGFja3MvY3NyZikpXG4gKiBpcyBhbiBhdHRhY2sgbGV2ZXJhZ2luZyBhdXRoZW50aWNhdGVkIHVzZXIgY3JlZGVudGlhbHMgZm9yIHVuYXV0aG9yaXplZCBhY3Rpb25zLlxuICpcbiAqIERvdWJsZSBzdWJtaXQgY29va2llIHBhdHRlcm4sIGEgQ1NSRiBkZWZlbnNlLCByZXF1aXJlcyBtYXRjaGluZyB2YWx1ZXMgaW4gYSBjb29raWVcbiAqIGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gTW9yZSBvbiB0aGlzIGF0IFtNRE4gV2ViIERvY3NdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvR2xvc3NhcnkvQ1NSRikuXG4gKi9cbmV4cG9ydCBjbGFzcyBNaXNzaW5nQ1NSRiBleHRlbmRzIFNpZ25JbkVycm9yIHtcbn1cbk1pc3NpbmdDU1JGLnR5cGUgPSBcIk1pc3NpbmdDU1JGXCI7XG5jb25zdCBjbGllbnRFcnJvcnMgPSBuZXcgU2V0KFtcbiAgICBcIkNyZWRlbnRpYWxzU2lnbmluXCIsXG4gICAgXCJPQXV0aEFjY291bnROb3RMaW5rZWRcIixcbiAgICBcIk9BdXRoQ2FsbGJhY2tFcnJvclwiLFxuICAgIFwiQWNjZXNzRGVuaWVkXCIsXG4gICAgXCJWZXJpZmljYXRpb25cIixcbiAgICBcIk1pc3NpbmdDU1JGXCIsXG4gICAgXCJBY2NvdW50Tm90TGlua2VkXCIsXG4gICAgXCJXZWJBdXRoblZlcmlmaWNhdGlvbkVycm9yXCIsXG5dKTtcbi8qKlxuICogVXNlZCB0byBvbmx5IGFsbG93IHNlbmRpbmcgYSBjZXJ0YWluIHN1YnNldCBvZiBlcnJvcnMgdG8gdGhlIGNsaWVudC5cbiAqIEVycm9ycyBhcmUgYWx3YXlzIGxvZ2dlZCBvbiB0aGUgc2VydmVyLCBidXQgdG8gcHJldmVudCBsZWFraW5nIHNlbnNpdGl2ZSBpbmZvcm1hdGlvbixcbiAqIG9ubHkgYSBzdWJzZXQgb2YgZXJyb3JzIGFyZSBzZW50IHRvIHRoZSBjbGllbnQgYXMtaXMuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2xpZW50RXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBdXRoRXJyb3IpXG4gICAgICAgIHJldHVybiBjbGllbnRFcnJvcnMuaGFzKGVycm9yLnR5cGUpO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogVGhyb3duIHdoZW4gbXVsdGlwbGUgcHJvdmlkZXJzIGhhdmUgYGVuYWJsZUNvbmRpdGlvbmFsVUlgIHNldCB0byBgdHJ1ZWAuXG4gKiBPbmx5IG9uZSBwcm92aWRlciBjYW4gaGF2ZSB0aGlzIG9wdGlvbiBlbmFibGVkIGF0IGEgdGltZS5cbiAqL1xuZXhwb3J0IGNsYXNzIER1cGxpY2F0ZUNvbmRpdGlvbmFsVUkgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuRHVwbGljYXRlQ29uZGl0aW9uYWxVSS50eXBlID0gXCJEdXBsaWNhdGVDb25kaXRpb25hbFVJXCI7XG4vKipcbiAqIFRocm93biB3aGVuIGEgV2ViQXV0aG4gcHJvdmlkZXIgaGFzIGBlbmFibGVDb25kaXRpb25hbFVJYCBzZXQgdG8gYHRydWVgIGJ1dCBubyBmb3JtRmllbGQgaGFzIGB3ZWJhdXRobmAgaW4gaXRzIGF1dG9jb21wbGV0ZSBwYXJhbS5cbiAqXG4gKiBUaGUgYHdlYmF1dGhuYCBhdXRvY29tcGxldGUgcGFyYW0gaXMgcmVxdWlyZWQgZm9yIGNvbmRpdGlvbmFsIFVJIHRvIHdvcmsuXG4gKi9cbmV4cG9ydCBjbGFzcyBNaXNzaW5nV2ViQXV0aG5BdXRvY29tcGxldGUgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuTWlzc2luZ1dlYkF1dGhuQXV0b2NvbXBsZXRlLnR5cGUgPSBcIk1pc3NpbmdXZWJBdXRobkF1dG9jb21wbGV0ZVwiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiBhIFdlYkF1dGhuIHByb3ZpZGVyIGZhaWxzIHRvIHZlcmlmeSBhIGNsaWVudCByZXNwb25zZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFdlYkF1dGhuVmVyaWZpY2F0aW9uRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuV2ViQXV0aG5WZXJpZmljYXRpb25FcnJvci50eXBlID0gXCJXZWJBdXRoblZlcmlmaWNhdGlvbkVycm9yXCI7XG4vKipcbiAqIFRocm93biB3aGVuIGFuIEVtYWlsIGFkZHJlc3MgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYW4gYWNjb3VudFxuICogYnV0IHRoZSB1c2VyIGlzIHRyeWluZyBhbiBhY2NvdW50IHRoYXQgaXMgbm90IGxpbmtlZCB0byBpdC5cbiAqXG4gKiBGb3Igc2VjdXJpdHkgcmVhc29ucywgQXV0aC5qcyBkb2VzIG5vdCBhdXRvbWF0aWNhbGx5IGxpbmsgYWNjb3VudHMgdG8gZXhpc3RpbmcgYWNjb3VudHMgaWYgdGhlIHVzZXIgaXMgbm90IHNpZ25lZCBpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEFjY291bnROb3RMaW5rZWQgZXh0ZW5kcyBTaWduSW5FcnJvciB7XG59XG5BY2NvdW50Tm90TGlua2VkLnR5cGUgPSBcIkFjY291bnROb3RMaW5rZWRcIjtcbi8qKlxuICogVGhyb3duIHdoZW4gYW4gZXhwZXJpbWVudGFsIGZlYXR1cmUgaXMgdXNlZCBidXQgbm90IGVuYWJsZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBFeHBlcmltZW50YWxGZWF0dXJlTm90RW5hYmxlZCBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5FeHBlcmltZW50YWxGZWF0dXJlTm90RW5hYmxlZC50eXBlID0gXCJFeHBlcmltZW50YWxGZWF0dXJlTm90RW5hYmxlZFwiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/errors.js":
/*!*******************************************!*\
  !*** ./node_modules/@auth/core/errors.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AccessDenied: () => (/* binding */ AccessDenied),\n/* harmony export */   AccountNotLinked: () => (/* binding */ AccountNotLinked),\n/* harmony export */   AdapterError: () => (/* binding */ AdapterError),\n/* harmony export */   AuthError: () => (/* binding */ AuthError),\n/* harmony export */   CallbackRouteError: () => (/* binding */ CallbackRouteError),\n/* harmony export */   CredentialsSignin: () => (/* binding */ CredentialsSignin),\n/* harmony export */   DuplicateConditionalUI: () => (/* binding */ DuplicateConditionalUI),\n/* harmony export */   EmailSignInError: () => (/* binding */ EmailSignInError),\n/* harmony export */   ErrorPageLoop: () => (/* binding */ ErrorPageLoop),\n/* harmony export */   EventError: () => (/* binding */ EventError),\n/* harmony export */   ExperimentalFeatureNotEnabled: () => (/* binding */ ExperimentalFeatureNotEnabled),\n/* harmony export */   InvalidCallbackUrl: () => (/* binding */ InvalidCallbackUrl),\n/* harmony export */   InvalidCheck: () => (/* binding */ InvalidCheck),\n/* harmony export */   InvalidEndpoints: () => (/* binding */ InvalidEndpoints),\n/* harmony export */   InvalidProvider: () => (/* binding */ InvalidProvider),\n/* harmony export */   JWTSessionError: () => (/* binding */ JWTSessionError),\n/* harmony export */   MissingAdapter: () => (/* binding */ MissingAdapter),\n/* harmony export */   MissingAdapterMethods: () => (/* binding */ MissingAdapterMethods),\n/* harmony export */   MissingAuthorize: () => (/* binding */ MissingAuthorize),\n/* harmony export */   MissingCSRF: () => (/* binding */ MissingCSRF),\n/* harmony export */   MissingSecret: () => (/* binding */ MissingSecret),\n/* harmony export */   MissingWebAuthnAutocomplete: () => (/* binding */ MissingWebAuthnAutocomplete),\n/* harmony export */   OAuthAccountNotLinked: () => (/* binding */ OAuthAccountNotLinked),\n/* harmony export */   OAuthCallbackError: () => (/* binding */ OAuthCallbackError),\n/* harmony export */   OAuthProfileParseError: () => (/* binding */ OAuthProfileParseError),\n/* harmony export */   OAuthSignInError: () => (/* binding */ OAuthSignInError),\n/* harmony export */   SessionTokenError: () => (/* binding */ SessionTokenError),\n/* harmony export */   SignInError: () => (/* binding */ SignInError),\n/* harmony export */   SignOutError: () => (/* binding */ SignOutError),\n/* harmony export */   UnknownAction: () => (/* binding */ UnknownAction),\n/* harmony export */   UnsupportedStrategy: () => (/* binding */ UnsupportedStrategy),\n/* harmony export */   UntrustedHost: () => (/* binding */ UntrustedHost),\n/* harmony export */   Verification: () => (/* binding */ Verification),\n/* harmony export */   WebAuthnVerificationError: () => (/* binding */ WebAuthnVerificationError),\n/* harmony export */   isClientError: () => (/* binding */ isClientError)\n/* harmony export */ });\n/**\n * Base error class for all Auth.js errors.\n * It's optimized to be printed in the server logs in a nicely formatted way\n * via the [`logger.error`](https://authjs.dev/reference/core#logger) option.\n */\nclass AuthError extends Error {\n    constructor(message, errorOptions) {\n        if (message instanceof Error) {\n            super(undefined, {\n                cause: { err: message, ...message.cause, ...errorOptions },\n            });\n        }\n        else if (typeof message === \"string\") {\n            if (errorOptions instanceof Error) {\n                errorOptions = { err: errorOptions, ...errorOptions.cause };\n            }\n            super(message, errorOptions);\n        }\n        else {\n            super(undefined, message);\n        }\n        this.name = this.constructor.name;\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/3841\n        this.type = this.constructor.type ?? \"AuthError\";\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/3841\n        this.kind = this.constructor.kind ?? \"error\";\n        Error.captureStackTrace?.(this, this.constructor);\n        const url = `https://errors.authjs.dev#${this.type.toLowerCase()}`;\n        this.message += `${this.message ? \". \" : \"\"}Read more at ${url}`;\n    }\n}\nclass SignInError extends AuthError {\n}\nSignInError.kind = \"signIn\";\n/**\n * One of the database [`Adapter` methods](https://authjs.dev/reference/core/adapters#methods)\n * failed during execution.\n *\n * :::tip\n * If `debug: true` is set, you can check out `[auth][debug]` in the logs to learn more about the failed adapter method execution.\n * @example\n * ```sh\n * [auth][debug]: adapter_getUserByEmail\n * { \"args\": [undefined] }\n * ```\n * :::\n */\nclass AdapterError extends AuthError {\n}\nAdapterError.type = \"AdapterError\";\n/**\n * Thrown when the execution of the [`signIn` callback](https://authjs.dev/reference/core/types#signin) fails\n * or if it returns `false`.\n */\nclass AccessDenied extends AuthError {\n}\nAccessDenied.type = \"AccessDenied\";\n/**\n * This error occurs when the user cannot finish login.\n * Depending on the provider type, this could have happened for multiple reasons.\n *\n * :::tip\n * Check out `[auth][details]` in the logs to know which provider failed.\n * @example\n * ```sh\n * [auth][details]: { \"provider\": \"github\" }\n * ```\n * :::\n *\n * For an [OAuth provider](https://authjs.dev/getting-started/authentication/oauth), possible causes are:\n * - The user denied access to the application\n * - There was an error parsing the OAuth Profile:\n *   Check out the provider's `profile` or `userinfo.request` method to make sure\n *   it correctly fetches the user's profile.\n * - The `signIn` or `jwt` callback methods threw an uncaught error:\n *   Check the callback method implementations.\n *\n * For an [Email provider](https://authjs.dev/getting-started/authentication/email), possible causes are:\n * - The provided email/token combination was invalid/missing:\n *   Check if the provider's `sendVerificationRequest` method correctly sends the email.\n * - The provided email/token combination has expired:\n *   Ask the user to log in again.\n * - There was an error with the database:\n *   Check the database logs.\n *\n * For a [Credentials provider](https://authjs.dev/getting-started/authentication/credentials), possible causes are:\n * - The `authorize` method threw an uncaught error:\n *   Check the provider's `authorize` method.\n * - The `signIn` or `jwt` callback methods threw an uncaught error:\n *   Check the callback method implementations.\n *\n * :::tip\n * Check out `[auth][cause]` in the error message for more details.\n * It will show the original stack trace.\n * :::\n */\nclass CallbackRouteError extends AuthError {\n}\nCallbackRouteError.type = \"CallbackRouteError\";\n/**\n * Thrown when Auth.js is misconfigured and accidentally tried to require authentication on a custom error page.\n * To prevent an infinite loop, Auth.js will instead render its default error page.\n *\n * To fix this, make sure that the `error` page does not require authentication.\n *\n * Learn more at [Guide: Error pages](https://authjs.dev/guides/pages/error)\n */\nclass ErrorPageLoop extends AuthError {\n}\nErrorPageLoop.type = \"ErrorPageLoop\";\n/**\n * One of the [`events` methods](https://authjs.dev/reference/core/types#eventcallbacks)\n * failed during execution.\n *\n * Make sure that the `events` methods are implemented correctly and uncaught errors are handled.\n *\n * Learn more at [`events`](https://authjs.dev/reference/core/types#eventcallbacks)\n */\nclass EventError extends AuthError {\n}\nEventError.type = \"EventError\";\n/**\n * Thrown when Auth.js is unable to verify a `callbackUrl` value.\n * The browser either disabled cookies or the `callbackUrl` is not a valid URL.\n *\n * Somebody might have tried to manipulate the callback URL that Auth.js uses to redirect the user back to the configured `callbackUrl`/page.\n * This could be a malicious hacker trying to redirect the user to a phishing site.\n * To prevent this, Auth.js checks if the callback URL is valid and throws this error if it is not.\n *\n * There is no action required, but it might be an indicator that somebody is trying to attack your application.\n */\nclass InvalidCallbackUrl extends AuthError {\n}\nInvalidCallbackUrl.type = \"InvalidCallbackUrl\";\n/**\n * Can be thrown from the `authorize` callback of the Credentials provider.\n * When an error occurs during the `authorize` callback, two things can happen:\n * 1. The user is redirected to the signin page, with `error=CredentialsSignin&code=credentials` in the URL. `code` is configurable.\n * 2. If you throw this error in a framework that handles form actions server-side, this error is thrown, instead of redirecting the user, so you'll need to handle.\n */\nclass CredentialsSignin extends SignInError {\n    constructor() {\n        super(...arguments);\n        /**\n         * The error code that is set in the `code` query parameter of the redirect URL.\n         *\n         *\n         * âš  NOTE: This property is going to be included in the URL, so make sure it does not hint at sensitive errors.\n         *\n         * The full error is always logged on the server, if you need to debug.\n         *\n         * Generally, we don't recommend hinting specifically if the user had either a wrong username or password specifically,\n         * try rather something like \"Invalid credentials\".\n         */\n        this.code = \"credentials\";\n    }\n}\nCredentialsSignin.type = \"CredentialsSignin\";\n/**\n * One of the configured OAuth or OIDC providers is missing the `authorization`, `token` or `userinfo`, or `issuer` configuration.\n * To perform OAuth or OIDC sign in, at least one of these endpoints is required.\n *\n * Learn more at [`OAuth2Config`](https://authjs.dev/reference/core/providers#oauth2configprofile) or [Guide: OAuth Provider](https://authjs.dev/guides/configuring-oauth-providers)\n */\nclass InvalidEndpoints extends AuthError {\n}\nInvalidEndpoints.type = \"InvalidEndpoints\";\n/**\n * Thrown when a PKCE, state or nonce OAuth check could not be performed.\n * This could happen if the OAuth provider is configured incorrectly or if the browser is blocking cookies.\n *\n * Learn more at [`checks`](https://authjs.dev/reference/core/providers#checks)\n */\nclass InvalidCheck extends AuthError {\n}\nInvalidCheck.type = \"InvalidCheck\";\n/**\n * Logged on the server when Auth.js could not decode or encode a JWT-based (`strategy: \"jwt\"`) session.\n *\n * Possible causes are either a misconfigured `secret` or a malformed JWT or `encode/decode` methods.\n *\n * :::note\n * When this error is logged, the session cookie is destroyed.\n * :::\n *\n * Learn more at [`secret`](https://authjs.dev/reference/core#secret), [`jwt.encode`](https://authjs.dev/reference/core/jwt#encode-1) or [`jwt.decode`](https://authjs.dev/reference/core/jwt#decode-2) for more information.\n */\nclass JWTSessionError extends AuthError {\n}\nJWTSessionError.type = \"JWTSessionError\";\n/**\n * Thrown if Auth.js is misconfigured. This could happen if you configured an Email provider but did not set up a database adapter,\n * or tried using a `strategy: \"database\"` session without a database adapter.\n * In both cases, make sure you either remove the configuration or add the missing adapter.\n *\n * Learn more at [Database Adapters](https://authjs.dev/getting-started/database), [Email provider](https://authjs.dev/getting-started/authentication/email) or [Concept: Database session strategy](https://authjs.dev/concepts/session-strategies#database-session)\n */\nclass MissingAdapter extends AuthError {\n}\nMissingAdapter.type = \"MissingAdapter\";\n/**\n * Thrown similarily to [`MissingAdapter`](https://authjs.dev/reference/core/errors#missingadapter), but only some required methods were missing.\n *\n * Make sure you either remove the configuration or add the missing methods to the adapter.\n *\n * Learn more at [Database Adapters](https://authjs.dev/getting-started/database)\n */\nclass MissingAdapterMethods extends AuthError {\n}\nMissingAdapterMethods.type = \"MissingAdapterMethods\";\n/**\n * Thrown when a Credentials provider is missing the `authorize` configuration.\n * To perform credentials sign in, the `authorize` method is required.\n *\n * Learn more at [Credentials provider](https://authjs.dev/getting-started/authentication/credentials)\n */\nclass MissingAuthorize extends AuthError {\n}\nMissingAuthorize.type = \"MissingAuthorize\";\n/**\n * Auth.js requires a secret or multiple secrets to be set, but none was not found. This is used to encrypt cookies, JWTs and other sensitive data.\n *\n * :::note\n * If you are using a framework like Next.js, we try to automatically infer the secret from the `AUTH_SECRET`, `AUTH_SECRET_1`, etc. environment variables.\n * Alternatively, you can also explicitly set the [`AuthConfig.secret`](https://authjs.dev/reference/core#secret) option.\n * :::\n *\n *\n * :::tip\n * To generate a random string, you can use the Auth.js CLI: `npx auth secret`\n * :::\n */\nclass MissingSecret extends AuthError {\n}\nMissingSecret.type = \"MissingSecret\";\n/**\n * Thrown when an Email address is already associated with an account\n * but the user is trying an OAuth account that is not linked to it.\n *\n * For security reasons, Auth.js does not automatically link OAuth accounts to existing accounts if the user is not signed in.\n *\n * :::tip\n * If you trust the OAuth provider to have verified the user's email address,\n * you can enable automatic account linking by setting [`allowDangerousEmailAccountLinking: true`](https://authjs.dev/reference/core/providers#allowdangerousemailaccountlinking)\n * in the provider configuration.\n * :::\n */\nclass OAuthAccountNotLinked extends SignInError {\n}\nOAuthAccountNotLinked.type = \"OAuthAccountNotLinked\";\n/**\n * Thrown when an OAuth provider returns an error during the sign in process.\n * This could happen for example if the user denied access to the application or there was a configuration error.\n *\n * For a full list of possible reasons, check out the specification [Authorization Code Grant: Error Response](https://www.rfc-editor.org/rfc/rfc6749#section-4.1.2.1)\n */\nclass OAuthCallbackError extends SignInError {\n}\nOAuthCallbackError.type = \"OAuthCallbackError\";\n/**\n * This error occurs during an OAuth sign in attempt when the provider's\n * response could not be parsed. This could for example happen if the provider's API\n * changed, or the [`OAuth2Config.profile`](https://authjs.dev/reference/core/providers#oauth2configprofile) method is not implemented correctly.\n */\nclass OAuthProfileParseError extends AuthError {\n}\nOAuthProfileParseError.type = \"OAuthProfileParseError\";\n/**\n * Logged on the server when Auth.js could not retrieve a session from the database (`strategy: \"database\"`).\n *\n * The database adapter might be misconfigured or the database is not reachable.\n *\n * Learn more at [Concept: Database session strategy](https://authjs.dev/concepts/session-strategies#database)\n */\nclass SessionTokenError extends AuthError {\n}\nSessionTokenError.type = \"SessionTokenError\";\n/**\n * Happens when login by [OAuth](https://authjs.dev/getting-started/authentication/oauth) could not be started.\n *\n * Possible causes are:\n * - The Authorization Server is not compliant with the [OAuth 2.0](https://www.ietf.org/rfc/rfc6749.html) or the [OIDC](https://openid.net/specs/openid-connect-core-1_0.html) specification.\n *   Check the details in the error message.\n *\n * :::tip\n * Check out `[auth][details]` in the logs to know which provider failed.\n * @example\n * ```sh\n * [auth][details]: { \"provider\": \"github\" }\n * ```\n * :::\n */\nclass OAuthSignInError extends SignInError {\n}\nOAuthSignInError.type = \"OAuthSignInError\";\n/**\n * Happens when the login by an [Email provider](https://authjs.dev/getting-started/authentication/email) could not be started.\n *\n * Possible causes are:\n * - The email sent from the client is invalid, could not be normalized by [`EmailConfig.normalizeIdentifier`](https://authjs.dev/reference/core/providers/email#normalizeidentifier)\n * - The provided email/token combination has expired:\n *   Ask the user to log in again.\n * - There was an error with the database:\n *   Check the database logs.\n */\nclass EmailSignInError extends SignInError {\n}\nEmailSignInError.type = \"EmailSignInError\";\n/**\n * Represents an error that occurs during the sign-out process. This error\n * is logged when there are issues in terminating a user's session, either\n * by failing to delete the session from the database (in database session\n * strategies) or encountering issues during other parts of the sign-out\n * process, such as emitting sign-out events or clearing session cookies.\n *\n * The session cookie(s) are emptied even if this error is logged.\n *\n */\nclass SignOutError extends AuthError {\n}\nSignOutError.type = \"SignOutError\";\n/**\n * Auth.js was requested to handle an operation that it does not support.\n *\n * See [`AuthAction`](https://authjs.dev/reference/core/types#authaction) for the supported actions.\n */\nclass UnknownAction extends AuthError {\n}\nUnknownAction.type = \"UnknownAction\";\n/**\n * Thrown when a Credentials provider is present but the JWT strategy (`strategy: \"jwt\"`) is not enabled.\n *\n * Learn more at [`strategy`](https://authjs.dev/reference/core#strategy) or [Credentials provider](https://authjs.dev/getting-started/authentication/credentials)\n */\nclass UnsupportedStrategy extends AuthError {\n}\nUnsupportedStrategy.type = \"UnsupportedStrategy\";\n/** Thrown when an endpoint was incorrectly called without a provider, or with an unsupported provider. */\nclass InvalidProvider extends AuthError {\n}\nInvalidProvider.type = \"InvalidProvider\";\n/**\n * Thrown when the `trustHost` option was not set to `true`.\n *\n * Auth.js requires the `trustHost` option to be set to `true` since it's relying on the request headers' `host` value.\n *\n * :::note\n * Official Auth.js libraries might attempt to automatically set the `trustHost` option to `true` if the request is coming from a trusted host on a trusted platform.\n * :::\n *\n * Learn more at [`trustHost`](https://authjs.dev/reference/core#trusthost) or [Guide: Deployment](https://authjs.dev/getting-started/deployment)\n */\nclass UntrustedHost extends AuthError {\n}\nUntrustedHost.type = \"UntrustedHost\";\n/**\n * The user's email/token combination was invalid.\n * This could be because the email/token combination was not found in the database,\n * or because the token has expired. Ask the user to log in again.\n */\nclass Verification extends AuthError {\n}\nVerification.type = \"Verification\";\n/**\n * Error for missing CSRF tokens in client-side actions (`signIn`, `signOut`, `useSession#update`).\n * Thrown when actions lack the double submit cookie, essential for CSRF protection.\n *\n * CSRF ([Cross-Site Request Forgery](https://owasp.org/www-community/attacks/csrf))\n * is an attack leveraging authenticated user credentials for unauthorized actions.\n *\n * Double submit cookie pattern, a CSRF defense, requires matching values in a cookie\n * and request parameter. More on this at [MDN Web Docs](https://developer.mozilla.org/en-US/docs/Glossary/CSRF).\n */\nclass MissingCSRF extends SignInError {\n}\nMissingCSRF.type = \"MissingCSRF\";\nconst clientErrors = new Set([\n    \"CredentialsSignin\",\n    \"OAuthAccountNotLinked\",\n    \"OAuthCallbackError\",\n    \"AccessDenied\",\n    \"Verification\",\n    \"MissingCSRF\",\n    \"AccountNotLinked\",\n    \"WebAuthnVerificationError\",\n]);\n/**\n * Used to only allow sending a certain subset of errors to the client.\n * Errors are always logged on the server, but to prevent leaking sensitive information,\n * only a subset of errors are sent to the client as-is.\n * @internal\n */\nfunction isClientError(error) {\n    if (error instanceof AuthError)\n        return clientErrors.has(error.type);\n    return false;\n}\n/**\n * Thrown when multiple providers have `enableConditionalUI` set to `true`.\n * Only one provider can have this option enabled at a time.\n */\nclass DuplicateConditionalUI extends AuthError {\n}\nDuplicateConditionalUI.type = \"DuplicateConditionalUI\";\n/**\n * Thrown when a WebAuthn provider has `enableConditionalUI` set to `true` but no formField has `webauthn` in its autocomplete param.\n *\n * The `webauthn` autocomplete param is required for conditional UI to work.\n */\nclass MissingWebAuthnAutocomplete extends AuthError {\n}\nMissingWebAuthnAutocomplete.type = \"MissingWebAuthnAutocomplete\";\n/**\n * Thrown when a WebAuthn provider fails to verify a client response.\n */\nclass WebAuthnVerificationError extends AuthError {\n}\nWebAuthnVerificationError.type = \"WebAuthnVerificationError\";\n/**\n * Thrown when an Email address is already associated with an account\n * but the user is trying an account that is not linked to it.\n *\n * For security reasons, Auth.js does not automatically link accounts to existing accounts if the user is not signed in.\n */\nclass AccountNotLinked extends SignInError {\n}\nAccountNotLinked.type = \"AccountNotLinked\";\n/**\n * Thrown when an experimental feature is used but not enabled.\n */\nclass ExperimentalFeatureNotEnabled extends AuthError {\n}\nExperimentalFeatureNotEnabled.type = \"ExperimentalFeatureNotEnabled\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaURBQWlEO0FBQzFFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHdCQUF3QjtBQUN6RSwyQkFBMkIseUJBQXlCLGVBQWUsSUFBSTtBQUN2RTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGVycm9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJhc2UgZXJyb3IgY2xhc3MgZm9yIGFsbCBBdXRoLmpzIGVycm9ycy5cbiAqIEl0J3Mgb3B0aW1pemVkIHRvIGJlIHByaW50ZWQgaW4gdGhlIHNlcnZlciBsb2dzIGluIGEgbmljZWx5IGZvcm1hdHRlZCB3YXlcbiAqIHZpYSB0aGUgW2Bsb2dnZXIuZXJyb3JgXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUjbG9nZ2VyKSBvcHRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3JPcHRpb25zKSB7XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHN1cGVyKHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgICAgIGNhdXNlOiB7IGVycjogbWVzc2FnZSwgLi4ubWVzc2FnZS5jYXVzZSwgLi4uZXJyb3JPcHRpb25zIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaWYgKGVycm9yT3B0aW9ucyBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JPcHRpb25zID0geyBlcnI6IGVycm9yT3B0aW9ucywgLi4uZXJyb3JPcHRpb25zLmNhdXNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdXBlcihtZXNzYWdlLCBlcnJvck9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIodW5kZWZpbmVkLCBtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8zODQxXG4gICAgICAgIHRoaXMudHlwZSA9IHRoaXMuY29uc3RydWN0b3IudHlwZSA/PyBcIkF1dGhFcnJvclwiO1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMzg0MVxuICAgICAgICB0aGlzLmtpbmQgPSB0aGlzLmNvbnN0cnVjdG9yLmtpbmQgPz8gXCJlcnJvclwiO1xuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT8uKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9lcnJvcnMuYXV0aGpzLmRldiMke3RoaXMudHlwZS50b0xvd2VyQ2FzZSgpfWA7XG4gICAgICAgIHRoaXMubWVzc2FnZSArPSBgJHt0aGlzLm1lc3NhZ2UgPyBcIi4gXCIgOiBcIlwifVJlYWQgbW9yZSBhdCAke3VybH1gO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTaWduSW5FcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5TaWduSW5FcnJvci5raW5kID0gXCJzaWduSW5cIjtcbi8qKlxuICogT25lIG9mIHRoZSBkYXRhYmFzZSBbYEFkYXB0ZXJgIG1ldGhvZHNdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS9hZGFwdGVycyNtZXRob2RzKVxuICogZmFpbGVkIGR1cmluZyBleGVjdXRpb24uXG4gKlxuICogOjo6dGlwXG4gKiBJZiBgZGVidWc6IHRydWVgIGlzIHNldCwgeW91IGNhbiBjaGVjayBvdXQgYFthdXRoXVtkZWJ1Z11gIGluIHRoZSBsb2dzIHRvIGxlYXJuIG1vcmUgYWJvdXQgdGhlIGZhaWxlZCBhZGFwdGVyIG1ldGhvZCBleGVjdXRpb24uXG4gKiBAZXhhbXBsZVxuICogYGBgc2hcbiAqIFthdXRoXVtkZWJ1Z106IGFkYXB0ZXJfZ2V0VXNlckJ5RW1haWxcbiAqIHsgXCJhcmdzXCI6IFt1bmRlZmluZWRdIH1cbiAqIGBgYFxuICogOjo6XG4gKi9cbmV4cG9ydCBjbGFzcyBBZGFwdGVyRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuQWRhcHRlckVycm9yLnR5cGUgPSBcIkFkYXB0ZXJFcnJvclwiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiB0aGUgZXhlY3V0aW9uIG9mIHRoZSBbYHNpZ25JbmAgY2FsbGJhY2tdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS90eXBlcyNzaWduaW4pIGZhaWxzXG4gKiBvciBpZiBpdCByZXR1cm5zIGBmYWxzZWAuXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2Nlc3NEZW5pZWQgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuQWNjZXNzRGVuaWVkLnR5cGUgPSBcIkFjY2Vzc0RlbmllZFwiO1xuLyoqXG4gKiBUaGlzIGVycm9yIG9jY3VycyB3aGVuIHRoZSB1c2VyIGNhbm5vdCBmaW5pc2ggbG9naW4uXG4gKiBEZXBlbmRpbmcgb24gdGhlIHByb3ZpZGVyIHR5cGUsIHRoaXMgY291bGQgaGF2ZSBoYXBwZW5lZCBmb3IgbXVsdGlwbGUgcmVhc29ucy5cbiAqXG4gKiA6Ojp0aXBcbiAqIENoZWNrIG91dCBgW2F1dGhdW2RldGFpbHNdYCBpbiB0aGUgbG9ncyB0byBrbm93IHdoaWNoIHByb3ZpZGVyIGZhaWxlZC5cbiAqIEBleGFtcGxlXG4gKiBgYGBzaFxuICogW2F1dGhdW2RldGFpbHNdOiB7IFwicHJvdmlkZXJcIjogXCJnaXRodWJcIiB9XG4gKiBgYGBcbiAqIDo6OlxuICpcbiAqIEZvciBhbiBbT0F1dGggcHJvdmlkZXJdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvYXV0aGVudGljYXRpb24vb2F1dGgpLCBwb3NzaWJsZSBjYXVzZXMgYXJlOlxuICogLSBUaGUgdXNlciBkZW5pZWQgYWNjZXNzIHRvIHRoZSBhcHBsaWNhdGlvblxuICogLSBUaGVyZSB3YXMgYW4gZXJyb3IgcGFyc2luZyB0aGUgT0F1dGggUHJvZmlsZTpcbiAqICAgQ2hlY2sgb3V0IHRoZSBwcm92aWRlcidzIGBwcm9maWxlYCBvciBgdXNlcmluZm8ucmVxdWVzdGAgbWV0aG9kIHRvIG1ha2Ugc3VyZVxuICogICBpdCBjb3JyZWN0bHkgZmV0Y2hlcyB0aGUgdXNlcidzIHByb2ZpbGUuXG4gKiAtIFRoZSBgc2lnbkluYCBvciBgand0YCBjYWxsYmFjayBtZXRob2RzIHRocmV3IGFuIHVuY2F1Z2h0IGVycm9yOlxuICogICBDaGVjayB0aGUgY2FsbGJhY2sgbWV0aG9kIGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiBGb3IgYW4gW0VtYWlsIHByb3ZpZGVyXShodHRwczovL2F1dGhqcy5kZXYvZ2V0dGluZy1zdGFydGVkL2F1dGhlbnRpY2F0aW9uL2VtYWlsKSwgcG9zc2libGUgY2F1c2VzIGFyZTpcbiAqIC0gVGhlIHByb3ZpZGVkIGVtYWlsL3Rva2VuIGNvbWJpbmF0aW9uIHdhcyBpbnZhbGlkL21pc3Npbmc6XG4gKiAgIENoZWNrIGlmIHRoZSBwcm92aWRlcidzIGBzZW5kVmVyaWZpY2F0aW9uUmVxdWVzdGAgbWV0aG9kIGNvcnJlY3RseSBzZW5kcyB0aGUgZW1haWwuXG4gKiAtIFRoZSBwcm92aWRlZCBlbWFpbC90b2tlbiBjb21iaW5hdGlvbiBoYXMgZXhwaXJlZDpcbiAqICAgQXNrIHRoZSB1c2VyIHRvIGxvZyBpbiBhZ2Fpbi5cbiAqIC0gVGhlcmUgd2FzIGFuIGVycm9yIHdpdGggdGhlIGRhdGFiYXNlOlxuICogICBDaGVjayB0aGUgZGF0YWJhc2UgbG9ncy5cbiAqXG4gKiBGb3IgYSBbQ3JlZGVudGlhbHMgcHJvdmlkZXJdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvYXV0aGVudGljYXRpb24vY3JlZGVudGlhbHMpLCBwb3NzaWJsZSBjYXVzZXMgYXJlOlxuICogLSBUaGUgYGF1dGhvcml6ZWAgbWV0aG9kIHRocmV3IGFuIHVuY2F1Z2h0IGVycm9yOlxuICogICBDaGVjayB0aGUgcHJvdmlkZXIncyBgYXV0aG9yaXplYCBtZXRob2QuXG4gKiAtIFRoZSBgc2lnbkluYCBvciBgand0YCBjYWxsYmFjayBtZXRob2RzIHRocmV3IGFuIHVuY2F1Z2h0IGVycm9yOlxuICogICBDaGVjayB0aGUgY2FsbGJhY2sgbWV0aG9kIGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiA6Ojp0aXBcbiAqIENoZWNrIG91dCBgW2F1dGhdW2NhdXNlXWAgaW4gdGhlIGVycm9yIG1lc3NhZ2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEl0IHdpbGwgc2hvdyB0aGUgb3JpZ2luYWwgc3RhY2sgdHJhY2UuXG4gKiA6OjpcbiAqL1xuZXhwb3J0IGNsYXNzIENhbGxiYWNrUm91dGVFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5DYWxsYmFja1JvdXRlRXJyb3IudHlwZSA9IFwiQ2FsbGJhY2tSb3V0ZUVycm9yXCI7XG4vKipcbiAqIFRocm93biB3aGVuIEF1dGguanMgaXMgbWlzY29uZmlndXJlZCBhbmQgYWNjaWRlbnRhbGx5IHRyaWVkIHRvIHJlcXVpcmUgYXV0aGVudGljYXRpb24gb24gYSBjdXN0b20gZXJyb3IgcGFnZS5cbiAqIFRvIHByZXZlbnQgYW4gaW5maW5pdGUgbG9vcCwgQXV0aC5qcyB3aWxsIGluc3RlYWQgcmVuZGVyIGl0cyBkZWZhdWx0IGVycm9yIHBhZ2UuXG4gKlxuICogVG8gZml4IHRoaXMsIG1ha2Ugc3VyZSB0aGF0IHRoZSBgZXJyb3JgIHBhZ2UgZG9lcyBub3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvbi5cbiAqXG4gKiBMZWFybiBtb3JlIGF0IFtHdWlkZTogRXJyb3IgcGFnZXNdKGh0dHBzOi8vYXV0aGpzLmRldi9ndWlkZXMvcGFnZXMvZXJyb3IpXG4gKi9cbmV4cG9ydCBjbGFzcyBFcnJvclBhZ2VMb29wIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbkVycm9yUGFnZUxvb3AudHlwZSA9IFwiRXJyb3JQYWdlTG9vcFwiO1xuLyoqXG4gKiBPbmUgb2YgdGhlIFtgZXZlbnRzYCBtZXRob2RzXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUvdHlwZXMjZXZlbnRjYWxsYmFja3MpXG4gKiBmYWlsZWQgZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBNYWtlIHN1cmUgdGhhdCB0aGUgYGV2ZW50c2AgbWV0aG9kcyBhcmUgaW1wbGVtZW50ZWQgY29ycmVjdGx5IGFuZCB1bmNhdWdodCBlcnJvcnMgYXJlIGhhbmRsZWQuXG4gKlxuICogTGVhcm4gbW9yZSBhdCBbYGV2ZW50c2BdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS90eXBlcyNldmVudGNhbGxiYWNrcylcbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50RXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuRXZlbnRFcnJvci50eXBlID0gXCJFdmVudEVycm9yXCI7XG4vKipcbiAqIFRocm93biB3aGVuIEF1dGguanMgaXMgdW5hYmxlIHRvIHZlcmlmeSBhIGBjYWxsYmFja1VybGAgdmFsdWUuXG4gKiBUaGUgYnJvd3NlciBlaXRoZXIgZGlzYWJsZWQgY29va2llcyBvciB0aGUgYGNhbGxiYWNrVXJsYCBpcyBub3QgYSB2YWxpZCBVUkwuXG4gKlxuICogU29tZWJvZHkgbWlnaHQgaGF2ZSB0cmllZCB0byBtYW5pcHVsYXRlIHRoZSBjYWxsYmFjayBVUkwgdGhhdCBBdXRoLmpzIHVzZXMgdG8gcmVkaXJlY3QgdGhlIHVzZXIgYmFjayB0byB0aGUgY29uZmlndXJlZCBgY2FsbGJhY2tVcmxgL3BhZ2UuXG4gKiBUaGlzIGNvdWxkIGJlIGEgbWFsaWNpb3VzIGhhY2tlciB0cnlpbmcgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gYSBwaGlzaGluZyBzaXRlLlxuICogVG8gcHJldmVudCB0aGlzLCBBdXRoLmpzIGNoZWNrcyBpZiB0aGUgY2FsbGJhY2sgVVJMIGlzIHZhbGlkIGFuZCB0aHJvd3MgdGhpcyBlcnJvciBpZiBpdCBpcyBub3QuXG4gKlxuICogVGhlcmUgaXMgbm8gYWN0aW9uIHJlcXVpcmVkLCBidXQgaXQgbWlnaHQgYmUgYW4gaW5kaWNhdG9yIHRoYXQgc29tZWJvZHkgaXMgdHJ5aW5nIHRvIGF0dGFjayB5b3VyIGFwcGxpY2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZENhbGxiYWNrVXJsIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbkludmFsaWRDYWxsYmFja1VybC50eXBlID0gXCJJbnZhbGlkQ2FsbGJhY2tVcmxcIjtcbi8qKlxuICogQ2FuIGJlIHRocm93biBmcm9tIHRoZSBgYXV0aG9yaXplYCBjYWxsYmFjayBvZiB0aGUgQ3JlZGVudGlhbHMgcHJvdmlkZXIuXG4gKiBXaGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgdGhlIGBhdXRob3JpemVgIGNhbGxiYWNrLCB0d28gdGhpbmdzIGNhbiBoYXBwZW46XG4gKiAxLiBUaGUgdXNlciBpcyByZWRpcmVjdGVkIHRvIHRoZSBzaWduaW4gcGFnZSwgd2l0aCBgZXJyb3I9Q3JlZGVudGlhbHNTaWduaW4mY29kZT1jcmVkZW50aWFsc2AgaW4gdGhlIFVSTC4gYGNvZGVgIGlzIGNvbmZpZ3VyYWJsZS5cbiAqIDIuIElmIHlvdSB0aHJvdyB0aGlzIGVycm9yIGluIGEgZnJhbWV3b3JrIHRoYXQgaGFuZGxlcyBmb3JtIGFjdGlvbnMgc2VydmVyLXNpZGUsIHRoaXMgZXJyb3IgaXMgdGhyb3duLCBpbnN0ZWFkIG9mIHJlZGlyZWN0aW5nIHRoZSB1c2VyLCBzbyB5b3UnbGwgbmVlZCB0byBoYW5kbGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBDcmVkZW50aWFsc1NpZ25pbiBleHRlbmRzIFNpZ25JbkVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlcnJvciBjb2RlIHRoYXQgaXMgc2V0IGluIHRoZSBgY29kZWAgcXVlcnkgcGFyYW1ldGVyIG9mIHRoZSByZWRpcmVjdCBVUkwuXG4gICAgICAgICAqXG4gICAgICAgICAqXG4gICAgICAgICAqIOKaoCBOT1RFOiBUaGlzIHByb3BlcnR5IGlzIGdvaW5nIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBVUkwsIHNvIG1ha2Ugc3VyZSBpdCBkb2VzIG5vdCBoaW50IGF0IHNlbnNpdGl2ZSBlcnJvcnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBmdWxsIGVycm9yIGlzIGFsd2F5cyBsb2dnZWQgb24gdGhlIHNlcnZlciwgaWYgeW91IG5lZWQgdG8gZGVidWcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEdlbmVyYWxseSwgd2UgZG9uJ3QgcmVjb21tZW5kIGhpbnRpbmcgc3BlY2lmaWNhbGx5IGlmIHRoZSB1c2VyIGhhZCBlaXRoZXIgYSB3cm9uZyB1c2VybmFtZSBvciBwYXNzd29yZCBzcGVjaWZpY2FsbHksXG4gICAgICAgICAqIHRyeSByYXRoZXIgc29tZXRoaW5nIGxpa2UgXCJJbnZhbGlkIGNyZWRlbnRpYWxzXCIuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvZGUgPSBcImNyZWRlbnRpYWxzXCI7XG4gICAgfVxufVxuQ3JlZGVudGlhbHNTaWduaW4udHlwZSA9IFwiQ3JlZGVudGlhbHNTaWduaW5cIjtcbi8qKlxuICogT25lIG9mIHRoZSBjb25maWd1cmVkIE9BdXRoIG9yIE9JREMgcHJvdmlkZXJzIGlzIG1pc3NpbmcgdGhlIGBhdXRob3JpemF0aW9uYCwgYHRva2VuYCBvciBgdXNlcmluZm9gLCBvciBgaXNzdWVyYCBjb25maWd1cmF0aW9uLlxuICogVG8gcGVyZm9ybSBPQXV0aCBvciBPSURDIHNpZ24gaW4sIGF0IGxlYXN0IG9uZSBvZiB0aGVzZSBlbmRwb2ludHMgaXMgcmVxdWlyZWQuXG4gKlxuICogTGVhcm4gbW9yZSBhdCBbYE9BdXRoMkNvbmZpZ2BdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS9wcm92aWRlcnMjb2F1dGgyY29uZmlncHJvZmlsZSkgb3IgW0d1aWRlOiBPQXV0aCBQcm92aWRlcl0oaHR0cHM6Ly9hdXRoanMuZGV2L2d1aWRlcy9jb25maWd1cmluZy1vYXV0aC1wcm92aWRlcnMpXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkRW5kcG9pbnRzIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbkludmFsaWRFbmRwb2ludHMudHlwZSA9IFwiSW52YWxpZEVuZHBvaW50c1wiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiBhIFBLQ0UsIHN0YXRlIG9yIG5vbmNlIE9BdXRoIGNoZWNrIGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQuXG4gKiBUaGlzIGNvdWxkIGhhcHBlbiBpZiB0aGUgT0F1dGggcHJvdmlkZXIgaXMgY29uZmlndXJlZCBpbmNvcnJlY3RseSBvciBpZiB0aGUgYnJvd3NlciBpcyBibG9ja2luZyBjb29raWVzLlxuICpcbiAqIExlYXJuIG1vcmUgYXQgW2BjaGVja3NgXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUvcHJvdmlkZXJzI2NoZWNrcylcbiAqL1xuZXhwb3J0IGNsYXNzIEludmFsaWRDaGVjayBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5JbnZhbGlkQ2hlY2sudHlwZSA9IFwiSW52YWxpZENoZWNrXCI7XG4vKipcbiAqIExvZ2dlZCBvbiB0aGUgc2VydmVyIHdoZW4gQXV0aC5qcyBjb3VsZCBub3QgZGVjb2RlIG9yIGVuY29kZSBhIEpXVC1iYXNlZCAoYHN0cmF0ZWd5OiBcImp3dFwiYCkgc2Vzc2lvbi5cbiAqXG4gKiBQb3NzaWJsZSBjYXVzZXMgYXJlIGVpdGhlciBhIG1pc2NvbmZpZ3VyZWQgYHNlY3JldGAgb3IgYSBtYWxmb3JtZWQgSldUIG9yIGBlbmNvZGUvZGVjb2RlYCBtZXRob2RzLlxuICpcbiAqIDo6Om5vdGVcbiAqIFdoZW4gdGhpcyBlcnJvciBpcyBsb2dnZWQsIHRoZSBzZXNzaW9uIGNvb2tpZSBpcyBkZXN0cm95ZWQuXG4gKiA6OjpcbiAqXG4gKiBMZWFybiBtb3JlIGF0IFtgc2VjcmV0YF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlI3NlY3JldCksIFtgand0LmVuY29kZWBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS9qd3QjZW5jb2RlLTEpIG9yIFtgand0LmRlY29kZWBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS9qd3QjZGVjb2RlLTIpIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgSldUU2Vzc2lvbkVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbkpXVFNlc3Npb25FcnJvci50eXBlID0gXCJKV1RTZXNzaW9uRXJyb3JcIjtcbi8qKlxuICogVGhyb3duIGlmIEF1dGguanMgaXMgbWlzY29uZmlndXJlZC4gVGhpcyBjb3VsZCBoYXBwZW4gaWYgeW91IGNvbmZpZ3VyZWQgYW4gRW1haWwgcHJvdmlkZXIgYnV0IGRpZCBub3Qgc2V0IHVwIGEgZGF0YWJhc2UgYWRhcHRlcixcbiAqIG9yIHRyaWVkIHVzaW5nIGEgYHN0cmF0ZWd5OiBcImRhdGFiYXNlXCJgIHNlc3Npb24gd2l0aG91dCBhIGRhdGFiYXNlIGFkYXB0ZXIuXG4gKiBJbiBib3RoIGNhc2VzLCBtYWtlIHN1cmUgeW91IGVpdGhlciByZW1vdmUgdGhlIGNvbmZpZ3VyYXRpb24gb3IgYWRkIHRoZSBtaXNzaW5nIGFkYXB0ZXIuXG4gKlxuICogTGVhcm4gbW9yZSBhdCBbRGF0YWJhc2UgQWRhcHRlcnNdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvZGF0YWJhc2UpLCBbRW1haWwgcHJvdmlkZXJdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvYXV0aGVudGljYXRpb24vZW1haWwpIG9yIFtDb25jZXB0OiBEYXRhYmFzZSBzZXNzaW9uIHN0cmF0ZWd5XShodHRwczovL2F1dGhqcy5kZXYvY29uY2VwdHMvc2Vzc2lvbi1zdHJhdGVnaWVzI2RhdGFiYXNlLXNlc3Npb24pXG4gKi9cbmV4cG9ydCBjbGFzcyBNaXNzaW5nQWRhcHRlciBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5NaXNzaW5nQWRhcHRlci50eXBlID0gXCJNaXNzaW5nQWRhcHRlclwiO1xuLyoqXG4gKiBUaHJvd24gc2ltaWxhcmlseSB0byBbYE1pc3NpbmdBZGFwdGVyYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL2Vycm9ycyNtaXNzaW5nYWRhcHRlciksIGJ1dCBvbmx5IHNvbWUgcmVxdWlyZWQgbWV0aG9kcyB3ZXJlIG1pc3NpbmcuXG4gKlxuICogTWFrZSBzdXJlIHlvdSBlaXRoZXIgcmVtb3ZlIHRoZSBjb25maWd1cmF0aW9uIG9yIGFkZCB0aGUgbWlzc2luZyBtZXRob2RzIHRvIHRoZSBhZGFwdGVyLlxuICpcbiAqIExlYXJuIG1vcmUgYXQgW0RhdGFiYXNlIEFkYXB0ZXJzXShodHRwczovL2F1dGhqcy5kZXYvZ2V0dGluZy1zdGFydGVkL2RhdGFiYXNlKVxuICovXG5leHBvcnQgY2xhc3MgTWlzc2luZ0FkYXB0ZXJNZXRob2RzIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbk1pc3NpbmdBZGFwdGVyTWV0aG9kcy50eXBlID0gXCJNaXNzaW5nQWRhcHRlck1ldGhvZHNcIjtcbi8qKlxuICogVGhyb3duIHdoZW4gYSBDcmVkZW50aWFscyBwcm92aWRlciBpcyBtaXNzaW5nIHRoZSBgYXV0aG9yaXplYCBjb25maWd1cmF0aW9uLlxuICogVG8gcGVyZm9ybSBjcmVkZW50aWFscyBzaWduIGluLCB0aGUgYGF1dGhvcml6ZWAgbWV0aG9kIGlzIHJlcXVpcmVkLlxuICpcbiAqIExlYXJuIG1vcmUgYXQgW0NyZWRlbnRpYWxzIHByb3ZpZGVyXShodHRwczovL2F1dGhqcy5kZXYvZ2V0dGluZy1zdGFydGVkL2F1dGhlbnRpY2F0aW9uL2NyZWRlbnRpYWxzKVxuICovXG5leHBvcnQgY2xhc3MgTWlzc2luZ0F1dGhvcml6ZSBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5NaXNzaW5nQXV0aG9yaXplLnR5cGUgPSBcIk1pc3NpbmdBdXRob3JpemVcIjtcbi8qKlxuICogQXV0aC5qcyByZXF1aXJlcyBhIHNlY3JldCBvciBtdWx0aXBsZSBzZWNyZXRzIHRvIGJlIHNldCwgYnV0IG5vbmUgd2FzIG5vdCBmb3VuZC4gVGhpcyBpcyB1c2VkIHRvIGVuY3J5cHQgY29va2llcywgSldUcyBhbmQgb3RoZXIgc2Vuc2l0aXZlIGRhdGEuXG4gKlxuICogOjo6bm90ZVxuICogSWYgeW91IGFyZSB1c2luZyBhIGZyYW1ld29yayBsaWtlIE5leHQuanMsIHdlIHRyeSB0byBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSBzZWNyZXQgZnJvbSB0aGUgYEFVVEhfU0VDUkVUYCwgYEFVVEhfU0VDUkVUXzFgLCBldGMuIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gYWxzbyBleHBsaWNpdGx5IHNldCB0aGUgW2BBdXRoQ29uZmlnLnNlY3JldGBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZSNzZWNyZXQpIG9wdGlvbi5cbiAqIDo6OlxuICpcbiAqXG4gKiA6Ojp0aXBcbiAqIFRvIGdlbmVyYXRlIGEgcmFuZG9tIHN0cmluZywgeW91IGNhbiB1c2UgdGhlIEF1dGguanMgQ0xJOiBgbnB4IGF1dGggc2VjcmV0YFxuICogOjo6XG4gKi9cbmV4cG9ydCBjbGFzcyBNaXNzaW5nU2VjcmV0IGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbk1pc3NpbmdTZWNyZXQudHlwZSA9IFwiTWlzc2luZ1NlY3JldFwiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiBhbiBFbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIGFuIGFjY291bnRcbiAqIGJ1dCB0aGUgdXNlciBpcyB0cnlpbmcgYW4gT0F1dGggYWNjb3VudCB0aGF0IGlzIG5vdCBsaW5rZWQgdG8gaXQuXG4gKlxuICogRm9yIHNlY3VyaXR5IHJlYXNvbnMsIEF1dGguanMgZG9lcyBub3QgYXV0b21hdGljYWxseSBsaW5rIE9BdXRoIGFjY291bnRzIHRvIGV4aXN0aW5nIGFjY291bnRzIGlmIHRoZSB1c2VyIGlzIG5vdCBzaWduZWQgaW4uXG4gKlxuICogOjo6dGlwXG4gKiBJZiB5b3UgdHJ1c3QgdGhlIE9BdXRoIHByb3ZpZGVyIHRvIGhhdmUgdmVyaWZpZWQgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLFxuICogeW91IGNhbiBlbmFibGUgYXV0b21hdGljIGFjY291bnQgbGlua2luZyBieSBzZXR0aW5nIFtgYWxsb3dEYW5nZXJvdXNFbWFpbEFjY291bnRMaW5raW5nOiB0cnVlYF0oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL3Byb3ZpZGVycyNhbGxvd2Rhbmdlcm91c2VtYWlsYWNjb3VudGxpbmtpbmcpXG4gKiBpbiB0aGUgcHJvdmlkZXIgY29uZmlndXJhdGlvbi5cbiAqIDo6OlxuICovXG5leHBvcnQgY2xhc3MgT0F1dGhBY2NvdW50Tm90TGlua2VkIGV4dGVuZHMgU2lnbkluRXJyb3Ige1xufVxuT0F1dGhBY2NvdW50Tm90TGlua2VkLnR5cGUgPSBcIk9BdXRoQWNjb3VudE5vdExpbmtlZFwiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiBhbiBPQXV0aCBwcm92aWRlciByZXR1cm5zIGFuIGVycm9yIGR1cmluZyB0aGUgc2lnbiBpbiBwcm9jZXNzLlxuICogVGhpcyBjb3VsZCBoYXBwZW4gZm9yIGV4YW1wbGUgaWYgdGhlIHVzZXIgZGVuaWVkIGFjY2VzcyB0byB0aGUgYXBwbGljYXRpb24gb3IgdGhlcmUgd2FzIGEgY29uZmlndXJhdGlvbiBlcnJvci5cbiAqXG4gKiBGb3IgYSBmdWxsIGxpc3Qgb2YgcG9zc2libGUgcmVhc29ucywgY2hlY2sgb3V0IHRoZSBzcGVjaWZpY2F0aW9uIFtBdXRob3JpemF0aW9uIENvZGUgR3JhbnQ6IEVycm9yIFJlc3BvbnNlXShodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNjc0OSNzZWN0aW9uLTQuMS4yLjEpXG4gKi9cbmV4cG9ydCBjbGFzcyBPQXV0aENhbGxiYWNrRXJyb3IgZXh0ZW5kcyBTaWduSW5FcnJvciB7XG59XG5PQXV0aENhbGxiYWNrRXJyb3IudHlwZSA9IFwiT0F1dGhDYWxsYmFja0Vycm9yXCI7XG4vKipcbiAqIFRoaXMgZXJyb3Igb2NjdXJzIGR1cmluZyBhbiBPQXV0aCBzaWduIGluIGF0dGVtcHQgd2hlbiB0aGUgcHJvdmlkZXInc1xuICogcmVzcG9uc2UgY291bGQgbm90IGJlIHBhcnNlZC4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBoYXBwZW4gaWYgdGhlIHByb3ZpZGVyJ3MgQVBJXG4gKiBjaGFuZ2VkLCBvciB0aGUgW2BPQXV0aDJDb25maWcucHJvZmlsZWBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS9wcm92aWRlcnMjb2F1dGgyY29uZmlncHJvZmlsZSkgbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZCBjb3JyZWN0bHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBPQXV0aFByb2ZpbGVQYXJzZUVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbk9BdXRoUHJvZmlsZVBhcnNlRXJyb3IudHlwZSA9IFwiT0F1dGhQcm9maWxlUGFyc2VFcnJvclwiO1xuLyoqXG4gKiBMb2dnZWQgb24gdGhlIHNlcnZlciB3aGVuIEF1dGguanMgY291bGQgbm90IHJldHJpZXZlIGEgc2Vzc2lvbiBmcm9tIHRoZSBkYXRhYmFzZSAoYHN0cmF0ZWd5OiBcImRhdGFiYXNlXCJgKS5cbiAqXG4gKiBUaGUgZGF0YWJhc2UgYWRhcHRlciBtaWdodCBiZSBtaXNjb25maWd1cmVkIG9yIHRoZSBkYXRhYmFzZSBpcyBub3QgcmVhY2hhYmxlLlxuICpcbiAqIExlYXJuIG1vcmUgYXQgW0NvbmNlcHQ6IERhdGFiYXNlIHNlc3Npb24gc3RyYXRlZ3ldKGh0dHBzOi8vYXV0aGpzLmRldi9jb25jZXB0cy9zZXNzaW9uLXN0cmF0ZWdpZXMjZGF0YWJhc2UpXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXNzaW9uVG9rZW5FcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5TZXNzaW9uVG9rZW5FcnJvci50eXBlID0gXCJTZXNzaW9uVG9rZW5FcnJvclwiO1xuLyoqXG4gKiBIYXBwZW5zIHdoZW4gbG9naW4gYnkgW09BdXRoXShodHRwczovL2F1dGhqcy5kZXYvZ2V0dGluZy1zdGFydGVkL2F1dGhlbnRpY2F0aW9uL29hdXRoKSBjb3VsZCBub3QgYmUgc3RhcnRlZC5cbiAqXG4gKiBQb3NzaWJsZSBjYXVzZXMgYXJlOlxuICogLSBUaGUgQXV0aG9yaXphdGlvbiBTZXJ2ZXIgaXMgbm90IGNvbXBsaWFudCB3aXRoIHRoZSBbT0F1dGggMi4wXShodHRwczovL3d3dy5pZXRmLm9yZy9yZmMvcmZjNjc0OS5odG1sKSBvciB0aGUgW09JRENdKGh0dHBzOi8vb3BlbmlkLm5ldC9zcGVjcy9vcGVuaWQtY29ubmVjdC1jb3JlLTFfMC5odG1sKSBzcGVjaWZpY2F0aW9uLlxuICogICBDaGVjayB0aGUgZGV0YWlscyBpbiB0aGUgZXJyb3IgbWVzc2FnZS5cbiAqXG4gKiA6Ojp0aXBcbiAqIENoZWNrIG91dCBgW2F1dGhdW2RldGFpbHNdYCBpbiB0aGUgbG9ncyB0byBrbm93IHdoaWNoIHByb3ZpZGVyIGZhaWxlZC5cbiAqIEBleGFtcGxlXG4gKiBgYGBzaFxuICogW2F1dGhdW2RldGFpbHNdOiB7IFwicHJvdmlkZXJcIjogXCJnaXRodWJcIiB9XG4gKiBgYGBcbiAqIDo6OlxuICovXG5leHBvcnQgY2xhc3MgT0F1dGhTaWduSW5FcnJvciBleHRlbmRzIFNpZ25JbkVycm9yIHtcbn1cbk9BdXRoU2lnbkluRXJyb3IudHlwZSA9IFwiT0F1dGhTaWduSW5FcnJvclwiO1xuLyoqXG4gKiBIYXBwZW5zIHdoZW4gdGhlIGxvZ2luIGJ5IGFuIFtFbWFpbCBwcm92aWRlcl0oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZC9hdXRoZW50aWNhdGlvbi9lbWFpbCkgY291bGQgbm90IGJlIHN0YXJ0ZWQuXG4gKlxuICogUG9zc2libGUgY2F1c2VzIGFyZTpcbiAqIC0gVGhlIGVtYWlsIHNlbnQgZnJvbSB0aGUgY2xpZW50IGlzIGludmFsaWQsIGNvdWxkIG5vdCBiZSBub3JtYWxpemVkIGJ5IFtgRW1haWxDb25maWcubm9ybWFsaXplSWRlbnRpZmllcmBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS9wcm92aWRlcnMvZW1haWwjbm9ybWFsaXplaWRlbnRpZmllcilcbiAqIC0gVGhlIHByb3ZpZGVkIGVtYWlsL3Rva2VuIGNvbWJpbmF0aW9uIGhhcyBleHBpcmVkOlxuICogICBBc2sgdGhlIHVzZXIgdG8gbG9nIGluIGFnYWluLlxuICogLSBUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgZGF0YWJhc2U6XG4gKiAgIENoZWNrIHRoZSBkYXRhYmFzZSBsb2dzLlxuICovXG5leHBvcnQgY2xhc3MgRW1haWxTaWduSW5FcnJvciBleHRlbmRzIFNpZ25JbkVycm9yIHtcbn1cbkVtYWlsU2lnbkluRXJyb3IudHlwZSA9IFwiRW1haWxTaWduSW5FcnJvclwiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGVycm9yIHRoYXQgb2NjdXJzIGR1cmluZyB0aGUgc2lnbi1vdXQgcHJvY2Vzcy4gVGhpcyBlcnJvclxuICogaXMgbG9nZ2VkIHdoZW4gdGhlcmUgYXJlIGlzc3VlcyBpbiB0ZXJtaW5hdGluZyBhIHVzZXIncyBzZXNzaW9uLCBlaXRoZXJcbiAqIGJ5IGZhaWxpbmcgdG8gZGVsZXRlIHRoZSBzZXNzaW9uIGZyb20gdGhlIGRhdGFiYXNlIChpbiBkYXRhYmFzZSBzZXNzaW9uXG4gKiBzdHJhdGVnaWVzKSBvciBlbmNvdW50ZXJpbmcgaXNzdWVzIGR1cmluZyBvdGhlciBwYXJ0cyBvZiB0aGUgc2lnbi1vdXRcbiAqIHByb2Nlc3MsIHN1Y2ggYXMgZW1pdHRpbmcgc2lnbi1vdXQgZXZlbnRzIG9yIGNsZWFyaW5nIHNlc3Npb24gY29va2llcy5cbiAqXG4gKiBUaGUgc2Vzc2lvbiBjb29raWUocykgYXJlIGVtcHRpZWQgZXZlbiBpZiB0aGlzIGVycm9yIGlzIGxvZ2dlZC5cbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBTaWduT3V0RXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuU2lnbk91dEVycm9yLnR5cGUgPSBcIlNpZ25PdXRFcnJvclwiO1xuLyoqXG4gKiBBdXRoLmpzIHdhcyByZXF1ZXN0ZWQgdG8gaGFuZGxlIGFuIG9wZXJhdGlvbiB0aGF0IGl0IGRvZXMgbm90IHN1cHBvcnQuXG4gKlxuICogU2VlIFtgQXV0aEFjdGlvbmBdKGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS90eXBlcyNhdXRoYWN0aW9uKSBmb3IgdGhlIHN1cHBvcnRlZCBhY3Rpb25zLlxuICovXG5leHBvcnQgY2xhc3MgVW5rbm93bkFjdGlvbiBleHRlbmRzIEF1dGhFcnJvciB7XG59XG5Vbmtub3duQWN0aW9uLnR5cGUgPSBcIlVua25vd25BY3Rpb25cIjtcbi8qKlxuICogVGhyb3duIHdoZW4gYSBDcmVkZW50aWFscyBwcm92aWRlciBpcyBwcmVzZW50IGJ1dCB0aGUgSldUIHN0cmF0ZWd5IChgc3RyYXRlZ3k6IFwiand0XCJgKSBpcyBub3QgZW5hYmxlZC5cbiAqXG4gKiBMZWFybiBtb3JlIGF0IFtgc3RyYXRlZ3lgXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUjc3RyYXRlZ3kpIG9yIFtDcmVkZW50aWFscyBwcm92aWRlcl0oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZC9hdXRoZW50aWNhdGlvbi9jcmVkZW50aWFscylcbiAqL1xuZXhwb3J0IGNsYXNzIFVuc3VwcG9ydGVkU3RyYXRlZ3kgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuVW5zdXBwb3J0ZWRTdHJhdGVneS50eXBlID0gXCJVbnN1cHBvcnRlZFN0cmF0ZWd5XCI7XG4vKiogVGhyb3duIHdoZW4gYW4gZW5kcG9pbnQgd2FzIGluY29ycmVjdGx5IGNhbGxlZCB3aXRob3V0IGEgcHJvdmlkZXIsIG9yIHdpdGggYW4gdW5zdXBwb3J0ZWQgcHJvdmlkZXIuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZFByb3ZpZGVyIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbkludmFsaWRQcm92aWRlci50eXBlID0gXCJJbnZhbGlkUHJvdmlkZXJcIjtcbi8qKlxuICogVGhyb3duIHdoZW4gdGhlIGB0cnVzdEhvc3RgIG9wdGlvbiB3YXMgbm90IHNldCB0byBgdHJ1ZWAuXG4gKlxuICogQXV0aC5qcyByZXF1aXJlcyB0aGUgYHRydXN0SG9zdGAgb3B0aW9uIHRvIGJlIHNldCB0byBgdHJ1ZWAgc2luY2UgaXQncyByZWx5aW5nIG9uIHRoZSByZXF1ZXN0IGhlYWRlcnMnIGBob3N0YCB2YWx1ZS5cbiAqXG4gKiA6Ojpub3RlXG4gKiBPZmZpY2lhbCBBdXRoLmpzIGxpYnJhcmllcyBtaWdodCBhdHRlbXB0IHRvIGF1dG9tYXRpY2FsbHkgc2V0IHRoZSBgdHJ1c3RIb3N0YCBvcHRpb24gdG8gYHRydWVgIGlmIHRoZSByZXF1ZXN0IGlzIGNvbWluZyBmcm9tIGEgdHJ1c3RlZCBob3N0IG9uIGEgdHJ1c3RlZCBwbGF0Zm9ybS5cbiAqIDo6OlxuICpcbiAqIExlYXJuIG1vcmUgYXQgW2B0cnVzdEhvc3RgXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUjdHJ1c3Rob3N0KSBvciBbR3VpZGU6IERlcGxveW1lbnRdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvZGVwbG95bWVudClcbiAqL1xuZXhwb3J0IGNsYXNzIFVudHJ1c3RlZEhvc3QgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuVW50cnVzdGVkSG9zdC50eXBlID0gXCJVbnRydXN0ZWRIb3N0XCI7XG4vKipcbiAqIFRoZSB1c2VyJ3MgZW1haWwvdG9rZW4gY29tYmluYXRpb24gd2FzIGludmFsaWQuXG4gKiBUaGlzIGNvdWxkIGJlIGJlY2F1c2UgdGhlIGVtYWlsL3Rva2VuIGNvbWJpbmF0aW9uIHdhcyBub3QgZm91bmQgaW4gdGhlIGRhdGFiYXNlLFxuICogb3IgYmVjYXVzZSB0aGUgdG9rZW4gaGFzIGV4cGlyZWQuIEFzayB0aGUgdXNlciB0byBsb2cgaW4gYWdhaW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBWZXJpZmljYXRpb24gZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuVmVyaWZpY2F0aW9uLnR5cGUgPSBcIlZlcmlmaWNhdGlvblwiO1xuLyoqXG4gKiBFcnJvciBmb3IgbWlzc2luZyBDU1JGIHRva2VucyBpbiBjbGllbnQtc2lkZSBhY3Rpb25zIChgc2lnbkluYCwgYHNpZ25PdXRgLCBgdXNlU2Vzc2lvbiN1cGRhdGVgKS5cbiAqIFRocm93biB3aGVuIGFjdGlvbnMgbGFjayB0aGUgZG91YmxlIHN1Ym1pdCBjb29raWUsIGVzc2VudGlhbCBmb3IgQ1NSRiBwcm90ZWN0aW9uLlxuICpcbiAqIENTUkYgKFtDcm9zcy1TaXRlIFJlcXVlc3QgRm9yZ2VyeV0oaHR0cHM6Ly9vd2FzcC5vcmcvd3d3LWNvbW11bml0eS9hdHRhY2tzL2NzcmYpKVxuICogaXMgYW4gYXR0YWNrIGxldmVyYWdpbmcgYXV0aGVudGljYXRlZCB1c2VyIGNyZWRlbnRpYWxzIGZvciB1bmF1dGhvcml6ZWQgYWN0aW9ucy5cbiAqXG4gKiBEb3VibGUgc3VibWl0IGNvb2tpZSBwYXR0ZXJuLCBhIENTUkYgZGVmZW5zZSwgcmVxdWlyZXMgbWF0Y2hpbmcgdmFsdWVzIGluIGEgY29va2llXG4gKiBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE1vcmUgb24gdGhpcyBhdCBbTUROIFdlYiBEb2NzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0dsb3NzYXJ5L0NTUkYpLlxuICovXG5leHBvcnQgY2xhc3MgTWlzc2luZ0NTUkYgZXh0ZW5kcyBTaWduSW5FcnJvciB7XG59XG5NaXNzaW5nQ1NSRi50eXBlID0gXCJNaXNzaW5nQ1NSRlwiO1xuY29uc3QgY2xpZW50RXJyb3JzID0gbmV3IFNldChbXG4gICAgXCJDcmVkZW50aWFsc1NpZ25pblwiLFxuICAgIFwiT0F1dGhBY2NvdW50Tm90TGlua2VkXCIsXG4gICAgXCJPQXV0aENhbGxiYWNrRXJyb3JcIixcbiAgICBcIkFjY2Vzc0RlbmllZFwiLFxuICAgIFwiVmVyaWZpY2F0aW9uXCIsXG4gICAgXCJNaXNzaW5nQ1NSRlwiLFxuICAgIFwiQWNjb3VudE5vdExpbmtlZFwiLFxuICAgIFwiV2ViQXV0aG5WZXJpZmljYXRpb25FcnJvclwiLFxuXSk7XG4vKipcbiAqIFVzZWQgdG8gb25seSBhbGxvdyBzZW5kaW5nIGEgY2VydGFpbiBzdWJzZXQgb2YgZXJyb3JzIHRvIHRoZSBjbGllbnQuXG4gKiBFcnJvcnMgYXJlIGFsd2F5cyBsb2dnZWQgb24gdGhlIHNlcnZlciwgYnV0IHRvIHByZXZlbnQgbGVha2luZyBzZW5zaXRpdmUgaW5mb3JtYXRpb24sXG4gKiBvbmx5IGEgc3Vic2V0IG9mIGVycm9ycyBhcmUgc2VudCB0byB0aGUgY2xpZW50IGFzLWlzLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NsaWVudEVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKVxuICAgICAgICByZXR1cm4gY2xpZW50RXJyb3JzLmhhcyhlcnJvci50eXBlKTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIFRocm93biB3aGVuIG11bHRpcGxlIHByb3ZpZGVycyBoYXZlIGBlbmFibGVDb25kaXRpb25hbFVJYCBzZXQgdG8gYHRydWVgLlxuICogT25seSBvbmUgcHJvdmlkZXIgY2FuIGhhdmUgdGhpcyBvcHRpb24gZW5hYmxlZCBhdCBhIHRpbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBEdXBsaWNhdGVDb25kaXRpb25hbFVJIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbkR1cGxpY2F0ZUNvbmRpdGlvbmFsVUkudHlwZSA9IFwiRHVwbGljYXRlQ29uZGl0aW9uYWxVSVwiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiBhIFdlYkF1dGhuIHByb3ZpZGVyIGhhcyBgZW5hYmxlQ29uZGl0aW9uYWxVSWAgc2V0IHRvIGB0cnVlYCBidXQgbm8gZm9ybUZpZWxkIGhhcyBgd2ViYXV0aG5gIGluIGl0cyBhdXRvY29tcGxldGUgcGFyYW0uXG4gKlxuICogVGhlIGB3ZWJhdXRobmAgYXV0b2NvbXBsZXRlIHBhcmFtIGlzIHJlcXVpcmVkIGZvciBjb25kaXRpb25hbCBVSSB0byB3b3JrLlxuICovXG5leHBvcnQgY2xhc3MgTWlzc2luZ1dlYkF1dGhuQXV0b2NvbXBsZXRlIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbk1pc3NpbmdXZWJBdXRobkF1dG9jb21wbGV0ZS50eXBlID0gXCJNaXNzaW5nV2ViQXV0aG5BdXRvY29tcGxldGVcIjtcbi8qKlxuICogVGhyb3duIHdoZW4gYSBXZWJBdXRobiBwcm92aWRlciBmYWlscyB0byB2ZXJpZnkgYSBjbGllbnQgcmVzcG9uc2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBXZWJBdXRoblZlcmlmaWNhdGlvbkVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbn1cbldlYkF1dGhuVmVyaWZpY2F0aW9uRXJyb3IudHlwZSA9IFwiV2ViQXV0aG5WZXJpZmljYXRpb25FcnJvclwiO1xuLyoqXG4gKiBUaHJvd24gd2hlbiBhbiBFbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIGFuIGFjY291bnRcbiAqIGJ1dCB0aGUgdXNlciBpcyB0cnlpbmcgYW4gYWNjb3VudCB0aGF0IGlzIG5vdCBsaW5rZWQgdG8gaXQuXG4gKlxuICogRm9yIHNlY3VyaXR5IHJlYXNvbnMsIEF1dGguanMgZG9lcyBub3QgYXV0b21hdGljYWxseSBsaW5rIGFjY291bnRzIHRvIGV4aXN0aW5nIGFjY291bnRzIGlmIHRoZSB1c2VyIGlzIG5vdCBzaWduZWQgaW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2NvdW50Tm90TGlua2VkIGV4dGVuZHMgU2lnbkluRXJyb3Ige1xufVxuQWNjb3VudE5vdExpbmtlZC50eXBlID0gXCJBY2NvdW50Tm90TGlua2VkXCI7XG4vKipcbiAqIFRocm93biB3aGVuIGFuIGV4cGVyaW1lbnRhbCBmZWF0dXJlIGlzIHVzZWQgYnV0IG5vdCBlbmFibGVkLlxuICovXG5leHBvcnQgY2xhc3MgRXhwZXJpbWVudGFsRmVhdHVyZU5vdEVuYWJsZWQgZXh0ZW5kcyBBdXRoRXJyb3Ige1xufVxuRXhwZXJpbWVudGFsRmVhdHVyZU5vdEVuYWJsZWQudHlwZSA9IFwiRXhwZXJpbWVudGFsRmVhdHVyZU5vdEVuYWJsZWRcIjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/errors.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/index.js":
/*!******************************************!*\
  !*** ./node_modules/@auth/core/index.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Auth: () => (/* binding */ Auth),\n/* harmony export */   createActionURL: () => (/* reexport safe */ _lib_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.createActionURL),\n/* harmony export */   customFetch: () => (/* reexport safe */ _lib_symbols_js__WEBPACK_IMPORTED_MODULE_8__.customFetch),\n/* harmony export */   isAuthAction: () => (/* reexport safe */ _lib_utils_actions_js__WEBPACK_IMPORTED_MODULE_7__.isAuthAction),\n/* harmony export */   raw: () => (/* reexport safe */ _lib_index_js__WEBPACK_IMPORTED_MODULE_2__.raw),\n/* harmony export */   setEnvDefaults: () => (/* reexport safe */ _lib_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.setEnvDefaults),\n/* harmony export */   skipCSRFCheck: () => (/* reexport safe */ _lib_index_js__WEBPACK_IMPORTED_MODULE_2__.skipCSRFCheck)\n/* harmony export */ });\n/* harmony import */ var _lib_utils_assert_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/utils/assert.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/assert.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _lib_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/index.js */ \"(action-browser)/./node_modules/@auth/core/lib/index.js\");\n/* harmony import */ var _lib_utils_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/utils/env.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/env.js\");\n/* harmony import */ var _lib_pages_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/pages/index.js */ \"(action-browser)/./node_modules/@auth/core/lib/pages/index.js\");\n/* harmony import */ var _lib_utils_logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/utils/logger.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/logger.js\");\n/* harmony import */ var _lib_utils_web_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/utils/web.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/web.js\");\n/* harmony import */ var _lib_utils_actions_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/utils/actions.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/actions.js\");\n/* harmony import */ var _lib_symbols_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/symbols.js */ \"(action-browser)/./node_modules/@auth/core/lib/symbols.js\");\n/**\n *\n * :::warning Experimental\n * `@auth/core` is under active development.\n * :::\n *\n * This is the main entry point to the Auth.js library.\n *\n * Based on the {@link https://developer.mozilla.org/en-US/docs/Web/API/Request Request}\n * and {@link https://developer.mozilla.org/en-US/docs/Web/API/Response Response} Web standard APIs.\n * Primarily used to implement [framework](https://authjs.dev/getting-started/integrations)-specific packages,\n * but it can also be used directly.\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/core\n * ```\n *\n * ## Usage\n *\n * ```ts\n * import { Auth } from \"@auth/core\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await Auth(request, {...})\n *\n * console.log(response instanceof Response) // true\n * ```\n *\n * ## Resources\n *\n * - [Getting started](https://authjs.dev/getting-started)\n * - [Guides](https://authjs.dev/guides)\n *\n * @module @auth/core\n */\n\n\n\n\n\n\n\n\n\n\n/**\n * Core functionality provided by Auth.js.\n *\n * Receives a standard {@link Request} and returns a {@link Response}.\n *\n * @example\n * ```ts\n * import { Auth } from \"@auth/core\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await Auth(request, {\n *   providers: [Google],\n *   secret: \"...\",\n *   trustHost: true,\n * })\n *```\n * @see [Documentation](https://authjs.dev)\n */\nasync function Auth(request, config) {\n    const logger = (0,_lib_utils_logger_js__WEBPACK_IMPORTED_MODULE_5__.setLogger)(config);\n    const internalRequest = await (0,_lib_utils_web_js__WEBPACK_IMPORTED_MODULE_6__.toInternalRequest)(request, config);\n    // There was an error parsing the request\n    if (!internalRequest)\n        return Response.json(`Bad request.`, { status: 400 });\n    const warningsOrError = (0,_lib_utils_assert_js__WEBPACK_IMPORTED_MODULE_0__.assertConfig)(internalRequest, config);\n    if (Array.isArray(warningsOrError)) {\n        warningsOrError.forEach(logger.warn);\n    }\n    else if (warningsOrError) {\n        // If there's an error in the user config, bail out early\n        logger.error(warningsOrError);\n        const htmlPages = new Set([\n            \"signin\",\n            \"signout\",\n            \"error\",\n            \"verify-request\",\n        ]);\n        if (!htmlPages.has(internalRequest.action) ||\n            internalRequest.method !== \"GET\") {\n            const message = \"There was a problem with the server configuration. Check the server logs for more information.\";\n            return Response.json({ message }, { status: 500 });\n        }\n        const { pages, theme } = config;\n        // If this is true, the config required auth on the error page\n        // which could cause a redirect loop\n        const authOnErrorPage = pages?.error &&\n            internalRequest.url.searchParams\n                .get(\"callbackUrl\")\n                ?.startsWith(pages.error);\n        // Either there was no error page configured or the configured one contains infinite redirects\n        if (!pages?.error || authOnErrorPage) {\n            if (authOnErrorPage) {\n                logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_1__.ErrorPageLoop(`The error page ${pages?.error} should not require authentication`));\n            }\n            const page = (0,_lib_pages_index_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({ theme }).error(\"Configuration\");\n            return (0,_lib_utils_web_js__WEBPACK_IMPORTED_MODULE_6__.toResponse)(page);\n        }\n        const url = `${internalRequest.url.origin}${pages.error}?error=Configuration`;\n        return Response.redirect(url);\n    }\n    const isRedirect = request.headers?.has(\"X-Auth-Return-Redirect\");\n    const isRaw = config.raw === _lib_index_js__WEBPACK_IMPORTED_MODULE_2__.raw;\n    try {\n        const internalResponse = await (0,_lib_index_js__WEBPACK_IMPORTED_MODULE_2__.AuthInternal)(internalRequest, config);\n        if (isRaw)\n            return internalResponse;\n        const response = (0,_lib_utils_web_js__WEBPACK_IMPORTED_MODULE_6__.toResponse)(internalResponse);\n        const url = response.headers.get(\"Location\");\n        if (!isRedirect || !url)\n            return response;\n        return Response.json({ url }, { headers: response.headers });\n    }\n    catch (e) {\n        const error = e;\n        logger.error(error);\n        const isAuthError = error instanceof _errors_js__WEBPACK_IMPORTED_MODULE_1__.AuthError;\n        if (isAuthError && isRaw && !isRedirect)\n            throw error;\n        // If the CSRF check failed for POST/session, return a 400 status code.\n        // We should not redirect to a page as this is an API route\n        if (request.method === \"POST\" && internalRequest.action === \"session\")\n            return Response.json(null, { status: 400 });\n        const isClientSafeErrorType = (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.isClientError)(error);\n        const type = isClientSafeErrorType ? error.type : \"Configuration\";\n        const params = new URLSearchParams({ error: type });\n        if (error instanceof _errors_js__WEBPACK_IMPORTED_MODULE_1__.CredentialsSignin)\n            params.set(\"code\", error.code);\n        const pageKind = (isAuthError && error.kind) || \"error\";\n        const pagePath = config.pages?.[pageKind] ?? `${config.basePath}/${pageKind.toLowerCase()}`;\n        const url = `${internalRequest.url.origin}${pagePath}?${params}`;\n        if (isRedirect)\n            return Response.json({ url });\n        return Response.redirect(url);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLFFBQVEsMEVBQTBFO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0EseUNBQXlDLElBQUk7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNxRDtBQUNxQztBQUN4QjtBQUNHO0FBQ3ZCO0FBQ0k7QUFDaUI7QUFDYjtBQUNQO0FBQzhCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixlQUFlLGVBQWUsZUFBZTtBQUNyRTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsbUJBQW1CLCtEQUFTO0FBQzVCLGtDQUFrQyxvRUFBaUI7QUFDbkQ7QUFDQTtBQUNBLCtDQUErQyxhQUFhO0FBQzVELDRCQUE0QixrRUFBWTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsU0FBUyxJQUFJLGFBQWE7QUFDN0Q7QUFDQSxnQkFBZ0IsZUFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMscURBQWEsbUJBQW1CLGNBQWM7QUFDL0U7QUFDQSx5QkFBeUIsK0RBQVUsR0FBRyxPQUFPO0FBQzdDLG1CQUFtQiw2REFBVTtBQUM3QjtBQUNBLHVCQUF1QiwyQkFBMkIsRUFBRSxZQUFZO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw4Q0FBRztBQUNwQztBQUNBLHVDQUF1QywyREFBWTtBQUNuRDtBQUNBO0FBQ0EseUJBQXlCLDZEQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixLQUFLLElBQUksMkJBQTJCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGlEQUFTO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsYUFBYTtBQUN0RCxzQ0FBc0MseURBQWE7QUFDbkQ7QUFDQSw2Q0FBNkMsYUFBYTtBQUMxRCw2QkFBNkIseURBQWlCO0FBQzlDO0FBQ0E7QUFDQSx3REFBd0QsZ0JBQWdCLEdBQUcsdUJBQXVCO0FBQ2xHLHVCQUF1QiwyQkFBMkIsRUFBRSxTQUFTLEdBQUcsT0FBTztBQUN2RTtBQUNBLG1DQUFtQyxLQUFLO0FBQ3hDO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqXG4gKiA6Ojp3YXJuaW5nIEV4cGVyaW1lbnRhbFxuICogYEBhdXRoL2NvcmVgIGlzIHVuZGVyIGFjdGl2ZSBkZXZlbG9wbWVudC5cbiAqIDo6OlxuICpcbiAqIFRoaXMgaXMgdGhlIG1haW4gZW50cnkgcG9pbnQgdG8gdGhlIEF1dGguanMgbGlicmFyeS5cbiAqXG4gKiBCYXNlZCBvbiB0aGUge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9SZXF1ZXN0IFJlcXVlc3R9XG4gKiBhbmQge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9SZXNwb25zZSBSZXNwb25zZX0gV2ViIHN0YW5kYXJkIEFQSXMuXG4gKiBQcmltYXJpbHkgdXNlZCB0byBpbXBsZW1lbnQgW2ZyYW1ld29ya10oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZC9pbnRlZ3JhdGlvbnMpLXNwZWNpZmljIHBhY2thZ2VzLFxuICogYnV0IGl0IGNhbiBhbHNvIGJlIHVzZWQgZGlyZWN0bHkuXG4gKlxuICogIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogYGBgYmFzaCBucG0yeWFyblxuICogbnBtIGluc3RhbGwgQGF1dGgvY29yZVxuICogYGBgXG4gKlxuICogIyMgVXNhZ2VcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQXV0aCB9IGZyb20gXCJAYXV0aC9jb3JlXCJcbiAqXG4gKiBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoXCJodHRwczovL2V4YW1wbGUuY29tXCIpXG4gKiBjb25zdCByZXNwb25zZSA9IGF3YWl0IEF1dGgocmVxdWVzdCwgey4uLn0pXG4gKlxuICogY29uc29sZS5sb2cocmVzcG9uc2UgaW5zdGFuY2VvZiBSZXNwb25zZSkgLy8gdHJ1ZVxuICogYGBgXG4gKlxuICogIyMgUmVzb3VyY2VzXG4gKlxuICogLSBbR2V0dGluZyBzdGFydGVkXShodHRwczovL2F1dGhqcy5kZXYvZ2V0dGluZy1zdGFydGVkKVxuICogLSBbR3VpZGVzXShodHRwczovL2F1dGhqcy5kZXYvZ3VpZGVzKVxuICpcbiAqIEBtb2R1bGUgQGF1dGgvY29yZVxuICovXG5pbXBvcnQgeyBhc3NlcnRDb25maWcgfSBmcm9tIFwiLi9saWIvdXRpbHMvYXNzZXJ0LmpzXCI7XG5pbXBvcnQgeyBBdXRoRXJyb3IsIENyZWRlbnRpYWxzU2lnbmluLCBFcnJvclBhZ2VMb29wLCBpc0NsaWVudEVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQXV0aEludGVybmFsLCByYXcsIHNraXBDU1JGQ2hlY2sgfSBmcm9tIFwiLi9saWIvaW5kZXguanNcIjtcbmltcG9ydCB7IHNldEVudkRlZmF1bHRzLCBjcmVhdGVBY3Rpb25VUkwgfSBmcm9tIFwiLi9saWIvdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgcmVuZGVyUGFnZSBmcm9tIFwiLi9saWIvcGFnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHNldExvZ2dlciB9IGZyb20gXCIuL2xpYi91dGlscy9sb2dnZXIuanNcIjtcbmltcG9ydCB7IHRvSW50ZXJuYWxSZXF1ZXN0LCB0b1Jlc3BvbnNlIH0gZnJvbSBcIi4vbGliL3V0aWxzL3dlYi5qc1wiO1xuaW1wb3J0IHsgaXNBdXRoQWN0aW9uIH0gZnJvbSBcIi4vbGliL3V0aWxzL2FjdGlvbnMuanNcIjtcbmV4cG9ydCB7IGN1c3RvbUZldGNoIH0gZnJvbSBcIi4vbGliL3N5bWJvbHMuanNcIjtcbmV4cG9ydCB7IHNraXBDU1JGQ2hlY2ssIHJhdywgc2V0RW52RGVmYXVsdHMsIGNyZWF0ZUFjdGlvblVSTCwgaXNBdXRoQWN0aW9uIH07XG4vKipcbiAqIENvcmUgZnVuY3Rpb25hbGl0eSBwcm92aWRlZCBieSBBdXRoLmpzLlxuICpcbiAqIFJlY2VpdmVzIGEgc3RhbmRhcmQge0BsaW5rIFJlcXVlc3R9IGFuZCByZXR1cm5zIGEge0BsaW5rIFJlc3BvbnNlfS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IEF1dGggfSBmcm9tIFwiQGF1dGgvY29yZVwiXG4gKlxuICogY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiKVxuICogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBdXRoKHJlcXVlc3QsIHtcbiAqICAgcHJvdmlkZXJzOiBbR29vZ2xlXSxcbiAqICAgc2VjcmV0OiBcIi4uLlwiLFxuICogICB0cnVzdEhvc3Q6IHRydWUsXG4gKiB9KVxuICpgYGBcbiAqIEBzZWUgW0RvY3VtZW50YXRpb25dKGh0dHBzOi8vYXV0aGpzLmRldilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEF1dGgocmVxdWVzdCwgY29uZmlnKSB7XG4gICAgY29uc3QgbG9nZ2VyID0gc2V0TG9nZ2VyKGNvbmZpZyk7XG4gICAgY29uc3QgaW50ZXJuYWxSZXF1ZXN0ID0gYXdhaXQgdG9JbnRlcm5hbFJlcXVlc3QocmVxdWVzdCwgY29uZmlnKTtcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3IgcGFyc2luZyB0aGUgcmVxdWVzdFxuICAgIGlmICghaW50ZXJuYWxSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbihgQmFkIHJlcXVlc3QuYCwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICBjb25zdCB3YXJuaW5nc09yRXJyb3IgPSBhc3NlcnRDb25maWcoaW50ZXJuYWxSZXF1ZXN0LCBjb25maWcpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHdhcm5pbmdzT3JFcnJvcikpIHtcbiAgICAgICAgd2FybmluZ3NPckVycm9yLmZvckVhY2gobG9nZ2VyLndhcm4pO1xuICAgIH1cbiAgICBlbHNlIGlmICh3YXJuaW5nc09yRXJyb3IpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBlcnJvciBpbiB0aGUgdXNlciBjb25maWcsIGJhaWwgb3V0IGVhcmx5XG4gICAgICAgIGxvZ2dlci5lcnJvcih3YXJuaW5nc09yRXJyb3IpO1xuICAgICAgICBjb25zdCBodG1sUGFnZXMgPSBuZXcgU2V0KFtcbiAgICAgICAgICAgIFwic2lnbmluXCIsXG4gICAgICAgICAgICBcInNpZ25vdXRcIixcbiAgICAgICAgICAgIFwiZXJyb3JcIixcbiAgICAgICAgICAgIFwidmVyaWZ5LXJlcXVlc3RcIixcbiAgICAgICAgXSk7XG4gICAgICAgIGlmICghaHRtbFBhZ2VzLmhhcyhpbnRlcm5hbFJlcXVlc3QuYWN0aW9uKSB8fFxuICAgICAgICAgICAgaW50ZXJuYWxSZXF1ZXN0Lm1ldGhvZCAhPT0gXCJHRVRcIikge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoZSBzZXJ2ZXIgY29uZmlndXJhdGlvbi4gQ2hlY2sgdGhlIHNlcnZlciBsb2dzIGZvciBtb3JlIGluZm9ybWF0aW9uLlwiO1xuICAgICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBwYWdlcywgdGhlbWUgfSA9IGNvbmZpZztcbiAgICAgICAgLy8gSWYgdGhpcyBpcyB0cnVlLCB0aGUgY29uZmlnIHJlcXVpcmVkIGF1dGggb24gdGhlIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gd2hpY2ggY291bGQgY2F1c2UgYSByZWRpcmVjdCBsb29wXG4gICAgICAgIGNvbnN0IGF1dGhPbkVycm9yUGFnZSA9IHBhZ2VzPy5lcnJvciAmJlxuICAgICAgICAgICAgaW50ZXJuYWxSZXF1ZXN0LnVybC5zZWFyY2hQYXJhbXNcbiAgICAgICAgICAgICAgICAuZ2V0KFwiY2FsbGJhY2tVcmxcIilcbiAgICAgICAgICAgICAgICA/LnN0YXJ0c1dpdGgocGFnZXMuZXJyb3IpO1xuICAgICAgICAvLyBFaXRoZXIgdGhlcmUgd2FzIG5vIGVycm9yIHBhZ2UgY29uZmlndXJlZCBvciB0aGUgY29uZmlndXJlZCBvbmUgY29udGFpbnMgaW5maW5pdGUgcmVkaXJlY3RzXG4gICAgICAgIGlmICghcGFnZXM/LmVycm9yIHx8IGF1dGhPbkVycm9yUGFnZSkge1xuICAgICAgICAgICAgaWYgKGF1dGhPbkVycm9yUGFnZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihuZXcgRXJyb3JQYWdlTG9vcChgVGhlIGVycm9yIHBhZ2UgJHtwYWdlcz8uZXJyb3J9IHNob3VsZCBub3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvbmApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhZ2UgPSByZW5kZXJQYWdlKHsgdGhlbWUgfSkuZXJyb3IoXCJDb25maWd1cmF0aW9uXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRvUmVzcG9uc2UocGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsID0gYCR7aW50ZXJuYWxSZXF1ZXN0LnVybC5vcmlnaW59JHtwYWdlcy5lcnJvcn0/ZXJyb3I9Q29uZmlndXJhdGlvbmA7XG4gICAgICAgIHJldHVybiBSZXNwb25zZS5yZWRpcmVjdCh1cmwpO1xuICAgIH1cbiAgICBjb25zdCBpc1JlZGlyZWN0ID0gcmVxdWVzdC5oZWFkZXJzPy5oYXMoXCJYLUF1dGgtUmV0dXJuLVJlZGlyZWN0XCIpO1xuICAgIGNvbnN0IGlzUmF3ID0gY29uZmlnLnJhdyA9PT0gcmF3O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludGVybmFsUmVzcG9uc2UgPSBhd2FpdCBBdXRoSW50ZXJuYWwoaW50ZXJuYWxSZXF1ZXN0LCBjb25maWcpO1xuICAgICAgICBpZiAoaXNSYXcpXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxSZXNwb25zZTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB0b1Jlc3BvbnNlKGludGVybmFsUmVzcG9uc2UpO1xuICAgICAgICBjb25zdCB1cmwgPSByZXNwb25zZS5oZWFkZXJzLmdldChcIkxvY2F0aW9uXCIpO1xuICAgICAgICBpZiAoIWlzUmVkaXJlY3QgfHwgIXVybClcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyB1cmwgfSwgeyBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IGU7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgIGNvbnN0IGlzQXV0aEVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBBdXRoRXJyb3I7XG4gICAgICAgIGlmIChpc0F1dGhFcnJvciAmJiBpc1JhdyAmJiAhaXNSZWRpcmVjdClcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAvLyBJZiB0aGUgQ1NSRiBjaGVjayBmYWlsZWQgZm9yIFBPU1Qvc2Vzc2lvbiwgcmV0dXJuIGEgNDAwIHN0YXR1cyBjb2RlLlxuICAgICAgICAvLyBXZSBzaG91bGQgbm90IHJlZGlyZWN0IHRvIGEgcGFnZSBhcyB0aGlzIGlzIGFuIEFQSSByb3V0ZVxuICAgICAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IFwiUE9TVFwiICYmIGludGVybmFsUmVxdWVzdC5hY3Rpb24gPT09IFwic2Vzc2lvblwiKVxuICAgICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24obnVsbCwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgY29uc3QgaXNDbGllbnRTYWZlRXJyb3JUeXBlID0gaXNDbGllbnRFcnJvcihlcnJvcik7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBpc0NsaWVudFNhZmVFcnJvclR5cGUgPyBlcnJvci50eXBlIDogXCJDb25maWd1cmF0aW9uXCI7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyBlcnJvcjogdHlwZSB9KTtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQ3JlZGVudGlhbHNTaWduaW4pXG4gICAgICAgICAgICBwYXJhbXMuc2V0KFwiY29kZVwiLCBlcnJvci5jb2RlKTtcbiAgICAgICAgY29uc3QgcGFnZUtpbmQgPSAoaXNBdXRoRXJyb3IgJiYgZXJyb3Iua2luZCkgfHwgXCJlcnJvclwiO1xuICAgICAgICBjb25zdCBwYWdlUGF0aCA9IGNvbmZpZy5wYWdlcz8uW3BhZ2VLaW5kXSA/PyBgJHtjb25maWcuYmFzZVBhdGh9LyR7cGFnZUtpbmQudG9Mb3dlckNhc2UoKX1gO1xuICAgICAgICBjb25zdCB1cmwgPSBgJHtpbnRlcm5hbFJlcXVlc3QudXJsLm9yaWdpbn0ke3BhZ2VQYXRofT8ke3BhcmFtc31gO1xuICAgICAgICBpZiAoaXNSZWRpcmVjdClcbiAgICAgICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgdXJsIH0pO1xuICAgICAgICByZXR1cm4gUmVzcG9uc2UucmVkaXJlY3QodXJsKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/index.js":
/*!******************************************!*\
  !*** ./node_modules/@auth/core/index.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Auth: () => (/* binding */ Auth),\n/* harmony export */   createActionURL: () => (/* reexport safe */ _lib_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.createActionURL),\n/* harmony export */   customFetch: () => (/* reexport safe */ _lib_symbols_js__WEBPACK_IMPORTED_MODULE_8__.customFetch),\n/* harmony export */   isAuthAction: () => (/* reexport safe */ _lib_utils_actions_js__WEBPACK_IMPORTED_MODULE_7__.isAuthAction),\n/* harmony export */   raw: () => (/* reexport safe */ _lib_index_js__WEBPACK_IMPORTED_MODULE_2__.raw),\n/* harmony export */   setEnvDefaults: () => (/* reexport safe */ _lib_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.setEnvDefaults),\n/* harmony export */   skipCSRFCheck: () => (/* reexport safe */ _lib_index_js__WEBPACK_IMPORTED_MODULE_2__.skipCSRFCheck)\n/* harmony export */ });\n/* harmony import */ var _lib_utils_assert_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/utils/assert.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/assert.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _lib_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/index.js */ \"(rsc)/./node_modules/@auth/core/lib/index.js\");\n/* harmony import */ var _lib_utils_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/utils/env.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/env.js\");\n/* harmony import */ var _lib_pages_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/pages/index.js */ \"(rsc)/./node_modules/@auth/core/lib/pages/index.js\");\n/* harmony import */ var _lib_utils_logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/utils/logger.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/logger.js\");\n/* harmony import */ var _lib_utils_web_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/utils/web.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/web.js\");\n/* harmony import */ var _lib_utils_actions_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/utils/actions.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/actions.js\");\n/* harmony import */ var _lib_symbols_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/symbols.js */ \"(rsc)/./node_modules/@auth/core/lib/symbols.js\");\n/**\n *\n * :::warning Experimental\n * `@auth/core` is under active development.\n * :::\n *\n * This is the main entry point to the Auth.js library.\n *\n * Based on the {@link https://developer.mozilla.org/en-US/docs/Web/API/Request Request}\n * and {@link https://developer.mozilla.org/en-US/docs/Web/API/Response Response} Web standard APIs.\n * Primarily used to implement [framework](https://authjs.dev/getting-started/integrations)-specific packages,\n * but it can also be used directly.\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/core\n * ```\n *\n * ## Usage\n *\n * ```ts\n * import { Auth } from \"@auth/core\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await Auth(request, {...})\n *\n * console.log(response instanceof Response) // true\n * ```\n *\n * ## Resources\n *\n * - [Getting started](https://authjs.dev/getting-started)\n * - [Guides](https://authjs.dev/guides)\n *\n * @module @auth/core\n */\n\n\n\n\n\n\n\n\n\n\n/**\n * Core functionality provided by Auth.js.\n *\n * Receives a standard {@link Request} and returns a {@link Response}.\n *\n * @example\n * ```ts\n * import { Auth } from \"@auth/core\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await Auth(request, {\n *   providers: [Google],\n *   secret: \"...\",\n *   trustHost: true,\n * })\n *```\n * @see [Documentation](https://authjs.dev)\n */\nasync function Auth(request, config) {\n    const logger = (0,_lib_utils_logger_js__WEBPACK_IMPORTED_MODULE_5__.setLogger)(config);\n    const internalRequest = await (0,_lib_utils_web_js__WEBPACK_IMPORTED_MODULE_6__.toInternalRequest)(request, config);\n    // There was an error parsing the request\n    if (!internalRequest)\n        return Response.json(`Bad request.`, { status: 400 });\n    const warningsOrError = (0,_lib_utils_assert_js__WEBPACK_IMPORTED_MODULE_0__.assertConfig)(internalRequest, config);\n    if (Array.isArray(warningsOrError)) {\n        warningsOrError.forEach(logger.warn);\n    }\n    else if (warningsOrError) {\n        // If there's an error in the user config, bail out early\n        logger.error(warningsOrError);\n        const htmlPages = new Set([\n            \"signin\",\n            \"signout\",\n            \"error\",\n            \"verify-request\",\n        ]);\n        if (!htmlPages.has(internalRequest.action) ||\n            internalRequest.method !== \"GET\") {\n            const message = \"There was a problem with the server configuration. Check the server logs for more information.\";\n            return Response.json({ message }, { status: 500 });\n        }\n        const { pages, theme } = config;\n        // If this is true, the config required auth on the error page\n        // which could cause a redirect loop\n        const authOnErrorPage = pages?.error &&\n            internalRequest.url.searchParams\n                .get(\"callbackUrl\")\n                ?.startsWith(pages.error);\n        // Either there was no error page configured or the configured one contains infinite redirects\n        if (!pages?.error || authOnErrorPage) {\n            if (authOnErrorPage) {\n                logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_1__.ErrorPageLoop(`The error page ${pages?.error} should not require authentication`));\n            }\n            const page = (0,_lib_pages_index_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({ theme }).error(\"Configuration\");\n            return (0,_lib_utils_web_js__WEBPACK_IMPORTED_MODULE_6__.toResponse)(page);\n        }\n        const url = `${internalRequest.url.origin}${pages.error}?error=Configuration`;\n        return Response.redirect(url);\n    }\n    const isRedirect = request.headers?.has(\"X-Auth-Return-Redirect\");\n    const isRaw = config.raw === _lib_index_js__WEBPACK_IMPORTED_MODULE_2__.raw;\n    try {\n        const internalResponse = await (0,_lib_index_js__WEBPACK_IMPORTED_MODULE_2__.AuthInternal)(internalRequest, config);\n        if (isRaw)\n            return internalResponse;\n        const response = (0,_lib_utils_web_js__WEBPACK_IMPORTED_MODULE_6__.toResponse)(internalResponse);\n        const url = response.headers.get(\"Location\");\n        if (!isRedirect || !url)\n            return response;\n        return Response.json({ url }, { headers: response.headers });\n    }\n    catch (e) {\n        const error = e;\n        logger.error(error);\n        const isAuthError = error instanceof _errors_js__WEBPACK_IMPORTED_MODULE_1__.AuthError;\n        if (isAuthError && isRaw && !isRedirect)\n            throw error;\n        // If the CSRF check failed for POST/session, return a 400 status code.\n        // We should not redirect to a page as this is an API route\n        if (request.method === \"POST\" && internalRequest.action === \"session\")\n            return Response.json(null, { status: 400 });\n        const isClientSafeErrorType = (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.isClientError)(error);\n        const type = isClientSafeErrorType ? error.type : \"Configuration\";\n        const params = new URLSearchParams({ error: type });\n        if (error instanceof _errors_js__WEBPACK_IMPORTED_MODULE_1__.CredentialsSignin)\n            params.set(\"code\", error.code);\n        const pageKind = (isAuthError && error.kind) || \"error\";\n        const pagePath = config.pages?.[pageKind] ?? `${config.basePath}/${pageKind.toLowerCase()}`;\n        const url = `${internalRequest.url.origin}${pagePath}?${params}`;\n        if (isRedirect)\n            return Response.json({ url });\n        return Response.redirect(url);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixRQUFRLDBFQUEwRTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBLHlDQUF5QyxJQUFJO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDcUQ7QUFDcUM7QUFDeEI7QUFDRztBQUN2QjtBQUNJO0FBQ2lCO0FBQ2I7QUFDUDtBQUM4QjtBQUM3RTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZSxlQUFlLGVBQWU7QUFDckU7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDTztBQUNQLG1CQUFtQiwrREFBUztBQUM1QixrQ0FBa0Msb0VBQWlCO0FBQ25EO0FBQ0E7QUFDQSwrQ0FBK0MsYUFBYTtBQUM1RCw0QkFBNEIsa0VBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFNBQVMsSUFBSSxhQUFhO0FBQzdEO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHFEQUFhLG1CQUFtQixjQUFjO0FBQy9FO0FBQ0EseUJBQXlCLCtEQUFVLEdBQUcsT0FBTztBQUM3QyxtQkFBbUIsNkRBQVU7QUFDN0I7QUFDQSx1QkFBdUIsMkJBQTJCLEVBQUUsWUFBWTtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsOENBQUc7QUFDcEM7QUFDQSx1Q0FBdUMsMkRBQVk7QUFDbkQ7QUFDQTtBQUNBLHlCQUF5Qiw2REFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBSyxJQUFJLDJCQUEyQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxpREFBUztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQsc0NBQXNDLHlEQUFhO0FBQ25EO0FBQ0EsNkNBQTZDLGFBQWE7QUFDMUQsNkJBQTZCLHlEQUFpQjtBQUM5QztBQUNBO0FBQ0Esd0RBQXdELGdCQUFnQixHQUFHLHVCQUF1QjtBQUNsRyx1QkFBdUIsMkJBQTJCLEVBQUUsU0FBUyxHQUFHLE9BQU87QUFDdkU7QUFDQSxtQ0FBbUMsS0FBSztBQUN4QztBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICogOjo6d2FybmluZyBFeHBlcmltZW50YWxcbiAqIGBAYXV0aC9jb3JlYCBpcyB1bmRlciBhY3RpdmUgZGV2ZWxvcG1lbnQuXG4gKiA6OjpcbiAqXG4gKiBUaGlzIGlzIHRoZSBtYWluIGVudHJ5IHBvaW50IHRvIHRoZSBBdXRoLmpzIGxpYnJhcnkuXG4gKlxuICogQmFzZWQgb24gdGhlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUmVxdWVzdCBSZXF1ZXN0fVxuICogYW5kIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUmVzcG9uc2UgUmVzcG9uc2V9IFdlYiBzdGFuZGFyZCBBUElzLlxuICogUHJpbWFyaWx5IHVzZWQgdG8gaW1wbGVtZW50IFtmcmFtZXdvcmtdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvaW50ZWdyYXRpb25zKS1zcGVjaWZpYyBwYWNrYWdlcyxcbiAqIGJ1dCBpdCBjYW4gYWxzbyBiZSB1c2VkIGRpcmVjdGx5LlxuICpcbiAqICMjIEluc3RhbGxhdGlvblxuICpcbiAqIGBgYGJhc2ggbnBtMnlhcm5cbiAqIG5wbSBpbnN0YWxsIEBhdXRoL2NvcmVcbiAqIGBgYFxuICpcbiAqICMjIFVzYWdlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IEF1dGggfSBmcm9tIFwiQGF1dGgvY29yZVwiXG4gKlxuICogY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiKVxuICogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBdXRoKHJlcXVlc3QsIHsuLi59KVxuICpcbiAqIGNvbnNvbGUubG9nKHJlc3BvbnNlIGluc3RhbmNlb2YgUmVzcG9uc2UpIC8vIHRydWVcbiAqIGBgYFxuICpcbiAqICMjIFJlc291cmNlc1xuICpcbiAqIC0gW0dldHRpbmcgc3RhcnRlZF0oaHR0cHM6Ly9hdXRoanMuZGV2L2dldHRpbmctc3RhcnRlZClcbiAqIC0gW0d1aWRlc10oaHR0cHM6Ly9hdXRoanMuZGV2L2d1aWRlcylcbiAqXG4gKiBAbW9kdWxlIEBhdXRoL2NvcmVcbiAqL1xuaW1wb3J0IHsgYXNzZXJ0Q29uZmlnIH0gZnJvbSBcIi4vbGliL3V0aWxzL2Fzc2VydC5qc1wiO1xuaW1wb3J0IHsgQXV0aEVycm9yLCBDcmVkZW50aWFsc1NpZ25pbiwgRXJyb3JQYWdlTG9vcCwgaXNDbGllbnRFcnJvciwgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCwgcmF3LCBza2lwQ1NSRkNoZWNrIH0gZnJvbSBcIi4vbGliL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBzZXRFbnZEZWZhdWx0cywgY3JlYXRlQWN0aW9uVVJMIH0gZnJvbSBcIi4vbGliL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHJlbmRlclBhZ2UgZnJvbSBcIi4vbGliL3BhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBzZXRMb2dnZXIgfSBmcm9tIFwiLi9saWIvdXRpbHMvbG9nZ2VyLmpzXCI7XG5pbXBvcnQgeyB0b0ludGVybmFsUmVxdWVzdCwgdG9SZXNwb25zZSB9IGZyb20gXCIuL2xpYi91dGlscy93ZWIuanNcIjtcbmltcG9ydCB7IGlzQXV0aEFjdGlvbiB9IGZyb20gXCIuL2xpYi91dGlscy9hY3Rpb25zLmpzXCI7XG5leHBvcnQgeyBjdXN0b21GZXRjaCB9IGZyb20gXCIuL2xpYi9zeW1ib2xzLmpzXCI7XG5leHBvcnQgeyBza2lwQ1NSRkNoZWNrLCByYXcsIHNldEVudkRlZmF1bHRzLCBjcmVhdGVBY3Rpb25VUkwsIGlzQXV0aEFjdGlvbiB9O1xuLyoqXG4gKiBDb3JlIGZ1bmN0aW9uYWxpdHkgcHJvdmlkZWQgYnkgQXV0aC5qcy5cbiAqXG4gKiBSZWNlaXZlcyBhIHN0YW5kYXJkIHtAbGluayBSZXF1ZXN0fSBhbmQgcmV0dXJucyBhIHtAbGluayBSZXNwb25zZX0uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBBdXRoIH0gZnJvbSBcIkBhdXRoL2NvcmVcIlxuICpcbiAqIGNvbnN0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdChcImh0dHBzOi8vZXhhbXBsZS5jb21cIilcbiAqIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXV0aChyZXF1ZXN0LCB7XG4gKiAgIHByb3ZpZGVyczogW0dvb2dsZV0sXG4gKiAgIHNlY3JldDogXCIuLi5cIixcbiAqICAgdHJ1c3RIb3N0OiB0cnVlLFxuICogfSlcbiAqYGBgXG4gKiBAc2VlIFtEb2N1bWVudGF0aW9uXShodHRwczovL2F1dGhqcy5kZXYpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBBdXRoKHJlcXVlc3QsIGNvbmZpZykge1xuICAgIGNvbnN0IGxvZ2dlciA9IHNldExvZ2dlcihjb25maWcpO1xuICAgIGNvbnN0IGludGVybmFsUmVxdWVzdCA9IGF3YWl0IHRvSW50ZXJuYWxSZXF1ZXN0KHJlcXVlc3QsIGNvbmZpZyk7XG4gICAgLy8gVGhlcmUgd2FzIGFuIGVycm9yIHBhcnNpbmcgdGhlIHJlcXVlc3RcbiAgICBpZiAoIWludGVybmFsUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oYEJhZCByZXF1ZXN0LmAsIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgY29uc3Qgd2FybmluZ3NPckVycm9yID0gYXNzZXJ0Q29uZmlnKGludGVybmFsUmVxdWVzdCwgY29uZmlnKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh3YXJuaW5nc09yRXJyb3IpKSB7XG4gICAgICAgIHdhcm5pbmdzT3JFcnJvci5mb3JFYWNoKGxvZ2dlci53YXJuKTtcbiAgICB9XG4gICAgZWxzZSBpZiAod2FybmluZ3NPckVycm9yKSB7XG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYW4gZXJyb3IgaW4gdGhlIHVzZXIgY29uZmlnLCBiYWlsIG91dCBlYXJseVxuICAgICAgICBsb2dnZXIuZXJyb3Iod2FybmluZ3NPckVycm9yKTtcbiAgICAgICAgY29uc3QgaHRtbFBhZ2VzID0gbmV3IFNldChbXG4gICAgICAgICAgICBcInNpZ25pblwiLFxuICAgICAgICAgICAgXCJzaWdub3V0XCIsXG4gICAgICAgICAgICBcImVycm9yXCIsXG4gICAgICAgICAgICBcInZlcmlmeS1yZXF1ZXN0XCIsXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAoIWh0bWxQYWdlcy5oYXMoaW50ZXJuYWxSZXF1ZXN0LmFjdGlvbikgfHxcbiAgICAgICAgICAgIGludGVybmFsUmVxdWVzdC5tZXRob2QgIT09IFwiR0VUXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBcIlRoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCB0aGUgc2VydmVyIGNvbmZpZ3VyYXRpb24uIENoZWNrIHRoZSBzZXJ2ZXIgbG9ncyBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cIjtcbiAgICAgICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgbWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgcGFnZXMsIHRoZW1lIH0gPSBjb25maWc7XG4gICAgICAgIC8vIElmIHRoaXMgaXMgdHJ1ZSwgdGhlIGNvbmZpZyByZXF1aXJlZCBhdXRoIG9uIHRoZSBlcnJvciBwYWdlXG4gICAgICAgIC8vIHdoaWNoIGNvdWxkIGNhdXNlIGEgcmVkaXJlY3QgbG9vcFxuICAgICAgICBjb25zdCBhdXRoT25FcnJvclBhZ2UgPSBwYWdlcz8uZXJyb3IgJiZcbiAgICAgICAgICAgIGludGVybmFsUmVxdWVzdC51cmwuc2VhcmNoUGFyYW1zXG4gICAgICAgICAgICAgICAgLmdldChcImNhbGxiYWNrVXJsXCIpXG4gICAgICAgICAgICAgICAgPy5zdGFydHNXaXRoKHBhZ2VzLmVycm9yKTtcbiAgICAgICAgLy8gRWl0aGVyIHRoZXJlIHdhcyBubyBlcnJvciBwYWdlIGNvbmZpZ3VyZWQgb3IgdGhlIGNvbmZpZ3VyZWQgb25lIGNvbnRhaW5zIGluZmluaXRlIHJlZGlyZWN0c1xuICAgICAgICBpZiAoIXBhZ2VzPy5lcnJvciB8fCBhdXRoT25FcnJvclBhZ2UpIHtcbiAgICAgICAgICAgIGlmIChhdXRoT25FcnJvclBhZ2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IobmV3IEVycm9yUGFnZUxvb3AoYFRoZSBlcnJvciBwYWdlICR7cGFnZXM/LmVycm9yfSBzaG91bGQgbm90IHJlcXVpcmUgYXV0aGVudGljYXRpb25gKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYWdlID0gcmVuZGVyUGFnZSh7IHRoZW1lIH0pLmVycm9yKFwiQ29uZmlndXJhdGlvblwiKTtcbiAgICAgICAgICAgIHJldHVybiB0b1Jlc3BvbnNlKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVybCA9IGAke2ludGVybmFsUmVxdWVzdC51cmwub3JpZ2lufSR7cGFnZXMuZXJyb3J9P2Vycm9yPUNvbmZpZ3VyYXRpb25gO1xuICAgICAgICByZXR1cm4gUmVzcG9uc2UucmVkaXJlY3QodXJsKTtcbiAgICB9XG4gICAgY29uc3QgaXNSZWRpcmVjdCA9IHJlcXVlc3QuaGVhZGVycz8uaGFzKFwiWC1BdXRoLVJldHVybi1SZWRpcmVjdFwiKTtcbiAgICBjb25zdCBpc1JhdyA9IGNvbmZpZy5yYXcgPT09IHJhdztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnRlcm5hbFJlc3BvbnNlID0gYXdhaXQgQXV0aEludGVybmFsKGludGVybmFsUmVxdWVzdCwgY29uZmlnKTtcbiAgICAgICAgaWYgKGlzUmF3KVxuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsUmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gdG9SZXNwb25zZShpbnRlcm5hbFJlc3BvbnNlKTtcbiAgICAgICAgY29uc3QgdXJsID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJMb2NhdGlvblwiKTtcbiAgICAgICAgaWYgKCFpc1JlZGlyZWN0IHx8ICF1cmwpXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgdXJsIH0sIHsgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBlO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICBjb25zdCBpc0F1dGhFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yO1xuICAgICAgICBpZiAoaXNBdXRoRXJyb3IgJiYgaXNSYXcgJiYgIWlzUmVkaXJlY3QpXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgLy8gSWYgdGhlIENTUkYgY2hlY2sgZmFpbGVkIGZvciBQT1NUL3Nlc3Npb24sIHJldHVybiBhIDQwMCBzdGF0dXMgY29kZS5cbiAgICAgICAgLy8gV2Ugc2hvdWxkIG5vdCByZWRpcmVjdCB0byBhIHBhZ2UgYXMgdGhpcyBpcyBhbiBBUEkgcm91dGVcbiAgICAgICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSBcIlBPU1RcIiAmJiBpbnRlcm5hbFJlcXVlc3QuYWN0aW9uID09PSBcInNlc3Npb25cIilcbiAgICAgICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKG51bGwsIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgICAgIGNvbnN0IGlzQ2xpZW50U2FmZUVycm9yVHlwZSA9IGlzQ2xpZW50RXJyb3IoZXJyb3IpO1xuICAgICAgICBjb25zdCB0eXBlID0gaXNDbGllbnRTYWZlRXJyb3JUeXBlID8gZXJyb3IudHlwZSA6IFwiQ29uZmlndXJhdGlvblwiO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgZXJyb3I6IHR5cGUgfSk7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIENyZWRlbnRpYWxzU2lnbmluKVxuICAgICAgICAgICAgcGFyYW1zLnNldChcImNvZGVcIiwgZXJyb3IuY29kZSk7XG4gICAgICAgIGNvbnN0IHBhZ2VLaW5kID0gKGlzQXV0aEVycm9yICYmIGVycm9yLmtpbmQpIHx8IFwiZXJyb3JcIjtcbiAgICAgICAgY29uc3QgcGFnZVBhdGggPSBjb25maWcucGFnZXM/LltwYWdlS2luZF0gPz8gYCR7Y29uZmlnLmJhc2VQYXRofS8ke3BhZ2VLaW5kLnRvTG93ZXJDYXNlKCl9YDtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7aW50ZXJuYWxSZXF1ZXN0LnVybC5vcmlnaW59JHtwYWdlUGF0aH0/JHtwYXJhbXN9YDtcbiAgICAgICAgaWYgKGlzUmVkaXJlY3QpXG4gICAgICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IHVybCB9KTtcbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLnJlZGlyZWN0KHVybCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/jwt.js":
/*!****************************************!*\
  !*** ./node_modules/@auth/core/jwt.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   getToken: () => (/* binding */ getToken)\n/* harmony export */ });\n/* harmony import */ var _panva_hkdf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @panva/hkdf */ \"(action-browser)/./node_modules/@panva/hkdf/dist/node/esm/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/jose/dist/node/esm/jwk/thumbprint.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/jose/dist/node/esm/util/base64url.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/jose/dist/node/esm/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/jose/dist/node/esm/jwt/decrypt.js\");\n/* harmony import */ var _lib_utils_cookie_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/utils/cookie.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/cookie.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cookie */ \"(action-browser)/./node_modules/cookie/index.js\");\n/**\n *\n *\n * This module contains functions and types\n * to encode and decode {@link https://authjs.dev/concepts/session-strategies#jwt-session JWT}s\n * issued and used by Auth.js.\n *\n * The JWT issued by Auth.js is _encrypted by default_, using the _A256CBC-HS512_ algorithm ({@link https://www.rfc-editor.org/rfc/rfc7518.html#section-5.2.5 JWE}).\n * It uses the `AUTH_SECRET` environment variable or the passed `secret` property to derive a suitable encryption key.\n *\n * :::info Note\n * Auth.js JWTs are meant to be used by the same app that issued them.\n * If you need JWT authentication for your third-party API, you should rely on your Identity Provider instead.\n * :::\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/core\n * ```\n *\n * You can then import this submodule from `@auth/core/jwt`.\n *\n * ## Usage\n *\n * :::warning Warning\n * This module *will* be refactored/changed. We do not recommend relying on it right now.\n * :::\n *\n *\n * ## Resources\n *\n * - [What is a JWT session strategy](https://authjs.dev/concepts/session-strategies#jwt-session)\n * - [RFC7519 - JSON Web Token (JWT)](https://www.rfc-editor.org/rfc/rfc7519)\n *\n * @module jwt\n */\n\n\n\n\n\nconst DEFAULT_MAX_AGE = 30 * 24 * 60 * 60; // 30 days\nconst now = () => (Date.now() / 1000) | 0;\nconst alg = \"dir\";\nconst enc = \"A256CBC-HS512\";\n/** Issues a JWT. By default, the JWT is encrypted using \"A256CBC-HS512\". */\nasync function encode(params) {\n    const { token = {}, secret, maxAge = DEFAULT_MAX_AGE, salt } = params;\n    const secrets = Array.isArray(secret) ? secret : [secret];\n    const encryptionSecret = await getDerivedEncryptionKey(enc, secrets[0], salt);\n    const thumbprint = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.calculateJwkThumbprint)({ kty: \"oct\", k: jose__WEBPACK_IMPORTED_MODULE_4__.encode(encryptionSecret) }, `sha${encryptionSecret.byteLength << 3}`);\n    // @ts-expect-error `jose` allows any object as payload.\n    return await new jose__WEBPACK_IMPORTED_MODULE_5__.EncryptJWT(token)\n        .setProtectedHeader({ alg, enc, kid: thumbprint })\n        .setIssuedAt()\n        .setExpirationTime(now() + maxAge)\n        .setJti(crypto.randomUUID())\n        .encrypt(encryptionSecret);\n}\n/** Decodes an Auth.js issued JWT. */\nasync function decode(params) {\n    const { token, secret, salt } = params;\n    const secrets = Array.isArray(secret) ? secret : [secret];\n    if (!token)\n        return null;\n    const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_6__.jwtDecrypt)(token, async ({ kid, enc }) => {\n        for (const secret of secrets) {\n            const encryptionSecret = await getDerivedEncryptionKey(enc, secret, salt);\n            if (kid === undefined)\n                return encryptionSecret;\n            const thumbprint = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.calculateJwkThumbprint)({ kty: \"oct\", k: jose__WEBPACK_IMPORTED_MODULE_4__.encode(encryptionSecret) }, `sha${encryptionSecret.byteLength << 3}`);\n            if (kid === thumbprint)\n                return encryptionSecret;\n        }\n        throw new Error(\"no matching decryption secret\");\n    }, {\n        clockTolerance: 15,\n        keyManagementAlgorithms: [alg],\n        contentEncryptionAlgorithms: [enc, \"A256GCM\"],\n    });\n    return payload;\n}\nasync function getToken(params) {\n    const { secureCookie, cookieName = (0,_lib_utils_cookie_js__WEBPACK_IMPORTED_MODULE_0__.defaultCookies)(secureCookie ?? false).sessionToken.name, decode: _decode = decode, salt = cookieName, secret, logger = console, raw, req, } = params;\n    if (!req)\n        throw new Error(\"Must pass `req` to JWT getToken()\");\n    const headers = req.headers instanceof Headers ? req.headers : new Headers(req.headers);\n    const sessionStore = new _lib_utils_cookie_js__WEBPACK_IMPORTED_MODULE_0__.SessionStore({ name: cookieName, options: { secure: secureCookie } }, (0,cookie__WEBPACK_IMPORTED_MODULE_2__.parse)(headers.get(\"cookie\") ?? \"\"), logger);\n    let token = sessionStore.value;\n    const authorizationHeader = headers.get(\"authorization\");\n    if (!token && authorizationHeader?.split(\" \")[0] === \"Bearer\") {\n        const urlEncodedToken = authorizationHeader.split(\" \")[1];\n        token = decodeURIComponent(urlEncodedToken);\n    }\n    if (!token)\n        return null;\n    if (raw)\n        return token;\n    if (!secret)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingSecret(\"Must pass `secret` if not set to JWT getToken()\");\n    try {\n        return await _decode({ token, secret, salt });\n    }\n    catch {\n        return null;\n    }\n}\nasync function getDerivedEncryptionKey(enc, keyMaterial, salt) {\n    let length;\n    switch (enc) {\n        case \"A256CBC-HS512\":\n            length = 64;\n            break;\n        case \"A256GCM\":\n            length = 32;\n            break;\n        default:\n            throw new Error(\"Unsupported JWT Content Encryption Algorithm\");\n    }\n    return await (0,_panva_hkdf__WEBPACK_IMPORTED_MODULE_7__.hkdf)(\"sha256\", keyMaterial, salt, `Auth.js Generated Encryption Key (${salt})`, length);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2p3dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFFQUFxRTtBQUM5RjtBQUNBO0FBQ0EsOEZBQThGLG9FQUFvRTtBQUNsSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ21DO0FBQzhDO0FBQ1o7QUFDekI7QUFDYjtBQUMvQiwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksVUFBVSwyQ0FBMkM7QUFDakU7QUFDQTtBQUNBLDZCQUE2Qiw0REFBc0IsR0FBRyxlQUFlLHdDQUFnQixvQkFBb0IsUUFBUSxpQ0FBaUM7QUFDbEo7QUFDQSxxQkFBcUIsNENBQVU7QUFDL0IsOEJBQThCLDJCQUEyQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksc0JBQXNCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVSxRQUFRLGdEQUFVLGlCQUFpQixVQUFVO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDREQUFzQixHQUFHLGVBQWUsd0NBQWdCLG9CQUFvQixRQUFRLGlDQUFpQztBQUMxSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1AsWUFBWSwyQkFBMkIsb0VBQWMsOEhBQThIO0FBQ25MO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw4REFBWSxHQUFHLDZCQUE2Qix3QkFBd0IsRUFBRSw2Q0FBSztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFhO0FBQy9CO0FBQ0EsK0JBQStCLHFCQUFxQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlEQUFJLG1FQUFtRSxLQUFLO0FBQzdGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGp3dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqXG4gKlxuICogVGhpcyBtb2R1bGUgY29udGFpbnMgZnVuY3Rpb25zIGFuZCB0eXBlc1xuICogdG8gZW5jb2RlIGFuZCBkZWNvZGUge0BsaW5rIGh0dHBzOi8vYXV0aGpzLmRldi9jb25jZXB0cy9zZXNzaW9uLXN0cmF0ZWdpZXMjand0LXNlc3Npb24gSldUfXNcbiAqIGlzc3VlZCBhbmQgdXNlZCBieSBBdXRoLmpzLlxuICpcbiAqIFRoZSBKV1QgaXNzdWVkIGJ5IEF1dGguanMgaXMgX2VuY3J5cHRlZCBieSBkZWZhdWx0XywgdXNpbmcgdGhlIF9BMjU2Q0JDLUhTNTEyXyBhbGdvcml0aG0gKHtAbGluayBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNzUxOC5odG1sI3NlY3Rpb24tNS4yLjUgSldFfSkuXG4gKiBJdCB1c2VzIHRoZSBgQVVUSF9TRUNSRVRgIGVudmlyb25tZW50IHZhcmlhYmxlIG9yIHRoZSBwYXNzZWQgYHNlY3JldGAgcHJvcGVydHkgdG8gZGVyaXZlIGEgc3VpdGFibGUgZW5jcnlwdGlvbiBrZXkuXG4gKlxuICogOjo6aW5mbyBOb3RlXG4gKiBBdXRoLmpzIEpXVHMgYXJlIG1lYW50IHRvIGJlIHVzZWQgYnkgdGhlIHNhbWUgYXBwIHRoYXQgaXNzdWVkIHRoZW0uXG4gKiBJZiB5b3UgbmVlZCBKV1QgYXV0aGVudGljYXRpb24gZm9yIHlvdXIgdGhpcmQtcGFydHkgQVBJLCB5b3Ugc2hvdWxkIHJlbHkgb24geW91ciBJZGVudGl0eSBQcm92aWRlciBpbnN0ZWFkLlxuICogOjo6XG4gKlxuICogIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogYGBgYmFzaCBucG0yeWFyblxuICogbnBtIGluc3RhbGwgQGF1dGgvY29yZVxuICogYGBgXG4gKlxuICogWW91IGNhbiB0aGVuIGltcG9ydCB0aGlzIHN1Ym1vZHVsZSBmcm9tIGBAYXV0aC9jb3JlL2p3dGAuXG4gKlxuICogIyMgVXNhZ2VcbiAqXG4gKiA6Ojp3YXJuaW5nIFdhcm5pbmdcbiAqIFRoaXMgbW9kdWxlICp3aWxsKiBiZSByZWZhY3RvcmVkL2NoYW5nZWQuIFdlIGRvIG5vdCByZWNvbW1lbmQgcmVseWluZyBvbiBpdCByaWdodCBub3cuXG4gKiA6OjpcbiAqXG4gKlxuICogIyMgUmVzb3VyY2VzXG4gKlxuICogLSBbV2hhdCBpcyBhIEpXVCBzZXNzaW9uIHN0cmF0ZWd5XShodHRwczovL2F1dGhqcy5kZXYvY29uY2VwdHMvc2Vzc2lvbi1zdHJhdGVnaWVzI2p3dC1zZXNzaW9uKVxuICogLSBbUkZDNzUxOSAtIEpTT04gV2ViIFRva2VuIChKV1QpXShodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNzUxOSlcbiAqXG4gKiBAbW9kdWxlIGp3dFxuICovXG5pbXBvcnQgeyBoa2RmIH0gZnJvbSBcIkBwYW52YS9oa2RmXCI7XG5pbXBvcnQgeyBFbmNyeXB0SldULCBiYXNlNjR1cmwsIGNhbGN1bGF0ZUp3a1RodW1icHJpbnQsIGp3dERlY3J5cHQgfSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgZGVmYXVsdENvb2tpZXMsIFNlc3Npb25TdG9yZSB9IGZyb20gXCIuL2xpYi91dGlscy9jb29raWUuanNcIjtcbmltcG9ydCB7IE1pc3NpbmdTZWNyZXQgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSBcImNvb2tpZVwiO1xuY29uc3QgREVGQVVMVF9NQVhfQUdFID0gMzAgKiAyNCAqIDYwICogNjA7IC8vIDMwIGRheXNcbmNvbnN0IG5vdyA9ICgpID0+IChEYXRlLm5vdygpIC8gMTAwMCkgfCAwO1xuY29uc3QgYWxnID0gXCJkaXJcIjtcbmNvbnN0IGVuYyA9IFwiQTI1NkNCQy1IUzUxMlwiO1xuLyoqIElzc3VlcyBhIEpXVC4gQnkgZGVmYXVsdCwgdGhlIEpXVCBpcyBlbmNyeXB0ZWQgdXNpbmcgXCJBMjU2Q0JDLUhTNTEyXCIuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5jb2RlKHBhcmFtcykge1xuICAgIGNvbnN0IHsgdG9rZW4gPSB7fSwgc2VjcmV0LCBtYXhBZ2UgPSBERUZBVUxUX01BWF9BR0UsIHNhbHQgfSA9IHBhcmFtcztcbiAgICBjb25zdCBzZWNyZXRzID0gQXJyYXkuaXNBcnJheShzZWNyZXQpID8gc2VjcmV0IDogW3NlY3JldF07XG4gICAgY29uc3QgZW5jcnlwdGlvblNlY3JldCA9IGF3YWl0IGdldERlcml2ZWRFbmNyeXB0aW9uS2V5KGVuYywgc2VjcmV0c1swXSwgc2FsdCk7XG4gICAgY29uc3QgdGh1bWJwcmludCA9IGF3YWl0IGNhbGN1bGF0ZUp3a1RodW1icHJpbnQoeyBrdHk6IFwib2N0XCIsIGs6IGJhc2U2NHVybC5lbmNvZGUoZW5jcnlwdGlvblNlY3JldCkgfSwgYHNoYSR7ZW5jcnlwdGlvblNlY3JldC5ieXRlTGVuZ3RoIDw8IDN9YCk7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBgam9zZWAgYWxsb3dzIGFueSBvYmplY3QgYXMgcGF5bG9hZC5cbiAgICByZXR1cm4gYXdhaXQgbmV3IEVuY3J5cHRKV1QodG9rZW4pXG4gICAgICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGcsIGVuYywga2lkOiB0aHVtYnByaW50IH0pXG4gICAgICAgIC5zZXRJc3N1ZWRBdCgpXG4gICAgICAgIC5zZXRFeHBpcmF0aW9uVGltZShub3coKSArIG1heEFnZSlcbiAgICAgICAgLnNldEp0aShjcnlwdG8ucmFuZG9tVVVJRCgpKVxuICAgICAgICAuZW5jcnlwdChlbmNyeXB0aW9uU2VjcmV0KTtcbn1cbi8qKiBEZWNvZGVzIGFuIEF1dGguanMgaXNzdWVkIEpXVC4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWNvZGUocGFyYW1zKSB7XG4gICAgY29uc3QgeyB0b2tlbiwgc2VjcmV0LCBzYWx0IH0gPSBwYXJhbXM7XG4gICAgY29uc3Qgc2VjcmV0cyA9IEFycmF5LmlzQXJyYXkoc2VjcmV0KSA/IHNlY3JldCA6IFtzZWNyZXRdO1xuICAgIGlmICghdG9rZW4pXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0RGVjcnlwdCh0b2tlbiwgYXN5bmMgKHsga2lkLCBlbmMgfSkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IHNlY3JldCBvZiBzZWNyZXRzKSB7XG4gICAgICAgICAgICBjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gYXdhaXQgZ2V0RGVyaXZlZEVuY3J5cHRpb25LZXkoZW5jLCBzZWNyZXQsIHNhbHQpO1xuICAgICAgICAgICAgaWYgKGtpZCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbmNyeXB0aW9uU2VjcmV0O1xuICAgICAgICAgICAgY29uc3QgdGh1bWJwcmludCA9IGF3YWl0IGNhbGN1bGF0ZUp3a1RodW1icHJpbnQoeyBrdHk6IFwib2N0XCIsIGs6IGJhc2U2NHVybC5lbmNvZGUoZW5jcnlwdGlvblNlY3JldCkgfSwgYHNoYSR7ZW5jcnlwdGlvblNlY3JldC5ieXRlTGVuZ3RoIDw8IDN9YCk7XG4gICAgICAgICAgICBpZiAoa2lkID09PSB0aHVtYnByaW50KVxuICAgICAgICAgICAgICAgIHJldHVybiBlbmNyeXB0aW9uU2VjcmV0O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vIG1hdGNoaW5nIGRlY3J5cHRpb24gc2VjcmV0XCIpO1xuICAgIH0sIHtcbiAgICAgICAgY2xvY2tUb2xlcmFuY2U6IDE1LFxuICAgICAgICBrZXlNYW5hZ2VtZW50QWxnb3JpdGhtczogW2FsZ10sXG4gICAgICAgIGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtczogW2VuYywgXCJBMjU2R0NNXCJdLFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRva2VuKHBhcmFtcykge1xuICAgIGNvbnN0IHsgc2VjdXJlQ29va2llLCBjb29raWVOYW1lID0gZGVmYXVsdENvb2tpZXMoc2VjdXJlQ29va2llID8/IGZhbHNlKS5zZXNzaW9uVG9rZW4ubmFtZSwgZGVjb2RlOiBfZGVjb2RlID0gZGVjb2RlLCBzYWx0ID0gY29va2llTmFtZSwgc2VjcmV0LCBsb2dnZXIgPSBjb25zb2xlLCByYXcsIHJlcSwgfSA9IHBhcmFtcztcbiAgICBpZiAoIXJlcSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwYXNzIGByZXFgIHRvIEpXVCBnZXRUb2tlbigpXCIpO1xuICAgIGNvbnN0IGhlYWRlcnMgPSByZXEuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMgPyByZXEuaGVhZGVycyA6IG5ldyBIZWFkZXJzKHJlcS5oZWFkZXJzKTtcbiAgICBjb25zdCBzZXNzaW9uU3RvcmUgPSBuZXcgU2Vzc2lvblN0b3JlKHsgbmFtZTogY29va2llTmFtZSwgb3B0aW9uczogeyBzZWN1cmU6IHNlY3VyZUNvb2tpZSB9IH0sIHBhcnNlKGhlYWRlcnMuZ2V0KFwiY29va2llXCIpID8/IFwiXCIpLCBsb2dnZXIpO1xuICAgIGxldCB0b2tlbiA9IHNlc3Npb25TdG9yZS52YWx1ZTtcbiAgICBjb25zdCBhdXRob3JpemF0aW9uSGVhZGVyID0gaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpO1xuICAgIGlmICghdG9rZW4gJiYgYXV0aG9yaXphdGlvbkhlYWRlcj8uc3BsaXQoXCIgXCIpWzBdID09PSBcIkJlYXJlclwiKSB7XG4gICAgICAgIGNvbnN0IHVybEVuY29kZWRUb2tlbiA9IGF1dGhvcml6YXRpb25IZWFkZXIuc3BsaXQoXCIgXCIpWzFdO1xuICAgICAgICB0b2tlbiA9IGRlY29kZVVSSUNvbXBvbmVudCh1cmxFbmNvZGVkVG9rZW4pO1xuICAgIH1cbiAgICBpZiAoIXRva2VuKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAocmF3KVxuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgaWYgKCFzZWNyZXQpXG4gICAgICAgIHRocm93IG5ldyBNaXNzaW5nU2VjcmV0KFwiTXVzdCBwYXNzIGBzZWNyZXRgIGlmIG5vdCBzZXQgdG8gSldUIGdldFRva2VuKClcIik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IF9kZWNvZGUoeyB0b2tlbiwgc2VjcmV0LCBzYWx0IH0pO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGdldERlcml2ZWRFbmNyeXB0aW9uS2V5KGVuYywga2V5TWF0ZXJpYWwsIHNhbHQpIHtcbiAgICBsZXQgbGVuZ3RoO1xuICAgIHN3aXRjaCAoZW5jKSB7XG4gICAgICAgIGNhc2UgXCJBMjU2Q0JDLUhTNTEyXCI6XG4gICAgICAgICAgICBsZW5ndGggPSA2NDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQTI1NkdDTVwiOlxuICAgICAgICAgICAgbGVuZ3RoID0gMzI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIEpXVCBDb250ZW50IEVuY3J5cHRpb24gQWxnb3JpdGhtXCIpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgaGtkZihcInNoYTI1NlwiLCBrZXlNYXRlcmlhbCwgc2FsdCwgYEF1dGguanMgR2VuZXJhdGVkIEVuY3J5cHRpb24gS2V5ICgke3NhbHR9KWAsIGxlbmd0aCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/jwt.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/jwt.js":
/*!****************************************!*\
  !*** ./node_modules/@auth/core/jwt.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   getToken: () => (/* binding */ getToken)\n/* harmony export */ });\n/* harmony import */ var _panva_hkdf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @panva/hkdf */ \"(rsc)/./node_modules/@panva/hkdf/dist/node/esm/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwk/thumbprint.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/util/base64url.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/decrypt.js\");\n/* harmony import */ var _lib_utils_cookie_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/utils/cookie.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/cookie.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/index.js\");\n/**\n *\n *\n * This module contains functions and types\n * to encode and decode {@link https://authjs.dev/concepts/session-strategies#jwt-session JWT}s\n * issued and used by Auth.js.\n *\n * The JWT issued by Auth.js is _encrypted by default_, using the _A256CBC-HS512_ algorithm ({@link https://www.rfc-editor.org/rfc/rfc7518.html#section-5.2.5 JWE}).\n * It uses the `AUTH_SECRET` environment variable or the passed `secret` property to derive a suitable encryption key.\n *\n * :::info Note\n * Auth.js JWTs are meant to be used by the same app that issued them.\n * If you need JWT authentication for your third-party API, you should rely on your Identity Provider instead.\n * :::\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/core\n * ```\n *\n * You can then import this submodule from `@auth/core/jwt`.\n *\n * ## Usage\n *\n * :::warning Warning\n * This module *will* be refactored/changed. We do not recommend relying on it right now.\n * :::\n *\n *\n * ## Resources\n *\n * - [What is a JWT session strategy](https://authjs.dev/concepts/session-strategies#jwt-session)\n * - [RFC7519 - JSON Web Token (JWT)](https://www.rfc-editor.org/rfc/rfc7519)\n *\n * @module jwt\n */\n\n\n\n\n\nconst DEFAULT_MAX_AGE = 30 * 24 * 60 * 60; // 30 days\nconst now = () => (Date.now() / 1000) | 0;\nconst alg = \"dir\";\nconst enc = \"A256CBC-HS512\";\n/** Issues a JWT. By default, the JWT is encrypted using \"A256CBC-HS512\". */\nasync function encode(params) {\n    const { token = {}, secret, maxAge = DEFAULT_MAX_AGE, salt } = params;\n    const secrets = Array.isArray(secret) ? secret : [secret];\n    const encryptionSecret = await getDerivedEncryptionKey(enc, secrets[0], salt);\n    const thumbprint = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.calculateJwkThumbprint)({ kty: \"oct\", k: jose__WEBPACK_IMPORTED_MODULE_4__.encode(encryptionSecret) }, `sha${encryptionSecret.byteLength << 3}`);\n    // @ts-expect-error `jose` allows any object as payload.\n    return await new jose__WEBPACK_IMPORTED_MODULE_5__.EncryptJWT(token)\n        .setProtectedHeader({ alg, enc, kid: thumbprint })\n        .setIssuedAt()\n        .setExpirationTime(now() + maxAge)\n        .setJti(crypto.randomUUID())\n        .encrypt(encryptionSecret);\n}\n/** Decodes an Auth.js issued JWT. */\nasync function decode(params) {\n    const { token, secret, salt } = params;\n    const secrets = Array.isArray(secret) ? secret : [secret];\n    if (!token)\n        return null;\n    const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_6__.jwtDecrypt)(token, async ({ kid, enc }) => {\n        for (const secret of secrets) {\n            const encryptionSecret = await getDerivedEncryptionKey(enc, secret, salt);\n            if (kid === undefined)\n                return encryptionSecret;\n            const thumbprint = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.calculateJwkThumbprint)({ kty: \"oct\", k: jose__WEBPACK_IMPORTED_MODULE_4__.encode(encryptionSecret) }, `sha${encryptionSecret.byteLength << 3}`);\n            if (kid === thumbprint)\n                return encryptionSecret;\n        }\n        throw new Error(\"no matching decryption secret\");\n    }, {\n        clockTolerance: 15,\n        keyManagementAlgorithms: [alg],\n        contentEncryptionAlgorithms: [enc, \"A256GCM\"],\n    });\n    return payload;\n}\nasync function getToken(params) {\n    const { secureCookie, cookieName = (0,_lib_utils_cookie_js__WEBPACK_IMPORTED_MODULE_0__.defaultCookies)(secureCookie ?? false).sessionToken.name, decode: _decode = decode, salt = cookieName, secret, logger = console, raw, req, } = params;\n    if (!req)\n        throw new Error(\"Must pass `req` to JWT getToken()\");\n    const headers = req.headers instanceof Headers ? req.headers : new Headers(req.headers);\n    const sessionStore = new _lib_utils_cookie_js__WEBPACK_IMPORTED_MODULE_0__.SessionStore({ name: cookieName, options: { secure: secureCookie } }, (0,cookie__WEBPACK_IMPORTED_MODULE_2__.parse)(headers.get(\"cookie\") ?? \"\"), logger);\n    let token = sessionStore.value;\n    const authorizationHeader = headers.get(\"authorization\");\n    if (!token && authorizationHeader?.split(\" \")[0] === \"Bearer\") {\n        const urlEncodedToken = authorizationHeader.split(\" \")[1];\n        token = decodeURIComponent(urlEncodedToken);\n    }\n    if (!token)\n        return null;\n    if (raw)\n        return token;\n    if (!secret)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingSecret(\"Must pass `secret` if not set to JWT getToken()\");\n    try {\n        return await _decode({ token, secret, salt });\n    }\n    catch {\n        return null;\n    }\n}\nasync function getDerivedEncryptionKey(enc, keyMaterial, salt) {\n    let length;\n    switch (enc) {\n        case \"A256CBC-HS512\":\n            length = 64;\n            break;\n        case \"A256GCM\":\n            length = 32;\n            break;\n        default:\n            throw new Error(\"Unsupported JWT Content Encryption Algorithm\");\n    }\n    return await (0,_panva_hkdf__WEBPACK_IMPORTED_MODULE_7__.hkdf)(\"sha256\", keyMaterial, salt, `Auth.js Generated Encryption Key (${salt})`, length);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9qd3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxRUFBcUU7QUFDOUY7QUFDQTtBQUNBLDhGQUE4RixvRUFBb0U7QUFDbEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNtQztBQUM4QztBQUNaO0FBQ3pCO0FBQ2I7QUFDL0IsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLFVBQVUsMkNBQTJDO0FBQ2pFO0FBQ0E7QUFDQSw2QkFBNkIsNERBQXNCLEdBQUcsZUFBZSx3Q0FBZ0Isb0JBQW9CLFFBQVEsaUNBQWlDO0FBQ2xKO0FBQ0EscUJBQXFCLDRDQUFVO0FBQy9CLDhCQUE4QiwyQkFBMkI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLHNCQUFzQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVUsUUFBUSxnREFBVSxpQkFBaUIsVUFBVTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw0REFBc0IsR0FBRyxlQUFlLHdDQUFnQixvQkFBb0IsUUFBUSxpQ0FBaUM7QUFDMUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQLFlBQVksMkJBQTJCLG9FQUFjLDhIQUE4SDtBQUNuTDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOERBQVksR0FBRyw2QkFBNkIsd0JBQXdCLEVBQUUsNkNBQUs7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxREFBYTtBQUMvQjtBQUNBLCtCQUErQixxQkFBcUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpREFBSSxtRUFBbUUsS0FBSztBQUM3RiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxqd3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICpcbiAqIFRoaXMgbW9kdWxlIGNvbnRhaW5zIGZ1bmN0aW9ucyBhbmQgdHlwZXNcbiAqIHRvIGVuY29kZSBhbmQgZGVjb2RlIHtAbGluayBodHRwczovL2F1dGhqcy5kZXYvY29uY2VwdHMvc2Vzc2lvbi1zdHJhdGVnaWVzI2p3dC1zZXNzaW9uIEpXVH1zXG4gKiBpc3N1ZWQgYW5kIHVzZWQgYnkgQXV0aC5qcy5cbiAqXG4gKiBUaGUgSldUIGlzc3VlZCBieSBBdXRoLmpzIGlzIF9lbmNyeXB0ZWQgYnkgZGVmYXVsdF8sIHVzaW5nIHRoZSBfQTI1NkNCQy1IUzUxMl8gYWxnb3JpdGhtICh7QGxpbmsgaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzc1MTguaHRtbCNzZWN0aW9uLTUuMi41IEpXRX0pLlxuICogSXQgdXNlcyB0aGUgYEFVVEhfU0VDUkVUYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBvciB0aGUgcGFzc2VkIGBzZWNyZXRgIHByb3BlcnR5IHRvIGRlcml2ZSBhIHN1aXRhYmxlIGVuY3J5cHRpb24ga2V5LlxuICpcbiAqIDo6OmluZm8gTm90ZVxuICogQXV0aC5qcyBKV1RzIGFyZSBtZWFudCB0byBiZSB1c2VkIGJ5IHRoZSBzYW1lIGFwcCB0aGF0IGlzc3VlZCB0aGVtLlxuICogSWYgeW91IG5lZWQgSldUIGF1dGhlbnRpY2F0aW9uIGZvciB5b3VyIHRoaXJkLXBhcnR5IEFQSSwgeW91IHNob3VsZCByZWx5IG9uIHlvdXIgSWRlbnRpdHkgUHJvdmlkZXIgaW5zdGVhZC5cbiAqIDo6OlxuICpcbiAqICMjIEluc3RhbGxhdGlvblxuICpcbiAqIGBgYGJhc2ggbnBtMnlhcm5cbiAqIG5wbSBpbnN0YWxsIEBhdXRoL2NvcmVcbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gdGhlbiBpbXBvcnQgdGhpcyBzdWJtb2R1bGUgZnJvbSBgQGF1dGgvY29yZS9qd3RgLlxuICpcbiAqICMjIFVzYWdlXG4gKlxuICogOjo6d2FybmluZyBXYXJuaW5nXG4gKiBUaGlzIG1vZHVsZSAqd2lsbCogYmUgcmVmYWN0b3JlZC9jaGFuZ2VkLiBXZSBkbyBub3QgcmVjb21tZW5kIHJlbHlpbmcgb24gaXQgcmlnaHQgbm93LlxuICogOjo6XG4gKlxuICpcbiAqICMjIFJlc291cmNlc1xuICpcbiAqIC0gW1doYXQgaXMgYSBKV1Qgc2Vzc2lvbiBzdHJhdGVneV0oaHR0cHM6Ly9hdXRoanMuZGV2L2NvbmNlcHRzL3Nlc3Npb24tc3RyYXRlZ2llcyNqd3Qtc2Vzc2lvbilcbiAqIC0gW1JGQzc1MTkgLSBKU09OIFdlYiBUb2tlbiAoSldUKV0oaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzc1MTkpXG4gKlxuICogQG1vZHVsZSBqd3RcbiAqL1xuaW1wb3J0IHsgaGtkZiB9IGZyb20gXCJAcGFudmEvaGtkZlwiO1xuaW1wb3J0IHsgRW5jcnlwdEpXVCwgYmFzZTY0dXJsLCBjYWxjdWxhdGVKd2tUaHVtYnByaW50LCBqd3REZWNyeXB0IH0gZnJvbSBcImpvc2VcIjtcbmltcG9ydCB7IGRlZmF1bHRDb29raWVzLCBTZXNzaW9uU3RvcmUgfSBmcm9tIFwiLi9saWIvdXRpbHMvY29va2llLmpzXCI7XG5pbXBvcnQgeyBNaXNzaW5nU2VjcmV0IH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gXCJjb29raWVcIjtcbmNvbnN0IERFRkFVTFRfTUFYX0FHRSA9IDMwICogMjQgKiA2MCAqIDYwOyAvLyAzMCBkYXlzXG5jb25zdCBub3cgPSAoKSA9PiAoRGF0ZS5ub3coKSAvIDEwMDApIHwgMDtcbmNvbnN0IGFsZyA9IFwiZGlyXCI7XG5jb25zdCBlbmMgPSBcIkEyNTZDQkMtSFM1MTJcIjtcbi8qKiBJc3N1ZXMgYSBKV1QuIEJ5IGRlZmF1bHQsIHRoZSBKV1QgaXMgZW5jcnlwdGVkIHVzaW5nIFwiQTI1NkNCQy1IUzUxMlwiLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuY29kZShwYXJhbXMpIHtcbiAgICBjb25zdCB7IHRva2VuID0ge30sIHNlY3JldCwgbWF4QWdlID0gREVGQVVMVF9NQVhfQUdFLCBzYWx0IH0gPSBwYXJhbXM7XG4gICAgY29uc3Qgc2VjcmV0cyA9IEFycmF5LmlzQXJyYXkoc2VjcmV0KSA/IHNlY3JldCA6IFtzZWNyZXRdO1xuICAgIGNvbnN0IGVuY3J5cHRpb25TZWNyZXQgPSBhd2FpdCBnZXREZXJpdmVkRW5jcnlwdGlvbktleShlbmMsIHNlY3JldHNbMF0sIHNhbHQpO1xuICAgIGNvbnN0IHRodW1icHJpbnQgPSBhd2FpdCBjYWxjdWxhdGVKd2tUaHVtYnByaW50KHsga3R5OiBcIm9jdFwiLCBrOiBiYXNlNjR1cmwuZW5jb2RlKGVuY3J5cHRpb25TZWNyZXQpIH0sIGBzaGEke2VuY3J5cHRpb25TZWNyZXQuYnl0ZUxlbmd0aCA8PCAzfWApO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYGpvc2VgIGFsbG93cyBhbnkgb2JqZWN0IGFzIHBheWxvYWQuXG4gICAgcmV0dXJuIGF3YWl0IG5ldyBFbmNyeXB0SldUKHRva2VuKVxuICAgICAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnLCBlbmMsIGtpZDogdGh1bWJwcmludCB9KVxuICAgICAgICAuc2V0SXNzdWVkQXQoKVxuICAgICAgICAuc2V0RXhwaXJhdGlvblRpbWUobm93KCkgKyBtYXhBZ2UpXG4gICAgICAgIC5zZXRKdGkoY3J5cHRvLnJhbmRvbVVVSUQoKSlcbiAgICAgICAgLmVuY3J5cHQoZW5jcnlwdGlvblNlY3JldCk7XG59XG4vKiogRGVjb2RlcyBhbiBBdXRoLmpzIGlzc3VlZCBKV1QuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjb2RlKHBhcmFtcykge1xuICAgIGNvbnN0IHsgdG9rZW4sIHNlY3JldCwgc2FsdCB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHNlY3JldHMgPSBBcnJheS5pc0FycmF5KHNlY3JldCkgPyBzZWNyZXQgOiBbc2VjcmV0XTtcbiAgICBpZiAoIXRva2VuKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCB7IHBheWxvYWQgfSA9IGF3YWl0IGp3dERlY3J5cHQodG9rZW4sIGFzeW5jICh7IGtpZCwgZW5jIH0pID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBzZWNyZXQgb2Ygc2VjcmV0cykge1xuICAgICAgICAgICAgY29uc3QgZW5jcnlwdGlvblNlY3JldCA9IGF3YWl0IGdldERlcml2ZWRFbmNyeXB0aW9uS2V5KGVuYywgc2VjcmV0LCBzYWx0KTtcbiAgICAgICAgICAgIGlmIChraWQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW5jcnlwdGlvblNlY3JldDtcbiAgICAgICAgICAgIGNvbnN0IHRodW1icHJpbnQgPSBhd2FpdCBjYWxjdWxhdGVKd2tUaHVtYnByaW50KHsga3R5OiBcIm9jdFwiLCBrOiBiYXNlNjR1cmwuZW5jb2RlKGVuY3J5cHRpb25TZWNyZXQpIH0sIGBzaGEke2VuY3J5cHRpb25TZWNyZXQuYnl0ZUxlbmd0aCA8PCAzfWApO1xuICAgICAgICAgICAgaWYgKGtpZCA9PT0gdGh1bWJwcmludClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW5jcnlwdGlvblNlY3JldDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBtYXRjaGluZyBkZWNyeXB0aW9uIHNlY3JldFwiKTtcbiAgICB9LCB7XG4gICAgICAgIGNsb2NrVG9sZXJhbmNlOiAxNSxcbiAgICAgICAga2V5TWFuYWdlbWVudEFsZ29yaXRobXM6IFthbGddLFxuICAgICAgICBjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobXM6IFtlbmMsIFwiQTI1NkdDTVwiXSxcbiAgICB9KTtcbiAgICByZXR1cm4gcGF5bG9hZDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb2tlbihwYXJhbXMpIHtcbiAgICBjb25zdCB7IHNlY3VyZUNvb2tpZSwgY29va2llTmFtZSA9IGRlZmF1bHRDb29raWVzKHNlY3VyZUNvb2tpZSA/PyBmYWxzZSkuc2Vzc2lvblRva2VuLm5hbWUsIGRlY29kZTogX2RlY29kZSA9IGRlY29kZSwgc2FsdCA9IGNvb2tpZU5hbWUsIHNlY3JldCwgbG9nZ2VyID0gY29uc29sZSwgcmF3LCByZXEsIH0gPSBwYXJhbXM7XG4gICAgaWYgKCFyZXEpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcGFzcyBgcmVxYCB0byBKV1QgZ2V0VG9rZW4oKVwiKTtcbiAgICBjb25zdCBoZWFkZXJzID0gcmVxLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gcmVxLmhlYWRlcnMgOiBuZXcgSGVhZGVycyhyZXEuaGVhZGVycyk7XG4gICAgY29uc3Qgc2Vzc2lvblN0b3JlID0gbmV3IFNlc3Npb25TdG9yZSh7IG5hbWU6IGNvb2tpZU5hbWUsIG9wdGlvbnM6IHsgc2VjdXJlOiBzZWN1cmVDb29raWUgfSB9LCBwYXJzZShoZWFkZXJzLmdldChcImNvb2tpZVwiKSA/PyBcIlwiKSwgbG9nZ2VyKTtcbiAgICBsZXQgdG9rZW4gPSBzZXNzaW9uU3RvcmUudmFsdWU7XG4gICAgY29uc3QgYXV0aG9yaXphdGlvbkhlYWRlciA9IGhlYWRlcnMuZ2V0KFwiYXV0aG9yaXphdGlvblwiKTtcbiAgICBpZiAoIXRva2VuICYmIGF1dGhvcml6YXRpb25IZWFkZXI/LnNwbGl0KFwiIFwiKVswXSA9PT0gXCJCZWFyZXJcIikge1xuICAgICAgICBjb25zdCB1cmxFbmNvZGVkVG9rZW4gPSBhdXRob3JpemF0aW9uSGVhZGVyLnNwbGl0KFwiIFwiKVsxXTtcbiAgICAgICAgdG9rZW4gPSBkZWNvZGVVUklDb21wb25lbnQodXJsRW5jb2RlZFRva2VuKTtcbiAgICB9XG4gICAgaWYgKCF0b2tlbilcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKHJhdylcbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgIGlmICghc2VjcmV0KVxuICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ1NlY3JldChcIk11c3QgcGFzcyBgc2VjcmV0YCBpZiBub3Qgc2V0IHRvIEpXVCBnZXRUb2tlbigpXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBfZGVjb2RlKHsgdG9rZW4sIHNlY3JldCwgc2FsdCB9KTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXREZXJpdmVkRW5jcnlwdGlvbktleShlbmMsIGtleU1hdGVyaWFsLCBzYWx0KSB7XG4gICAgbGV0IGxlbmd0aDtcbiAgICBzd2l0Y2ggKGVuYykge1xuICAgICAgICBjYXNlIFwiQTI1NkNCQy1IUzUxMlwiOlxuICAgICAgICAgICAgbGVuZ3RoID0gNjQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkEyNTZHQ01cIjpcbiAgICAgICAgICAgIGxlbmd0aCA9IDMyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBKV1QgQ29udGVudCBFbmNyeXB0aW9uIEFsZ29yaXRobVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IGhrZGYoXCJzaGEyNTZcIiwga2V5TWF0ZXJpYWwsIHNhbHQsIGBBdXRoLmpzIEdlbmVyYXRlZCBFbmNyeXB0aW9uIEtleSAoJHtzYWx0fSlgLCBsZW5ndGgpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/jwt.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/callback/handle-login.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/handle-login.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleLoginOrRegister: () => (/* binding */ handleLoginOrRegister)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_date_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/date.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/date.js\");\n\n\n/**\n * This function handles the complex flow of signing users in, and either creating,\n * linking (or not linking) accounts depending on if the user is currently logged\n * in, if they have account already and the authentication mechanism they are using.\n *\n * It prevents insecure behaviour, such as linking OAuth accounts unless a user is\n * signed in and authenticated with an existing valid account.\n *\n * All verification (e.g. OAuth flows or email address verification flows) are\n * done prior to this handler being called to avoid additional complexity in this\n * handler.\n */\nasync function handleLoginOrRegister(sessionToken, _profile, _account, options) {\n    // Input validation\n    if (!_account?.providerAccountId || !_account.type)\n        throw new Error(\"Missing or invalid provider account\");\n    if (![\"email\", \"oauth\", \"oidc\", \"webauthn\"].includes(_account.type))\n        throw new Error(\"Provider not supported\");\n    const { adapter, jwt, events, session: { strategy: sessionStrategy, generateSessionToken }, } = options;\n    // If no adapter is configured then we don't have a database and cannot\n    // persist data; in this mode we just return a dummy session object.\n    if (!adapter) {\n        return { user: _profile, account: _account };\n    }\n    const profile = _profile;\n    let account = _account;\n    const { createUser, updateUser, getUser, getUserByAccount, getUserByEmail, linkAccount, createSession, getSessionAndUser, deleteSession, } = adapter;\n    let session = null;\n    let user = null;\n    let isNewUser = false;\n    const useJwtSession = sessionStrategy === \"jwt\";\n    if (sessionToken) {\n        if (useJwtSession) {\n            try {\n                const salt = options.cookies.sessionToken.name;\n                session = await jwt.decode({ ...jwt, token: sessionToken, salt });\n                if (session && \"sub\" in session && session.sub) {\n                    user = await getUser(session.sub);\n                }\n            }\n            catch {\n                // If session can't be verified, treat as no session\n            }\n        }\n        else {\n            const userAndSession = await getSessionAndUser(sessionToken);\n            if (userAndSession) {\n                session = userAndSession.session;\n                user = userAndSession.user;\n            }\n        }\n    }\n    if (account.type === \"email\") {\n        // If signing in with an email, check if an account with the same email address exists already\n        const userByEmail = await getUserByEmail(profile.email);\n        if (userByEmail) {\n            // If they are not already signed in as the same user, this flow will\n            // sign them out of the current session and sign them in as the new user\n            if (user?.id !== userByEmail.id && !useJwtSession && sessionToken) {\n                // Delete existing session if they are currently signed in as another user.\n                // This will switch user accounts for the session in cases where the user was\n                // already logged in with a different account.\n                await deleteSession(sessionToken);\n            }\n            // Update emailVerified property on the user object\n            user = await updateUser({\n                id: userByEmail.id,\n                emailVerified: new Date(),\n            });\n            await events.updateUser?.({ user });\n        }\n        else {\n            // Create user account if there isn't one for the email address already\n            user = await createUser({ ...profile, emailVerified: new Date() });\n            await events.createUser?.({ user });\n            isNewUser = true;\n        }\n        // Create new session\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: user.id,\n                expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n            });\n        return { session, user, isNewUser };\n    }\n    else if (account.type === \"webauthn\") {\n        // Check if the account exists\n        const userByAccount = await getUserByAccount({\n            providerAccountId: account.providerAccountId,\n            provider: account.provider,\n        });\n        if (userByAccount) {\n            if (user) {\n                // If the user is already signed in with this account, we don't need to do anything\n                if (userByAccount.id === user.id) {\n                    const currentAccount = { ...account, userId: user.id };\n                    return { session, user, isNewUser, account: currentAccount };\n                }\n                // If the user is currently signed in, but the new account they are signing in\n                // with is already associated with another user, then we cannot link them\n                // and need to return an error.\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AccountNotLinked(\"The account is already associated with another user\", { provider: account.provider });\n            }\n            // If there is no active session, but the account being signed in with is already\n            // associated with a valid user then create session to sign the user in.\n            session = useJwtSession\n                ? {}\n                : await createSession({\n                    sessionToken: generateSessionToken(),\n                    userId: userByAccount.id,\n                    expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n                });\n            const currentAccount = {\n                ...account,\n                userId: userByAccount.id,\n            };\n            return {\n                session,\n                user: userByAccount,\n                isNewUser,\n                account: currentAccount,\n            };\n        }\n        else {\n            // If the account doesn't exist, we'll create it\n            if (user) {\n                // If the user is already signed in and the account isn't already associated\n                // with another user account then we can go ahead and link the accounts safely.\n                await linkAccount({ ...account, userId: user.id });\n                await events.linkAccount?.({ user, account, profile });\n                // As they are already signed in, we don't need to do anything after linking them\n                const currentAccount = { ...account, userId: user.id };\n                return { session, user, isNewUser, account: currentAccount };\n            }\n            // If the user is not signed in and it looks like a new account then we\n            // check there also isn't an user account already associated with the same\n            // email address as the one in the request.\n            const userByEmail = profile.email\n                ? await getUserByEmail(profile.email)\n                : null;\n            if (userByEmail) {\n                // We don't trust user-provided email addresses, so we don't want to link accounts\n                // if the email address associated with the new account is already associated with\n                // an existing account.\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AccountNotLinked(\"Another account already exists with the same e-mail address\", { provider: account.provider });\n            }\n            else {\n                // If the current user is not logged in and the profile isn't linked to any user\n                // accounts (by email or provider account id)...\n                //\n                // If no account matching the same [provider].id or .email exists, we can\n                // create a new account for the user, link it to the OAuth account and\n                // create a new session for them so they are signed in with it.\n                user = await createUser({ ...profile });\n            }\n            await events.createUser?.({ user });\n            await linkAccount({ ...account, userId: user.id });\n            await events.linkAccount?.({ user, account, profile });\n            session = useJwtSession\n                ? {}\n                : await createSession({\n                    sessionToken: generateSessionToken(),\n                    userId: user.id,\n                    expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n                });\n            const currentAccount = { ...account, userId: user.id };\n            return { session, user, isNewUser: true, account: currentAccount };\n        }\n    }\n    // If signing in with OAuth account, check to see if the account exists already\n    const userByAccount = await getUserByAccount({\n        providerAccountId: account.providerAccountId,\n        provider: account.provider,\n    });\n    if (userByAccount) {\n        if (user) {\n            // If the user is already signed in with this account, we don't need to do anything\n            if (userByAccount.id === user.id) {\n                return { session, user, isNewUser };\n            }\n            // If the user is currently signed in, but the new account they are signing in\n            // with is already associated with another user, then we cannot link them\n            // and need to return an error.\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.OAuthAccountNotLinked(\"The account is already associated with another user\", { provider: account.provider });\n        }\n        // If there is no active session, but the account being signed in with is already\n        // associated with a valid user then create session to sign the user in.\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: userByAccount.id,\n                expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n            });\n        return { session, user: userByAccount, isNewUser };\n    }\n    else {\n        const { provider: p } = options;\n        const { type, provider, providerAccountId, userId, ...tokenSet } = account;\n        const defaults = { providerAccountId, provider, type, userId };\n        account = Object.assign(p.account(tokenSet) ?? {}, defaults);\n        if (user) {\n            // If the user is already signed in and the OAuth account isn't already associated\n            // with another user account then we can go ahead and link the accounts safely.\n            await linkAccount({ ...account, userId: user.id });\n            await events.linkAccount?.({ user, account, profile });\n            // As they are already signed in, we don't need to do anything after linking them\n            return { session, user, isNewUser };\n        }\n        // If the user is not signed in and it looks like a new OAuth account then we\n        // check there also isn't an user account already associated with the same\n        // email address as the one in the OAuth profile.\n        //\n        // This step is often overlooked in OAuth implementations, but covers the following cases:\n        //\n        // 1. It makes it harder for someone to accidentally create two accounts.\n        //    e.g. by signin in with email, then again with an oauth account connected to the same email.\n        // 2. It makes it harder to hijack a user account using a 3rd party OAuth account.\n        //    e.g. by creating an oauth account then changing the email address associated with it.\n        //\n        // It's quite common for services to automatically link accounts in this case, but it's\n        // better practice to require the user to sign in *then* link accounts to be sure\n        // someone is not exploiting a problem with a third party OAuth service.\n        //\n        // OAuth providers should require email address verification to prevent this, but in\n        // practice that is not always the case; this helps protect against that.\n        const userByEmail = profile.email\n            ? await getUserByEmail(profile.email)\n            : null;\n        if (userByEmail) {\n            const provider = options.provider;\n            if (provider?.allowDangerousEmailAccountLinking) {\n                // If you trust the oauth provider to correctly verify email addresses, you can opt-in to\n                // account linking even when the user is not signed-in.\n                user = userByEmail;\n                isNewUser = false;\n            }\n            else {\n                // We end up here when we don't have an account with the same [provider].id *BUT*\n                // we do already have an account with the same email address as the one in the\n                // OAuth profile the user has just tried to sign in with.\n                //\n                // We don't want to have two accounts with the same email address, and we don't\n                // want to link them in case it's not safe to do so, so instead we prompt the user\n                // to sign in via email to verify their identity and then link the accounts.\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.OAuthAccountNotLinked(\"Another account already exists with the same e-mail address\", { provider: account.provider });\n            }\n        }\n        else {\n            // If the current user is not logged in and the profile isn't linked to any user\n            // accounts (by email or provider account id)...\n            //\n            // If no account matching the same [provider].id or .email exists, we can\n            // create a new account for the user, link it to the OAuth account and\n            // create a new session for them so they are signed in with it.\n            user = await createUser({ ...profile, emailVerified: null });\n            isNewUser = true;\n        }\n        await events.createUser?.({ user });\n        await linkAccount({ ...account, userId: user.id });\n        await events.linkAccount?.({ user, account, profile });\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: user.id,\n                expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n            });\n        return { session, user, isNewUser };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL2NhbGxiYWNrL2hhbmRsZS1sb2dpbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkU7QUFDOUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQ0FBaUMsaURBQWlELElBQUk7QUFDbEc7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtSUFBbUk7QUFDL0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxtQ0FBbUM7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYix3Q0FBd0MsTUFBTTtBQUM5QztBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsdUNBQXVDO0FBQzdFLHdDQUF3QyxNQUFNO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsd0RBQVE7QUFDakMsYUFBYTtBQUNiLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0MsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdEQUFnQiwwREFBMEQsNEJBQTRCO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0RBQVE7QUFDckMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDZCQUE2QjtBQUNqRSw2Q0FBNkMsd0JBQXdCO0FBQ3JFO0FBQ0EseUNBQXlDO0FBQ3pDLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdEQUFnQixrRUFBa0UsNEJBQTRCO0FBQ3hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsWUFBWTtBQUN0RDtBQUNBLHdDQUF3QyxNQUFNO0FBQzlDLGdDQUFnQyw2QkFBNkI7QUFDN0QseUNBQXlDLHdCQUF3QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdEQUFRO0FBQ3JDLGlCQUFpQjtBQUNqQixxQ0FBcUM7QUFDckMscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2REFBcUIsMERBQTBELDRCQUE0QjtBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdEQUFRO0FBQ2pDLGFBQWE7QUFDYixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCLGdCQUFnQix5REFBeUQ7QUFDekUsMkJBQTJCO0FBQzNCLHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNkJBQTZCO0FBQzdELHlDQUF5Qyx3QkFBd0I7QUFDakU7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2REFBcUIsa0VBQWtFLDRCQUE0QjtBQUM3STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsaUNBQWlDO0FBQ3ZFO0FBQ0E7QUFDQSxvQ0FBb0MsTUFBTTtBQUMxQyw0QkFBNEIsNkJBQTZCO0FBQ3pELHFDQUFxQyx3QkFBd0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix3REFBUTtBQUNqQyxhQUFhO0FBQ2IsaUJBQWlCO0FBQ2pCO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxjYWxsYmFja1xcaGFuZGxlLWxvZ2luLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjY291bnROb3RMaW5rZWQsIE9BdXRoQWNjb3VudE5vdExpbmtlZCB9IGZyb20gXCIuLi8uLi8uLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGZyb21EYXRlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RhdGUuanNcIjtcbi8qKlxuICogVGhpcyBmdW5jdGlvbiBoYW5kbGVzIHRoZSBjb21wbGV4IGZsb3cgb2Ygc2lnbmluZyB1c2VycyBpbiwgYW5kIGVpdGhlciBjcmVhdGluZyxcbiAqIGxpbmtpbmcgKG9yIG5vdCBsaW5raW5nKSBhY2NvdW50cyBkZXBlbmRpbmcgb24gaWYgdGhlIHVzZXIgaXMgY3VycmVudGx5IGxvZ2dlZFxuICogaW4sIGlmIHRoZXkgaGF2ZSBhY2NvdW50IGFscmVhZHkgYW5kIHRoZSBhdXRoZW50aWNhdGlvbiBtZWNoYW5pc20gdGhleSBhcmUgdXNpbmcuXG4gKlxuICogSXQgcHJldmVudHMgaW5zZWN1cmUgYmVoYXZpb3VyLCBzdWNoIGFzIGxpbmtpbmcgT0F1dGggYWNjb3VudHMgdW5sZXNzIGEgdXNlciBpc1xuICogc2lnbmVkIGluIGFuZCBhdXRoZW50aWNhdGVkIHdpdGggYW4gZXhpc3RpbmcgdmFsaWQgYWNjb3VudC5cbiAqXG4gKiBBbGwgdmVyaWZpY2F0aW9uIChlLmcuIE9BdXRoIGZsb3dzIG9yIGVtYWlsIGFkZHJlc3MgdmVyaWZpY2F0aW9uIGZsb3dzKSBhcmVcbiAqIGRvbmUgcHJpb3IgdG8gdGhpcyBoYW5kbGVyIGJlaW5nIGNhbGxlZCB0byBhdm9pZCBhZGRpdGlvbmFsIGNvbXBsZXhpdHkgaW4gdGhpc1xuICogaGFuZGxlci5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUxvZ2luT3JSZWdpc3RlcihzZXNzaW9uVG9rZW4sIF9wcm9maWxlLCBfYWNjb3VudCwgb3B0aW9ucykge1xuICAgIC8vIElucHV0IHZhbGlkYXRpb25cbiAgICBpZiAoIV9hY2NvdW50Py5wcm92aWRlckFjY291bnRJZCB8fCAhX2FjY291bnQudHlwZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBvciBpbnZhbGlkIHByb3ZpZGVyIGFjY291bnRcIik7XG4gICAgaWYgKCFbXCJlbWFpbFwiLCBcIm9hdXRoXCIsIFwib2lkY1wiLCBcIndlYmF1dGhuXCJdLmluY2x1ZGVzKF9hY2NvdW50LnR5cGUpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm92aWRlciBub3Qgc3VwcG9ydGVkXCIpO1xuICAgIGNvbnN0IHsgYWRhcHRlciwgand0LCBldmVudHMsIHNlc3Npb246IHsgc3RyYXRlZ3k6IHNlc3Npb25TdHJhdGVneSwgZ2VuZXJhdGVTZXNzaW9uVG9rZW4gfSwgfSA9IG9wdGlvbnM7XG4gICAgLy8gSWYgbm8gYWRhcHRlciBpcyBjb25maWd1cmVkIHRoZW4gd2UgZG9uJ3QgaGF2ZSBhIGRhdGFiYXNlIGFuZCBjYW5ub3RcbiAgICAvLyBwZXJzaXN0IGRhdGE7IGluIHRoaXMgbW9kZSB3ZSBqdXN0IHJldHVybiBhIGR1bW15IHNlc3Npb24gb2JqZWN0LlxuICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICByZXR1cm4geyB1c2VyOiBfcHJvZmlsZSwgYWNjb3VudDogX2FjY291bnQgfTtcbiAgICB9XG4gICAgY29uc3QgcHJvZmlsZSA9IF9wcm9maWxlO1xuICAgIGxldCBhY2NvdW50ID0gX2FjY291bnQ7XG4gICAgY29uc3QgeyBjcmVhdGVVc2VyLCB1cGRhdGVVc2VyLCBnZXRVc2VyLCBnZXRVc2VyQnlBY2NvdW50LCBnZXRVc2VyQnlFbWFpbCwgbGlua0FjY291bnQsIGNyZWF0ZVNlc3Npb24sIGdldFNlc3Npb25BbmRVc2VyLCBkZWxldGVTZXNzaW9uLCB9ID0gYWRhcHRlcjtcbiAgICBsZXQgc2Vzc2lvbiA9IG51bGw7XG4gICAgbGV0IHVzZXIgPSBudWxsO1xuICAgIGxldCBpc05ld1VzZXIgPSBmYWxzZTtcbiAgICBjb25zdCB1c2VKd3RTZXNzaW9uID0gc2Vzc2lvblN0cmF0ZWd5ID09PSBcImp3dFwiO1xuICAgIGlmIChzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgaWYgKHVzZUp3dFNlc3Npb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2FsdCA9IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uID0gYXdhaXQgand0LmRlY29kZSh7IC4uLmp3dCwgdG9rZW46IHNlc3Npb25Ub2tlbiwgc2FsdCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbiAmJiBcInN1YlwiIGluIHNlc3Npb24gJiYgc2Vzc2lvbi5zdWIpIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlciA9IGF3YWl0IGdldFVzZXIoc2Vzc2lvbi5zdWIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBzZXNzaW9uIGNhbid0IGJlIHZlcmlmaWVkLCB0cmVhdCBhcyBubyBzZXNzaW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyQW5kU2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25BbmRVc2VyKHNlc3Npb25Ub2tlbik7XG4gICAgICAgICAgICBpZiAodXNlckFuZFNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uID0gdXNlckFuZFNlc3Npb24uc2Vzc2lvbjtcbiAgICAgICAgICAgICAgICB1c2VyID0gdXNlckFuZFNlc3Npb24udXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWNjb3VudC50eXBlID09PSBcImVtYWlsXCIpIHtcbiAgICAgICAgLy8gSWYgc2lnbmluZyBpbiB3aXRoIGFuIGVtYWlsLCBjaGVjayBpZiBhbiBhY2NvdW50IHdpdGggdGhlIHNhbWUgZW1haWwgYWRkcmVzcyBleGlzdHMgYWxyZWFkeVxuICAgICAgICBjb25zdCB1c2VyQnlFbWFpbCA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKHByb2ZpbGUuZW1haWwpO1xuICAgICAgICBpZiAodXNlckJ5RW1haWwpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIG5vdCBhbHJlYWR5IHNpZ25lZCBpbiBhcyB0aGUgc2FtZSB1c2VyLCB0aGlzIGZsb3cgd2lsbFxuICAgICAgICAgICAgLy8gc2lnbiB0aGVtIG91dCBvZiB0aGUgY3VycmVudCBzZXNzaW9uIGFuZCBzaWduIHRoZW0gaW4gYXMgdGhlIG5ldyB1c2VyXG4gICAgICAgICAgICBpZiAodXNlcj8uaWQgIT09IHVzZXJCeUVtYWlsLmlkICYmICF1c2VKd3RTZXNzaW9uICYmIHNlc3Npb25Ub2tlbikge1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBleGlzdGluZyBzZXNzaW9uIGlmIHRoZXkgYXJlIGN1cnJlbnRseSBzaWduZWQgaW4gYXMgYW5vdGhlciB1c2VyLlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBzd2l0Y2ggdXNlciBhY2NvdW50cyBmb3IgdGhlIHNlc3Npb24gaW4gY2FzZXMgd2hlcmUgdGhlIHVzZXIgd2FzXG4gICAgICAgICAgICAgICAgLy8gYWxyZWFkeSBsb2dnZWQgaW4gd2l0aCBhIGRpZmZlcmVudCBhY2NvdW50LlxuICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZVNlc3Npb24oc2Vzc2lvblRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBlbWFpbFZlcmlmaWVkIHByb3BlcnR5IG9uIHRoZSB1c2VyIG9iamVjdFxuICAgICAgICAgICAgdXNlciA9IGF3YWl0IHVwZGF0ZVVzZXIoe1xuICAgICAgICAgICAgICAgIGlkOiB1c2VyQnlFbWFpbC5pZCxcbiAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBldmVudHMudXBkYXRlVXNlcj8uKHsgdXNlciB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB1c2VyIGFjY291bnQgaWYgdGhlcmUgaXNuJ3Qgb25lIGZvciB0aGUgZW1haWwgYWRkcmVzcyBhbHJlYWR5XG4gICAgICAgICAgICB1c2VyID0gYXdhaXQgY3JlYXRlVXNlcih7IC4uLnByb2ZpbGUsIGVtYWlsVmVyaWZpZWQ6IG5ldyBEYXRlKCkgfSk7XG4gICAgICAgICAgICBhd2FpdCBldmVudHMuY3JlYXRlVXNlcj8uKHsgdXNlciB9KTtcbiAgICAgICAgICAgIGlzTmV3VXNlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBzZXNzaW9uXG4gICAgICAgIHNlc3Npb24gPSB1c2VKd3RTZXNzaW9uXG4gICAgICAgICAgICA/IHt9XG4gICAgICAgICAgICA6IGF3YWl0IGNyZWF0ZVNlc3Npb24oe1xuICAgICAgICAgICAgICAgIHNlc3Npb25Ub2tlbjogZ2VuZXJhdGVTZXNzaW9uVG9rZW4oKSxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgZXhwaXJlczogZnJvbURhdGUob3B0aW9ucy5zZXNzaW9uLm1heEFnZSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgc2Vzc2lvbiwgdXNlciwgaXNOZXdVc2VyIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFjY291bnQudHlwZSA9PT0gXCJ3ZWJhdXRoblwiKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBhY2NvdW50IGV4aXN0c1xuICAgICAgICBjb25zdCB1c2VyQnlBY2NvdW50ID0gYXdhaXQgZ2V0VXNlckJ5QWNjb3VudCh7XG4gICAgICAgICAgICBwcm92aWRlckFjY291bnRJZDogYWNjb3VudC5wcm92aWRlckFjY291bnRJZCxcbiAgICAgICAgICAgIHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXJCeUFjY291bnQpIHtcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgYWxyZWFkeSBzaWduZWQgaW4gd2l0aCB0aGlzIGFjY291bnQsIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgICAgICAgICAgICAgICBpZiAodXNlckJ5QWNjb3VudC5pZCA9PT0gdXNlci5pZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWNjb3VudCA9IHsgLi4uYWNjb3VudCwgdXNlcklkOiB1c2VyLmlkIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNlc3Npb24sIHVzZXIsIGlzTmV3VXNlciwgYWNjb3VudDogY3VycmVudEFjY291bnQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgY3VycmVudGx5IHNpZ25lZCBpbiwgYnV0IHRoZSBuZXcgYWNjb3VudCB0aGV5IGFyZSBzaWduaW5nIGluXG4gICAgICAgICAgICAgICAgLy8gd2l0aCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhbm90aGVyIHVzZXIsIHRoZW4gd2UgY2Fubm90IGxpbmsgdGhlbVxuICAgICAgICAgICAgICAgIC8vIGFuZCBuZWVkIHRvIHJldHVybiBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQWNjb3VudE5vdExpbmtlZChcIlRoZSBhY2NvdW50IGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIGFub3RoZXIgdXNlclwiLCB7IHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gYWN0aXZlIHNlc3Npb24sIGJ1dCB0aGUgYWNjb3VudCBiZWluZyBzaWduZWQgaW4gd2l0aCBpcyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHdpdGggYSB2YWxpZCB1c2VyIHRoZW4gY3JlYXRlIHNlc3Npb24gdG8gc2lnbiB0aGUgdXNlciBpbi5cbiAgICAgICAgICAgIHNlc3Npb24gPSB1c2VKd3RTZXNzaW9uXG4gICAgICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgICAgIDogYXdhaXQgY3JlYXRlU2Vzc2lvbih7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25Ub2tlbjogZ2VuZXJhdGVTZXNzaW9uVG9rZW4oKSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyQnlBY2NvdW50LmlkLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBmcm9tRGF0ZShvcHRpb25zLnNlc3Npb24ubWF4QWdlKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBY2NvdW50ID0ge1xuICAgICAgICAgICAgICAgIC4uLmFjY291bnQsXG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyQnlBY2NvdW50LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQnlBY2NvdW50LFxuICAgICAgICAgICAgICAgIGlzTmV3VXNlcixcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBjdXJyZW50QWNjb3VudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgYWNjb3VudCBkb2Vzbid0IGV4aXN0LCB3ZSdsbCBjcmVhdGUgaXRcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgYWxyZWFkeSBzaWduZWQgaW4gYW5kIHRoZSBhY2NvdW50IGlzbid0IGFscmVhZHkgYXNzb2NpYXRlZFxuICAgICAgICAgICAgICAgIC8vIHdpdGggYW5vdGhlciB1c2VyIGFjY291bnQgdGhlbiB3ZSBjYW4gZ28gYWhlYWQgYW5kIGxpbmsgdGhlIGFjY291bnRzIHNhZmVseS5cbiAgICAgICAgICAgICAgICBhd2FpdCBsaW5rQWNjb3VudCh7IC4uLmFjY291bnQsIHVzZXJJZDogdXNlci5pZCB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBldmVudHMubGlua0FjY291bnQ/Lih7IHVzZXIsIGFjY291bnQsIHByb2ZpbGUgfSk7XG4gICAgICAgICAgICAgICAgLy8gQXMgdGhleSBhcmUgYWxyZWFkeSBzaWduZWQgaW4sIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcgYWZ0ZXIgbGlua2luZyB0aGVtXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEFjY291bnQgPSB7IC4uLmFjY291bnQsIHVzZXJJZDogdXNlci5pZCB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHNlc3Npb24sIHVzZXIsIGlzTmV3VXNlciwgYWNjb3VudDogY3VycmVudEFjY291bnQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIG5vdCBzaWduZWQgaW4gYW5kIGl0IGxvb2tzIGxpa2UgYSBuZXcgYWNjb3VudCB0aGVuIHdlXG4gICAgICAgICAgICAvLyBjaGVjayB0aGVyZSBhbHNvIGlzbid0IGFuIHVzZXIgYWNjb3VudCBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCB0aGUgc2FtZVxuICAgICAgICAgICAgLy8gZW1haWwgYWRkcmVzcyBhcyB0aGUgb25lIGluIHRoZSByZXF1ZXN0LlxuICAgICAgICAgICAgY29uc3QgdXNlckJ5RW1haWwgPSBwcm9maWxlLmVtYWlsXG4gICAgICAgICAgICAgICAgPyBhd2FpdCBnZXRVc2VyQnlFbWFpbChwcm9maWxlLmVtYWlsKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIGlmICh1c2VyQnlFbWFpbCkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHRydXN0IHVzZXItcHJvdmlkZWQgZW1haWwgYWRkcmVzc2VzLCBzbyB3ZSBkb24ndCB3YW50IHRvIGxpbmsgYWNjb3VudHNcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZW1haWwgYWRkcmVzcyBhc3NvY2lhdGVkIHdpdGggdGhlIG5ldyBhY2NvdW50IGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoXG4gICAgICAgICAgICAgICAgLy8gYW4gZXhpc3RpbmcgYWNjb3VudC5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQWNjb3VudE5vdExpbmtlZChcIkFub3RoZXIgYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoZSBzYW1lIGUtbWFpbCBhZGRyZXNzXCIsIHsgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCB1c2VyIGlzIG5vdCBsb2dnZWQgaW4gYW5kIHRoZSBwcm9maWxlIGlzbid0IGxpbmtlZCB0byBhbnkgdXNlclxuICAgICAgICAgICAgICAgIC8vIGFjY291bnRzIChieSBlbWFpbCBvciBwcm92aWRlciBhY2NvdW50IGlkKS4uLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gYWNjb3VudCBtYXRjaGluZyB0aGUgc2FtZSBbcHJvdmlkZXJdLmlkIG9yIC5lbWFpbCBleGlzdHMsIHdlIGNhblxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBhY2NvdW50IGZvciB0aGUgdXNlciwgbGluayBpdCB0byB0aGUgT0F1dGggYWNjb3VudCBhbmRcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBuZXcgc2Vzc2lvbiBmb3IgdGhlbSBzbyB0aGV5IGFyZSBzaWduZWQgaW4gd2l0aCBpdC5cbiAgICAgICAgICAgICAgICB1c2VyID0gYXdhaXQgY3JlYXRlVXNlcih7IC4uLnByb2ZpbGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBldmVudHMuY3JlYXRlVXNlcj8uKHsgdXNlciB9KTtcbiAgICAgICAgICAgIGF3YWl0IGxpbmtBY2NvdW50KHsgLi4uYWNjb3VudCwgdXNlcklkOiB1c2VyLmlkIH0pO1xuICAgICAgICAgICAgYXdhaXQgZXZlbnRzLmxpbmtBY2NvdW50Py4oeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlIH0pO1xuICAgICAgICAgICAgc2Vzc2lvbiA9IHVzZUp3dFNlc3Npb25cbiAgICAgICAgICAgICAgICA/IHt9XG4gICAgICAgICAgICAgICAgOiBhd2FpdCBjcmVhdGVTZXNzaW9uKHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblRva2VuOiBnZW5lcmF0ZVNlc3Npb25Ub2tlbigpLFxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXM6IGZyb21EYXRlKG9wdGlvbnMuc2Vzc2lvbi5tYXhBZ2UpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEFjY291bnQgPSB7IC4uLmFjY291bnQsIHVzZXJJZDogdXNlci5pZCB9O1xuICAgICAgICAgICAgcmV0dXJuIHsgc2Vzc2lvbiwgdXNlciwgaXNOZXdVc2VyOiB0cnVlLCBhY2NvdW50OiBjdXJyZW50QWNjb3VudCB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIElmIHNpZ25pbmcgaW4gd2l0aCBPQXV0aCBhY2NvdW50LCBjaGVjayB0byBzZWUgaWYgdGhlIGFjY291bnQgZXhpc3RzIGFscmVhZHlcbiAgICBjb25zdCB1c2VyQnlBY2NvdW50ID0gYXdhaXQgZ2V0VXNlckJ5QWNjb3VudCh7XG4gICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiBhY2NvdW50LnByb3ZpZGVyQWNjb3VudElkLFxuICAgICAgICBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlcixcbiAgICB9KTtcbiAgICBpZiAodXNlckJ5QWNjb3VudCkge1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgYWxyZWFkeSBzaWduZWQgaW4gd2l0aCB0aGlzIGFjY291bnQsIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgICAgICAgICAgIGlmICh1c2VyQnlBY2NvdW50LmlkID09PSB1c2VyLmlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc2Vzc2lvbiwgdXNlciwgaXNOZXdVc2VyIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBjdXJyZW50bHkgc2lnbmVkIGluLCBidXQgdGhlIG5ldyBhY2NvdW50IHRoZXkgYXJlIHNpZ25pbmcgaW5cbiAgICAgICAgICAgIC8vIHdpdGggaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYW5vdGhlciB1c2VyLCB0aGVuIHdlIGNhbm5vdCBsaW5rIHRoZW1cbiAgICAgICAgICAgIC8vIGFuZCBuZWVkIHRvIHJldHVybiBhbiBlcnJvci5cbiAgICAgICAgICAgIHRocm93IG5ldyBPQXV0aEFjY291bnROb3RMaW5rZWQoXCJUaGUgYWNjb3VudCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhbm90aGVyIHVzZXJcIiwgeyBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlciB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBhY3RpdmUgc2Vzc2lvbiwgYnV0IHRoZSBhY2NvdW50IGJlaW5nIHNpZ25lZCBpbiB3aXRoIGlzIGFscmVhZHlcbiAgICAgICAgLy8gYXNzb2NpYXRlZCB3aXRoIGEgdmFsaWQgdXNlciB0aGVuIGNyZWF0ZSBzZXNzaW9uIHRvIHNpZ24gdGhlIHVzZXIgaW4uXG4gICAgICAgIHNlc3Npb24gPSB1c2VKd3RTZXNzaW9uXG4gICAgICAgICAgICA/IHt9XG4gICAgICAgICAgICA6IGF3YWl0IGNyZWF0ZVNlc3Npb24oe1xuICAgICAgICAgICAgICAgIHNlc3Npb25Ub2tlbjogZ2VuZXJhdGVTZXNzaW9uVG9rZW4oKSxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJCeUFjY291bnQuaWQsXG4gICAgICAgICAgICAgICAgZXhwaXJlczogZnJvbURhdGUob3B0aW9ucy5zZXNzaW9uLm1heEFnZSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgc2Vzc2lvbiwgdXNlcjogdXNlckJ5QWNjb3VudCwgaXNOZXdVc2VyIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB7IHByb3ZpZGVyOiBwIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IHR5cGUsIHByb3ZpZGVyLCBwcm92aWRlckFjY291bnRJZCwgdXNlcklkLCAuLi50b2tlblNldCB9ID0gYWNjb3VudDtcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSB7IHByb3ZpZGVyQWNjb3VudElkLCBwcm92aWRlciwgdHlwZSwgdXNlcklkIH07XG4gICAgICAgIGFjY291bnQgPSBPYmplY3QuYXNzaWduKHAuYWNjb3VudCh0b2tlblNldCkgPz8ge30sIGRlZmF1bHRzKTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIGFscmVhZHkgc2lnbmVkIGluIGFuZCB0aGUgT0F1dGggYWNjb3VudCBpc24ndCBhbHJlYWR5IGFzc29jaWF0ZWRcbiAgICAgICAgICAgIC8vIHdpdGggYW5vdGhlciB1c2VyIGFjY291bnQgdGhlbiB3ZSBjYW4gZ28gYWhlYWQgYW5kIGxpbmsgdGhlIGFjY291bnRzIHNhZmVseS5cbiAgICAgICAgICAgIGF3YWl0IGxpbmtBY2NvdW50KHsgLi4uYWNjb3VudCwgdXNlcklkOiB1c2VyLmlkIH0pO1xuICAgICAgICAgICAgYXdhaXQgZXZlbnRzLmxpbmtBY2NvdW50Py4oeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlIH0pO1xuICAgICAgICAgICAgLy8gQXMgdGhleSBhcmUgYWxyZWFkeSBzaWduZWQgaW4sIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcgYWZ0ZXIgbGlua2luZyB0aGVtXG4gICAgICAgICAgICByZXR1cm4geyBzZXNzaW9uLCB1c2VyLCBpc05ld1VzZXIgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBub3Qgc2lnbmVkIGluIGFuZCBpdCBsb29rcyBsaWtlIGEgbmV3IE9BdXRoIGFjY291bnQgdGhlbiB3ZVxuICAgICAgICAvLyBjaGVjayB0aGVyZSBhbHNvIGlzbid0IGFuIHVzZXIgYWNjb3VudCBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCB0aGUgc2FtZVxuICAgICAgICAvLyBlbWFpbCBhZGRyZXNzIGFzIHRoZSBvbmUgaW4gdGhlIE9BdXRoIHByb2ZpbGUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgc3RlcCBpcyBvZnRlbiBvdmVybG9va2VkIGluIE9BdXRoIGltcGxlbWVudGF0aW9ucywgYnV0IGNvdmVycyB0aGUgZm9sbG93aW5nIGNhc2VzOlxuICAgICAgICAvL1xuICAgICAgICAvLyAxLiBJdCBtYWtlcyBpdCBoYXJkZXIgZm9yIHNvbWVvbmUgdG8gYWNjaWRlbnRhbGx5IGNyZWF0ZSB0d28gYWNjb3VudHMuXG4gICAgICAgIC8vICAgIGUuZy4gYnkgc2lnbmluIGluIHdpdGggZW1haWwsIHRoZW4gYWdhaW4gd2l0aCBhbiBvYXV0aCBhY2NvdW50IGNvbm5lY3RlZCB0byB0aGUgc2FtZSBlbWFpbC5cbiAgICAgICAgLy8gMi4gSXQgbWFrZXMgaXQgaGFyZGVyIHRvIGhpamFjayBhIHVzZXIgYWNjb3VudCB1c2luZyBhIDNyZCBwYXJ0eSBPQXV0aCBhY2NvdW50LlxuICAgICAgICAvLyAgICBlLmcuIGJ5IGNyZWF0aW5nIGFuIG9hdXRoIGFjY291bnQgdGhlbiBjaGFuZ2luZyB0aGUgZW1haWwgYWRkcmVzcyBhc3NvY2lhdGVkIHdpdGggaXQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEl0J3MgcXVpdGUgY29tbW9uIGZvciBzZXJ2aWNlcyB0byBhdXRvbWF0aWNhbGx5IGxpbmsgYWNjb3VudHMgaW4gdGhpcyBjYXNlLCBidXQgaXQnc1xuICAgICAgICAvLyBiZXR0ZXIgcHJhY3RpY2UgdG8gcmVxdWlyZSB0aGUgdXNlciB0byBzaWduIGluICp0aGVuKiBsaW5rIGFjY291bnRzIHRvIGJlIHN1cmVcbiAgICAgICAgLy8gc29tZW9uZSBpcyBub3QgZXhwbG9pdGluZyBhIHByb2JsZW0gd2l0aCBhIHRoaXJkIHBhcnR5IE9BdXRoIHNlcnZpY2UuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIE9BdXRoIHByb3ZpZGVycyBzaG91bGQgcmVxdWlyZSBlbWFpbCBhZGRyZXNzIHZlcmlmaWNhdGlvbiB0byBwcmV2ZW50IHRoaXMsIGJ1dCBpblxuICAgICAgICAvLyBwcmFjdGljZSB0aGF0IGlzIG5vdCBhbHdheXMgdGhlIGNhc2U7IHRoaXMgaGVscHMgcHJvdGVjdCBhZ2FpbnN0IHRoYXQuXG4gICAgICAgIGNvbnN0IHVzZXJCeUVtYWlsID0gcHJvZmlsZS5lbWFpbFxuICAgICAgICAgICAgPyBhd2FpdCBnZXRVc2VyQnlFbWFpbChwcm9maWxlLmVtYWlsKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBpZiAodXNlckJ5RW1haWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gb3B0aW9ucy5wcm92aWRlcjtcbiAgICAgICAgICAgIGlmIChwcm92aWRlcj8uYWxsb3dEYW5nZXJvdXNFbWFpbEFjY291bnRMaW5raW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgeW91IHRydXN0IHRoZSBvYXV0aCBwcm92aWRlciB0byBjb3JyZWN0bHkgdmVyaWZ5IGVtYWlsIGFkZHJlc3NlcywgeW91IGNhbiBvcHQtaW4gdG9cbiAgICAgICAgICAgICAgICAvLyBhY2NvdW50IGxpbmtpbmcgZXZlbiB3aGVuIHRoZSB1c2VyIGlzIG5vdCBzaWduZWQtaW4uXG4gICAgICAgICAgICAgICAgdXNlciA9IHVzZXJCeUVtYWlsO1xuICAgICAgICAgICAgICAgIGlzTmV3VXNlciA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZW5kIHVwIGhlcmUgd2hlbiB3ZSBkb24ndCBoYXZlIGFuIGFjY291bnQgd2l0aCB0aGUgc2FtZSBbcHJvdmlkZXJdLmlkICpCVVQqXG4gICAgICAgICAgICAgICAgLy8gd2UgZG8gYWxyZWFkeSBoYXZlIGFuIGFjY291bnQgd2l0aCB0aGUgc2FtZSBlbWFpbCBhZGRyZXNzIGFzIHRoZSBvbmUgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gT0F1dGggcHJvZmlsZSB0aGUgdXNlciBoYXMganVzdCB0cmllZCB0byBzaWduIGluIHdpdGguXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGhhdmUgdHdvIGFjY291bnRzIHdpdGggdGhlIHNhbWUgZW1haWwgYWRkcmVzcywgYW5kIHdlIGRvbid0XG4gICAgICAgICAgICAgICAgLy8gd2FudCB0byBsaW5rIHRoZW0gaW4gY2FzZSBpdCdzIG5vdCBzYWZlIHRvIGRvIHNvLCBzbyBpbnN0ZWFkIHdlIHByb21wdCB0aGUgdXNlclxuICAgICAgICAgICAgICAgIC8vIHRvIHNpZ24gaW4gdmlhIGVtYWlsIHRvIHZlcmlmeSB0aGVpciBpZGVudGl0eSBhbmQgdGhlbiBsaW5rIHRoZSBhY2NvdW50cy5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT0F1dGhBY2NvdW50Tm90TGlua2VkKFwiQW5vdGhlciBhY2NvdW50IGFscmVhZHkgZXhpc3RzIHdpdGggdGhlIHNhbWUgZS1tYWlsIGFkZHJlc3NcIiwgeyBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHVzZXIgaXMgbm90IGxvZ2dlZCBpbiBhbmQgdGhlIHByb2ZpbGUgaXNuJ3QgbGlua2VkIHRvIGFueSB1c2VyXG4gICAgICAgICAgICAvLyBhY2NvdW50cyAoYnkgZW1haWwgb3IgcHJvdmlkZXIgYWNjb3VudCBpZCkuLi5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJZiBubyBhY2NvdW50IG1hdGNoaW5nIHRoZSBzYW1lIFtwcm92aWRlcl0uaWQgb3IgLmVtYWlsIGV4aXN0cywgd2UgY2FuXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBuZXcgYWNjb3VudCBmb3IgdGhlIHVzZXIsIGxpbmsgaXQgdG8gdGhlIE9BdXRoIGFjY291bnQgYW5kXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBuZXcgc2Vzc2lvbiBmb3IgdGhlbSBzbyB0aGV5IGFyZSBzaWduZWQgaW4gd2l0aCBpdC5cbiAgICAgICAgICAgIHVzZXIgPSBhd2FpdCBjcmVhdGVVc2VyKHsgLi4ucHJvZmlsZSwgZW1haWxWZXJpZmllZDogbnVsbCB9KTtcbiAgICAgICAgICAgIGlzTmV3VXNlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgZXZlbnRzLmNyZWF0ZVVzZXI/Lih7IHVzZXIgfSk7XG4gICAgICAgIGF3YWl0IGxpbmtBY2NvdW50KHsgLi4uYWNjb3VudCwgdXNlcklkOiB1c2VyLmlkIH0pO1xuICAgICAgICBhd2FpdCBldmVudHMubGlua0FjY291bnQ/Lih7IHVzZXIsIGFjY291bnQsIHByb2ZpbGUgfSk7XG4gICAgICAgIHNlc3Npb24gPSB1c2VKd3RTZXNzaW9uXG4gICAgICAgICAgICA/IHt9XG4gICAgICAgICAgICA6IGF3YWl0IGNyZWF0ZVNlc3Npb24oe1xuICAgICAgICAgICAgICAgIHNlc3Npb25Ub2tlbjogZ2VuZXJhdGVTZXNzaW9uVG9rZW4oKSxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgZXhwaXJlczogZnJvbURhdGUob3B0aW9ucy5zZXNzaW9uLm1heEFnZSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgc2Vzc2lvbiwgdXNlciwgaXNOZXdVc2VyIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/callback/handle-login.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/callback/handle-login.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/handle-login.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleLoginOrRegister: () => (/* binding */ handleLoginOrRegister)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_date_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/date.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/date.js\");\n\n\n/**\n * This function handles the complex flow of signing users in, and either creating,\n * linking (or not linking) accounts depending on if the user is currently logged\n * in, if they have account already and the authentication mechanism they are using.\n *\n * It prevents insecure behaviour, such as linking OAuth accounts unless a user is\n * signed in and authenticated with an existing valid account.\n *\n * All verification (e.g. OAuth flows or email address verification flows) are\n * done prior to this handler being called to avoid additional complexity in this\n * handler.\n */\nasync function handleLoginOrRegister(sessionToken, _profile, _account, options) {\n    // Input validation\n    if (!_account?.providerAccountId || !_account.type)\n        throw new Error(\"Missing or invalid provider account\");\n    if (![\"email\", \"oauth\", \"oidc\", \"webauthn\"].includes(_account.type))\n        throw new Error(\"Provider not supported\");\n    const { adapter, jwt, events, session: { strategy: sessionStrategy, generateSessionToken }, } = options;\n    // If no adapter is configured then we don't have a database and cannot\n    // persist data; in this mode we just return a dummy session object.\n    if (!adapter) {\n        return { user: _profile, account: _account };\n    }\n    const profile = _profile;\n    let account = _account;\n    const { createUser, updateUser, getUser, getUserByAccount, getUserByEmail, linkAccount, createSession, getSessionAndUser, deleteSession, } = adapter;\n    let session = null;\n    let user = null;\n    let isNewUser = false;\n    const useJwtSession = sessionStrategy === \"jwt\";\n    if (sessionToken) {\n        if (useJwtSession) {\n            try {\n                const salt = options.cookies.sessionToken.name;\n                session = await jwt.decode({ ...jwt, token: sessionToken, salt });\n                if (session && \"sub\" in session && session.sub) {\n                    user = await getUser(session.sub);\n                }\n            }\n            catch {\n                // If session can't be verified, treat as no session\n            }\n        }\n        else {\n            const userAndSession = await getSessionAndUser(sessionToken);\n            if (userAndSession) {\n                session = userAndSession.session;\n                user = userAndSession.user;\n            }\n        }\n    }\n    if (account.type === \"email\") {\n        // If signing in with an email, check if an account with the same email address exists already\n        const userByEmail = await getUserByEmail(profile.email);\n        if (userByEmail) {\n            // If they are not already signed in as the same user, this flow will\n            // sign them out of the current session and sign them in as the new user\n            if (user?.id !== userByEmail.id && !useJwtSession && sessionToken) {\n                // Delete existing session if they are currently signed in as another user.\n                // This will switch user accounts for the session in cases where the user was\n                // already logged in with a different account.\n                await deleteSession(sessionToken);\n            }\n            // Update emailVerified property on the user object\n            user = await updateUser({\n                id: userByEmail.id,\n                emailVerified: new Date(),\n            });\n            await events.updateUser?.({ user });\n        }\n        else {\n            // Create user account if there isn't one for the email address already\n            user = await createUser({ ...profile, emailVerified: new Date() });\n            await events.createUser?.({ user });\n            isNewUser = true;\n        }\n        // Create new session\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: user.id,\n                expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n            });\n        return { session, user, isNewUser };\n    }\n    else if (account.type === \"webauthn\") {\n        // Check if the account exists\n        const userByAccount = await getUserByAccount({\n            providerAccountId: account.providerAccountId,\n            provider: account.provider,\n        });\n        if (userByAccount) {\n            if (user) {\n                // If the user is already signed in with this account, we don't need to do anything\n                if (userByAccount.id === user.id) {\n                    const currentAccount = { ...account, userId: user.id };\n                    return { session, user, isNewUser, account: currentAccount };\n                }\n                // If the user is currently signed in, but the new account they are signing in\n                // with is already associated with another user, then we cannot link them\n                // and need to return an error.\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AccountNotLinked(\"The account is already associated with another user\", { provider: account.provider });\n            }\n            // If there is no active session, but the account being signed in with is already\n            // associated with a valid user then create session to sign the user in.\n            session = useJwtSession\n                ? {}\n                : await createSession({\n                    sessionToken: generateSessionToken(),\n                    userId: userByAccount.id,\n                    expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n                });\n            const currentAccount = {\n                ...account,\n                userId: userByAccount.id,\n            };\n            return {\n                session,\n                user: userByAccount,\n                isNewUser,\n                account: currentAccount,\n            };\n        }\n        else {\n            // If the account doesn't exist, we'll create it\n            if (user) {\n                // If the user is already signed in and the account isn't already associated\n                // with another user account then we can go ahead and link the accounts safely.\n                await linkAccount({ ...account, userId: user.id });\n                await events.linkAccount?.({ user, account, profile });\n                // As they are already signed in, we don't need to do anything after linking them\n                const currentAccount = { ...account, userId: user.id };\n                return { session, user, isNewUser, account: currentAccount };\n            }\n            // If the user is not signed in and it looks like a new account then we\n            // check there also isn't an user account already associated with the same\n            // email address as the one in the request.\n            const userByEmail = profile.email\n                ? await getUserByEmail(profile.email)\n                : null;\n            if (userByEmail) {\n                // We don't trust user-provided email addresses, so we don't want to link accounts\n                // if the email address associated with the new account is already associated with\n                // an existing account.\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AccountNotLinked(\"Another account already exists with the same e-mail address\", { provider: account.provider });\n            }\n            else {\n                // If the current user is not logged in and the profile isn't linked to any user\n                // accounts (by email or provider account id)...\n                //\n                // If no account matching the same [provider].id or .email exists, we can\n                // create a new account for the user, link it to the OAuth account and\n                // create a new session for them so they are signed in with it.\n                user = await createUser({ ...profile });\n            }\n            await events.createUser?.({ user });\n            await linkAccount({ ...account, userId: user.id });\n            await events.linkAccount?.({ user, account, profile });\n            session = useJwtSession\n                ? {}\n                : await createSession({\n                    sessionToken: generateSessionToken(),\n                    userId: user.id,\n                    expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n                });\n            const currentAccount = { ...account, userId: user.id };\n            return { session, user, isNewUser: true, account: currentAccount };\n        }\n    }\n    // If signing in with OAuth account, check to see if the account exists already\n    const userByAccount = await getUserByAccount({\n        providerAccountId: account.providerAccountId,\n        provider: account.provider,\n    });\n    if (userByAccount) {\n        if (user) {\n            // If the user is already signed in with this account, we don't need to do anything\n            if (userByAccount.id === user.id) {\n                return { session, user, isNewUser };\n            }\n            // If the user is currently signed in, but the new account they are signing in\n            // with is already associated with another user, then we cannot link them\n            // and need to return an error.\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.OAuthAccountNotLinked(\"The account is already associated with another user\", { provider: account.provider });\n        }\n        // If there is no active session, but the account being signed in with is already\n        // associated with a valid user then create session to sign the user in.\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: userByAccount.id,\n                expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n            });\n        return { session, user: userByAccount, isNewUser };\n    }\n    else {\n        const { provider: p } = options;\n        const { type, provider, providerAccountId, userId, ...tokenSet } = account;\n        const defaults = { providerAccountId, provider, type, userId };\n        account = Object.assign(p.account(tokenSet) ?? {}, defaults);\n        if (user) {\n            // If the user is already signed in and the OAuth account isn't already associated\n            // with another user account then we can go ahead and link the accounts safely.\n            await linkAccount({ ...account, userId: user.id });\n            await events.linkAccount?.({ user, account, profile });\n            // As they are already signed in, we don't need to do anything after linking them\n            return { session, user, isNewUser };\n        }\n        // If the user is not signed in and it looks like a new OAuth account then we\n        // check there also isn't an user account already associated with the same\n        // email address as the one in the OAuth profile.\n        //\n        // This step is often overlooked in OAuth implementations, but covers the following cases:\n        //\n        // 1. It makes it harder for someone to accidentally create two accounts.\n        //    e.g. by signin in with email, then again with an oauth account connected to the same email.\n        // 2. It makes it harder to hijack a user account using a 3rd party OAuth account.\n        //    e.g. by creating an oauth account then changing the email address associated with it.\n        //\n        // It's quite common for services to automatically link accounts in this case, but it's\n        // better practice to require the user to sign in *then* link accounts to be sure\n        // someone is not exploiting a problem with a third party OAuth service.\n        //\n        // OAuth providers should require email address verification to prevent this, but in\n        // practice that is not always the case; this helps protect against that.\n        const userByEmail = profile.email\n            ? await getUserByEmail(profile.email)\n            : null;\n        if (userByEmail) {\n            const provider = options.provider;\n            if (provider?.allowDangerousEmailAccountLinking) {\n                // If you trust the oauth provider to correctly verify email addresses, you can opt-in to\n                // account linking even when the user is not signed-in.\n                user = userByEmail;\n                isNewUser = false;\n            }\n            else {\n                // We end up here when we don't have an account with the same [provider].id *BUT*\n                // we do already have an account with the same email address as the one in the\n                // OAuth profile the user has just tried to sign in with.\n                //\n                // We don't want to have two accounts with the same email address, and we don't\n                // want to link them in case it's not safe to do so, so instead we prompt the user\n                // to sign in via email to verify their identity and then link the accounts.\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.OAuthAccountNotLinked(\"Another account already exists with the same e-mail address\", { provider: account.provider });\n            }\n        }\n        else {\n            // If the current user is not logged in and the profile isn't linked to any user\n            // accounts (by email or provider account id)...\n            //\n            // If no account matching the same [provider].id or .email exists, we can\n            // create a new account for the user, link it to the OAuth account and\n            // create a new session for them so they are signed in with it.\n            user = await createUser({ ...profile, emailVerified: null });\n            isNewUser = true;\n        }\n        await events.createUser?.({ user });\n        await linkAccount({ ...account, userId: user.id });\n        await events.linkAccount?.({ user, account, profile });\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: user.id,\n                expires: (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(options.session.maxAge),\n            });\n        return { session, user, isNewUser };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9jYWxsYmFjay9oYW5kbGUtbG9naW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZFO0FBQzlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUNBQWlDLGlEQUFpRCxJQUFJO0FBQ2xHO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUlBQW1JO0FBQy9JO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsbUNBQW1DO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isd0NBQXdDLE1BQU07QUFDOUM7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHVDQUF1QztBQUM3RSx3Q0FBd0MsTUFBTTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdEQUFRO0FBQ2pDLGFBQWE7QUFDYixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3REFBZ0IsMERBQTBELDRCQUE0QjtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdEQUFRO0FBQ3JDLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw2QkFBNkI7QUFDakUsNkNBQTZDLHdCQUF3QjtBQUNyRTtBQUNBLHlDQUF5QztBQUN6Qyx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3REFBZ0Isa0VBQWtFLDRCQUE0QjtBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLFlBQVk7QUFDdEQ7QUFDQSx3Q0FBd0MsTUFBTTtBQUM5QyxnQ0FBZ0MsNkJBQTZCO0FBQzdELHlDQUF5Qyx3QkFBd0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix3REFBUTtBQUNyQyxpQkFBaUI7QUFDakIscUNBQXFDO0FBQ3JDLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkRBQXFCLDBEQUEwRCw0QkFBNEI7QUFDakk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix3REFBUTtBQUNqQyxhQUFhO0FBQ2IsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QixnQkFBZ0IseURBQXlEO0FBQ3pFLDJCQUEyQjtBQUMzQix5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDZCQUE2QjtBQUM3RCx5Q0FBeUMsd0JBQXdCO0FBQ2pFO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkRBQXFCLGtFQUFrRSw0QkFBNEI7QUFDN0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGlDQUFpQztBQUN2RTtBQUNBO0FBQ0Esb0NBQW9DLE1BQU07QUFDMUMsNEJBQTRCLDZCQUE2QjtBQUN6RCxxQ0FBcUMsd0JBQXdCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsd0RBQVE7QUFDakMsYUFBYTtBQUNiLGlCQUFpQjtBQUNqQjtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcYWN0aW9uc1xcY2FsbGJhY2tcXGhhbmRsZS1sb2dpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY2NvdW50Tm90TGlua2VkLCBPQXV0aEFjY291bnROb3RMaW5rZWQgfSBmcm9tIFwiLi4vLi4vLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBmcm9tRGF0ZSB9IGZyb20gXCIuLi8uLi91dGlscy9kYXRlLmpzXCI7XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaGFuZGxlcyB0aGUgY29tcGxleCBmbG93IG9mIHNpZ25pbmcgdXNlcnMgaW4sIGFuZCBlaXRoZXIgY3JlYXRpbmcsXG4gKiBsaW5raW5nIChvciBub3QgbGlua2luZykgYWNjb3VudHMgZGVwZW5kaW5nIG9uIGlmIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBsb2dnZWRcbiAqIGluLCBpZiB0aGV5IGhhdmUgYWNjb3VudCBhbHJlYWR5IGFuZCB0aGUgYXV0aGVudGljYXRpb24gbWVjaGFuaXNtIHRoZXkgYXJlIHVzaW5nLlxuICpcbiAqIEl0IHByZXZlbnRzIGluc2VjdXJlIGJlaGF2aW91ciwgc3VjaCBhcyBsaW5raW5nIE9BdXRoIGFjY291bnRzIHVubGVzcyBhIHVzZXIgaXNcbiAqIHNpZ25lZCBpbiBhbmQgYXV0aGVudGljYXRlZCB3aXRoIGFuIGV4aXN0aW5nIHZhbGlkIGFjY291bnQuXG4gKlxuICogQWxsIHZlcmlmaWNhdGlvbiAoZS5nLiBPQXV0aCBmbG93cyBvciBlbWFpbCBhZGRyZXNzIHZlcmlmaWNhdGlvbiBmbG93cykgYXJlXG4gKiBkb25lIHByaW9yIHRvIHRoaXMgaGFuZGxlciBiZWluZyBjYWxsZWQgdG8gYXZvaWQgYWRkaXRpb25hbCBjb21wbGV4aXR5IGluIHRoaXNcbiAqIGhhbmRsZXIuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVMb2dpbk9yUmVnaXN0ZXIoc2Vzc2lvblRva2VuLCBfcHJvZmlsZSwgX2FjY291bnQsIG9wdGlvbnMpIHtcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uXG4gICAgaWYgKCFfYWNjb3VudD8ucHJvdmlkZXJBY2NvdW50SWQgfHwgIV9hY2NvdW50LnR5cGUpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgb3IgaW52YWxpZCBwcm92aWRlciBhY2NvdW50XCIpO1xuICAgIGlmICghW1wiZW1haWxcIiwgXCJvYXV0aFwiLCBcIm9pZGNcIiwgXCJ3ZWJhdXRoblwiXS5pbmNsdWRlcyhfYWNjb3VudC50eXBlKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvdmlkZXIgbm90IHN1cHBvcnRlZFwiKTtcbiAgICBjb25zdCB7IGFkYXB0ZXIsIGp3dCwgZXZlbnRzLCBzZXNzaW9uOiB7IHN0cmF0ZWd5OiBzZXNzaW9uU3RyYXRlZ3ksIGdlbmVyYXRlU2Vzc2lvblRva2VuIH0sIH0gPSBvcHRpb25zO1xuICAgIC8vIElmIG5vIGFkYXB0ZXIgaXMgY29uZmlndXJlZCB0aGVuIHdlIGRvbid0IGhhdmUgYSBkYXRhYmFzZSBhbmQgY2Fubm90XG4gICAgLy8gcGVyc2lzdCBkYXRhOyBpbiB0aGlzIG1vZGUgd2UganVzdCByZXR1cm4gYSBkdW1teSBzZXNzaW9uIG9iamVjdC5cbiAgICBpZiAoIWFkYXB0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHsgdXNlcjogX3Byb2ZpbGUsIGFjY291bnQ6IF9hY2NvdW50IH07XG4gICAgfVxuICAgIGNvbnN0IHByb2ZpbGUgPSBfcHJvZmlsZTtcbiAgICBsZXQgYWNjb3VudCA9IF9hY2NvdW50O1xuICAgIGNvbnN0IHsgY3JlYXRlVXNlciwgdXBkYXRlVXNlciwgZ2V0VXNlciwgZ2V0VXNlckJ5QWNjb3VudCwgZ2V0VXNlckJ5RW1haWwsIGxpbmtBY2NvdW50LCBjcmVhdGVTZXNzaW9uLCBnZXRTZXNzaW9uQW5kVXNlciwgZGVsZXRlU2Vzc2lvbiwgfSA9IGFkYXB0ZXI7XG4gICAgbGV0IHNlc3Npb24gPSBudWxsO1xuICAgIGxldCB1c2VyID0gbnVsbDtcbiAgICBsZXQgaXNOZXdVc2VyID0gZmFsc2U7XG4gICAgY29uc3QgdXNlSnd0U2Vzc2lvbiA9IHNlc3Npb25TdHJhdGVneSA9PT0gXCJqd3RcIjtcbiAgICBpZiAoc2Vzc2lvblRva2VuKSB7XG4gICAgICAgIGlmICh1c2VKd3RTZXNzaW9uKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNhbHQgPSBvcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWU7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbiA9IGF3YWl0IGp3dC5kZWNvZGUoeyAuLi5qd3QsIHRva2VuOiBzZXNzaW9uVG9rZW4sIHNhbHQgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb24gJiYgXCJzdWJcIiBpbiBzZXNzaW9uICYmIHNlc3Npb24uc3ViKSB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXIgPSBhd2FpdCBnZXRVc2VyKHNlc3Npb24uc3ViKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgLy8gSWYgc2Vzc2lvbiBjYW4ndCBiZSB2ZXJpZmllZCwgdHJlYXQgYXMgbm8gc2Vzc2lvblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXNlckFuZFNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uQW5kVXNlcihzZXNzaW9uVG9rZW4pO1xuICAgICAgICAgICAgaWYgKHVzZXJBbmRTZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbiA9IHVzZXJBbmRTZXNzaW9uLnNlc3Npb247XG4gICAgICAgICAgICAgICAgdXNlciA9IHVzZXJBbmRTZXNzaW9uLnVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFjY291bnQudHlwZSA9PT0gXCJlbWFpbFwiKSB7XG4gICAgICAgIC8vIElmIHNpZ25pbmcgaW4gd2l0aCBhbiBlbWFpbCwgY2hlY2sgaWYgYW4gYWNjb3VudCB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3MgZXhpc3RzIGFscmVhZHlcbiAgICAgICAgY29uc3QgdXNlckJ5RW1haWwgPSBhd2FpdCBnZXRVc2VyQnlFbWFpbChwcm9maWxlLmVtYWlsKTtcbiAgICAgICAgaWYgKHVzZXJCeUVtYWlsKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBzaWduZWQgaW4gYXMgdGhlIHNhbWUgdXNlciwgdGhpcyBmbG93IHdpbGxcbiAgICAgICAgICAgIC8vIHNpZ24gdGhlbSBvdXQgb2YgdGhlIGN1cnJlbnQgc2Vzc2lvbiBhbmQgc2lnbiB0aGVtIGluIGFzIHRoZSBuZXcgdXNlclxuICAgICAgICAgICAgaWYgKHVzZXI/LmlkICE9PSB1c2VyQnlFbWFpbC5pZCAmJiAhdXNlSnd0U2Vzc2lvbiAmJiBzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAvLyBEZWxldGUgZXhpc3Rpbmcgc2Vzc2lvbiBpZiB0aGV5IGFyZSBjdXJyZW50bHkgc2lnbmVkIGluIGFzIGFub3RoZXIgdXNlci5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgc3dpdGNoIHVzZXIgYWNjb3VudHMgZm9yIHRoZSBzZXNzaW9uIGluIGNhc2VzIHdoZXJlIHRoZSB1c2VyIHdhc1xuICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgbG9nZ2VkIGluIHdpdGggYSBkaWZmZXJlbnQgYWNjb3VudC5cbiAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVTZXNzaW9uKHNlc3Npb25Ub2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVcGRhdGUgZW1haWxWZXJpZmllZCBwcm9wZXJ0eSBvbiB0aGUgdXNlciBvYmplY3RcbiAgICAgICAgICAgIHVzZXIgPSBhd2FpdCB1cGRhdGVVc2VyKHtcbiAgICAgICAgICAgICAgICBpZDogdXNlckJ5RW1haWwuaWQsXG4gICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgZXZlbnRzLnVwZGF0ZVVzZXI/Lih7IHVzZXIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdXNlciBhY2NvdW50IGlmIHRoZXJlIGlzbid0IG9uZSBmb3IgdGhlIGVtYWlsIGFkZHJlc3MgYWxyZWFkeVxuICAgICAgICAgICAgdXNlciA9IGF3YWl0IGNyZWF0ZVVzZXIoeyAuLi5wcm9maWxlLCBlbWFpbFZlcmlmaWVkOiBuZXcgRGF0ZSgpIH0pO1xuICAgICAgICAgICAgYXdhaXQgZXZlbnRzLmNyZWF0ZVVzZXI/Lih7IHVzZXIgfSk7XG4gICAgICAgICAgICBpc05ld1VzZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBuZXcgc2Vzc2lvblxuICAgICAgICBzZXNzaW9uID0gdXNlSnd0U2Vzc2lvblxuICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgOiBhd2FpdCBjcmVhdGVTZXNzaW9uKHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uVG9rZW46IGdlbmVyYXRlU2Vzc2lvblRva2VuKCksXG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgIGV4cGlyZXM6IGZyb21EYXRlKG9wdGlvbnMuc2Vzc2lvbi5tYXhBZ2UpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHNlc3Npb24sIHVzZXIsIGlzTmV3VXNlciB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhY2NvdW50LnR5cGUgPT09IFwid2ViYXV0aG5cIikge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgYWNjb3VudCBleGlzdHNcbiAgICAgICAgY29uc3QgdXNlckJ5QWNjb3VudCA9IGF3YWl0IGdldFVzZXJCeUFjY291bnQoe1xuICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgICBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlcixcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1c2VyQnlBY2NvdW50KSB7XG4gICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIGFscmVhZHkgc2lnbmVkIGluIHdpdGggdGhpcyBhY2NvdW50LCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJCeUFjY291bnQuaWQgPT09IHVzZXIuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEFjY291bnQgPSB7IC4uLmFjY291bnQsIHVzZXJJZDogdXNlci5pZCB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzZXNzaW9uLCB1c2VyLCBpc05ld1VzZXIsIGFjY291bnQ6IGN1cnJlbnRBY2NvdW50IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBzaWduZWQgaW4sIGJ1dCB0aGUgbmV3IGFjY291bnQgdGhleSBhcmUgc2lnbmluZyBpblxuICAgICAgICAgICAgICAgIC8vIHdpdGggaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYW5vdGhlciB1c2VyLCB0aGVuIHdlIGNhbm5vdCBsaW5rIHRoZW1cbiAgICAgICAgICAgICAgICAvLyBhbmQgbmVlZCB0byByZXR1cm4gYW4gZXJyb3IuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFjY291bnROb3RMaW5rZWQoXCJUaGUgYWNjb3VudCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhbm90aGVyIHVzZXJcIiwgeyBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGFjdGl2ZSBzZXNzaW9uLCBidXQgdGhlIGFjY291bnQgYmVpbmcgc2lnbmVkIGluIHdpdGggaXMgYWxyZWFkeVxuICAgICAgICAgICAgLy8gYXNzb2NpYXRlZCB3aXRoIGEgdmFsaWQgdXNlciB0aGVuIGNyZWF0ZSBzZXNzaW9uIHRvIHNpZ24gdGhlIHVzZXIgaW4uXG4gICAgICAgICAgICBzZXNzaW9uID0gdXNlSnd0U2Vzc2lvblxuICAgICAgICAgICAgICAgID8ge31cbiAgICAgICAgICAgICAgICA6IGF3YWl0IGNyZWF0ZVNlc3Npb24oe1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uVG9rZW46IGdlbmVyYXRlU2Vzc2lvblRva2VuKCksXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlckJ5QWNjb3VudC5pZCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogZnJvbURhdGUob3B0aW9ucy5zZXNzaW9uLm1heEFnZSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QWNjb3VudCA9IHtcbiAgICAgICAgICAgICAgICAuLi5hY2NvdW50LFxuICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlckJ5QWNjb3VudC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNlc3Npb24sXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckJ5QWNjb3VudCxcbiAgICAgICAgICAgICAgICBpc05ld1VzZXIsXG4gICAgICAgICAgICAgICAgYWNjb3VudDogY3VycmVudEFjY291bnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGFjY291bnQgZG9lc24ndCBleGlzdCwgd2UnbGwgY3JlYXRlIGl0XG4gICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIGFscmVhZHkgc2lnbmVkIGluIGFuZCB0aGUgYWNjb3VudCBpc24ndCBhbHJlYWR5IGFzc29jaWF0ZWRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGFub3RoZXIgdXNlciBhY2NvdW50IHRoZW4gd2UgY2FuIGdvIGFoZWFkIGFuZCBsaW5rIHRoZSBhY2NvdW50cyBzYWZlbHkuXG4gICAgICAgICAgICAgICAgYXdhaXQgbGlua0FjY291bnQoeyAuLi5hY2NvdW50LCB1c2VySWQ6IHVzZXIuaWQgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgZXZlbnRzLmxpbmtBY2NvdW50Py4oeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlIH0pO1xuICAgICAgICAgICAgICAgIC8vIEFzIHRoZXkgYXJlIGFscmVhZHkgc2lnbmVkIGluLCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nIGFmdGVyIGxpbmtpbmcgdGhlbVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBY2NvdW50ID0geyAuLi5hY2NvdW50LCB1c2VySWQ6IHVzZXIuaWQgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzZXNzaW9uLCB1c2VyLCBpc05ld1VzZXIsIGFjY291bnQ6IGN1cnJlbnRBY2NvdW50IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBub3Qgc2lnbmVkIGluIGFuZCBpdCBsb29rcyBsaWtlIGEgbmV3IGFjY291bnQgdGhlbiB3ZVxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlcmUgYWxzbyBpc24ndCBhbiB1c2VyIGFjY291bnQgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggdGhlIHNhbWVcbiAgICAgICAgICAgIC8vIGVtYWlsIGFkZHJlc3MgYXMgdGhlIG9uZSBpbiB0aGUgcmVxdWVzdC5cbiAgICAgICAgICAgIGNvbnN0IHVzZXJCeUVtYWlsID0gcHJvZmlsZS5lbWFpbFxuICAgICAgICAgICAgICAgID8gYXdhaXQgZ2V0VXNlckJ5RW1haWwocHJvZmlsZS5lbWFpbClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBpZiAodXNlckJ5RW1haWwpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB0cnVzdCB1c2VyLXByb3ZpZGVkIGVtYWlsIGFkZHJlc3Nlcywgc28gd2UgZG9uJ3Qgd2FudCB0byBsaW5rIGFjY291bnRzXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGVtYWlsIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBuZXcgYWNjb3VudCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aFxuICAgICAgICAgICAgICAgIC8vIGFuIGV4aXN0aW5nIGFjY291bnQuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFjY291bnROb3RMaW5rZWQoXCJBbm90aGVyIGFjY291bnQgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgc2FtZSBlLW1haWwgYWRkcmVzc1wiLCB7IHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgdXNlciBpcyBub3QgbG9nZ2VkIGluIGFuZCB0aGUgcHJvZmlsZSBpc24ndCBsaW5rZWQgdG8gYW55IHVzZXJcbiAgICAgICAgICAgICAgICAvLyBhY2NvdW50cyAoYnkgZW1haWwgb3IgcHJvdmlkZXIgYWNjb3VudCBpZCkuLi5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIElmIG5vIGFjY291bnQgbWF0Y2hpbmcgdGhlIHNhbWUgW3Byb3ZpZGVyXS5pZCBvciAuZW1haWwgZXhpc3RzLCB3ZSBjYW5cbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBuZXcgYWNjb3VudCBmb3IgdGhlIHVzZXIsIGxpbmsgaXQgdG8gdGhlIE9BdXRoIGFjY291bnQgYW5kXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmV3IHNlc3Npb24gZm9yIHRoZW0gc28gdGhleSBhcmUgc2lnbmVkIGluIHdpdGggaXQuXG4gICAgICAgICAgICAgICAgdXNlciA9IGF3YWl0IGNyZWF0ZVVzZXIoeyAuLi5wcm9maWxlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgZXZlbnRzLmNyZWF0ZVVzZXI/Lih7IHVzZXIgfSk7XG4gICAgICAgICAgICBhd2FpdCBsaW5rQWNjb3VudCh7IC4uLmFjY291bnQsIHVzZXJJZDogdXNlci5pZCB9KTtcbiAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5saW5rQWNjb3VudD8uKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9KTtcbiAgICAgICAgICAgIHNlc3Npb24gPSB1c2VKd3RTZXNzaW9uXG4gICAgICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgICAgIDogYXdhaXQgY3JlYXRlU2Vzc2lvbih7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25Ub2tlbjogZ2VuZXJhdGVTZXNzaW9uVG9rZW4oKSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBmcm9tRGF0ZShvcHRpb25zLnNlc3Npb24ubWF4QWdlKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBY2NvdW50ID0geyAuLi5hY2NvdW50LCB1c2VySWQ6IHVzZXIuaWQgfTtcbiAgICAgICAgICAgIHJldHVybiB7IHNlc3Npb24sIHVzZXIsIGlzTmV3VXNlcjogdHJ1ZSwgYWNjb3VudDogY3VycmVudEFjY291bnQgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiBzaWduaW5nIGluIHdpdGggT0F1dGggYWNjb3VudCwgY2hlY2sgdG8gc2VlIGlmIHRoZSBhY2NvdW50IGV4aXN0cyBhbHJlYWR5XG4gICAgY29uc3QgdXNlckJ5QWNjb3VudCA9IGF3YWl0IGdldFVzZXJCeUFjY291bnQoe1xuICAgICAgICBwcm92aWRlckFjY291bnRJZDogYWNjb3VudC5wcm92aWRlckFjY291bnRJZCxcbiAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsXG4gICAgfSk7XG4gICAgaWYgKHVzZXJCeUFjY291bnQpIHtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIGFscmVhZHkgc2lnbmVkIGluIHdpdGggdGhpcyBhY2NvdW50LCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nXG4gICAgICAgICAgICBpZiAodXNlckJ5QWNjb3VudC5pZCA9PT0gdXNlci5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHNlc3Npb24sIHVzZXIsIGlzTmV3VXNlciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgY3VycmVudGx5IHNpZ25lZCBpbiwgYnV0IHRoZSBuZXcgYWNjb3VudCB0aGV5IGFyZSBzaWduaW5nIGluXG4gICAgICAgICAgICAvLyB3aXRoIGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIGFub3RoZXIgdXNlciwgdGhlbiB3ZSBjYW5ub3QgbGluayB0aGVtXG4gICAgICAgICAgICAvLyBhbmQgbmVlZCB0byByZXR1cm4gYW4gZXJyb3IuXG4gICAgICAgICAgICB0aHJvdyBuZXcgT0F1dGhBY2NvdW50Tm90TGlua2VkKFwiVGhlIGFjY291bnQgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYW5vdGhlciB1c2VyXCIsIHsgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gYWN0aXZlIHNlc3Npb24sIGJ1dCB0aGUgYWNjb3VudCBiZWluZyBzaWduZWQgaW4gd2l0aCBpcyBhbHJlYWR5XG4gICAgICAgIC8vIGFzc29jaWF0ZWQgd2l0aCBhIHZhbGlkIHVzZXIgdGhlbiBjcmVhdGUgc2Vzc2lvbiB0byBzaWduIHRoZSB1c2VyIGluLlxuICAgICAgICBzZXNzaW9uID0gdXNlSnd0U2Vzc2lvblxuICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgOiBhd2FpdCBjcmVhdGVTZXNzaW9uKHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uVG9rZW46IGdlbmVyYXRlU2Vzc2lvblRva2VuKCksXG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyQnlBY2NvdW50LmlkLFxuICAgICAgICAgICAgICAgIGV4cGlyZXM6IGZyb21EYXRlKG9wdGlvbnMuc2Vzc2lvbi5tYXhBZ2UpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHNlc3Npb24sIHVzZXI6IHVzZXJCeUFjY291bnQsIGlzTmV3VXNlciB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgeyBwcm92aWRlcjogcCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm92aWRlciwgcHJvdmlkZXJBY2NvdW50SWQsIHVzZXJJZCwgLi4udG9rZW5TZXQgfSA9IGFjY291bnQ7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0geyBwcm92aWRlckFjY291bnRJZCwgcHJvdmlkZXIsIHR5cGUsIHVzZXJJZCB9O1xuICAgICAgICBhY2NvdW50ID0gT2JqZWN0LmFzc2lnbihwLmFjY291bnQodG9rZW5TZXQpID8/IHt9LCBkZWZhdWx0cyk7XG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBhbHJlYWR5IHNpZ25lZCBpbiBhbmQgdGhlIE9BdXRoIGFjY291bnQgaXNuJ3QgYWxyZWFkeSBhc3NvY2lhdGVkXG4gICAgICAgICAgICAvLyB3aXRoIGFub3RoZXIgdXNlciBhY2NvdW50IHRoZW4gd2UgY2FuIGdvIGFoZWFkIGFuZCBsaW5rIHRoZSBhY2NvdW50cyBzYWZlbHkuXG4gICAgICAgICAgICBhd2FpdCBsaW5rQWNjb3VudCh7IC4uLmFjY291bnQsIHVzZXJJZDogdXNlci5pZCB9KTtcbiAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5saW5rQWNjb3VudD8uKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9KTtcbiAgICAgICAgICAgIC8vIEFzIHRoZXkgYXJlIGFscmVhZHkgc2lnbmVkIGluLCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nIGFmdGVyIGxpbmtpbmcgdGhlbVxuICAgICAgICAgICAgcmV0dXJuIHsgc2Vzc2lvbiwgdXNlciwgaXNOZXdVc2VyIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgbm90IHNpZ25lZCBpbiBhbmQgaXQgbG9va3MgbGlrZSBhIG5ldyBPQXV0aCBhY2NvdW50IHRoZW4gd2VcbiAgICAgICAgLy8gY2hlY2sgdGhlcmUgYWxzbyBpc24ndCBhbiB1c2VyIGFjY291bnQgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggdGhlIHNhbWVcbiAgICAgICAgLy8gZW1haWwgYWRkcmVzcyBhcyB0aGUgb25lIGluIHRoZSBPQXV0aCBwcm9maWxlLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIHN0ZXAgaXMgb2Z0ZW4gb3Zlcmxvb2tlZCBpbiBPQXV0aCBpbXBsZW1lbnRhdGlvbnMsIGJ1dCBjb3ZlcnMgdGhlIGZvbGxvd2luZyBjYXNlczpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gMS4gSXQgbWFrZXMgaXQgaGFyZGVyIGZvciBzb21lb25lIHRvIGFjY2lkZW50YWxseSBjcmVhdGUgdHdvIGFjY291bnRzLlxuICAgICAgICAvLyAgICBlLmcuIGJ5IHNpZ25pbiBpbiB3aXRoIGVtYWlsLCB0aGVuIGFnYWluIHdpdGggYW4gb2F1dGggYWNjb3VudCBjb25uZWN0ZWQgdG8gdGhlIHNhbWUgZW1haWwuXG4gICAgICAgIC8vIDIuIEl0IG1ha2VzIGl0IGhhcmRlciB0byBoaWphY2sgYSB1c2VyIGFjY291bnQgdXNpbmcgYSAzcmQgcGFydHkgT0F1dGggYWNjb3VudC5cbiAgICAgICAgLy8gICAgZS5nLiBieSBjcmVhdGluZyBhbiBvYXV0aCBhY2NvdW50IHRoZW4gY2hhbmdpbmcgdGhlIGVtYWlsIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIGl0LlxuICAgICAgICAvL1xuICAgICAgICAvLyBJdCdzIHF1aXRlIGNvbW1vbiBmb3Igc2VydmljZXMgdG8gYXV0b21hdGljYWxseSBsaW5rIGFjY291bnRzIGluIHRoaXMgY2FzZSwgYnV0IGl0J3NcbiAgICAgICAgLy8gYmV0dGVyIHByYWN0aWNlIHRvIHJlcXVpcmUgdGhlIHVzZXIgdG8gc2lnbiBpbiAqdGhlbiogbGluayBhY2NvdW50cyB0byBiZSBzdXJlXG4gICAgICAgIC8vIHNvbWVvbmUgaXMgbm90IGV4cGxvaXRpbmcgYSBwcm9ibGVtIHdpdGggYSB0aGlyZCBwYXJ0eSBPQXV0aCBzZXJ2aWNlLlxuICAgICAgICAvL1xuICAgICAgICAvLyBPQXV0aCBwcm92aWRlcnMgc2hvdWxkIHJlcXVpcmUgZW1haWwgYWRkcmVzcyB2ZXJpZmljYXRpb24gdG8gcHJldmVudCB0aGlzLCBidXQgaW5cbiAgICAgICAgLy8gcHJhY3RpY2UgdGhhdCBpcyBub3QgYWx3YXlzIHRoZSBjYXNlOyB0aGlzIGhlbHBzIHByb3RlY3QgYWdhaW5zdCB0aGF0LlxuICAgICAgICBjb25zdCB1c2VyQnlFbWFpbCA9IHByb2ZpbGUuZW1haWxcbiAgICAgICAgICAgID8gYXdhaXQgZ2V0VXNlckJ5RW1haWwocHJvZmlsZS5lbWFpbClcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgaWYgKHVzZXJCeUVtYWlsKSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IG9wdGlvbnMucHJvdmlkZXI7XG4gICAgICAgICAgICBpZiAocHJvdmlkZXI/LmFsbG93RGFuZ2Vyb3VzRW1haWxBY2NvdW50TGlua2luZykge1xuICAgICAgICAgICAgICAgIC8vIElmIHlvdSB0cnVzdCB0aGUgb2F1dGggcHJvdmlkZXIgdG8gY29ycmVjdGx5IHZlcmlmeSBlbWFpbCBhZGRyZXNzZXMsIHlvdSBjYW4gb3B0LWluIHRvXG4gICAgICAgICAgICAgICAgLy8gYWNjb3VudCBsaW5raW5nIGV2ZW4gd2hlbiB0aGUgdXNlciBpcyBub3Qgc2lnbmVkLWluLlxuICAgICAgICAgICAgICAgIHVzZXIgPSB1c2VyQnlFbWFpbDtcbiAgICAgICAgICAgICAgICBpc05ld1VzZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFdlIGVuZCB1cCBoZXJlIHdoZW4gd2UgZG9uJ3QgaGF2ZSBhbiBhY2NvdW50IHdpdGggdGhlIHNhbWUgW3Byb3ZpZGVyXS5pZCAqQlVUKlxuICAgICAgICAgICAgICAgIC8vIHdlIGRvIGFscmVhZHkgaGF2ZSBhbiBhY2NvdW50IHdpdGggdGhlIHNhbWUgZW1haWwgYWRkcmVzcyBhcyB0aGUgb25lIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIE9BdXRoIHByb2ZpbGUgdGhlIHVzZXIgaGFzIGp1c3QgdHJpZWQgdG8gc2lnbiBpbiB3aXRoLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBoYXZlIHR3byBhY2NvdW50cyB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3MsIGFuZCB3ZSBkb24ndFxuICAgICAgICAgICAgICAgIC8vIHdhbnQgdG8gbGluayB0aGVtIGluIGNhc2UgaXQncyBub3Qgc2FmZSB0byBkbyBzbywgc28gaW5zdGVhZCB3ZSBwcm9tcHQgdGhlIHVzZXJcbiAgICAgICAgICAgICAgICAvLyB0byBzaWduIGluIHZpYSBlbWFpbCB0byB2ZXJpZnkgdGhlaXIgaWRlbnRpdHkgYW5kIHRoZW4gbGluayB0aGUgYWNjb3VudHMuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9BdXRoQWNjb3VudE5vdExpbmtlZChcIkFub3RoZXIgYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoZSBzYW1lIGUtbWFpbCBhZGRyZXNzXCIsIHsgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCB1c2VyIGlzIG5vdCBsb2dnZWQgaW4gYW5kIHRoZSBwcm9maWxlIGlzbid0IGxpbmtlZCB0byBhbnkgdXNlclxuICAgICAgICAgICAgLy8gYWNjb3VudHMgKGJ5IGVtYWlsIG9yIHByb3ZpZGVyIGFjY291bnQgaWQpLi4uXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSWYgbm8gYWNjb3VudCBtYXRjaGluZyB0aGUgc2FtZSBbcHJvdmlkZXJdLmlkIG9yIC5lbWFpbCBleGlzdHMsIHdlIGNhblxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmV3IGFjY291bnQgZm9yIHRoZSB1c2VyLCBsaW5rIGl0IHRvIHRoZSBPQXV0aCBhY2NvdW50IGFuZFxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmV3IHNlc3Npb24gZm9yIHRoZW0gc28gdGhleSBhcmUgc2lnbmVkIGluIHdpdGggaXQuXG4gICAgICAgICAgICB1c2VyID0gYXdhaXQgY3JlYXRlVXNlcih7IC4uLnByb2ZpbGUsIGVtYWlsVmVyaWZpZWQ6IG51bGwgfSk7XG4gICAgICAgICAgICBpc05ld1VzZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGV2ZW50cy5jcmVhdGVVc2VyPy4oeyB1c2VyIH0pO1xuICAgICAgICBhd2FpdCBsaW5rQWNjb3VudCh7IC4uLmFjY291bnQsIHVzZXJJZDogdXNlci5pZCB9KTtcbiAgICAgICAgYXdhaXQgZXZlbnRzLmxpbmtBY2NvdW50Py4oeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlIH0pO1xuICAgICAgICBzZXNzaW9uID0gdXNlSnd0U2Vzc2lvblxuICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgOiBhd2FpdCBjcmVhdGVTZXNzaW9uKHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uVG9rZW46IGdlbmVyYXRlU2Vzc2lvblRva2VuKCksXG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgIGV4cGlyZXM6IGZyb21EYXRlKG9wdGlvbnMuc2Vzc2lvbi5tYXhBZ2UpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHNlc3Npb24sIHVzZXIsIGlzTmV3VXNlciB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/callback/handle-login.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/callback/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callback: () => (/* binding */ callback)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _handle_login_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handle-login.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/handle-login.js\");\n/* harmony import */ var _oauth_callback_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./oauth/callback.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/callback.js\");\n/* harmony import */ var _oauth_checks_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./oauth/checks.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\");\n/* harmony import */ var _utils_web_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/web.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/web.js\");\n/* harmony import */ var _utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/webauthn-utils.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/webauthn-utils.js\");\n// TODO: Make this file smaller\n\n\n\n\n\n\n/** Handle callbacks from login services */\nasync function callback(request, options, sessionStore, cookies) {\n    if (!options.provider)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidProvider(\"Callback route called without provider\");\n    const { query, body, method, headers } = request;\n    const { provider, adapter, url, callbackUrl, pages, jwt, events, callbacks, session: { strategy: sessionStrategy, maxAge: sessionMaxAge }, logger, } = options;\n    const useJwtSession = sessionStrategy === \"jwt\";\n    try {\n        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n            // Use body if the response mode is set to form_post. For all other cases, use query\n            const params = provider.authorization?.url.searchParams.get(\"response_mode\") ===\n                \"form_post\"\n                ? body\n                : query;\n            // If we have a state and we are on a redirect proxy, we try to parse it\n            // and see if it contains a valid origin to redirect to. If it does, we\n            // redirect the user to that origin with the original state.\n            if (options.isOnRedirectProxy && params?.state) {\n                // NOTE: We rely on the state being encrypted using a shared secret\n                // between the proxy and the original server.\n                const parsedState = await _oauth_checks_js__WEBPACK_IMPORTED_MODULE_3__.state.decode(params.state, options);\n                const shouldRedirect = parsedState?.origin &&\n                    new URL(parsedState.origin).origin !== options.url.origin;\n                if (shouldRedirect) {\n                    const proxyRedirect = `${parsedState.origin}?${new URLSearchParams(params)}`;\n                    logger.debug(\"Proxy redirecting to\", proxyRedirect);\n                    return { redirect: proxyRedirect, cookies };\n                }\n            }\n            const authorizationResult = await (0,_oauth_callback_js__WEBPACK_IMPORTED_MODULE_2__.handleOAuth)(params, request.cookies, options);\n            if (authorizationResult.cookies.length) {\n                cookies.push(...authorizationResult.cookies);\n            }\n            logger.debug(\"authorization result\", authorizationResult);\n            const { user: userFromProvider, account, profile: OAuthProfile, } = authorizationResult;\n            // If we don't have a profile object then either something went wrong\n            // or the user cancelled signing in. We don't know which, so we just\n            // direct the user to the signin page for now. We could do something\n            // else in future.\n            // TODO: Handle user cancelling signin\n            if (!userFromProvider || !account || !OAuthProfile) {\n                return { redirect: `${url}/signin`, cookies };\n            }\n            // Check if user is allowed to sign in\n            // Attempt to get Profile from OAuth provider details before invoking\n            // signIn callback - but if no user object is returned, that is fine\n            // (that just means it's a new user signing in for the first time).\n            let userByAccount;\n            if (adapter) {\n                const { getUserByAccount } = adapter;\n                userByAccount = await getUserByAccount({\n                    providerAccountId: account.providerAccountId,\n                    provider: provider.id,\n                });\n            }\n            const redirect = await handleAuthorized({\n                user: userByAccount ?? userFromProvider,\n                account,\n                profile: OAuthProfile,\n            }, options);\n            if (redirect)\n                return { redirect, cookies };\n            const { user, session, isNewUser } = await (0,_handle_login_js__WEBPACK_IMPORTED_MODULE_1__.handleLoginOrRegister)(sessionStore.value, userFromProvider, account, options);\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: user.name,\n                    email: user.email,\n                    picture: user.image,\n                    sub: user.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user,\n                    account,\n                    profile: OAuthProfile,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({\n                user,\n                account,\n                profile: OAuthProfile,\n                isNewUser,\n            });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"email\") {\n            const paramToken = query?.token;\n            const paramIdentifier = query?.email;\n            if (!paramToken) {\n                const e = new TypeError(\"Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.\", { cause: { hasToken: !!paramToken } });\n                e.name = \"Configuration\";\n                throw e;\n            }\n            const secret = provider.secret ?? options.secret;\n            // @ts-expect-error -- Verified in `assertConfig`.\n            const invite = await adapter.useVerificationToken({\n                // @ts-expect-error User-land adapters might decide to omit the identifier during lookup\n                identifier: paramIdentifier, // TODO: Drop this requirement for lookup in official adapters too\n                token: await (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_4__.createHash)(`${paramToken}${secret}`),\n            });\n            const hasInvite = !!invite;\n            const expired = hasInvite && invite.expires.valueOf() < Date.now();\n            const invalidInvite = !hasInvite ||\n                expired ||\n                // The user might have configured the link to not contain the identifier\n                // so we only compare if it exists\n                (paramIdentifier && invite.identifier !== paramIdentifier);\n            if (invalidInvite)\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.Verification({ hasInvite, expired });\n            const { identifier } = invite;\n            const user = (await adapter.getUserByEmail(identifier)) ?? {\n                id: crypto.randomUUID(),\n                email: identifier,\n                emailVerified: null,\n            };\n            const account = {\n                providerAccountId: user.email,\n                userId: user.id,\n                type: \"email\",\n                provider: provider.id,\n            };\n            const redirect = await handleAuthorized({ user, account }, options);\n            if (redirect)\n                return { redirect, cookies };\n            // Sign user in\n            const { user: loggedInUser, session, isNewUser, } = await (0,_handle_login_js__WEBPACK_IMPORTED_MODULE_1__.handleLoginOrRegister)(sessionStore.value, user, account, options);\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: loggedInUser.name,\n                    email: loggedInUser.email,\n                    picture: loggedInUser.image,\n                    sub: loggedInUser.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user: loggedInUser,\n                    account,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({ user: loggedInUser, account, isNewUser });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            // Callback URL is already verified at this point, so safe to use if specified\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"credentials\" && method === \"POST\") {\n            const credentials = body ?? {};\n            // TODO: Forward the original request as is, instead of reconstructing it\n            Object.entries(query ?? {}).forEach(([k, v]) => url.searchParams.set(k, v));\n            const userFromAuthorize = await provider.authorize(credentials, \n            // prettier-ignore\n            new Request(url, { headers, method, body: JSON.stringify(body) }));\n            const user = userFromAuthorize;\n            if (!user)\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.CredentialsSignin();\n            else\n                user.id = user.id?.toString() ?? crypto.randomUUID();\n            const account = {\n                providerAccountId: user.id,\n                type: \"credentials\",\n                provider: provider.id,\n            };\n            const redirect = await handleAuthorized({ user, account, credentials }, options);\n            if (redirect)\n                return { redirect, cookies };\n            const defaultToken = {\n                name: user.name,\n                email: user.email,\n                picture: user.image,\n                sub: user.id,\n            };\n            const token = await callbacks.jwt({\n                token: defaultToken,\n                user,\n                account,\n                isNewUser: false,\n                trigger: \"signIn\",\n            });\n            // Clear cookies if token is null\n            if (token === null) {\n                cookies.push(...sessionStore.clean());\n            }\n            else {\n                const salt = options.cookies.sessionToken.name;\n                // Encode token\n                const newToken = await jwt.encode({ ...jwt, token, salt });\n                // Set cookie expiry date\n                const cookieExpires = new Date();\n                cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                const sessionCookies = sessionStore.chunk(newToken, {\n                    expires: cookieExpires,\n                });\n                cookies.push(...sessionCookies);\n            }\n            await events.signIn?.({ user, account });\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"webauthn\" && method === \"POST\") {\n            // Get callback action from request. It should be either \"authenticate\" or \"register\"\n            const action = request.body?.action;\n            if (typeof action !== \"string\" ||\n                (action !== \"authenticate\" && action !== \"register\")) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Invalid action parameter\");\n            }\n            // Return an error if the adapter is missing or if the provider\n            // is not a webauthn provider.\n            const localOptions = (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_5__.assertInternalOptionsWebAuthn)(options);\n            // Verify request to get user, account and authenticator\n            let user;\n            let account;\n            let authenticator;\n            switch (action) {\n                case \"authenticate\": {\n                    const verified = await (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_5__.verifyAuthenticate)(localOptions, request, cookies);\n                    user = verified.user;\n                    account = verified.account;\n                    break;\n                }\n                case \"register\": {\n                    const verified = await (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_5__.verifyRegister)(options, request, cookies);\n                    user = verified.user;\n                    account = verified.account;\n                    authenticator = verified.authenticator;\n                    break;\n                }\n            }\n            // Check if user is allowed to sign in\n            await handleAuthorized({ user, account }, options);\n            // Sign user in, creating them and their account if needed\n            const { user: loggedInUser, isNewUser, session, account: currentAccount, } = await (0,_handle_login_js__WEBPACK_IMPORTED_MODULE_1__.handleLoginOrRegister)(sessionStore.value, user, account, options);\n            if (!currentAccount) {\n                // This is mostly for type checking. It should never actually happen.\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Error creating or finding account\");\n            }\n            // Create new authenticator if needed\n            if (authenticator && loggedInUser.id) {\n                await localOptions.adapter.createAuthenticator({\n                    ...authenticator,\n                    userId: loggedInUser.id,\n                });\n            }\n            // Do the session registering dance\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: loggedInUser.name,\n                    email: loggedInUser.email,\n                    picture: loggedInUser.image,\n                    sub: loggedInUser.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user: loggedInUser,\n                    account: currentAccount,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({\n                user: loggedInUser,\n                account: currentAccount,\n                isNewUser,\n            });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            // Callback URL is already verified at this point, so safe to use if specified\n            return { redirect: callbackUrl, cookies };\n        }\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidProvider(`Callback for provider type (${provider.type}) is not supported`);\n    }\n    catch (e) {\n        if (e instanceof _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError)\n            throw e;\n        const error = new _errors_js__WEBPACK_IMPORTED_MODULE_0__.CallbackRouteError(e, { provider: provider.id });\n        logger.debug(\"callback route error details\", { method, query, body });\n        throw error;\n    }\n}\nasync function handleAuthorized(params, config) {\n    let authorized;\n    const { signIn, redirect } = config.callbacks;\n    try {\n        authorized = await signIn(params);\n    }\n    catch (e) {\n        if (e instanceof _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError)\n            throw e;\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AccessDenied(e);\n    }\n    if (!authorized)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AccessDenied(\"AccessDenied\");\n    if (typeof authorized !== \"string\")\n        return;\n    return await redirect({ url: authorized, baseUrl: config.url.origin });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL2NhbGxiYWNrL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNvSTtBQUMxRTtBQUNSO0FBQ1I7QUFDTTtBQUNtRTtBQUNuSDtBQUNPO0FBQ1A7QUFDQSxrQkFBa0IsdURBQWU7QUFDakMsWUFBWSwrQkFBK0I7QUFDM0MsWUFBWSwrRUFBK0Usa0RBQWtELFlBQVk7QUFDeko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxtREFBSztBQUMvQztBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsbUJBQW1CLEdBQUcsNEJBQTRCO0FBQy9GO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSw4Q0FBOEMsK0RBQVc7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMERBQTBEO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixhQUFhLElBQUk7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EseUJBQXlCO0FBQ3pCLG9CQUFvQiwyQkFBMkIsUUFBUSx1RUFBcUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxxQkFBcUI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxjQUFjLEVBQUUsd0NBQXdDLEVBQUUsc0JBQXNCLGFBQWEsRUFBRTtBQUNoSTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtKQUErSixTQUFTLDBCQUEwQjtBQUNsTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlEQUFVLElBQUksV0FBVyxFQUFFLE9BQU87QUFDL0QsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQVksR0FBRyxvQkFBb0I7QUFDN0Qsb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxlQUFlO0FBQ3JFO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0Esb0JBQW9CLDBDQUEwQyxRQUFRLHVFQUFxQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxxQkFBcUI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBLG9DQUFvQyx3Q0FBd0M7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxjQUFjLEVBQUUsd0NBQXdDLEVBQUUsc0JBQXNCLGFBQWEsRUFBRTtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsK0JBQStCLDZDQUE2QztBQUM1RTtBQUNBO0FBQ0EsMEJBQTBCLHlEQUFpQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCw0QkFBNEI7QUFDbEY7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELHFCQUFxQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxvQ0FBb0MsZUFBZTtBQUNuRCxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGlEQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1RkFBNkI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDRFQUFrQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdFQUFjO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGVBQWU7QUFDcEQ7QUFDQSxvQkFBb0IsbUVBQW1FLFFBQVEsdUVBQXFCO0FBQ3BIO0FBQ0E7QUFDQSwwQkFBMEIsaURBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxxQkFBcUI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsY0FBYyxFQUFFLHdDQUF3QyxFQUFFLHNCQUFzQixhQUFhLEVBQUU7QUFDaEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxrQkFBa0IsdURBQWUsZ0NBQWdDLGNBQWM7QUFDL0U7QUFDQTtBQUNBLHlCQUF5QixpREFBUztBQUNsQztBQUNBLDBCQUEwQiwwREFBa0IsTUFBTSx1QkFBdUI7QUFDekUsdURBQXVELHFCQUFxQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaURBQVM7QUFDbEM7QUFDQSxrQkFBa0Isb0RBQVk7QUFDOUI7QUFDQTtBQUNBLGtCQUFrQixvREFBWTtBQUM5QjtBQUNBO0FBQ0EsNEJBQTRCLDZDQUE2QztBQUN6RSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXGFjdGlvbnNcXGNhbGxiYWNrXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUT0RPOiBNYWtlIHRoaXMgZmlsZSBzbWFsbGVyXG5pbXBvcnQgeyBBdXRoRXJyb3IsIEFjY2Vzc0RlbmllZCwgQ2FsbGJhY2tSb3V0ZUVycm9yLCBDcmVkZW50aWFsc1NpZ25pbiwgSW52YWxpZFByb3ZpZGVyLCBWZXJpZmljYXRpb24sIH0gZnJvbSBcIi4uLy4uLy4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlTG9naW5PclJlZ2lzdGVyIH0gZnJvbSBcIi4vaGFuZGxlLWxvZ2luLmpzXCI7XG5pbXBvcnQgeyBoYW5kbGVPQXV0aCB9IGZyb20gXCIuL29hdXRoL2NhbGxiYWNrLmpzXCI7XG5pbXBvcnQgeyBzdGF0ZSB9IGZyb20gXCIuL29hdXRoL2NoZWNrcy5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gXCIuLi8uLi91dGlscy93ZWIuanNcIjtcbmltcG9ydCB7IGFzc2VydEludGVybmFsT3B0aW9uc1dlYkF1dGhuLCB2ZXJpZnlBdXRoZW50aWNhdGUsIHZlcmlmeVJlZ2lzdGVyLCB9IGZyb20gXCIuLi8uLi91dGlscy93ZWJhdXRobi11dGlscy5qc1wiO1xuLyoqIEhhbmRsZSBjYWxsYmFja3MgZnJvbSBsb2dpbiBzZXJ2aWNlcyAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxiYWNrKHJlcXVlc3QsIG9wdGlvbnMsIHNlc3Npb25TdG9yZSwgY29va2llcykge1xuICAgIGlmICghb3B0aW9ucy5wcm92aWRlcilcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRQcm92aWRlcihcIkNhbGxiYWNrIHJvdXRlIGNhbGxlZCB3aXRob3V0IHByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IHsgcXVlcnksIGJvZHksIG1ldGhvZCwgaGVhZGVycyB9ID0gcmVxdWVzdDtcbiAgICBjb25zdCB7IHByb3ZpZGVyLCBhZGFwdGVyLCB1cmwsIGNhbGxiYWNrVXJsLCBwYWdlcywgand0LCBldmVudHMsIGNhbGxiYWNrcywgc2Vzc2lvbjogeyBzdHJhdGVneTogc2Vzc2lvblN0cmF0ZWd5LCBtYXhBZ2U6IHNlc3Npb25NYXhBZ2UgfSwgbG9nZ2VyLCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCB1c2VKd3RTZXNzaW9uID0gc2Vzc2lvblN0cmF0ZWd5ID09PSBcImp3dFwiO1xuICAgIHRyeSB7XG4gICAgICAgIGlmIChwcm92aWRlci50eXBlID09PSBcIm9hdXRoXCIgfHwgcHJvdmlkZXIudHlwZSA9PT0gXCJvaWRjXCIpIHtcbiAgICAgICAgICAgIC8vIFVzZSBib2R5IGlmIHRoZSByZXNwb25zZSBtb2RlIGlzIHNldCB0byBmb3JtX3Bvc3QuIEZvciBhbGwgb3RoZXIgY2FzZXMsIHVzZSBxdWVyeVxuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gcHJvdmlkZXIuYXV0aG9yaXphdGlvbj8udXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJyZXNwb25zZV9tb2RlXCIpID09PVxuICAgICAgICAgICAgICAgIFwiZm9ybV9wb3N0XCJcbiAgICAgICAgICAgICAgICA/IGJvZHlcbiAgICAgICAgICAgICAgICA6IHF1ZXJ5O1xuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIHN0YXRlIGFuZCB3ZSBhcmUgb24gYSByZWRpcmVjdCBwcm94eSwgd2UgdHJ5IHRvIHBhcnNlIGl0XG4gICAgICAgICAgICAvLyBhbmQgc2VlIGlmIGl0IGNvbnRhaW5zIGEgdmFsaWQgb3JpZ2luIHRvIHJlZGlyZWN0IHRvLiBJZiBpdCBkb2VzLCB3ZVxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gdGhhdCBvcmlnaW4gd2l0aCB0aGUgb3JpZ2luYWwgc3RhdGUuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pc09uUmVkaXJlY3RQcm94eSAmJiBwYXJhbXM/LnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gTk9URTogV2UgcmVseSBvbiB0aGUgc3RhdGUgYmVpbmcgZW5jcnlwdGVkIHVzaW5nIGEgc2hhcmVkIHNlY3JldFxuICAgICAgICAgICAgICAgIC8vIGJldHdlZW4gdGhlIHByb3h5IGFuZCB0aGUgb3JpZ2luYWwgc2VydmVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFN0YXRlID0gYXdhaXQgc3RhdGUuZGVjb2RlKHBhcmFtcy5zdGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkUmVkaXJlY3QgPSBwYXJzZWRTdGF0ZT8ub3JpZ2luICYmXG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwocGFyc2VkU3RhdGUub3JpZ2luKS5vcmlnaW4gIT09IG9wdGlvbnMudXJsLm9yaWdpbjtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJveHlSZWRpcmVjdCA9IGAke3BhcnNlZFN0YXRlLm9yaWdpbn0/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcyl9YDtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiUHJveHkgcmVkaXJlY3RpbmcgdG9cIiwgcHJveHlSZWRpcmVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0OiBwcm94eVJlZGlyZWN0LCBjb29raWVzIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblJlc3VsdCA9IGF3YWl0IGhhbmRsZU9BdXRoKHBhcmFtcywgcmVxdWVzdC5jb29raWVzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChhdXRob3JpemF0aW9uUmVzdWx0LmNvb2tpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29va2llcy5wdXNoKC4uLmF1dGhvcml6YXRpb25SZXN1bHQuY29va2llcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJhdXRob3JpemF0aW9uIHJlc3VsdFwiLCBhdXRob3JpemF0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlcjogdXNlckZyb21Qcm92aWRlciwgYWNjb3VudCwgcHJvZmlsZTogT0F1dGhQcm9maWxlLCB9ID0gYXV0aG9yaXphdGlvblJlc3VsdDtcbiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBwcm9maWxlIG9iamVjdCB0aGVuIGVpdGhlciBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgICAgICAgLy8gb3IgdGhlIHVzZXIgY2FuY2VsbGVkIHNpZ25pbmcgaW4uIFdlIGRvbid0IGtub3cgd2hpY2gsIHNvIHdlIGp1c3RcbiAgICAgICAgICAgIC8vIGRpcmVjdCB0aGUgdXNlciB0byB0aGUgc2lnbmluIHBhZ2UgZm9yIG5vdy4gV2UgY291bGQgZG8gc29tZXRoaW5nXG4gICAgICAgICAgICAvLyBlbHNlIGluIGZ1dHVyZS5cbiAgICAgICAgICAgIC8vIFRPRE86IEhhbmRsZSB1c2VyIGNhbmNlbGxpbmcgc2lnbmluXG4gICAgICAgICAgICBpZiAoIXVzZXJGcm9tUHJvdmlkZXIgfHwgIWFjY291bnQgfHwgIU9BdXRoUHJvZmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0OiBgJHt1cmx9L3NpZ25pbmAsIGNvb2tpZXMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYWxsb3dlZCB0byBzaWduIGluXG4gICAgICAgICAgICAvLyBBdHRlbXB0IHRvIGdldCBQcm9maWxlIGZyb20gT0F1dGggcHJvdmlkZXIgZGV0YWlscyBiZWZvcmUgaW52b2tpbmdcbiAgICAgICAgICAgIC8vIHNpZ25JbiBjYWxsYmFjayAtIGJ1dCBpZiBubyB1c2VyIG9iamVjdCBpcyByZXR1cm5lZCwgdGhhdCBpcyBmaW5lXG4gICAgICAgICAgICAvLyAodGhhdCBqdXN0IG1lYW5zIGl0J3MgYSBuZXcgdXNlciBzaWduaW5nIGluIGZvciB0aGUgZmlyc3QgdGltZSkuXG4gICAgICAgICAgICBsZXQgdXNlckJ5QWNjb3VudDtcbiAgICAgICAgICAgIGlmIChhZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBnZXRVc2VyQnlBY2NvdW50IH0gPSBhZGFwdGVyO1xuICAgICAgICAgICAgICAgIHVzZXJCeUFjY291bnQgPSBhd2FpdCBnZXRVc2VyQnlBY2NvdW50KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlci5pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0ID0gYXdhaXQgaGFuZGxlQXV0aG9yaXplZCh7XG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckJ5QWNjb3VudCA/PyB1c2VyRnJvbVByb3ZpZGVyLFxuICAgICAgICAgICAgICAgIGFjY291bnQsXG4gICAgICAgICAgICAgICAgcHJvZmlsZTogT0F1dGhQcm9maWxlLFxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAocmVkaXJlY3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3QsIGNvb2tpZXMgfTtcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlciwgc2Vzc2lvbiwgaXNOZXdVc2VyIH0gPSBhd2FpdCBoYW5kbGVMb2dpbk9yUmVnaXN0ZXIoc2Vzc2lvblN0b3JlLnZhbHVlLCB1c2VyRnJvbVByb3ZpZGVyLCBhY2NvdW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmICh1c2VKd3RTZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFRva2VuID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICBwaWN0dXJlOiB1c2VyLmltYWdlLFxuICAgICAgICAgICAgICAgICAgICBzdWI6IHVzZXIuaWQ/LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGNhbGxiYWNrcy5qd3Qoe1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjogZGVmYXVsdFRva2VuLFxuICAgICAgICAgICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50LFxuICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiBPQXV0aFByb2ZpbGUsXG4gICAgICAgICAgICAgICAgICAgIGlzTmV3VXNlcixcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogaXNOZXdVc2VyID8gXCJzaWduVXBcIiA6IFwic2lnbkluXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgY29va2llcyBpZiB0b2tlbiBpcyBudWxsXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCguLi5zZXNzaW9uU3RvcmUuY2xlYW4oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWx0ID0gb3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAvLyBFbmNvZGUgdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBhd2FpdCBqd3QuZW5jb2RlKHsgLi4uand0LCB0b2tlbiwgc2FsdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGNvb2tpZSBleHBpcnkgZGF0ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb29raWVFeHBpcmVzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29va2llRXhwaXJlcy5zZXRUaW1lKGNvb2tpZUV4cGlyZXMuZ2V0VGltZSgpICsgc2Vzc2lvbk1heEFnZSAqIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uQ29va2llcyA9IHNlc3Npb25TdG9yZS5jaHVuayhuZXdUb2tlbiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogY29va2llRXhwaXJlcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCguLi5zZXNzaW9uQ29va2llcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBTZXNzaW9uIFRva2VuIGluIGNvb2tpZVxuICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlc3Npb24uc2Vzc2lvblRva2VuLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBzZXNzaW9uLmV4cGlyZXMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBldmVudHMuc2lnbkluPy4oe1xuICAgICAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICAgICAgYWNjb3VudCxcbiAgICAgICAgICAgICAgICBwcm9maWxlOiBPQXV0aFByb2ZpbGUsXG4gICAgICAgICAgICAgICAgaXNOZXdVc2VyLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBIYW5kbGUgZmlyc3QgbG9naW5zIG9uIG5ldyBhY2NvdW50c1xuICAgICAgICAgICAgLy8gZS5nLiBvcHRpb24gdG8gc2VuZCB1c2VycyB0byBhIG5ldyBhY2NvdW50IGxhbmRpbmcgcGFnZSBvbiBpbml0aWFsIGxvZ2luXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGNhbGxiYWNrIFVSTCBpcyBwcmVzZXJ2ZWQsIHNvIHRoZSBqb3VybmV5IGNhbiBzdGlsbCBiZSByZXN1bWVkXG4gICAgICAgICAgICBpZiAoaXNOZXdVc2VyICYmIHBhZ2VzLm5ld1VzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogYCR7cGFnZXMubmV3VXNlcn0ke3BhZ2VzLm5ld1VzZXIuaW5jbHVkZXMoXCI/XCIpID8gXCImXCIgOiBcIj9cIn0ke25ldyBVUkxTZWFyY2hQYXJhbXMoeyBjYWxsYmFja1VybCB9KX1gLFxuICAgICAgICAgICAgICAgICAgICBjb29raWVzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdDogY2FsbGJhY2tVcmwsIGNvb2tpZXMgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm92aWRlci50eXBlID09PSBcImVtYWlsXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtVG9rZW4gPSBxdWVyeT8udG9rZW47XG4gICAgICAgICAgICBjb25zdCBwYXJhbUlkZW50aWZpZXIgPSBxdWVyeT8uZW1haWw7XG4gICAgICAgICAgICBpZiAoIXBhcmFtVG9rZW4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFR5cGVFcnJvcihcIk1pc3NpbmcgdG9rZW4uIFRoZSBzaWduLWluIFVSTCB3YXMgbWFudWFsbHkgb3BlbmVkIHdpdGhvdXQgdG9rZW4gb3IgdGhlIGxpbmsgd2FzIG5vdCBzZW50IGNvcnJlY3RseSBpbiB0aGUgZW1haWwuXCIsIHsgY2F1c2U6IHsgaGFzVG9rZW46ICEhcGFyYW1Ub2tlbiB9IH0pO1xuICAgICAgICAgICAgICAgIGUubmFtZSA9IFwiQ29uZmlndXJhdGlvblwiO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZWNyZXQgPSBwcm92aWRlci5zZWNyZXQgPz8gb3B0aW9ucy5zZWNyZXQ7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0tIFZlcmlmaWVkIGluIGBhc3NlcnRDb25maWdgLlxuICAgICAgICAgICAgY29uc3QgaW52aXRlID0gYXdhaXQgYWRhcHRlci51c2VWZXJpZmljYXRpb25Ub2tlbih7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBVc2VyLWxhbmQgYWRhcHRlcnMgbWlnaHQgZGVjaWRlIHRvIG9taXQgdGhlIGlkZW50aWZpZXIgZHVyaW5nIGxvb2t1cFxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IHBhcmFtSWRlbnRpZmllciwgLy8gVE9ETzogRHJvcCB0aGlzIHJlcXVpcmVtZW50IGZvciBsb29rdXAgaW4gb2ZmaWNpYWwgYWRhcHRlcnMgdG9vXG4gICAgICAgICAgICAgICAgdG9rZW46IGF3YWl0IGNyZWF0ZUhhc2goYCR7cGFyYW1Ub2tlbn0ke3NlY3JldH1gKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgaGFzSW52aXRlID0gISFpbnZpdGU7XG4gICAgICAgICAgICBjb25zdCBleHBpcmVkID0gaGFzSW52aXRlICYmIGludml0ZS5leHBpcmVzLnZhbHVlT2YoKSA8IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkSW52aXRlID0gIWhhc0ludml0ZSB8fFxuICAgICAgICAgICAgICAgIGV4cGlyZWQgfHxcbiAgICAgICAgICAgICAgICAvLyBUaGUgdXNlciBtaWdodCBoYXZlIGNvbmZpZ3VyZWQgdGhlIGxpbmsgdG8gbm90IGNvbnRhaW4gdGhlIGlkZW50aWZpZXJcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBvbmx5IGNvbXBhcmUgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICAgKHBhcmFtSWRlbnRpZmllciAmJiBpbnZpdGUuaWRlbnRpZmllciAhPT0gcGFyYW1JZGVudGlmaWVyKTtcbiAgICAgICAgICAgIGlmIChpbnZhbGlkSW52aXRlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBWZXJpZmljYXRpb24oeyBoYXNJbnZpdGUsIGV4cGlyZWQgfSk7XG4gICAgICAgICAgICBjb25zdCB7IGlkZW50aWZpZXIgfSA9IGludml0ZTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSAoYXdhaXQgYWRhcHRlci5nZXRVc2VyQnlFbWFpbChpZGVudGlmaWVyKSkgPz8ge1xuICAgICAgICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBpZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHtcbiAgICAgICAgICAgICAgICBwcm92aWRlckFjY291bnRJZDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJlbWFpbFwiLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlci5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZWRpcmVjdCA9IGF3YWl0IGhhbmRsZUF1dGhvcml6ZWQoeyB1c2VyLCBhY2NvdW50IH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHJlZGlyZWN0KVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0LCBjb29raWVzIH07XG4gICAgICAgICAgICAvLyBTaWduIHVzZXIgaW5cbiAgICAgICAgICAgIGNvbnN0IHsgdXNlcjogbG9nZ2VkSW5Vc2VyLCBzZXNzaW9uLCBpc05ld1VzZXIsIH0gPSBhd2FpdCBoYW5kbGVMb2dpbk9yUmVnaXN0ZXIoc2Vzc2lvblN0b3JlLnZhbHVlLCB1c2VyLCBhY2NvdW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmICh1c2VKd3RTZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFRva2VuID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBsb2dnZWRJblVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGxvZ2dlZEluVXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgcGljdHVyZTogbG9nZ2VkSW5Vc2VyLmltYWdlLFxuICAgICAgICAgICAgICAgICAgICBzdWI6IGxvZ2dlZEluVXNlci5pZD8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgY2FsbGJhY2tzLmp3dCh7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiBkZWZhdWx0VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHVzZXI6IGxvZ2dlZEluVXNlcixcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgaXNOZXdVc2VyLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBpc05ld1VzZXIgPyBcInNpZ25VcFwiIDogXCJzaWduSW5cIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciBjb29raWVzIGlmIHRva2VuIGlzIG51bGxcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29va2llcy5wdXNoKC4uLnNlc3Npb25TdG9yZS5jbGVhbigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbHQgPSBvcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSB0b2tlblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUb2tlbiA9IGF3YWl0IGp3dC5lbmNvZGUoeyAuLi5qd3QsIHRva2VuLCBzYWx0IH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgY29va2llIGV4cGlyeSBkYXRlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvb2tpZUV4cGlyZXMgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb29raWVFeHBpcmVzLnNldFRpbWUoY29va2llRXhwaXJlcy5nZXRUaW1lKCkgKyBzZXNzaW9uTWF4QWdlICogMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Db29raWVzID0gc2Vzc2lvblN0b3JlLmNodW5rKG5ld1Rva2VuLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBjb29raWVFeHBpcmVzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29va2llcy5wdXNoKC4uLnNlc3Npb25Db29raWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTYXZlIFNlc3Npb24gVG9rZW4gaW4gY29va2llXG4gICAgICAgICAgICAgICAgY29va2llcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2Vzc2lvbi5zZXNzaW9uVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZXM6IHNlc3Npb24uZXhwaXJlcyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5zaWduSW4/Lih7IHVzZXI6IGxvZ2dlZEluVXNlciwgYWNjb3VudCwgaXNOZXdVc2VyIH0pO1xuICAgICAgICAgICAgLy8gSGFuZGxlIGZpcnN0IGxvZ2lucyBvbiBuZXcgYWNjb3VudHNcbiAgICAgICAgICAgIC8vIGUuZy4gb3B0aW9uIHRvIHNlbmQgdXNlcnMgdG8gYSBuZXcgYWNjb3VudCBsYW5kaW5nIHBhZ2Ugb24gaW5pdGlhbCBsb2dpblxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBjYWxsYmFjayBVUkwgaXMgcHJlc2VydmVkLCBzbyB0aGUgam91cm5leSBjYW4gc3RpbGwgYmUgcmVzdW1lZFxuICAgICAgICAgICAgaWYgKGlzTmV3VXNlciAmJiBwYWdlcy5uZXdVc2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6IGAke3BhZ2VzLm5ld1VzZXJ9JHtwYWdlcy5uZXdVc2VyLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHsgY2FsbGJhY2tVcmwgfSl9YCxcbiAgICAgICAgICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2FsbGJhY2sgVVJMIGlzIGFscmVhZHkgdmVyaWZpZWQgYXQgdGhpcyBwb2ludCwgc28gc2FmZSB0byB1c2UgaWYgc3BlY2lmaWVkXG4gICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdDogY2FsbGJhY2tVcmwsIGNvb2tpZXMgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm92aWRlci50eXBlID09PSBcImNyZWRlbnRpYWxzXCIgJiYgbWV0aG9kID09PSBcIlBPU1RcIikge1xuICAgICAgICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBib2R5ID8/IHt9O1xuICAgICAgICAgICAgLy8gVE9ETzogRm9yd2FyZCB0aGUgb3JpZ2luYWwgcmVxdWVzdCBhcyBpcywgaW5zdGVhZCBvZiByZWNvbnN0cnVjdGluZyBpdFxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMocXVlcnkgPz8ge30pLmZvckVhY2goKFtrLCB2XSkgPT4gdXJsLnNlYXJjaFBhcmFtcy5zZXQoaywgdikpO1xuICAgICAgICAgICAgY29uc3QgdXNlckZyb21BdXRob3JpemUgPSBhd2FpdCBwcm92aWRlci5hdXRob3JpemUoY3JlZGVudGlhbHMsIFxuICAgICAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICAgICAgICBuZXcgUmVxdWVzdCh1cmwsIHsgaGVhZGVycywgbWV0aG9kLCBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSB9KSk7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gdXNlckZyb21BdXRob3JpemU7XG4gICAgICAgICAgICBpZiAoIXVzZXIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENyZWRlbnRpYWxzU2lnbmluKCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdXNlci5pZCA9IHVzZXIuaWQ/LnRvU3RyaW5nKCkgPz8gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnQgPSB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlci5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZWRpcmVjdCA9IGF3YWl0IGhhbmRsZUF1dGhvcml6ZWQoeyB1c2VyLCBhY2NvdW50LCBjcmVkZW50aWFscyB9LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChyZWRpcmVjdClcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdCwgY29va2llcyB9O1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFRva2VuID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICBwaWN0dXJlOiB1c2VyLmltYWdlLFxuICAgICAgICAgICAgICAgIHN1YjogdXNlci5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGNhbGxiYWNrcy5qd3Qoe1xuICAgICAgICAgICAgICAgIHRva2VuOiBkZWZhdWx0VG9rZW4sXG4gICAgICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgICAgICBhY2NvdW50LFxuICAgICAgICAgICAgICAgIGlzTmV3VXNlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJzaWduSW5cIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gQ2xlYXIgY29va2llcyBpZiB0b2tlbiBpcyBudWxsXG4gICAgICAgICAgICBpZiAodG9rZW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb29raWVzLnB1c2goLi4uc2Vzc2lvblN0b3JlLmNsZWFuKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2FsdCA9IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZTtcbiAgICAgICAgICAgICAgICAvLyBFbmNvZGUgdG9rZW5cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUb2tlbiA9IGF3YWl0IGp3dC5lbmNvZGUoeyAuLi5qd3QsIHRva2VuLCBzYWx0IH0pO1xuICAgICAgICAgICAgICAgIC8vIFNldCBjb29raWUgZXhwaXJ5IGRhdGVcbiAgICAgICAgICAgICAgICBjb25zdCBjb29raWVFeHBpcmVzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBjb29raWVFeHBpcmVzLnNldFRpbWUoY29va2llRXhwaXJlcy5nZXRUaW1lKCkgKyBzZXNzaW9uTWF4QWdlICogMTAwMCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkNvb2tpZXMgPSBzZXNzaW9uU3RvcmUuY2h1bmsobmV3VG9rZW4sIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogY29va2llRXhwaXJlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb29raWVzLnB1c2goLi4uc2Vzc2lvbkNvb2tpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgZXZlbnRzLnNpZ25Jbj8uKHsgdXNlciwgYWNjb3VudCB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0OiBjYWxsYmFja1VybCwgY29va2llcyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByb3ZpZGVyLnR5cGUgPT09IFwid2ViYXV0aG5cIiAmJiBtZXRob2QgPT09IFwiUE9TVFwiKSB7XG4gICAgICAgICAgICAvLyBHZXQgY2FsbGJhY2sgYWN0aW9uIGZyb20gcmVxdWVzdC4gSXQgc2hvdWxkIGJlIGVpdGhlciBcImF1dGhlbnRpY2F0ZVwiIG9yIFwicmVnaXN0ZXJcIlxuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gcmVxdWVzdC5ib2R5Py5hY3Rpb247XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiAhPT0gXCJzdHJpbmdcIiB8fFxuICAgICAgICAgICAgICAgIChhY3Rpb24gIT09IFwiYXV0aGVudGljYXRlXCIgJiYgYWN0aW9uICE9PSBcInJlZ2lzdGVyXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIkludmFsaWQgYWN0aW9uIHBhcmFtZXRlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiBhbiBlcnJvciBpZiB0aGUgYWRhcHRlciBpcyBtaXNzaW5nIG9yIGlmIHRoZSBwcm92aWRlclxuICAgICAgICAgICAgLy8gaXMgbm90IGEgd2ViYXV0aG4gcHJvdmlkZXIuXG4gICAgICAgICAgICBjb25zdCBsb2NhbE9wdGlvbnMgPSBhc3NlcnRJbnRlcm5hbE9wdGlvbnNXZWJBdXRobihvcHRpb25zKTtcbiAgICAgICAgICAgIC8vIFZlcmlmeSByZXF1ZXN0IHRvIGdldCB1c2VyLCBhY2NvdW50IGFuZCBhdXRoZW50aWNhdG9yXG4gICAgICAgICAgICBsZXQgdXNlcjtcbiAgICAgICAgICAgIGxldCBhY2NvdW50O1xuICAgICAgICAgICAgbGV0IGF1dGhlbnRpY2F0b3I7XG4gICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJhdXRoZW50aWNhdGVcIjoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZmllZCA9IGF3YWl0IHZlcmlmeUF1dGhlbnRpY2F0ZShsb2NhbE9wdGlvbnMsIHJlcXVlc3QsIGNvb2tpZXMpO1xuICAgICAgICAgICAgICAgICAgICB1c2VyID0gdmVyaWZpZWQudXNlcjtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudCA9IHZlcmlmaWVkLmFjY291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwicmVnaXN0ZXJcIjoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZmllZCA9IGF3YWl0IHZlcmlmeVJlZ2lzdGVyKG9wdGlvbnMsIHJlcXVlc3QsIGNvb2tpZXMpO1xuICAgICAgICAgICAgICAgICAgICB1c2VyID0gdmVyaWZpZWQudXNlcjtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudCA9IHZlcmlmaWVkLmFjY291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0b3IgPSB2ZXJpZmllZC5hdXRoZW50aWNhdG9yO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGFsbG93ZWQgdG8gc2lnbiBpblxuICAgICAgICAgICAgYXdhaXQgaGFuZGxlQXV0aG9yaXplZCh7IHVzZXIsIGFjY291bnQgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBTaWduIHVzZXIgaW4sIGNyZWF0aW5nIHRoZW0gYW5kIHRoZWlyIGFjY291bnQgaWYgbmVlZGVkXG4gICAgICAgICAgICBjb25zdCB7IHVzZXI6IGxvZ2dlZEluVXNlciwgaXNOZXdVc2VyLCBzZXNzaW9uLCBhY2NvdW50OiBjdXJyZW50QWNjb3VudCwgfSA9IGF3YWl0IGhhbmRsZUxvZ2luT3JSZWdpc3RlcihzZXNzaW9uU3RvcmUudmFsdWUsIHVzZXIsIGFjY291bnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50QWNjb3VudCkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgbW9zdGx5IGZvciB0eXBlIGNoZWNraW5nLiBJdCBzaG91bGQgbmV2ZXIgYWN0dWFsbHkgaGFwcGVuLlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJFcnJvciBjcmVhdGluZyBvciBmaW5kaW5nIGFjY291bnRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGF1dGhlbnRpY2F0b3IgaWYgbmVlZGVkXG4gICAgICAgICAgICBpZiAoYXV0aGVudGljYXRvciAmJiBsb2dnZWRJblVzZXIuaWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2NhbE9wdGlvbnMuYWRhcHRlci5jcmVhdGVBdXRoZW50aWNhdG9yKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYXV0aGVudGljYXRvcixcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBsb2dnZWRJblVzZXIuaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEbyB0aGUgc2Vzc2lvbiByZWdpc3RlcmluZyBkYW5jZVxuICAgICAgICAgICAgaWYgKHVzZUp3dFNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VG9rZW4gPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGxvZ2dlZEluVXNlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogbG9nZ2VkSW5Vc2VyLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICBwaWN0dXJlOiBsb2dnZWRJblVzZXIuaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgIHN1YjogbG9nZ2VkSW5Vc2VyLmlkPy50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBjYWxsYmFja3Muand0KHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IGRlZmF1bHRUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgdXNlcjogbG9nZ2VkSW5Vc2VyLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiBjdXJyZW50QWNjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgaXNOZXdVc2VyLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBpc05ld1VzZXIgPyBcInNpZ25VcFwiIDogXCJzaWduSW5cIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciBjb29raWVzIGlmIHRva2VuIGlzIG51bGxcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29va2llcy5wdXNoKC4uLnNlc3Npb25TdG9yZS5jbGVhbigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbHQgPSBvcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSB0b2tlblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUb2tlbiA9IGF3YWl0IGp3dC5lbmNvZGUoeyAuLi5qd3QsIHRva2VuLCBzYWx0IH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgY29va2llIGV4cGlyeSBkYXRlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvb2tpZUV4cGlyZXMgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb29raWVFeHBpcmVzLnNldFRpbWUoY29va2llRXhwaXJlcy5nZXRUaW1lKCkgKyBzZXNzaW9uTWF4QWdlICogMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Db29raWVzID0gc2Vzc2lvblN0b3JlLmNodW5rKG5ld1Rva2VuLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBjb29raWVFeHBpcmVzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29va2llcy5wdXNoKC4uLnNlc3Npb25Db29raWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTYXZlIFNlc3Npb24gVG9rZW4gaW4gY29va2llXG4gICAgICAgICAgICAgICAgY29va2llcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2Vzc2lvbi5zZXNzaW9uVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZXM6IHNlc3Npb24uZXhwaXJlcyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5zaWduSW4/Lih7XG4gICAgICAgICAgICAgICAgdXNlcjogbG9nZ2VkSW5Vc2VyLFxuICAgICAgICAgICAgICAgIGFjY291bnQ6IGN1cnJlbnRBY2NvdW50LFxuICAgICAgICAgICAgICAgIGlzTmV3VXNlcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gSGFuZGxlIGZpcnN0IGxvZ2lucyBvbiBuZXcgYWNjb3VudHNcbiAgICAgICAgICAgIC8vIGUuZy4gb3B0aW9uIHRvIHNlbmQgdXNlcnMgdG8gYSBuZXcgYWNjb3VudCBsYW5kaW5nIHBhZ2Ugb24gaW5pdGlhbCBsb2dpblxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBjYWxsYmFjayBVUkwgaXMgcHJlc2VydmVkLCBzbyB0aGUgam91cm5leSBjYW4gc3RpbGwgYmUgcmVzdW1lZFxuICAgICAgICAgICAgaWYgKGlzTmV3VXNlciAmJiBwYWdlcy5uZXdVc2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6IGAke3BhZ2VzLm5ld1VzZXJ9JHtwYWdlcy5uZXdVc2VyLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHsgY2FsbGJhY2tVcmwgfSl9YCxcbiAgICAgICAgICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2FsbGJhY2sgVVJMIGlzIGFscmVhZHkgdmVyaWZpZWQgYXQgdGhpcyBwb2ludCwgc28gc2FmZSB0byB1c2UgaWYgc3BlY2lmaWVkXG4gICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdDogY2FsbGJhY2tVcmwsIGNvb2tpZXMgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFByb3ZpZGVyKGBDYWxsYmFjayBmb3IgcHJvdmlkZXIgdHlwZSAoJHtwcm92aWRlci50eXBlfSkgaXMgbm90IHN1cHBvcnRlZGApO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1dGhFcnJvcilcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IENhbGxiYWNrUm91dGVFcnJvcihlLCB7IHByb3ZpZGVyOiBwcm92aWRlci5pZCB9KTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiY2FsbGJhY2sgcm91dGUgZXJyb3IgZGV0YWlsc1wiLCB7IG1ldGhvZCwgcXVlcnksIGJvZHkgfSk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUF1dGhvcml6ZWQocGFyYW1zLCBjb25maWcpIHtcbiAgICBsZXQgYXV0aG9yaXplZDtcbiAgICBjb25zdCB7IHNpZ25JbiwgcmVkaXJlY3QgfSA9IGNvbmZpZy5jYWxsYmFja3M7XG4gICAgdHJ5IHtcbiAgICAgICAgYXV0aG9yaXplZCA9IGF3YWl0IHNpZ25JbihwYXJhbXMpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1dGhFcnJvcilcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIHRocm93IG5ldyBBY2Nlc3NEZW5pZWQoZSk7XG4gICAgfVxuICAgIGlmICghYXV0aG9yaXplZClcbiAgICAgICAgdGhyb3cgbmV3IEFjY2Vzc0RlbmllZChcIkFjY2Vzc0RlbmllZFwiKTtcbiAgICBpZiAodHlwZW9mIGF1dGhvcml6ZWQgIT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybjtcbiAgICByZXR1cm4gYXdhaXQgcmVkaXJlY3QoeyB1cmw6IGF1dGhvcml6ZWQsIGJhc2VVcmw6IGNvbmZpZy51cmwub3JpZ2luIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/callback/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/callback/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callback: () => (/* binding */ callback)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _handle_login_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handle-login.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/handle-login.js\");\n/* harmony import */ var _oauth_callback_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./oauth/callback.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/callback.js\");\n/* harmony import */ var _oauth_checks_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./oauth/checks.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\");\n/* harmony import */ var _utils_web_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/web.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/web.js\");\n/* harmony import */ var _utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/webauthn-utils.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/webauthn-utils.js\");\n// TODO: Make this file smaller\n\n\n\n\n\n\n/** Handle callbacks from login services */\nasync function callback(request, options, sessionStore, cookies) {\n    if (!options.provider)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidProvider(\"Callback route called without provider\");\n    const { query, body, method, headers } = request;\n    const { provider, adapter, url, callbackUrl, pages, jwt, events, callbacks, session: { strategy: sessionStrategy, maxAge: sessionMaxAge }, logger, } = options;\n    const useJwtSession = sessionStrategy === \"jwt\";\n    try {\n        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n            // Use body if the response mode is set to form_post. For all other cases, use query\n            const params = provider.authorization?.url.searchParams.get(\"response_mode\") ===\n                \"form_post\"\n                ? body\n                : query;\n            // If we have a state and we are on a redirect proxy, we try to parse it\n            // and see if it contains a valid origin to redirect to. If it does, we\n            // redirect the user to that origin with the original state.\n            if (options.isOnRedirectProxy && params?.state) {\n                // NOTE: We rely on the state being encrypted using a shared secret\n                // between the proxy and the original server.\n                const parsedState = await _oauth_checks_js__WEBPACK_IMPORTED_MODULE_3__.state.decode(params.state, options);\n                const shouldRedirect = parsedState?.origin &&\n                    new URL(parsedState.origin).origin !== options.url.origin;\n                if (shouldRedirect) {\n                    const proxyRedirect = `${parsedState.origin}?${new URLSearchParams(params)}`;\n                    logger.debug(\"Proxy redirecting to\", proxyRedirect);\n                    return { redirect: proxyRedirect, cookies };\n                }\n            }\n            const authorizationResult = await (0,_oauth_callback_js__WEBPACK_IMPORTED_MODULE_2__.handleOAuth)(params, request.cookies, options);\n            if (authorizationResult.cookies.length) {\n                cookies.push(...authorizationResult.cookies);\n            }\n            logger.debug(\"authorization result\", authorizationResult);\n            const { user: userFromProvider, account, profile: OAuthProfile, } = authorizationResult;\n            // If we don't have a profile object then either something went wrong\n            // or the user cancelled signing in. We don't know which, so we just\n            // direct the user to the signin page for now. We could do something\n            // else in future.\n            // TODO: Handle user cancelling signin\n            if (!userFromProvider || !account || !OAuthProfile) {\n                return { redirect: `${url}/signin`, cookies };\n            }\n            // Check if user is allowed to sign in\n            // Attempt to get Profile from OAuth provider details before invoking\n            // signIn callback - but if no user object is returned, that is fine\n            // (that just means it's a new user signing in for the first time).\n            let userByAccount;\n            if (adapter) {\n                const { getUserByAccount } = adapter;\n                userByAccount = await getUserByAccount({\n                    providerAccountId: account.providerAccountId,\n                    provider: provider.id,\n                });\n            }\n            const redirect = await handleAuthorized({\n                user: userByAccount ?? userFromProvider,\n                account,\n                profile: OAuthProfile,\n            }, options);\n            if (redirect)\n                return { redirect, cookies };\n            const { user, session, isNewUser } = await (0,_handle_login_js__WEBPACK_IMPORTED_MODULE_1__.handleLoginOrRegister)(sessionStore.value, userFromProvider, account, options);\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: user.name,\n                    email: user.email,\n                    picture: user.image,\n                    sub: user.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user,\n                    account,\n                    profile: OAuthProfile,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({\n                user,\n                account,\n                profile: OAuthProfile,\n                isNewUser,\n            });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"email\") {\n            const paramToken = query?.token;\n            const paramIdentifier = query?.email;\n            if (!paramToken) {\n                const e = new TypeError(\"Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.\", { cause: { hasToken: !!paramToken } });\n                e.name = \"Configuration\";\n                throw e;\n            }\n            const secret = provider.secret ?? options.secret;\n            // @ts-expect-error -- Verified in `assertConfig`.\n            const invite = await adapter.useVerificationToken({\n                // @ts-expect-error User-land adapters might decide to omit the identifier during lookup\n                identifier: paramIdentifier, // TODO: Drop this requirement for lookup in official adapters too\n                token: await (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_4__.createHash)(`${paramToken}${secret}`),\n            });\n            const hasInvite = !!invite;\n            const expired = hasInvite && invite.expires.valueOf() < Date.now();\n            const invalidInvite = !hasInvite ||\n                expired ||\n                // The user might have configured the link to not contain the identifier\n                // so we only compare if it exists\n                (paramIdentifier && invite.identifier !== paramIdentifier);\n            if (invalidInvite)\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.Verification({ hasInvite, expired });\n            const { identifier } = invite;\n            const user = (await adapter.getUserByEmail(identifier)) ?? {\n                id: crypto.randomUUID(),\n                email: identifier,\n                emailVerified: null,\n            };\n            const account = {\n                providerAccountId: user.email,\n                userId: user.id,\n                type: \"email\",\n                provider: provider.id,\n            };\n            const redirect = await handleAuthorized({ user, account }, options);\n            if (redirect)\n                return { redirect, cookies };\n            // Sign user in\n            const { user: loggedInUser, session, isNewUser, } = await (0,_handle_login_js__WEBPACK_IMPORTED_MODULE_1__.handleLoginOrRegister)(sessionStore.value, user, account, options);\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: loggedInUser.name,\n                    email: loggedInUser.email,\n                    picture: loggedInUser.image,\n                    sub: loggedInUser.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user: loggedInUser,\n                    account,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({ user: loggedInUser, account, isNewUser });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            // Callback URL is already verified at this point, so safe to use if specified\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"credentials\" && method === \"POST\") {\n            const credentials = body ?? {};\n            // TODO: Forward the original request as is, instead of reconstructing it\n            Object.entries(query ?? {}).forEach(([k, v]) => url.searchParams.set(k, v));\n            const userFromAuthorize = await provider.authorize(credentials, \n            // prettier-ignore\n            new Request(url, { headers, method, body: JSON.stringify(body) }));\n            const user = userFromAuthorize;\n            if (!user)\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.CredentialsSignin();\n            else\n                user.id = user.id?.toString() ?? crypto.randomUUID();\n            const account = {\n                providerAccountId: user.id,\n                type: \"credentials\",\n                provider: provider.id,\n            };\n            const redirect = await handleAuthorized({ user, account, credentials }, options);\n            if (redirect)\n                return { redirect, cookies };\n            const defaultToken = {\n                name: user.name,\n                email: user.email,\n                picture: user.image,\n                sub: user.id,\n            };\n            const token = await callbacks.jwt({\n                token: defaultToken,\n                user,\n                account,\n                isNewUser: false,\n                trigger: \"signIn\",\n            });\n            // Clear cookies if token is null\n            if (token === null) {\n                cookies.push(...sessionStore.clean());\n            }\n            else {\n                const salt = options.cookies.sessionToken.name;\n                // Encode token\n                const newToken = await jwt.encode({ ...jwt, token, salt });\n                // Set cookie expiry date\n                const cookieExpires = new Date();\n                cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                const sessionCookies = sessionStore.chunk(newToken, {\n                    expires: cookieExpires,\n                });\n                cookies.push(...sessionCookies);\n            }\n            await events.signIn?.({ user, account });\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"webauthn\" && method === \"POST\") {\n            // Get callback action from request. It should be either \"authenticate\" or \"register\"\n            const action = request.body?.action;\n            if (typeof action !== \"string\" ||\n                (action !== \"authenticate\" && action !== \"register\")) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Invalid action parameter\");\n            }\n            // Return an error if the adapter is missing or if the provider\n            // is not a webauthn provider.\n            const localOptions = (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_5__.assertInternalOptionsWebAuthn)(options);\n            // Verify request to get user, account and authenticator\n            let user;\n            let account;\n            let authenticator;\n            switch (action) {\n                case \"authenticate\": {\n                    const verified = await (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_5__.verifyAuthenticate)(localOptions, request, cookies);\n                    user = verified.user;\n                    account = verified.account;\n                    break;\n                }\n                case \"register\": {\n                    const verified = await (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_5__.verifyRegister)(options, request, cookies);\n                    user = verified.user;\n                    account = verified.account;\n                    authenticator = verified.authenticator;\n                    break;\n                }\n            }\n            // Check if user is allowed to sign in\n            await handleAuthorized({ user, account }, options);\n            // Sign user in, creating them and their account if needed\n            const { user: loggedInUser, isNewUser, session, account: currentAccount, } = await (0,_handle_login_js__WEBPACK_IMPORTED_MODULE_1__.handleLoginOrRegister)(sessionStore.value, user, account, options);\n            if (!currentAccount) {\n                // This is mostly for type checking. It should never actually happen.\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Error creating or finding account\");\n            }\n            // Create new authenticator if needed\n            if (authenticator && loggedInUser.id) {\n                await localOptions.adapter.createAuthenticator({\n                    ...authenticator,\n                    userId: loggedInUser.id,\n                });\n            }\n            // Do the session registering dance\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: loggedInUser.name,\n                    email: loggedInUser.email,\n                    picture: loggedInUser.image,\n                    sub: loggedInUser.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user: loggedInUser,\n                    account: currentAccount,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({\n                user: loggedInUser,\n                account: currentAccount,\n                isNewUser,\n            });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            // Callback URL is already verified at this point, so safe to use if specified\n            return { redirect: callbackUrl, cookies };\n        }\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidProvider(`Callback for provider type (${provider.type}) is not supported`);\n    }\n    catch (e) {\n        if (e instanceof _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError)\n            throw e;\n        const error = new _errors_js__WEBPACK_IMPORTED_MODULE_0__.CallbackRouteError(e, { provider: provider.id });\n        logger.debug(\"callback route error details\", { method, query, body });\n        throw error;\n    }\n}\nasync function handleAuthorized(params, config) {\n    let authorized;\n    const { signIn, redirect } = config.callbacks;\n    try {\n        authorized = await signIn(params);\n    }\n    catch (e) {\n        if (e instanceof _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError)\n            throw e;\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AccessDenied(e);\n    }\n    if (!authorized)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AccessDenied(\"AccessDenied\");\n    if (typeof authorized !== \"string\")\n        return;\n    return await redirect({ url: authorized, baseUrl: config.url.origin });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9jYWxsYmFjay9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDb0k7QUFDMUU7QUFDUjtBQUNSO0FBQ007QUFDbUU7QUFDbkg7QUFDTztBQUNQO0FBQ0Esa0JBQWtCLHVEQUFlO0FBQ2pDLFlBQVksK0JBQStCO0FBQzNDLFlBQVksK0VBQStFLGtEQUFrRCxZQUFZO0FBQ3pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsbURBQUs7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLG1CQUFtQixHQUFHLDRCQUE0QjtBQUMvRjtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsOENBQThDLCtEQUFXO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBEQUEwRDtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsYUFBYSxJQUFJO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHlCQUF5QjtBQUN6QixvQkFBb0IsMkJBQTJCLFFBQVEsdUVBQXFCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QscUJBQXFCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsY0FBYyxFQUFFLHdDQUF3QyxFQUFFLHNCQUFzQixhQUFhLEVBQUU7QUFDaEk7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrSkFBK0osU0FBUywwQkFBMEI7QUFDbE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5REFBVSxJQUFJLFdBQVcsRUFBRSxPQUFPO0FBQy9ELGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9EQUFZLEdBQUcsb0JBQW9CO0FBQzdELG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsZUFBZTtBQUNyRTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLG9CQUFvQiwwQ0FBMEMsUUFBUSx1RUFBcUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QscUJBQXFCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQSxvQ0FBb0Msd0NBQXdDO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsY0FBYyxFQUFFLHdDQUF3QyxFQUFFLHNCQUFzQixhQUFhLEVBQUU7QUFDaEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBLCtCQUErQiw2Q0FBNkM7QUFDNUU7QUFDQTtBQUNBLDBCQUEwQix5REFBaUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsNEJBQTRCO0FBQ2xGO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxxQkFBcUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esb0NBQW9DLGVBQWU7QUFDbkQscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpREFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsdUZBQTZCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyw0RUFBa0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx3RUFBYztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxlQUFlO0FBQ3BEO0FBQ0Esb0JBQW9CLG1FQUFtRSxRQUFRLHVFQUFxQjtBQUNwSDtBQUNBO0FBQ0EsMEJBQTBCLGlEQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QscUJBQXFCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGNBQWMsRUFBRSx3Q0FBd0MsRUFBRSxzQkFBc0IsYUFBYSxFQUFFO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCLHVEQUFlLGdDQUFnQyxjQUFjO0FBQy9FO0FBQ0E7QUFDQSx5QkFBeUIsaURBQVM7QUFDbEM7QUFDQSwwQkFBMEIsMERBQWtCLE1BQU0sdUJBQXVCO0FBQ3pFLHVEQUF1RCxxQkFBcUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFTO0FBQ2xDO0FBQ0Esa0JBQWtCLG9EQUFZO0FBQzlCO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQVk7QUFDOUI7QUFDQTtBQUNBLDRCQUE0Qiw2Q0FBNkM7QUFDekUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxjYWxsYmFja1xcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETzogTWFrZSB0aGlzIGZpbGUgc21hbGxlclxuaW1wb3J0IHsgQXV0aEVycm9yLCBBY2Nlc3NEZW5pZWQsIENhbGxiYWNrUm91dGVFcnJvciwgQ3JlZGVudGlhbHNTaWduaW4sIEludmFsaWRQcm92aWRlciwgVmVyaWZpY2F0aW9uLCB9IGZyb20gXCIuLi8uLi8uLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGhhbmRsZUxvZ2luT3JSZWdpc3RlciB9IGZyb20gXCIuL2hhbmRsZS1sb2dpbi5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlT0F1dGggfSBmcm9tIFwiLi9vYXV0aC9jYWxsYmFjay5qc1wiO1xuaW1wb3J0IHsgc3RhdGUgfSBmcm9tIFwiLi9vYXV0aC9jaGVja3MuanNcIjtcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tIFwiLi4vLi4vdXRpbHMvd2ViLmpzXCI7XG5pbXBvcnQgeyBhc3NlcnRJbnRlcm5hbE9wdGlvbnNXZWJBdXRobiwgdmVyaWZ5QXV0aGVudGljYXRlLCB2ZXJpZnlSZWdpc3RlciwgfSBmcm9tIFwiLi4vLi4vdXRpbHMvd2ViYXV0aG4tdXRpbHMuanNcIjtcbi8qKiBIYW5kbGUgY2FsbGJhY2tzIGZyb20gbG9naW4gc2VydmljZXMgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxsYmFjayhyZXF1ZXN0LCBvcHRpb25zLCBzZXNzaW9uU3RvcmUsIGNvb2tpZXMpIHtcbiAgICBpZiAoIW9wdGlvbnMucHJvdmlkZXIpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkUHJvdmlkZXIoXCJDYWxsYmFjayByb3V0ZSBjYWxsZWQgd2l0aG91dCBwcm92aWRlclwiKTtcbiAgICBjb25zdCB7IHF1ZXJ5LCBib2R5LCBtZXRob2QsIGhlYWRlcnMgfSA9IHJlcXVlc3Q7XG4gICAgY29uc3QgeyBwcm92aWRlciwgYWRhcHRlciwgdXJsLCBjYWxsYmFja1VybCwgcGFnZXMsIGp3dCwgZXZlbnRzLCBjYWxsYmFja3MsIHNlc3Npb246IHsgc3RyYXRlZ3k6IHNlc3Npb25TdHJhdGVneSwgbWF4QWdlOiBzZXNzaW9uTWF4QWdlIH0sIGxvZ2dlciwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgdXNlSnd0U2Vzc2lvbiA9IHNlc3Npb25TdHJhdGVneSA9PT0gXCJqd3RcIjtcbiAgICB0cnkge1xuICAgICAgICBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJvYXV0aFwiIHx8IHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiKSB7XG4gICAgICAgICAgICAvLyBVc2UgYm9keSBpZiB0aGUgcmVzcG9uc2UgbW9kZSBpcyBzZXQgdG8gZm9ybV9wb3N0LiBGb3IgYWxsIG90aGVyIGNhc2VzLCB1c2UgcXVlcnlcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHByb3ZpZGVyLmF1dGhvcml6YXRpb24/LnVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicmVzcG9uc2VfbW9kZVwiKSA9PT1cbiAgICAgICAgICAgICAgICBcImZvcm1fcG9zdFwiXG4gICAgICAgICAgICAgICAgPyBib2R5XG4gICAgICAgICAgICAgICAgOiBxdWVyeTtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBzdGF0ZSBhbmQgd2UgYXJlIG9uIGEgcmVkaXJlY3QgcHJveHksIHdlIHRyeSB0byBwYXJzZSBpdFxuICAgICAgICAgICAgLy8gYW5kIHNlZSBpZiBpdCBjb250YWlucyBhIHZhbGlkIG9yaWdpbiB0byByZWRpcmVjdCB0by4gSWYgaXQgZG9lcywgd2VcbiAgICAgICAgICAgIC8vIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoYXQgb3JpZ2luIHdpdGggdGhlIG9yaWdpbmFsIHN0YXRlLlxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXNPblJlZGlyZWN0UHJveHkgJiYgcGFyYW1zPy5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIE5PVEU6IFdlIHJlbHkgb24gdGhlIHN0YXRlIGJlaW5nIGVuY3J5cHRlZCB1c2luZyBhIHNoYXJlZCBzZWNyZXRcbiAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBwcm94eSBhbmQgdGhlIG9yaWdpbmFsIHNlcnZlci5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRTdGF0ZSA9IGF3YWl0IHN0YXRlLmRlY29kZShwYXJhbXMuc3RhdGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZFJlZGlyZWN0ID0gcGFyc2VkU3RhdGU/Lm9yaWdpbiAmJlxuICAgICAgICAgICAgICAgICAgICBuZXcgVVJMKHBhcnNlZFN0YXRlLm9yaWdpbikub3JpZ2luICE9PSBvcHRpb25zLnVybC5vcmlnaW47XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5UmVkaXJlY3QgPSBgJHtwYXJzZWRTdGF0ZS5vcmlnaW59PyR7bmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpfWA7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlByb3h5IHJlZGlyZWN0aW5nIHRvXCIsIHByb3h5UmVkaXJlY3QpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdDogcHJveHlSZWRpcmVjdCwgY29va2llcyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25SZXN1bHQgPSBhd2FpdCBoYW5kbGVPQXV0aChwYXJhbXMsIHJlcXVlc3QuY29va2llcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoYXV0aG9yaXphdGlvblJlc3VsdC5jb29raWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCguLi5hdXRob3JpemF0aW9uUmVzdWx0LmNvb2tpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiYXV0aG9yaXphdGlvbiByZXN1bHRcIiwgYXV0aG9yaXphdGlvblJlc3VsdCk7XG4gICAgICAgICAgICBjb25zdCB7IHVzZXI6IHVzZXJGcm9tUHJvdmlkZXIsIGFjY291bnQsIHByb2ZpbGU6IE9BdXRoUHJvZmlsZSwgfSA9IGF1dGhvcml6YXRpb25SZXN1bHQ7XG4gICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgcHJvZmlsZSBvYmplY3QgdGhlbiBlaXRoZXIgc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgICAgICAgIC8vIG9yIHRoZSB1c2VyIGNhbmNlbGxlZCBzaWduaW5nIGluLiBXZSBkb24ndCBrbm93IHdoaWNoLCBzbyB3ZSBqdXN0XG4gICAgICAgICAgICAvLyBkaXJlY3QgdGhlIHVzZXIgdG8gdGhlIHNpZ25pbiBwYWdlIGZvciBub3cuIFdlIGNvdWxkIGRvIHNvbWV0aGluZ1xuICAgICAgICAgICAgLy8gZWxzZSBpbiBmdXR1cmUuXG4gICAgICAgICAgICAvLyBUT0RPOiBIYW5kbGUgdXNlciBjYW5jZWxsaW5nIHNpZ25pblxuICAgICAgICAgICAgaWYgKCF1c2VyRnJvbVByb3ZpZGVyIHx8ICFhY2NvdW50IHx8ICFPQXV0aFByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdDogYCR7dXJsfS9zaWduaW5gLCBjb29raWVzIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGFsbG93ZWQgdG8gc2lnbiBpblxuICAgICAgICAgICAgLy8gQXR0ZW1wdCB0byBnZXQgUHJvZmlsZSBmcm9tIE9BdXRoIHByb3ZpZGVyIGRldGFpbHMgYmVmb3JlIGludm9raW5nXG4gICAgICAgICAgICAvLyBzaWduSW4gY2FsbGJhY2sgLSBidXQgaWYgbm8gdXNlciBvYmplY3QgaXMgcmV0dXJuZWQsIHRoYXQgaXMgZmluZVxuICAgICAgICAgICAgLy8gKHRoYXQganVzdCBtZWFucyBpdCdzIGEgbmV3IHVzZXIgc2lnbmluZyBpbiBmb3IgdGhlIGZpcnN0IHRpbWUpLlxuICAgICAgICAgICAgbGV0IHVzZXJCeUFjY291bnQ7XG4gICAgICAgICAgICBpZiAoYWRhcHRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZ2V0VXNlckJ5QWNjb3VudCB9ID0gYWRhcHRlcjtcbiAgICAgICAgICAgICAgICB1c2VyQnlBY2NvdW50ID0gYXdhaXQgZ2V0VXNlckJ5QWNjb3VudCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiBhY2NvdW50LnByb3ZpZGVyQWNjb3VudElkLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIuaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZWRpcmVjdCA9IGF3YWl0IGhhbmRsZUF1dGhvcml6ZWQoe1xuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJCeUFjY291bnQgPz8gdXNlckZyb21Qcm92aWRlcixcbiAgICAgICAgICAgICAgICBhY2NvdW50LFxuICAgICAgICAgICAgICAgIHByb2ZpbGU6IE9BdXRoUHJvZmlsZSxcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHJlZGlyZWN0KVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0LCBjb29raWVzIH07XG4gICAgICAgICAgICBjb25zdCB7IHVzZXIsIHNlc3Npb24sIGlzTmV3VXNlciB9ID0gYXdhaXQgaGFuZGxlTG9naW5PclJlZ2lzdGVyKHNlc3Npb25TdG9yZS52YWx1ZSwgdXNlckZyb21Qcm92aWRlciwgYWNjb3VudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAodXNlSnd0U2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRUb2tlbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgcGljdHVyZTogdXNlci5pbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgc3ViOiB1c2VyLmlkPy50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBjYWxsYmFja3Muand0KHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IGRlZmF1bHRUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZTogT0F1dGhQcm9maWxlLFxuICAgICAgICAgICAgICAgICAgICBpc05ld1VzZXIsXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IGlzTmV3VXNlciA/IFwic2lnblVwXCIgOiBcInNpZ25JblwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIENsZWFyIGNvb2tpZXMgaWYgdG9rZW4gaXMgbnVsbFxuICAgICAgICAgICAgICAgIGlmICh0b2tlbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb29raWVzLnB1c2goLi4uc2Vzc2lvblN0b3JlLmNsZWFuKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FsdCA9IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jb2RlIHRva2VuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VuID0gYXdhaXQgand0LmVuY29kZSh7IC4uLmp3dCwgdG9rZW4sIHNhbHQgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBjb29raWUgZXhwaXJ5IGRhdGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29va2llRXhwaXJlcyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZUV4cGlyZXMuc2V0VGltZShjb29raWVFeHBpcmVzLmdldFRpbWUoKSArIHNlc3Npb25NYXhBZ2UgKiAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkNvb2tpZXMgPSBzZXNzaW9uU3RvcmUuY2h1bmsobmV3VG9rZW4sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZXM6IGNvb2tpZUV4cGlyZXMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb29raWVzLnB1c2goLi4uc2Vzc2lvbkNvb2tpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNhdmUgU2Vzc2lvbiBUb2tlbiBpbiBjb29raWVcbiAgICAgICAgICAgICAgICBjb29raWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBvcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZXNzaW9uLnNlc3Npb25Ub2tlbixcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogc2Vzc2lvbi5leHBpcmVzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgZXZlbnRzLnNpZ25Jbj8uKHtcbiAgICAgICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgICAgIGFjY291bnQsXG4gICAgICAgICAgICAgICAgcHJvZmlsZTogT0F1dGhQcm9maWxlLFxuICAgICAgICAgICAgICAgIGlzTmV3VXNlcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gSGFuZGxlIGZpcnN0IGxvZ2lucyBvbiBuZXcgYWNjb3VudHNcbiAgICAgICAgICAgIC8vIGUuZy4gb3B0aW9uIHRvIHNlbmQgdXNlcnMgdG8gYSBuZXcgYWNjb3VudCBsYW5kaW5nIHBhZ2Ugb24gaW5pdGlhbCBsb2dpblxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBjYWxsYmFjayBVUkwgaXMgcHJlc2VydmVkLCBzbyB0aGUgam91cm5leSBjYW4gc3RpbGwgYmUgcmVzdW1lZFxuICAgICAgICAgICAgaWYgKGlzTmV3VXNlciAmJiBwYWdlcy5uZXdVc2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6IGAke3BhZ2VzLm5ld1VzZXJ9JHtwYWdlcy5uZXdVc2VyLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHsgY2FsbGJhY2tVcmwgfSl9YCxcbiAgICAgICAgICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3Q6IGNhbGxiYWNrVXJsLCBjb29raWVzIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJlbWFpbFwiKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbVRva2VuID0gcXVlcnk/LnRva2VuO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1JZGVudGlmaWVyID0gcXVlcnk/LmVtYWlsO1xuICAgICAgICAgICAgaWYgKCFwYXJhbVRva2VuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBUeXBlRXJyb3IoXCJNaXNzaW5nIHRva2VuLiBUaGUgc2lnbi1pbiBVUkwgd2FzIG1hbnVhbGx5IG9wZW5lZCB3aXRob3V0IHRva2VuIG9yIHRoZSBsaW5rIHdhcyBub3Qgc2VudCBjb3JyZWN0bHkgaW4gdGhlIGVtYWlsLlwiLCB7IGNhdXNlOiB7IGhhc1Rva2VuOiAhIXBhcmFtVG9rZW4gfSB9KTtcbiAgICAgICAgICAgICAgICBlLm5hbWUgPSBcIkNvbmZpZ3VyYXRpb25cIjtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2VjcmV0ID0gcHJvdmlkZXIuc2VjcmV0ID8/IG9wdGlvbnMuc2VjcmV0O1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtLSBWZXJpZmllZCBpbiBgYXNzZXJ0Q29uZmlnYC5cbiAgICAgICAgICAgIGNvbnN0IGludml0ZSA9IGF3YWl0IGFkYXB0ZXIudXNlVmVyaWZpY2F0aW9uVG9rZW4oe1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVXNlci1sYW5kIGFkYXB0ZXJzIG1pZ2h0IGRlY2lkZSB0byBvbWl0IHRoZSBpZGVudGlmaWVyIGR1cmluZyBsb29rdXBcbiAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiBwYXJhbUlkZW50aWZpZXIsIC8vIFRPRE86IERyb3AgdGhpcyByZXF1aXJlbWVudCBmb3IgbG9va3VwIGluIG9mZmljaWFsIGFkYXB0ZXJzIHRvb1xuICAgICAgICAgICAgICAgIHRva2VuOiBhd2FpdCBjcmVhdGVIYXNoKGAke3BhcmFtVG9rZW59JHtzZWNyZXR9YCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGhhc0ludml0ZSA9ICEhaW52aXRlO1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlZCA9IGhhc0ludml0ZSAmJiBpbnZpdGUuZXhwaXJlcy52YWx1ZU9mKCkgPCBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgaW52YWxpZEludml0ZSA9ICFoYXNJbnZpdGUgfHxcbiAgICAgICAgICAgICAgICBleHBpcmVkIHx8XG4gICAgICAgICAgICAgICAgLy8gVGhlIHVzZXIgbWlnaHQgaGF2ZSBjb25maWd1cmVkIHRoZSBsaW5rIHRvIG5vdCBjb250YWluIHRoZSBpZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgLy8gc28gd2Ugb25seSBjb21wYXJlIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgICAgIChwYXJhbUlkZW50aWZpZXIgJiYgaW52aXRlLmlkZW50aWZpZXIgIT09IHBhcmFtSWRlbnRpZmllcik7XG4gICAgICAgICAgICBpZiAoaW52YWxpZEludml0ZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVmVyaWZpY2F0aW9uKHsgaGFzSW52aXRlLCBleHBpcmVkIH0pO1xuICAgICAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyIH0gPSBpbnZpdGU7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gKGF3YWl0IGFkYXB0ZXIuZ2V0VXNlckJ5RW1haWwoaWRlbnRpZmllcikpID8/IHtcbiAgICAgICAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICAgICAgICBlbWFpbDogaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBudWxsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnQgPSB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVkaXJlY3QgPSBhd2FpdCBoYW5kbGVBdXRob3JpemVkKHsgdXNlciwgYWNjb3VudCB9LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChyZWRpcmVjdClcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdCwgY29va2llcyB9O1xuICAgICAgICAgICAgLy8gU2lnbiB1c2VyIGluXG4gICAgICAgICAgICBjb25zdCB7IHVzZXI6IGxvZ2dlZEluVXNlciwgc2Vzc2lvbiwgaXNOZXdVc2VyLCB9ID0gYXdhaXQgaGFuZGxlTG9naW5PclJlZ2lzdGVyKHNlc3Npb25TdG9yZS52YWx1ZSwgdXNlciwgYWNjb3VudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAodXNlSnd0U2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRUb2tlbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbG9nZ2VkSW5Vc2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBsb2dnZWRJblVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHBpY3R1cmU6IGxvZ2dlZEluVXNlci5pbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgc3ViOiBsb2dnZWRJblVzZXIuaWQ/LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGNhbGxiYWNrcy5qd3Qoe1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjogZGVmYXVsdFRva2VuLFxuICAgICAgICAgICAgICAgICAgICB1c2VyOiBsb2dnZWRJblVzZXIsXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQsXG4gICAgICAgICAgICAgICAgICAgIGlzTmV3VXNlcixcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogaXNOZXdVc2VyID8gXCJzaWduVXBcIiA6IFwic2lnbkluXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgY29va2llcyBpZiB0b2tlbiBpcyBudWxsXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCguLi5zZXNzaW9uU3RvcmUuY2xlYW4oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWx0ID0gb3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAvLyBFbmNvZGUgdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBhd2FpdCBqd3QuZW5jb2RlKHsgLi4uand0LCB0b2tlbiwgc2FsdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGNvb2tpZSBleHBpcnkgZGF0ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb29raWVFeHBpcmVzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29va2llRXhwaXJlcy5zZXRUaW1lKGNvb2tpZUV4cGlyZXMuZ2V0VGltZSgpICsgc2Vzc2lvbk1heEFnZSAqIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uQ29va2llcyA9IHNlc3Npb25TdG9yZS5jaHVuayhuZXdUb2tlbiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogY29va2llRXhwaXJlcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCguLi5zZXNzaW9uQ29va2llcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBTZXNzaW9uIFRva2VuIGluIGNvb2tpZVxuICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlc3Npb24uc2Vzc2lvblRva2VuLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBzZXNzaW9uLmV4cGlyZXMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBldmVudHMuc2lnbkluPy4oeyB1c2VyOiBsb2dnZWRJblVzZXIsIGFjY291bnQsIGlzTmV3VXNlciB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBmaXJzdCBsb2dpbnMgb24gbmV3IGFjY291bnRzXG4gICAgICAgICAgICAvLyBlLmcuIG9wdGlvbiB0byBzZW5kIHVzZXJzIHRvIGEgbmV3IGFjY291bnQgbGFuZGluZyBwYWdlIG9uIGluaXRpYWwgbG9naW5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgY2FsbGJhY2sgVVJMIGlzIHByZXNlcnZlZCwgc28gdGhlIGpvdXJuZXkgY2FuIHN0aWxsIGJlIHJlc3VtZWRcbiAgICAgICAgICAgIGlmIChpc05ld1VzZXIgJiYgcGFnZXMubmV3VXNlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBgJHtwYWdlcy5uZXdVc2VyfSR7cGFnZXMubmV3VXNlci5pbmNsdWRlcyhcIj9cIikgPyBcIiZcIiA6IFwiP1wifSR7bmV3IFVSTFNlYXJjaFBhcmFtcyh7IGNhbGxiYWNrVXJsIH0pfWAsXG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZXMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENhbGxiYWNrIFVSTCBpcyBhbHJlYWR5IHZlcmlmaWVkIGF0IHRoaXMgcG9pbnQsIHNvIHNhZmUgdG8gdXNlIGlmIHNwZWNpZmllZFxuICAgICAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3Q6IGNhbGxiYWNrVXJsLCBjb29raWVzIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJjcmVkZW50aWFsc1wiICYmIG1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYm9keSA/PyB7fTtcbiAgICAgICAgICAgIC8vIFRPRE86IEZvcndhcmQgdGhlIG9yaWdpbmFsIHJlcXVlc3QgYXMgaXMsIGluc3RlYWQgb2YgcmVjb25zdHJ1Y3RpbmcgaXRcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHF1ZXJ5ID8/IHt9KS5mb3JFYWNoKChbaywgdl0pID0+IHVybC5zZWFyY2hQYXJhbXMuc2V0KGssIHYpKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJGcm9tQXV0aG9yaXplID0gYXdhaXQgcHJvdmlkZXIuYXV0aG9yaXplKGNyZWRlbnRpYWxzLCBcbiAgICAgICAgICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgICAgICAgbmV3IFJlcXVlc3QodXJsLCB7IGhlYWRlcnMsIG1ldGhvZCwgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkgfSkpO1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IHVzZXJGcm9tQXV0aG9yaXplO1xuICAgICAgICAgICAgaWYgKCF1c2VyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDcmVkZW50aWFsc1NpZ25pbigpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHVzZXIuaWQgPSB1c2VyLmlkPy50b1N0cmluZygpID8/IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0ge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3JlZGVudGlhbHNcIixcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVkaXJlY3QgPSBhd2FpdCBoYW5kbGVBdXRob3JpemVkKHsgdXNlciwgYWNjb3VudCwgY3JlZGVudGlhbHMgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAocmVkaXJlY3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3QsIGNvb2tpZXMgfTtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRUb2tlbiA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgcGljdHVyZTogdXNlci5pbWFnZSxcbiAgICAgICAgICAgICAgICBzdWI6IHVzZXIuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBjYWxsYmFja3Muand0KHtcbiAgICAgICAgICAgICAgICB0b2tlbjogZGVmYXVsdFRva2VuLFxuICAgICAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICAgICAgYWNjb3VudCxcbiAgICAgICAgICAgICAgICBpc05ld1VzZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRyaWdnZXI6IFwic2lnbkluXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIENsZWFyIGNvb2tpZXMgaWYgdG9rZW4gaXMgbnVsbFxuICAgICAgICAgICAgaWYgKHRva2VuID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29va2llcy5wdXNoKC4uLnNlc3Npb25TdG9yZS5jbGVhbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNhbHQgPSBvcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWU7XG4gICAgICAgICAgICAgICAgLy8gRW5jb2RlIHRva2VuXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBhd2FpdCBqd3QuZW5jb2RlKHsgLi4uand0LCB0b2tlbiwgc2FsdCB9KTtcbiAgICAgICAgICAgICAgICAvLyBTZXQgY29va2llIGV4cGlyeSBkYXRlXG4gICAgICAgICAgICAgICAgY29uc3QgY29va2llRXhwaXJlcyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgY29va2llRXhwaXJlcy5zZXRUaW1lKGNvb2tpZUV4cGlyZXMuZ2V0VGltZSgpICsgc2Vzc2lvbk1heEFnZSAqIDEwMDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Db29raWVzID0gc2Vzc2lvblN0b3JlLmNodW5rKG5ld1Rva2VuLCB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXM6IGNvb2tpZUV4cGlyZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29va2llcy5wdXNoKC4uLnNlc3Npb25Db29raWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5zaWduSW4/Lih7IHVzZXIsIGFjY291bnQgfSk7XG4gICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdDogY2FsbGJhY2tVcmwsIGNvb2tpZXMgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm92aWRlci50eXBlID09PSBcIndlYmF1dGhuXCIgJiYgbWV0aG9kID09PSBcIlBPU1RcIikge1xuICAgICAgICAgICAgLy8gR2V0IGNhbGxiYWNrIGFjdGlvbiBmcm9tIHJlcXVlc3QuIEl0IHNob3VsZCBiZSBlaXRoZXIgXCJhdXRoZW50aWNhdGVcIiBvciBcInJlZ2lzdGVyXCJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHJlcXVlc3QuYm9keT8uYWN0aW9uO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3Rpb24gIT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgICAgICAgICAoYWN0aW9uICE9PSBcImF1dGhlbnRpY2F0ZVwiICYmIGFjdGlvbiAhPT0gXCJyZWdpc3RlclwiKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJJbnZhbGlkIGFjdGlvbiBwYXJhbWV0ZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gYW4gZXJyb3IgaWYgdGhlIGFkYXB0ZXIgaXMgbWlzc2luZyBvciBpZiB0aGUgcHJvdmlkZXJcbiAgICAgICAgICAgIC8vIGlzIG5vdCBhIHdlYmF1dGhuIHByb3ZpZGVyLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxPcHRpb25zID0gYXNzZXJ0SW50ZXJuYWxPcHRpb25zV2ViQXV0aG4ob3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgcmVxdWVzdCB0byBnZXQgdXNlciwgYWNjb3VudCBhbmQgYXV0aGVudGljYXRvclxuICAgICAgICAgICAgbGV0IHVzZXI7XG4gICAgICAgICAgICBsZXQgYWNjb3VudDtcbiAgICAgICAgICAgIGxldCBhdXRoZW50aWNhdG9yO1xuICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXV0aGVudGljYXRlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyaWZpZWQgPSBhd2FpdCB2ZXJpZnlBdXRoZW50aWNhdGUobG9jYWxPcHRpb25zLCByZXF1ZXN0LCBjb29raWVzKTtcbiAgICAgICAgICAgICAgICAgICAgdXNlciA9IHZlcmlmaWVkLnVzZXI7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQgPSB2ZXJpZmllZC5hY2NvdW50O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcInJlZ2lzdGVyXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyaWZpZWQgPSBhd2FpdCB2ZXJpZnlSZWdpc3RlcihvcHRpb25zLCByZXF1ZXN0LCBjb29raWVzKTtcbiAgICAgICAgICAgICAgICAgICAgdXNlciA9IHZlcmlmaWVkLnVzZXI7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQgPSB2ZXJpZmllZC5hY2NvdW50O1xuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdG9yID0gdmVyaWZpZWQuYXV0aGVudGljYXRvcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhbGxvd2VkIHRvIHNpZ24gaW5cbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZUF1dGhvcml6ZWQoeyB1c2VyLCBhY2NvdW50IH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgLy8gU2lnbiB1c2VyIGluLCBjcmVhdGluZyB0aGVtIGFuZCB0aGVpciBhY2NvdW50IGlmIG5lZWRlZFxuICAgICAgICAgICAgY29uc3QgeyB1c2VyOiBsb2dnZWRJblVzZXIsIGlzTmV3VXNlciwgc2Vzc2lvbiwgYWNjb3VudDogY3VycmVudEFjY291bnQsIH0gPSBhd2FpdCBoYW5kbGVMb2dpbk9yUmVnaXN0ZXIoc2Vzc2lvblN0b3JlLnZhbHVlLCB1c2VyLCBhY2NvdW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmICghY3VycmVudEFjY291bnQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIG1vc3RseSBmb3IgdHlwZSBjaGVja2luZy4gSXQgc2hvdWxkIG5ldmVyIGFjdHVhbGx5IGhhcHBlbi5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiRXJyb3IgY3JlYXRpbmcgb3IgZmluZGluZyBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBhdXRoZW50aWNhdG9yIGlmIG5lZWRlZFxuICAgICAgICAgICAgaWYgKGF1dGhlbnRpY2F0b3IgJiYgbG9nZ2VkSW5Vc2VyLmlkKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9jYWxPcHRpb25zLmFkYXB0ZXIuY3JlYXRlQXV0aGVudGljYXRvcih7XG4gICAgICAgICAgICAgICAgICAgIC4uLmF1dGhlbnRpY2F0b3IsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbG9nZ2VkSW5Vc2VyLmlkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRG8gdGhlIHNlc3Npb24gcmVnaXN0ZXJpbmcgZGFuY2VcbiAgICAgICAgICAgIGlmICh1c2VKd3RTZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFRva2VuID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBsb2dnZWRJblVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGxvZ2dlZEluVXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgcGljdHVyZTogbG9nZ2VkSW5Vc2VyLmltYWdlLFxuICAgICAgICAgICAgICAgICAgICBzdWI6IGxvZ2dlZEluVXNlci5pZD8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgY2FsbGJhY2tzLmp3dCh7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiBkZWZhdWx0VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHVzZXI6IGxvZ2dlZEluVXNlcixcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogY3VycmVudEFjY291bnQsXG4gICAgICAgICAgICAgICAgICAgIGlzTmV3VXNlcixcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogaXNOZXdVc2VyID8gXCJzaWduVXBcIiA6IFwic2lnbkluXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgY29va2llcyBpZiB0b2tlbiBpcyBudWxsXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCguLi5zZXNzaW9uU3RvcmUuY2xlYW4oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWx0ID0gb3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAvLyBFbmNvZGUgdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBhd2FpdCBqd3QuZW5jb2RlKHsgLi4uand0LCB0b2tlbiwgc2FsdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGNvb2tpZSBleHBpcnkgZGF0ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb29raWVFeHBpcmVzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29va2llRXhwaXJlcy5zZXRUaW1lKGNvb2tpZUV4cGlyZXMuZ2V0VGltZSgpICsgc2Vzc2lvbk1heEFnZSAqIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uQ29va2llcyA9IHNlc3Npb25TdG9yZS5jaHVuayhuZXdUb2tlbiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogY29va2llRXhwaXJlcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCguLi5zZXNzaW9uQ29va2llcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBTZXNzaW9uIFRva2VuIGluIGNvb2tpZVxuICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlc3Npb24uc2Vzc2lvblRva2VuLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBzZXNzaW9uLmV4cGlyZXMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBldmVudHMuc2lnbkluPy4oe1xuICAgICAgICAgICAgICAgIHVzZXI6IGxvZ2dlZEluVXNlcixcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBjdXJyZW50QWNjb3VudCxcbiAgICAgICAgICAgICAgICBpc05ld1VzZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBmaXJzdCBsb2dpbnMgb24gbmV3IGFjY291bnRzXG4gICAgICAgICAgICAvLyBlLmcuIG9wdGlvbiB0byBzZW5kIHVzZXJzIHRvIGEgbmV3IGFjY291bnQgbGFuZGluZyBwYWdlIG9uIGluaXRpYWwgbG9naW5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgY2FsbGJhY2sgVVJMIGlzIHByZXNlcnZlZCwgc28gdGhlIGpvdXJuZXkgY2FuIHN0aWxsIGJlIHJlc3VtZWRcbiAgICAgICAgICAgIGlmIChpc05ld1VzZXIgJiYgcGFnZXMubmV3VXNlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBgJHtwYWdlcy5uZXdVc2VyfSR7cGFnZXMubmV3VXNlci5pbmNsdWRlcyhcIj9cIikgPyBcIiZcIiA6IFwiP1wifSR7bmV3IFVSTFNlYXJjaFBhcmFtcyh7IGNhbGxiYWNrVXJsIH0pfWAsXG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZXMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENhbGxiYWNrIFVSTCBpcyBhbHJlYWR5IHZlcmlmaWVkIGF0IHRoaXMgcG9pbnQsIHNvIHNhZmUgdG8gdXNlIGlmIHNwZWNpZmllZFxuICAgICAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3Q6IGNhbGxiYWNrVXJsLCBjb29raWVzIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRQcm92aWRlcihgQ2FsbGJhY2sgZm9yIHByb3ZpZGVyIHR5cGUgKCR7cHJvdmlkZXIudHlwZX0pIGlzIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdXRoRXJyb3IpXG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBDYWxsYmFja1JvdXRlRXJyb3IoZSwgeyBwcm92aWRlcjogcHJvdmlkZXIuaWQgfSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcImNhbGxiYWNrIHJvdXRlIGVycm9yIGRldGFpbHNcIiwgeyBtZXRob2QsIHF1ZXJ5LCBib2R5IH0pO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVBdXRob3JpemVkKHBhcmFtcywgY29uZmlnKSB7XG4gICAgbGV0IGF1dGhvcml6ZWQ7XG4gICAgY29uc3QgeyBzaWduSW4sIHJlZGlyZWN0IH0gPSBjb25maWcuY2FsbGJhY2tzO1xuICAgIHRyeSB7XG4gICAgICAgIGF1dGhvcml6ZWQgPSBhd2FpdCBzaWduSW4ocGFyYW1zKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdXRoRXJyb3IpXG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB0aHJvdyBuZXcgQWNjZXNzRGVuaWVkKGUpO1xuICAgIH1cbiAgICBpZiAoIWF1dGhvcml6ZWQpXG4gICAgICAgIHRocm93IG5ldyBBY2Nlc3NEZW5pZWQoXCJBY2Nlc3NEZW5pZWRcIik7XG4gICAgaWYgKHR5cGVvZiBhdXRob3JpemVkICE9PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm47XG4gICAgcmV0dXJuIGF3YWl0IHJlZGlyZWN0KHsgdXJsOiBhdXRob3JpemVkLCBiYXNlVXJsOiBjb25maWcudXJsLm9yaWdpbiB9KTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/callback/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/callback.js":
/*!************************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/oauth/callback.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserAndAccount: () => (/* binding */ getUserAndAccount),\n/* harmony export */   handleOAuth: () => (/* binding */ handleOAuth)\n/* harmony export */ });\n/* harmony import */ var _checks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./checks.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\");\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! oauth4webapi */ \"(action-browser)/./node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_providers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/providers.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/providers.js\");\n/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../symbols.js */ \"(action-browser)/./node_modules/@auth/core/lib/symbols.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/jose/dist/node/esm/util/decode_jwt.js\");\n\n\n\n\n\n\nfunction formUrlEncode(token) {\n    return encodeURIComponent(token).replace(/%20/g, \"+\");\n}\n/**\n * Formats client_id and client_secret as an HTTP Basic Authentication header as per the OAuth 2.0\n * specified in RFC6749.\n */\nfunction clientSecretBasic(clientId, clientSecret) {\n    const username = formUrlEncode(clientId);\n    const password = formUrlEncode(clientSecret);\n    const credentials = btoa(`${username}:${password}`);\n    return `Basic ${credentials}`;\n}\n/**\n * Handles the following OAuth steps.\n * https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1\n * https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3\n * https://openid.net/specs/openid-connect-core-1_0.html#UserInfoRequest\n *\n * @note Although requesting userinfo is not required by the OAuth2.0 spec,\n * we fetch it anyway. This is because we always want a user profile.\n */\nasync function handleOAuth(params, cookies, options) {\n    const { logger, provider } = options;\n    let as;\n    const { token, userinfo } = provider;\n    // Falls back to authjs.dev if the user only passed params\n    if ((!token?.url || token.url.host === \"authjs.dev\") &&\n        (!userinfo?.url || userinfo.url.host === \"authjs.dev\")) {\n        // We assume that issuer is always defined as this has been asserted earlier\n        const issuer = new URL(provider.issuer);\n        const discoveryResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.discoveryRequest(issuer, {\n            [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.allowInsecureRequests]: true,\n            [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch],\n        });\n        as = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.processDiscoveryResponse(issuer, discoveryResponse);\n        if (!as.token_endpoint)\n            throw new TypeError(\"TODO: Authorization server did not provide a token endpoint.\");\n        if (!as.userinfo_endpoint)\n            throw new TypeError(\"TODO: Authorization server did not provide a userinfo endpoint.\");\n    }\n    else {\n        as = {\n            issuer: provider.issuer ?? \"https://authjs.dev\", // TODO: review fallback issuer\n            token_endpoint: token?.url.toString(),\n            userinfo_endpoint: userinfo?.url.toString(),\n        };\n    }\n    const client = {\n        client_id: provider.clientId,\n        ...provider.client,\n    };\n    let clientAuth;\n    switch (client.token_endpoint_auth_method) {\n        // TODO: in the next breaking major version have undefined be `client_secret_post`\n        case undefined:\n        case \"client_secret_basic\":\n            // TODO: in the next breaking major version use o.ClientSecretBasic() here\n            clientAuth = (_as, _client, _body, headers) => {\n                headers.set(\"authorization\", clientSecretBasic(provider.clientId, provider.clientSecret));\n            };\n            break;\n        case \"client_secret_post\":\n            clientAuth = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.ClientSecretPost(provider.clientSecret);\n            break;\n        case \"client_secret_jwt\":\n            clientAuth = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.ClientSecretJwt(provider.clientSecret);\n            break;\n        case \"private_key_jwt\":\n            clientAuth = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.PrivateKeyJwt(provider.token.clientPrivateKey, {\n                // TODO: review in the next breaking change\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.modifyAssertion](_header, payload) {\n                    payload.aud = [as.issuer, as.token_endpoint];\n                },\n            });\n            break;\n        case \"none\":\n            clientAuth = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.None();\n            break;\n        default:\n            throw new Error(\"unsupported client authentication method\");\n    }\n    const resCookies = [];\n    const state = await _checks_js__WEBPACK_IMPORTED_MODULE_0__.state.use(cookies, resCookies, options);\n    let codeGrantParams;\n    try {\n        codeGrantParams = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.validateAuthResponse(as, client, new URLSearchParams(params), provider.checks.includes(\"state\") ? state : oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.skipStateCheck);\n    }\n    catch (err) {\n        if (err instanceof oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.AuthorizationResponseError) {\n            const cause = {\n                providerId: provider.id,\n                ...Object.fromEntries(err.cause.entries()),\n            };\n            logger.debug(\"OAuthCallbackError\", cause);\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.OAuthCallbackError(\"OAuth Provider returned an error\", cause);\n        }\n        throw err;\n    }\n    const codeVerifier = await _checks_js__WEBPACK_IMPORTED_MODULE_0__.pkce.use(cookies, resCookies, options);\n    let redirect_uri = provider.callbackUrl;\n    if (!options.isOnRedirectProxy && provider.redirectProxyUrl) {\n        redirect_uri = provider.redirectProxyUrl;\n    }\n    let codeGrantResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.authorizationCodeGrantRequest(as, client, clientAuth, codeGrantParams, redirect_uri, codeVerifier ?? \"decoy\", {\n        // TODO: move away from allowing insecure HTTP requests\n        [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.allowInsecureRequests]: true,\n        [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: (...args) => {\n            if (!provider.checks.includes(\"pkce\")) {\n                args[1].body.delete(\"code_verifier\");\n            }\n            return (provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch] ?? fetch)(...args);\n        },\n    });\n    if (provider.token?.conform) {\n        codeGrantResponse =\n            (await provider.token.conform(codeGrantResponse.clone())) ??\n                codeGrantResponse;\n    }\n    let profile = {};\n    const requireIdToken = (0,_utils_providers_js__WEBPACK_IMPORTED_MODULE_2__.isOIDCProvider)(provider);\n    if (provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.conformInternal]) {\n        switch (provider.id) {\n            case \"microsoft-entra-id\":\n            case \"azure-ad\": {\n                /**\n                 * These providers need the authorization server metadata to be re-processed\n                 * based on the `id_token`'s `tid` claim\n                 * @see https://github.com/MicrosoftDocs/azure-docs/issues/113944\n                 */\n                const { tid } = (0,jose__WEBPACK_IMPORTED_MODULE_5__.decodeJwt)((await codeGrantResponse.clone().json()).id_token);\n                if (typeof tid === \"string\") {\n                    const tenantRe = /microsoftonline\\.com\\/(\\w+)\\/v2\\.0/;\n                    const tenantId = as.issuer?.match(tenantRe)?.[1] ?? \"common\";\n                    const issuer = new URL(as.issuer.replace(tenantId, tid));\n                    const discoveryResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.discoveryRequest(issuer, {\n                        [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch],\n                    });\n                    as = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.processDiscoveryResponse(issuer, discoveryResponse);\n                }\n                break;\n            }\n            default:\n                break;\n        }\n    }\n    const processedCodeResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.processAuthorizationCodeResponse(as, client, codeGrantResponse, {\n        expectedNonce: await _checks_js__WEBPACK_IMPORTED_MODULE_0__.nonce.use(cookies, resCookies, options),\n        requireIdToken,\n    });\n    const tokens = processedCodeResponse;\n    if (requireIdToken) {\n        const idTokenClaims = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.getValidatedIdTokenClaims(processedCodeResponse);\n        profile = idTokenClaims;\n        // Apple sends some of the user information in a `user` parameter as a stringified JSON.\n        // It also only does so the first time the user consents to share their information.\n        if (provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.conformInternal] && provider.id === \"apple\") {\n            try {\n                profile.user = JSON.parse(params?.user);\n            }\n            catch { }\n        }\n        if (provider.idToken === false) {\n            const userinfoResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.userInfoRequest(as, client, processedCodeResponse.access_token, {\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch],\n                // TODO: move away from allowing insecure HTTP requests\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.allowInsecureRequests]: true,\n            });\n            profile = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.processUserInfoResponse(as, client, idTokenClaims.sub, userinfoResponse);\n        }\n    }\n    else {\n        if (userinfo?.request) {\n            const _profile = await userinfo.request({ tokens, provider });\n            if (_profile instanceof Object)\n                profile = _profile;\n        }\n        else if (userinfo?.url) {\n            const userinfoResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.userInfoRequest(as, client, processedCodeResponse.access_token, { [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch] });\n            profile = await userinfoResponse.json();\n        }\n        else {\n            throw new TypeError(\"No userinfo endpoint configured\");\n        }\n    }\n    if (tokens.expires_in) {\n        tokens.expires_at =\n            Math.floor(Date.now() / 1000) + Number(tokens.expires_in);\n    }\n    const profileResult = await getUserAndAccount(profile, provider, tokens, logger);\n    return { ...profileResult, profile, cookies: resCookies };\n}\n/**\n * Returns the user and account that is going to be created in the database.\n * @internal\n */\nasync function getUserAndAccount(OAuthProfile, provider, tokens, logger) {\n    try {\n        const userFromProfile = await provider.profile(OAuthProfile, tokens);\n        const user = {\n            ...userFromProfile,\n            id: crypto.randomUUID(),\n            email: userFromProfile.email?.toLowerCase(),\n        };\n        return {\n            user,\n            account: {\n                ...tokens,\n                provider: provider.id,\n                type: provider.type,\n                providerAccountId: userFromProfile.id ?? crypto.randomUUID(),\n            },\n        };\n    }\n    catch (e) {\n        // If we didn't get a response either there was a problem with the provider\n        // response *or* the user cancelled the action with the provider.\n        //\n        // Unfortunately, we can't tell which - at least not in a way that works for\n        // all providers, so we return an empty object; the user should then be\n        // redirected back to the sign up page. We log the error to help developers\n        // who might be trying to debug this when configuring a new provider.\n        logger.debug(\"getProfile error details\", OAuthProfile);\n        logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_1__.OAuthProfileParseError(e, { provider: provider.id }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL2NhbGxiYWNrL29hdXRoL2NhbGxiYWNrLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNDO0FBQ0o7QUFDa0Q7QUFDdkI7QUFDTTtBQUNsQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTLEdBQUcsU0FBUztBQUNyRCxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQSxZQUFZLGtCQUFrQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDBEQUFrQjtBQUMxRCxhQUFhLCtEQUF1QjtBQUNwQyxhQUFhLHFEQUFhLFlBQVksb0RBQVc7QUFDakQsU0FBUztBQUNULG1CQUFtQixrRUFBMEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBEQUFrQjtBQUMzQztBQUNBO0FBQ0EseUJBQXlCLHlEQUFpQjtBQUMxQztBQUNBO0FBQ0EseUJBQXlCLHVEQUFlO0FBQ3hDO0FBQ0EsaUJBQWlCLHlEQUFpQjtBQUNsQztBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLHlCQUF5Qiw4Q0FBTTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZDQUFZO0FBQ3BDO0FBQ0E7QUFDQSwwQkFBMEIsOERBQXNCLHNGQUFzRix3REFBZ0I7QUFDdEo7QUFDQTtBQUNBLDJCQUEyQixvRUFBNEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwREFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDRDQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHVFQUErQjtBQUNqRTtBQUNBLFNBQVMsK0RBQXVCO0FBQ2hDLFNBQVMscURBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFXO0FBQ3hDLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG1FQUFjO0FBQ3pDLGlCQUFpQix3REFBZTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE1BQU0sRUFBRSwrQ0FBUztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCwwREFBa0I7QUFDdEUseUJBQXlCLHFEQUFhLFlBQVksb0RBQVc7QUFDN0QscUJBQXFCO0FBQ3JCLCtCQUErQixrRUFBMEI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMEVBQWtDO0FBQzFFLDZCQUE2Qiw2Q0FBWTtBQUN6QztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsOEJBQThCLG1FQUEyQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsd0RBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHlEQUFpQjtBQUM1RCxpQkFBaUIscURBQWEsWUFBWSxvREFBVztBQUNyRDtBQUNBLGlCQUFpQiwrREFBdUI7QUFDeEMsYUFBYTtBQUNiLDRCQUE0QixpRUFBeUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsa0JBQWtCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHlEQUFpQixtREFBbUQsQ0FBQyxxREFBYSxZQUFZLG9EQUFXLEdBQUc7QUFDdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4REFBc0IsTUFBTSx1QkFBdUI7QUFDNUU7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXGFjdGlvbnNcXGNhbGxiYWNrXFxvYXV0aFxcY2FsbGJhY2suanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2hlY2tzIGZyb20gXCIuL2NoZWNrcy5qc1wiO1xuaW1wb3J0ICogYXMgbyBmcm9tIFwib2F1dGg0d2ViYXBpXCI7XG5pbXBvcnQgeyBPQXV0aENhbGxiYWNrRXJyb3IsIE9BdXRoUHJvZmlsZVBhcnNlRXJyb3IsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgaXNPSURDUHJvdmlkZXIgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvcHJvdmlkZXJzLmpzXCI7XG5pbXBvcnQgeyBjb25mb3JtSW50ZXJuYWwsIGN1c3RvbUZldGNoIH0gZnJvbSBcIi4uLy4uLy4uL3N5bWJvbHMuanNcIjtcbmltcG9ydCB7IGRlY29kZUp3dCB9IGZyb20gXCJqb3NlXCI7XG5mdW5jdGlvbiBmb3JtVXJsRW5jb2RlKHRva2VuKSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh0b2tlbikucmVwbGFjZSgvJTIwL2csIFwiK1wiKTtcbn1cbi8qKlxuICogRm9ybWF0cyBjbGllbnRfaWQgYW5kIGNsaWVudF9zZWNyZXQgYXMgYW4gSFRUUCBCYXNpYyBBdXRoZW50aWNhdGlvbiBoZWFkZXIgYXMgcGVyIHRoZSBPQXV0aCAyLjBcbiAqIHNwZWNpZmllZCBpbiBSRkM2NzQ5LlxuICovXG5mdW5jdGlvbiBjbGllbnRTZWNyZXRCYXNpYyhjbGllbnRJZCwgY2xpZW50U2VjcmV0KSB7XG4gICAgY29uc3QgdXNlcm5hbWUgPSBmb3JtVXJsRW5jb2RlKGNsaWVudElkKTtcbiAgICBjb25zdCBwYXNzd29yZCA9IGZvcm1VcmxFbmNvZGUoY2xpZW50U2VjcmV0KTtcbiAgICBjb25zdCBjcmVkZW50aWFscyA9IGJ0b2EoYCR7dXNlcm5hbWV9OiR7cGFzc3dvcmR9YCk7XG4gICAgcmV0dXJuIGBCYXNpYyAke2NyZWRlbnRpYWxzfWA7XG59XG4vKipcbiAqIEhhbmRsZXMgdGhlIGZvbGxvd2luZyBPQXV0aCBzdGVwcy5cbiAqIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM2NzQ5I3NlY3Rpb24tNC4xLjFcbiAqIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM2NzQ5I3NlY3Rpb24tNC4xLjNcbiAqIGh0dHBzOi8vb3BlbmlkLm5ldC9zcGVjcy9vcGVuaWQtY29ubmVjdC1jb3JlLTFfMC5odG1sI1VzZXJJbmZvUmVxdWVzdFxuICpcbiAqIEBub3RlIEFsdGhvdWdoIHJlcXVlc3RpbmcgdXNlcmluZm8gaXMgbm90IHJlcXVpcmVkIGJ5IHRoZSBPQXV0aDIuMCBzcGVjLFxuICogd2UgZmV0Y2ggaXQgYW55d2F5LiBUaGlzIGlzIGJlY2F1c2Ugd2UgYWx3YXlzIHdhbnQgYSB1c2VyIHByb2ZpbGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVPQXV0aChwYXJhbXMsIGNvb2tpZXMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGxvZ2dlciwgcHJvdmlkZXIgfSA9IG9wdGlvbnM7XG4gICAgbGV0IGFzO1xuICAgIGNvbnN0IHsgdG9rZW4sIHVzZXJpbmZvIH0gPSBwcm92aWRlcjtcbiAgICAvLyBGYWxscyBiYWNrIHRvIGF1dGhqcy5kZXYgaWYgdGhlIHVzZXIgb25seSBwYXNzZWQgcGFyYW1zXG4gICAgaWYgKCghdG9rZW4/LnVybCB8fCB0b2tlbi51cmwuaG9zdCA9PT0gXCJhdXRoanMuZGV2XCIpICYmXG4gICAgICAgICghdXNlcmluZm8/LnVybCB8fCB1c2VyaW5mby51cmwuaG9zdCA9PT0gXCJhdXRoanMuZGV2XCIpKSB7XG4gICAgICAgIC8vIFdlIGFzc3VtZSB0aGF0IGlzc3VlciBpcyBhbHdheXMgZGVmaW5lZCBhcyB0aGlzIGhhcyBiZWVuIGFzc2VydGVkIGVhcmxpZXJcbiAgICAgICAgY29uc3QgaXNzdWVyID0gbmV3IFVSTChwcm92aWRlci5pc3N1ZXIpO1xuICAgICAgICBjb25zdCBkaXNjb3ZlcnlSZXNwb25zZSA9IGF3YWl0IG8uZGlzY292ZXJ5UmVxdWVzdChpc3N1ZXIsIHtcbiAgICAgICAgICAgIFtvLmFsbG93SW5zZWN1cmVSZXF1ZXN0c106IHRydWUsXG4gICAgICAgICAgICBbby5jdXN0b21GZXRjaF06IHByb3ZpZGVyW2N1c3RvbUZldGNoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGFzID0gYXdhaXQgby5wcm9jZXNzRGlzY292ZXJ5UmVzcG9uc2UoaXNzdWVyLCBkaXNjb3ZlcnlSZXNwb25zZSk7XG4gICAgICAgIGlmICghYXMudG9rZW5fZW5kcG9pbnQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVE9ETzogQXV0aG9yaXphdGlvbiBzZXJ2ZXIgZGlkIG5vdCBwcm92aWRlIGEgdG9rZW4gZW5kcG9pbnQuXCIpO1xuICAgICAgICBpZiAoIWFzLnVzZXJpbmZvX2VuZHBvaW50KVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRPRE86IEF1dGhvcml6YXRpb24gc2VydmVyIGRpZCBub3QgcHJvdmlkZSBhIHVzZXJpbmZvIGVuZHBvaW50LlwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFzID0ge1xuICAgICAgICAgICAgaXNzdWVyOiBwcm92aWRlci5pc3N1ZXIgPz8gXCJodHRwczovL2F1dGhqcy5kZXZcIiwgLy8gVE9ETzogcmV2aWV3IGZhbGxiYWNrIGlzc3VlclxuICAgICAgICAgICAgdG9rZW5fZW5kcG9pbnQ6IHRva2VuPy51cmwudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHVzZXJpbmZvX2VuZHBvaW50OiB1c2VyaW5mbz8udXJsLnRvU3RyaW5nKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGNsaWVudCA9IHtcbiAgICAgICAgY2xpZW50X2lkOiBwcm92aWRlci5jbGllbnRJZCxcbiAgICAgICAgLi4ucHJvdmlkZXIuY2xpZW50LFxuICAgIH07XG4gICAgbGV0IGNsaWVudEF1dGg7XG4gICAgc3dpdGNoIChjbGllbnQudG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QpIHtcbiAgICAgICAgLy8gVE9ETzogaW4gdGhlIG5leHQgYnJlYWtpbmcgbWFqb3IgdmVyc2lvbiBoYXZlIHVuZGVmaW5lZCBiZSBgY2xpZW50X3NlY3JldF9wb3N0YFxuICAgICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgY2FzZSBcImNsaWVudF9zZWNyZXRfYmFzaWNcIjpcbiAgICAgICAgICAgIC8vIFRPRE86IGluIHRoZSBuZXh0IGJyZWFraW5nIG1ham9yIHZlcnNpb24gdXNlIG8uQ2xpZW50U2VjcmV0QmFzaWMoKSBoZXJlXG4gICAgICAgICAgICBjbGllbnRBdXRoID0gKF9hcywgX2NsaWVudCwgX2JvZHksIGhlYWRlcnMpID0+IHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldChcImF1dGhvcml6YXRpb25cIiwgY2xpZW50U2VjcmV0QmFzaWMocHJvdmlkZXIuY2xpZW50SWQsIHByb3ZpZGVyLmNsaWVudFNlY3JldCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY2xpZW50X3NlY3JldF9wb3N0XCI6XG4gICAgICAgICAgICBjbGllbnRBdXRoID0gby5DbGllbnRTZWNyZXRQb3N0KHByb3ZpZGVyLmNsaWVudFNlY3JldCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNsaWVudF9zZWNyZXRfand0XCI6XG4gICAgICAgICAgICBjbGllbnRBdXRoID0gby5DbGllbnRTZWNyZXRKd3QocHJvdmlkZXIuY2xpZW50U2VjcmV0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicHJpdmF0ZV9rZXlfand0XCI6XG4gICAgICAgICAgICBjbGllbnRBdXRoID0gby5Qcml2YXRlS2V5Snd0KHByb3ZpZGVyLnRva2VuLmNsaWVudFByaXZhdGVLZXksIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiByZXZpZXcgaW4gdGhlIG5leHQgYnJlYWtpbmcgY2hhbmdlXG4gICAgICAgICAgICAgICAgW28ubW9kaWZ5QXNzZXJ0aW9uXShfaGVhZGVyLCBwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuYXVkID0gW2FzLmlzc3VlciwgYXMudG9rZW5fZW5kcG9pbnRdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICAgICAgY2xpZW50QXV0aCA9IG8uTm9uZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBjbGllbnQgYXV0aGVudGljYXRpb24gbWV0aG9kXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXNDb29raWVzID0gW107XG4gICAgY29uc3Qgc3RhdGUgPSBhd2FpdCBjaGVja3Muc3RhdGUudXNlKGNvb2tpZXMsIHJlc0Nvb2tpZXMsIG9wdGlvbnMpO1xuICAgIGxldCBjb2RlR3JhbnRQYXJhbXM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29kZUdyYW50UGFyYW1zID0gby52YWxpZGF0ZUF1dGhSZXNwb25zZShhcywgY2xpZW50LCBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcyksIHByb3ZpZGVyLmNoZWNrcy5pbmNsdWRlcyhcInN0YXRlXCIpID8gc3RhdGUgOiBvLnNraXBTdGF0ZUNoZWNrKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2Ygby5BdXRob3JpemF0aW9uUmVzcG9uc2VFcnJvcikge1xuICAgICAgICAgICAgY29uc3QgY2F1c2UgPSB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJJZDogcHJvdmlkZXIuaWQsXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKGVyci5jYXVzZS5lbnRyaWVzKCkpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIk9BdXRoQ2FsbGJhY2tFcnJvclwiLCBjYXVzZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT0F1dGhDYWxsYmFja0Vycm9yKFwiT0F1dGggUHJvdmlkZXIgcmV0dXJuZWQgYW4gZXJyb3JcIiwgY2F1c2UpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgY29uc3QgY29kZVZlcmlmaWVyID0gYXdhaXQgY2hlY2tzLnBrY2UudXNlKGNvb2tpZXMsIHJlc0Nvb2tpZXMsIG9wdGlvbnMpO1xuICAgIGxldCByZWRpcmVjdF91cmkgPSBwcm92aWRlci5jYWxsYmFja1VybDtcbiAgICBpZiAoIW9wdGlvbnMuaXNPblJlZGlyZWN0UHJveHkgJiYgcHJvdmlkZXIucmVkaXJlY3RQcm94eVVybCkge1xuICAgICAgICByZWRpcmVjdF91cmkgPSBwcm92aWRlci5yZWRpcmVjdFByb3h5VXJsO1xuICAgIH1cbiAgICBsZXQgY29kZUdyYW50UmVzcG9uc2UgPSBhd2FpdCBvLmF1dGhvcml6YXRpb25Db2RlR3JhbnRSZXF1ZXN0KGFzLCBjbGllbnQsIGNsaWVudEF1dGgsIGNvZGVHcmFudFBhcmFtcywgcmVkaXJlY3RfdXJpLCBjb2RlVmVyaWZpZXIgPz8gXCJkZWNveVwiLCB7XG4gICAgICAgIC8vIFRPRE86IG1vdmUgYXdheSBmcm9tIGFsbG93aW5nIGluc2VjdXJlIEhUVFAgcmVxdWVzdHNcbiAgICAgICAgW28uYWxsb3dJbnNlY3VyZVJlcXVlc3RzXTogdHJ1ZSxcbiAgICAgICAgW28uY3VzdG9tRmV0Y2hdOiAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgaWYgKCFwcm92aWRlci5jaGVja3MuaW5jbHVkZXMoXCJwa2NlXCIpKSB7XG4gICAgICAgICAgICAgICAgYXJnc1sxXS5ib2R5LmRlbGV0ZShcImNvZGVfdmVyaWZpZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKHByb3ZpZGVyW2N1c3RvbUZldGNoXSA/PyBmZXRjaCkoLi4uYXJncyk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKHByb3ZpZGVyLnRva2VuPy5jb25mb3JtKSB7XG4gICAgICAgIGNvZGVHcmFudFJlc3BvbnNlID1cbiAgICAgICAgICAgIChhd2FpdCBwcm92aWRlci50b2tlbi5jb25mb3JtKGNvZGVHcmFudFJlc3BvbnNlLmNsb25lKCkpKSA/P1xuICAgICAgICAgICAgICAgIGNvZGVHcmFudFJlc3BvbnNlO1xuICAgIH1cbiAgICBsZXQgcHJvZmlsZSA9IHt9O1xuICAgIGNvbnN0IHJlcXVpcmVJZFRva2VuID0gaXNPSURDUHJvdmlkZXIocHJvdmlkZXIpO1xuICAgIGlmIChwcm92aWRlcltjb25mb3JtSW50ZXJuYWxdKSB7XG4gICAgICAgIHN3aXRjaCAocHJvdmlkZXIuaWQpIHtcbiAgICAgICAgICAgIGNhc2UgXCJtaWNyb3NvZnQtZW50cmEtaWRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhenVyZS1hZFwiOiB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVGhlc2UgcHJvdmlkZXJzIG5lZWQgdGhlIGF1dGhvcml6YXRpb24gc2VydmVyIG1ldGFkYXRhIHRvIGJlIHJlLXByb2Nlc3NlZFxuICAgICAgICAgICAgICAgICAqIGJhc2VkIG9uIHRoZSBgaWRfdG9rZW5gJ3MgYHRpZGAgY2xhaW1cbiAgICAgICAgICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnREb2NzL2F6dXJlLWRvY3MvaXNzdWVzLzExMzk0NFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdGlkIH0gPSBkZWNvZGVKd3QoKGF3YWl0IGNvZGVHcmFudFJlc3BvbnNlLmNsb25lKCkuanNvbigpKS5pZF90b2tlbik7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVuYW50UmUgPSAvbWljcm9zb2Z0b25saW5lXFwuY29tXFwvKFxcdyspXFwvdjJcXC4wLztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVuYW50SWQgPSBhcy5pc3N1ZXI/Lm1hdGNoKHRlbmFudFJlKT8uWzFdID8/IFwiY29tbW9uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzc3VlciA9IG5ldyBVUkwoYXMuaXNzdWVyLnJlcGxhY2UodGVuYW50SWQsIHRpZCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNjb3ZlcnlSZXNwb25zZSA9IGF3YWl0IG8uZGlzY292ZXJ5UmVxdWVzdChpc3N1ZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtvLmN1c3RvbUZldGNoXTogcHJvdmlkZXJbY3VzdG9tRmV0Y2hdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXMgPSBhd2FpdCBvLnByb2Nlc3NEaXNjb3ZlcnlSZXNwb25zZShpc3N1ZXIsIGRpc2NvdmVyeVJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHByb2Nlc3NlZENvZGVSZXNwb25zZSA9IGF3YWl0IG8ucHJvY2Vzc0F1dGhvcml6YXRpb25Db2RlUmVzcG9uc2UoYXMsIGNsaWVudCwgY29kZUdyYW50UmVzcG9uc2UsIHtcbiAgICAgICAgZXhwZWN0ZWROb25jZTogYXdhaXQgY2hlY2tzLm5vbmNlLnVzZShjb29raWVzLCByZXNDb29raWVzLCBvcHRpb25zKSxcbiAgICAgICAgcmVxdWlyZUlkVG9rZW4sXG4gICAgfSk7XG4gICAgY29uc3QgdG9rZW5zID0gcHJvY2Vzc2VkQ29kZVJlc3BvbnNlO1xuICAgIGlmIChyZXF1aXJlSWRUb2tlbikge1xuICAgICAgICBjb25zdCBpZFRva2VuQ2xhaW1zID0gby5nZXRWYWxpZGF0ZWRJZFRva2VuQ2xhaW1zKHByb2Nlc3NlZENvZGVSZXNwb25zZSk7XG4gICAgICAgIHByb2ZpbGUgPSBpZFRva2VuQ2xhaW1zO1xuICAgICAgICAvLyBBcHBsZSBzZW5kcyBzb21lIG9mIHRoZSB1c2VyIGluZm9ybWF0aW9uIGluIGEgYHVzZXJgIHBhcmFtZXRlciBhcyBhIHN0cmluZ2lmaWVkIEpTT04uXG4gICAgICAgIC8vIEl0IGFsc28gb25seSBkb2VzIHNvIHRoZSBmaXJzdCB0aW1lIHRoZSB1c2VyIGNvbnNlbnRzIHRvIHNoYXJlIHRoZWlyIGluZm9ybWF0aW9uLlxuICAgICAgICBpZiAocHJvdmlkZXJbY29uZm9ybUludGVybmFsXSAmJiBwcm92aWRlci5pZCA9PT0gXCJhcHBsZVwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHByb2ZpbGUudXNlciA9IEpTT04ucGFyc2UocGFyYW1zPy51c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHsgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aWRlci5pZFRva2VuID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc3QgdXNlcmluZm9SZXNwb25zZSA9IGF3YWl0IG8udXNlckluZm9SZXF1ZXN0KGFzLCBjbGllbnQsIHByb2Nlc3NlZENvZGVSZXNwb25zZS5hY2Nlc3NfdG9rZW4sIHtcbiAgICAgICAgICAgICAgICBbby5jdXN0b21GZXRjaF06IHByb3ZpZGVyW2N1c3RvbUZldGNoXSxcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBtb3ZlIGF3YXkgZnJvbSBhbGxvd2luZyBpbnNlY3VyZSBIVFRQIHJlcXVlc3RzXG4gICAgICAgICAgICAgICAgW28uYWxsb3dJbnNlY3VyZVJlcXVlc3RzXTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvZmlsZSA9IGF3YWl0IG8ucHJvY2Vzc1VzZXJJbmZvUmVzcG9uc2UoYXMsIGNsaWVudCwgaWRUb2tlbkNsYWltcy5zdWIsIHVzZXJpbmZvUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodXNlcmluZm8/LnJlcXVlc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IF9wcm9maWxlID0gYXdhaXQgdXNlcmluZm8ucmVxdWVzdCh7IHRva2VucywgcHJvdmlkZXIgfSk7XG4gICAgICAgICAgICBpZiAoX3Byb2ZpbGUgaW5zdGFuY2VvZiBPYmplY3QpXG4gICAgICAgICAgICAgICAgcHJvZmlsZSA9IF9wcm9maWxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVzZXJpbmZvPy51cmwpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJpbmZvUmVzcG9uc2UgPSBhd2FpdCBvLnVzZXJJbmZvUmVxdWVzdChhcywgY2xpZW50LCBwcm9jZXNzZWRDb2RlUmVzcG9uc2UuYWNjZXNzX3Rva2VuLCB7IFtvLmN1c3RvbUZldGNoXTogcHJvdmlkZXJbY3VzdG9tRmV0Y2hdIH0pO1xuICAgICAgICAgICAgcHJvZmlsZSA9IGF3YWl0IHVzZXJpbmZvUmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIHVzZXJpbmZvIGVuZHBvaW50IGNvbmZpZ3VyZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRva2Vucy5leHBpcmVzX2luKSB7XG4gICAgICAgIHRva2Vucy5leHBpcmVzX2F0ID1cbiAgICAgICAgICAgIE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgTnVtYmVyKHRva2Vucy5leHBpcmVzX2luKTtcbiAgICB9XG4gICAgY29uc3QgcHJvZmlsZVJlc3VsdCA9IGF3YWl0IGdldFVzZXJBbmRBY2NvdW50KHByb2ZpbGUsIHByb3ZpZGVyLCB0b2tlbnMsIGxvZ2dlcik7XG4gICAgcmV0dXJuIHsgLi4ucHJvZmlsZVJlc3VsdCwgcHJvZmlsZSwgY29va2llczogcmVzQ29va2llcyB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSB1c2VyIGFuZCBhY2NvdW50IHRoYXQgaXMgZ29pbmcgdG8gYmUgY3JlYXRlZCBpbiB0aGUgZGF0YWJhc2UuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJBbmRBY2NvdW50KE9BdXRoUHJvZmlsZSwgcHJvdmlkZXIsIHRva2VucywgbG9nZ2VyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlckZyb21Qcm9maWxlID0gYXdhaXQgcHJvdmlkZXIucHJvZmlsZShPQXV0aFByb2ZpbGUsIHRva2Vucyk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB7XG4gICAgICAgICAgICAuLi51c2VyRnJvbVByb2ZpbGUsXG4gICAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyRnJvbVByb2ZpbGUuZW1haWw/LnRvTG93ZXJDYXNlKCksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgYWNjb3VudDoge1xuICAgICAgICAgICAgICAgIC4uLnRva2VucyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIuaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogcHJvdmlkZXIudHlwZSxcbiAgICAgICAgICAgICAgICBwcm92aWRlckFjY291bnRJZDogdXNlckZyb21Qcm9maWxlLmlkID8/IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UgZWl0aGVyIHRoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCB0aGUgcHJvdmlkZXJcbiAgICAgICAgLy8gcmVzcG9uc2UgKm9yKiB0aGUgdXNlciBjYW5jZWxsZWQgdGhlIGFjdGlvbiB3aXRoIHRoZSBwcm92aWRlci5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgd2UgY2FuJ3QgdGVsbCB3aGljaCAtIGF0IGxlYXN0IG5vdCBpbiBhIHdheSB0aGF0IHdvcmtzIGZvclxuICAgICAgICAvLyBhbGwgcHJvdmlkZXJzLCBzbyB3ZSByZXR1cm4gYW4gZW1wdHkgb2JqZWN0OyB0aGUgdXNlciBzaG91bGQgdGhlbiBiZVxuICAgICAgICAvLyByZWRpcmVjdGVkIGJhY2sgdG8gdGhlIHNpZ24gdXAgcGFnZS4gV2UgbG9nIHRoZSBlcnJvciB0byBoZWxwIGRldmVsb3BlcnNcbiAgICAgICAgLy8gd2hvIG1pZ2h0IGJlIHRyeWluZyB0byBkZWJ1ZyB0aGlzIHdoZW4gY29uZmlndXJpbmcgYSBuZXcgcHJvdmlkZXIuXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcImdldFByb2ZpbGUgZXJyb3IgZGV0YWlsc1wiLCBPQXV0aFByb2ZpbGUpO1xuICAgICAgICBsb2dnZXIuZXJyb3IobmV3IE9BdXRoUHJvZmlsZVBhcnNlRXJyb3IoZSwgeyBwcm92aWRlcjogcHJvdmlkZXIuaWQgfSkpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/callback.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/callback.js":
/*!************************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/oauth/callback.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserAndAccount: () => (/* binding */ getUserAndAccount),\n/* harmony export */   handleOAuth: () => (/* binding */ handleOAuth)\n/* harmony export */ });\n/* harmony import */ var _checks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./checks.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\");\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! oauth4webapi */ \"(rsc)/./node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_providers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/providers.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/providers.js\");\n/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../symbols.js */ \"(rsc)/./node_modules/@auth/core/lib/symbols.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/util/decode_jwt.js\");\n\n\n\n\n\n\nfunction formUrlEncode(token) {\n    return encodeURIComponent(token).replace(/%20/g, \"+\");\n}\n/**\n * Formats client_id and client_secret as an HTTP Basic Authentication header as per the OAuth 2.0\n * specified in RFC6749.\n */\nfunction clientSecretBasic(clientId, clientSecret) {\n    const username = formUrlEncode(clientId);\n    const password = formUrlEncode(clientSecret);\n    const credentials = btoa(`${username}:${password}`);\n    return `Basic ${credentials}`;\n}\n/**\n * Handles the following OAuth steps.\n * https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1\n * https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3\n * https://openid.net/specs/openid-connect-core-1_0.html#UserInfoRequest\n *\n * @note Although requesting userinfo is not required by the OAuth2.0 spec,\n * we fetch it anyway. This is because we always want a user profile.\n */\nasync function handleOAuth(params, cookies, options) {\n    const { logger, provider } = options;\n    let as;\n    const { token, userinfo } = provider;\n    // Falls back to authjs.dev if the user only passed params\n    if ((!token?.url || token.url.host === \"authjs.dev\") &&\n        (!userinfo?.url || userinfo.url.host === \"authjs.dev\")) {\n        // We assume that issuer is always defined as this has been asserted earlier\n        const issuer = new URL(provider.issuer);\n        const discoveryResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.discoveryRequest(issuer, {\n            [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.allowInsecureRequests]: true,\n            [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch],\n        });\n        as = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.processDiscoveryResponse(issuer, discoveryResponse);\n        if (!as.token_endpoint)\n            throw new TypeError(\"TODO: Authorization server did not provide a token endpoint.\");\n        if (!as.userinfo_endpoint)\n            throw new TypeError(\"TODO: Authorization server did not provide a userinfo endpoint.\");\n    }\n    else {\n        as = {\n            issuer: provider.issuer ?? \"https://authjs.dev\", // TODO: review fallback issuer\n            token_endpoint: token?.url.toString(),\n            userinfo_endpoint: userinfo?.url.toString(),\n        };\n    }\n    const client = {\n        client_id: provider.clientId,\n        ...provider.client,\n    };\n    let clientAuth;\n    switch (client.token_endpoint_auth_method) {\n        // TODO: in the next breaking major version have undefined be `client_secret_post`\n        case undefined:\n        case \"client_secret_basic\":\n            // TODO: in the next breaking major version use o.ClientSecretBasic() here\n            clientAuth = (_as, _client, _body, headers) => {\n                headers.set(\"authorization\", clientSecretBasic(provider.clientId, provider.clientSecret));\n            };\n            break;\n        case \"client_secret_post\":\n            clientAuth = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.ClientSecretPost(provider.clientSecret);\n            break;\n        case \"client_secret_jwt\":\n            clientAuth = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.ClientSecretJwt(provider.clientSecret);\n            break;\n        case \"private_key_jwt\":\n            clientAuth = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.PrivateKeyJwt(provider.token.clientPrivateKey, {\n                // TODO: review in the next breaking change\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.modifyAssertion](_header, payload) {\n                    payload.aud = [as.issuer, as.token_endpoint];\n                },\n            });\n            break;\n        case \"none\":\n            clientAuth = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.None();\n            break;\n        default:\n            throw new Error(\"unsupported client authentication method\");\n    }\n    const resCookies = [];\n    const state = await _checks_js__WEBPACK_IMPORTED_MODULE_0__.state.use(cookies, resCookies, options);\n    let codeGrantParams;\n    try {\n        codeGrantParams = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.validateAuthResponse(as, client, new URLSearchParams(params), provider.checks.includes(\"state\") ? state : oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.skipStateCheck);\n    }\n    catch (err) {\n        if (err instanceof oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.AuthorizationResponseError) {\n            const cause = {\n                providerId: provider.id,\n                ...Object.fromEntries(err.cause.entries()),\n            };\n            logger.debug(\"OAuthCallbackError\", cause);\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.OAuthCallbackError(\"OAuth Provider returned an error\", cause);\n        }\n        throw err;\n    }\n    const codeVerifier = await _checks_js__WEBPACK_IMPORTED_MODULE_0__.pkce.use(cookies, resCookies, options);\n    let redirect_uri = provider.callbackUrl;\n    if (!options.isOnRedirectProxy && provider.redirectProxyUrl) {\n        redirect_uri = provider.redirectProxyUrl;\n    }\n    let codeGrantResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.authorizationCodeGrantRequest(as, client, clientAuth, codeGrantParams, redirect_uri, codeVerifier ?? \"decoy\", {\n        // TODO: move away from allowing insecure HTTP requests\n        [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.allowInsecureRequests]: true,\n        [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: (...args) => {\n            if (!provider.checks.includes(\"pkce\")) {\n                args[1].body.delete(\"code_verifier\");\n            }\n            return (provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch] ?? fetch)(...args);\n        },\n    });\n    if (provider.token?.conform) {\n        codeGrantResponse =\n            (await provider.token.conform(codeGrantResponse.clone())) ??\n                codeGrantResponse;\n    }\n    let profile = {};\n    const requireIdToken = (0,_utils_providers_js__WEBPACK_IMPORTED_MODULE_2__.isOIDCProvider)(provider);\n    if (provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.conformInternal]) {\n        switch (provider.id) {\n            case \"microsoft-entra-id\":\n            case \"azure-ad\": {\n                /**\n                 * These providers need the authorization server metadata to be re-processed\n                 * based on the `id_token`'s `tid` claim\n                 * @see https://github.com/MicrosoftDocs/azure-docs/issues/113944\n                 */\n                const { tid } = (0,jose__WEBPACK_IMPORTED_MODULE_5__.decodeJwt)((await codeGrantResponse.clone().json()).id_token);\n                if (typeof tid === \"string\") {\n                    const tenantRe = /microsoftonline\\.com\\/(\\w+)\\/v2\\.0/;\n                    const tenantId = as.issuer?.match(tenantRe)?.[1] ?? \"common\";\n                    const issuer = new URL(as.issuer.replace(tenantId, tid));\n                    const discoveryResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.discoveryRequest(issuer, {\n                        [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch],\n                    });\n                    as = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.processDiscoveryResponse(issuer, discoveryResponse);\n                }\n                break;\n            }\n            default:\n                break;\n        }\n    }\n    const processedCodeResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.processAuthorizationCodeResponse(as, client, codeGrantResponse, {\n        expectedNonce: await _checks_js__WEBPACK_IMPORTED_MODULE_0__.nonce.use(cookies, resCookies, options),\n        requireIdToken,\n    });\n    const tokens = processedCodeResponse;\n    if (requireIdToken) {\n        const idTokenClaims = oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.getValidatedIdTokenClaims(processedCodeResponse);\n        profile = idTokenClaims;\n        // Apple sends some of the user information in a `user` parameter as a stringified JSON.\n        // It also only does so the first time the user consents to share their information.\n        if (provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.conformInternal] && provider.id === \"apple\") {\n            try {\n                profile.user = JSON.parse(params?.user);\n            }\n            catch { }\n        }\n        if (provider.idToken === false) {\n            const userinfoResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.userInfoRequest(as, client, processedCodeResponse.access_token, {\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch],\n                // TODO: move away from allowing insecure HTTP requests\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.allowInsecureRequests]: true,\n            });\n            profile = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.processUserInfoResponse(as, client, idTokenClaims.sub, userinfoResponse);\n        }\n    }\n    else {\n        if (userinfo?.request) {\n            const _profile = await userinfo.request({ tokens, provider });\n            if (_profile instanceof Object)\n                profile = _profile;\n        }\n        else if (userinfo?.url) {\n            const userinfoResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.userInfoRequest(as, client, processedCodeResponse.access_token, { [oauth4webapi__WEBPACK_IMPORTED_MODULE_4__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_3__.customFetch] });\n            profile = await userinfoResponse.json();\n        }\n        else {\n            throw new TypeError(\"No userinfo endpoint configured\");\n        }\n    }\n    if (tokens.expires_in) {\n        tokens.expires_at =\n            Math.floor(Date.now() / 1000) + Number(tokens.expires_in);\n    }\n    const profileResult = await getUserAndAccount(profile, provider, tokens, logger);\n    return { ...profileResult, profile, cookies: resCookies };\n}\n/**\n * Returns the user and account that is going to be created in the database.\n * @internal\n */\nasync function getUserAndAccount(OAuthProfile, provider, tokens, logger) {\n    try {\n        const userFromProfile = await provider.profile(OAuthProfile, tokens);\n        const user = {\n            ...userFromProfile,\n            id: crypto.randomUUID(),\n            email: userFromProfile.email?.toLowerCase(),\n        };\n        return {\n            user,\n            account: {\n                ...tokens,\n                provider: provider.id,\n                type: provider.type,\n                providerAccountId: userFromProfile.id ?? crypto.randomUUID(),\n            },\n        };\n    }\n    catch (e) {\n        // If we didn't get a response either there was a problem with the provider\n        // response *or* the user cancelled the action with the provider.\n        //\n        // Unfortunately, we can't tell which - at least not in a way that works for\n        // all providers, so we return an empty object; the user should then be\n        // redirected back to the sign up page. We log the error to help developers\n        // who might be trying to debug this when configuring a new provider.\n        logger.debug(\"getProfile error details\", OAuthProfile);\n        logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_1__.OAuthProfileParseError(e, { provider: provider.id }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9jYWxsYmFjay9vYXV0aC9jYWxsYmFjay5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzQztBQUNKO0FBQ2tEO0FBQ3ZCO0FBQ007QUFDbEM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUyxHQUFHLFNBQVM7QUFDckQsb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywwREFBa0I7QUFDMUQsYUFBYSwrREFBdUI7QUFDcEMsYUFBYSxxREFBYSxZQUFZLG9EQUFXO0FBQ2pELFNBQVM7QUFDVCxtQkFBbUIsa0VBQTBCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwREFBa0I7QUFDM0M7QUFDQTtBQUNBLHlCQUF5Qix5REFBaUI7QUFDMUM7QUFDQTtBQUNBLHlCQUF5Qix1REFBZTtBQUN4QztBQUNBLGlCQUFpQix5REFBaUI7QUFDbEM7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQSx5QkFBeUIsOENBQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw2Q0FBWTtBQUNwQztBQUNBO0FBQ0EsMEJBQTBCLDhEQUFzQixzRkFBc0Ysd0RBQWdCO0FBQ3RKO0FBQ0E7QUFDQSwyQkFBMkIsb0VBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMERBQWtCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0Q0FBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx1RUFBK0I7QUFDakU7QUFDQSxTQUFTLCtEQUF1QjtBQUNoQyxTQUFTLHFEQUFhO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixvREFBVztBQUN4QyxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtRUFBYztBQUN6QyxpQkFBaUIsd0RBQWU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixNQUFNLEVBQUUsK0NBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsMERBQWtCO0FBQ3RFLHlCQUF5QixxREFBYSxZQUFZLG9EQUFXO0FBQzdELHFCQUFxQjtBQUNyQiwrQkFBK0Isa0VBQTBCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDBFQUFrQztBQUMxRSw2QkFBNkIsNkNBQVk7QUFDekM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDhCQUE4QixtRUFBMkI7QUFDekQ7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHdEQUFlO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx5REFBaUI7QUFDNUQsaUJBQWlCLHFEQUFhLFlBQVksb0RBQVc7QUFDckQ7QUFDQSxpQkFBaUIsK0RBQXVCO0FBQ3hDLGFBQWE7QUFDYiw0QkFBNEIsaUVBQXlCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGtCQUFrQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx5REFBaUIsbURBQW1ELENBQUMscURBQWEsWUFBWSxvREFBVyxHQUFHO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOERBQXNCLE1BQU0sdUJBQXVCO0FBQzVFO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxjYWxsYmFja1xcb2F1dGhcXGNhbGxiYWNrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNoZWNrcyBmcm9tIFwiLi9jaGVja3MuanNcIjtcbmltcG9ydCAqIGFzIG8gZnJvbSBcIm9hdXRoNHdlYmFwaVwiO1xuaW1wb3J0IHsgT0F1dGhDYWxsYmFja0Vycm9yLCBPQXV0aFByb2ZpbGVQYXJzZUVycm9yLCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGlzT0lEQ1Byb3ZpZGVyIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3Byb3ZpZGVycy5qc1wiO1xuaW1wb3J0IHsgY29uZm9ybUludGVybmFsLCBjdXN0b21GZXRjaCB9IGZyb20gXCIuLi8uLi8uLi9zeW1ib2xzLmpzXCI7XG5pbXBvcnQgeyBkZWNvZGVKd3QgfSBmcm9tIFwiam9zZVwiO1xuZnVuY3Rpb24gZm9ybVVybEVuY29kZSh0b2tlbikge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodG9rZW4pLnJlcGxhY2UoLyUyMC9nLCBcIitcIik7XG59XG4vKipcbiAqIEZvcm1hdHMgY2xpZW50X2lkIGFuZCBjbGllbnRfc2VjcmV0IGFzIGFuIEhUVFAgQmFzaWMgQXV0aGVudGljYXRpb24gaGVhZGVyIGFzIHBlciB0aGUgT0F1dGggMi4wXG4gKiBzcGVjaWZpZWQgaW4gUkZDNjc0OS5cbiAqL1xuZnVuY3Rpb24gY2xpZW50U2VjcmV0QmFzaWMoY2xpZW50SWQsIGNsaWVudFNlY3JldCkge1xuICAgIGNvbnN0IHVzZXJuYW1lID0gZm9ybVVybEVuY29kZShjbGllbnRJZCk7XG4gICAgY29uc3QgcGFzc3dvcmQgPSBmb3JtVXJsRW5jb2RlKGNsaWVudFNlY3JldCk7XG4gICAgY29uc3QgY3JlZGVudGlhbHMgPSBidG9hKGAke3VzZXJuYW1lfToke3Bhc3N3b3JkfWApO1xuICAgIHJldHVybiBgQmFzaWMgJHtjcmVkZW50aWFsc31gO1xufVxuLyoqXG4gKiBIYW5kbGVzIHRoZSBmb2xsb3dpbmcgT0F1dGggc3RlcHMuXG4gKiBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNjc0OSNzZWN0aW9uLTQuMS4xXG4gKiBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNjc0OSNzZWN0aW9uLTQuMS4zXG4gKiBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtY29yZS0xXzAuaHRtbCNVc2VySW5mb1JlcXVlc3RcbiAqXG4gKiBAbm90ZSBBbHRob3VnaCByZXF1ZXN0aW5nIHVzZXJpbmZvIGlzIG5vdCByZXF1aXJlZCBieSB0aGUgT0F1dGgyLjAgc3BlYyxcbiAqIHdlIGZldGNoIGl0IGFueXdheS4gVGhpcyBpcyBiZWNhdXNlIHdlIGFsd2F5cyB3YW50IGEgdXNlciBwcm9maWxlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlT0F1dGgocGFyYW1zLCBjb29raWVzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyBsb2dnZXIsIHByb3ZpZGVyIH0gPSBvcHRpb25zO1xuICAgIGxldCBhcztcbiAgICBjb25zdCB7IHRva2VuLCB1c2VyaW5mbyB9ID0gcHJvdmlkZXI7XG4gICAgLy8gRmFsbHMgYmFjayB0byBhdXRoanMuZGV2IGlmIHRoZSB1c2VyIG9ubHkgcGFzc2VkIHBhcmFtc1xuICAgIGlmICgoIXRva2VuPy51cmwgfHwgdG9rZW4udXJsLmhvc3QgPT09IFwiYXV0aGpzLmRldlwiKSAmJlxuICAgICAgICAoIXVzZXJpbmZvPy51cmwgfHwgdXNlcmluZm8udXJsLmhvc3QgPT09IFwiYXV0aGpzLmRldlwiKSkge1xuICAgICAgICAvLyBXZSBhc3N1bWUgdGhhdCBpc3N1ZXIgaXMgYWx3YXlzIGRlZmluZWQgYXMgdGhpcyBoYXMgYmVlbiBhc3NlcnRlZCBlYXJsaWVyXG4gICAgICAgIGNvbnN0IGlzc3VlciA9IG5ldyBVUkwocHJvdmlkZXIuaXNzdWVyKTtcbiAgICAgICAgY29uc3QgZGlzY292ZXJ5UmVzcG9uc2UgPSBhd2FpdCBvLmRpc2NvdmVyeVJlcXVlc3QoaXNzdWVyLCB7XG4gICAgICAgICAgICBbby5hbGxvd0luc2VjdXJlUmVxdWVzdHNdOiB0cnVlLFxuICAgICAgICAgICAgW28uY3VzdG9tRmV0Y2hdOiBwcm92aWRlcltjdXN0b21GZXRjaF0sXG4gICAgICAgIH0pO1xuICAgICAgICBhcyA9IGF3YWl0IG8ucHJvY2Vzc0Rpc2NvdmVyeVJlc3BvbnNlKGlzc3VlciwgZGlzY292ZXJ5UmVzcG9uc2UpO1xuICAgICAgICBpZiAoIWFzLnRva2VuX2VuZHBvaW50KVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRPRE86IEF1dGhvcml6YXRpb24gc2VydmVyIGRpZCBub3QgcHJvdmlkZSBhIHRva2VuIGVuZHBvaW50LlwiKTtcbiAgICAgICAgaWYgKCFhcy51c2VyaW5mb19lbmRwb2ludClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJUT0RPOiBBdXRob3JpemF0aW9uIHNlcnZlciBkaWQgbm90IHByb3ZpZGUgYSB1c2VyaW5mbyBlbmRwb2ludC5cIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhcyA9IHtcbiAgICAgICAgICAgIGlzc3VlcjogcHJvdmlkZXIuaXNzdWVyID8/IFwiaHR0cHM6Ly9hdXRoanMuZGV2XCIsIC8vIFRPRE86IHJldmlldyBmYWxsYmFjayBpc3N1ZXJcbiAgICAgICAgICAgIHRva2VuX2VuZHBvaW50OiB0b2tlbj8udXJsLnRvU3RyaW5nKCksXG4gICAgICAgICAgICB1c2VyaW5mb19lbmRwb2ludDogdXNlcmluZm8/LnVybC50b1N0cmluZygpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBjbGllbnQgPSB7XG4gICAgICAgIGNsaWVudF9pZDogcHJvdmlkZXIuY2xpZW50SWQsXG4gICAgICAgIC4uLnByb3ZpZGVyLmNsaWVudCxcbiAgICB9O1xuICAgIGxldCBjbGllbnRBdXRoO1xuICAgIHN3aXRjaCAoY2xpZW50LnRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kKSB7XG4gICAgICAgIC8vIFRPRE86IGluIHRoZSBuZXh0IGJyZWFraW5nIG1ham9yIHZlcnNpb24gaGF2ZSB1bmRlZmluZWQgYmUgYGNsaWVudF9zZWNyZXRfcG9zdGBcbiAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIGNhc2UgXCJjbGllbnRfc2VjcmV0X2Jhc2ljXCI6XG4gICAgICAgICAgICAvLyBUT0RPOiBpbiB0aGUgbmV4dCBicmVha2luZyBtYWpvciB2ZXJzaW9uIHVzZSBvLkNsaWVudFNlY3JldEJhc2ljKCkgaGVyZVxuICAgICAgICAgICAgY2xpZW50QXV0aCA9IChfYXMsIF9jbGllbnQsIF9ib2R5LCBoZWFkZXJzKSA9PiB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoXCJhdXRob3JpemF0aW9uXCIsIGNsaWVudFNlY3JldEJhc2ljKHByb3ZpZGVyLmNsaWVudElkLCBwcm92aWRlci5jbGllbnRTZWNyZXQpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNsaWVudF9zZWNyZXRfcG9zdFwiOlxuICAgICAgICAgICAgY2xpZW50QXV0aCA9IG8uQ2xpZW50U2VjcmV0UG9zdChwcm92aWRlci5jbGllbnRTZWNyZXQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjbGllbnRfc2VjcmV0X2p3dFwiOlxuICAgICAgICAgICAgY2xpZW50QXV0aCA9IG8uQ2xpZW50U2VjcmV0Snd0KHByb3ZpZGVyLmNsaWVudFNlY3JldCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInByaXZhdGVfa2V5X2p3dFwiOlxuICAgICAgICAgICAgY2xpZW50QXV0aCA9IG8uUHJpdmF0ZUtleUp3dChwcm92aWRlci50b2tlbi5jbGllbnRQcml2YXRlS2V5LCB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogcmV2aWV3IGluIHRoZSBuZXh0IGJyZWFraW5nIGNoYW5nZVxuICAgICAgICAgICAgICAgIFtvLm1vZGlmeUFzc2VydGlvbl0oX2hlYWRlciwgcGF5bG9hZCkge1xuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmF1ZCA9IFthcy5pc3N1ZXIsIGFzLnRva2VuX2VuZHBvaW50XTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgICAgIGNsaWVudEF1dGggPSBvLk5vbmUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgY2xpZW50IGF1dGhlbnRpY2F0aW9uIG1ldGhvZFwiKTtcbiAgICB9XG4gICAgY29uc3QgcmVzQ29va2llcyA9IFtdO1xuICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgY2hlY2tzLnN0YXRlLnVzZShjb29raWVzLCByZXNDb29raWVzLCBvcHRpb25zKTtcbiAgICBsZXQgY29kZUdyYW50UGFyYW1zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvZGVHcmFudFBhcmFtcyA9IG8udmFsaWRhdGVBdXRoUmVzcG9uc2UoYXMsIGNsaWVudCwgbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpLCBwcm92aWRlci5jaGVja3MuaW5jbHVkZXMoXCJzdGF0ZVwiKSA/IHN0YXRlIDogby5za2lwU3RhdGVDaGVjayk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIG8uQXV0aG9yaXphdGlvblJlc3BvbnNlRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhdXNlID0ge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuICAgICAgICAgICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhlcnIuY2F1c2UuZW50cmllcygpKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJPQXV0aENhbGxiYWNrRXJyb3JcIiwgY2F1c2UpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9BdXRoQ2FsbGJhY2tFcnJvcihcIk9BdXRoIFByb3ZpZGVyIHJldHVybmVkIGFuIGVycm9yXCIsIGNhdXNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIGNvbnN0IGNvZGVWZXJpZmllciA9IGF3YWl0IGNoZWNrcy5wa2NlLnVzZShjb29raWVzLCByZXNDb29raWVzLCBvcHRpb25zKTtcbiAgICBsZXQgcmVkaXJlY3RfdXJpID0gcHJvdmlkZXIuY2FsbGJhY2tVcmw7XG4gICAgaWYgKCFvcHRpb25zLmlzT25SZWRpcmVjdFByb3h5ICYmIHByb3ZpZGVyLnJlZGlyZWN0UHJveHlVcmwpIHtcbiAgICAgICAgcmVkaXJlY3RfdXJpID0gcHJvdmlkZXIucmVkaXJlY3RQcm94eVVybDtcbiAgICB9XG4gICAgbGV0IGNvZGVHcmFudFJlc3BvbnNlID0gYXdhaXQgby5hdXRob3JpemF0aW9uQ29kZUdyYW50UmVxdWVzdChhcywgY2xpZW50LCBjbGllbnRBdXRoLCBjb2RlR3JhbnRQYXJhbXMsIHJlZGlyZWN0X3VyaSwgY29kZVZlcmlmaWVyID8/IFwiZGVjb3lcIiwge1xuICAgICAgICAvLyBUT0RPOiBtb3ZlIGF3YXkgZnJvbSBhbGxvd2luZyBpbnNlY3VyZSBIVFRQIHJlcXVlc3RzXG4gICAgICAgIFtvLmFsbG93SW5zZWN1cmVSZXF1ZXN0c106IHRydWUsXG4gICAgICAgIFtvLmN1c3RvbUZldGNoXTogKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIGlmICghcHJvdmlkZXIuY2hlY2tzLmluY2x1ZGVzKFwicGtjZVwiKSkge1xuICAgICAgICAgICAgICAgIGFyZ3NbMV0uYm9keS5kZWxldGUoXCJjb2RlX3ZlcmlmaWVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChwcm92aWRlcltjdXN0b21GZXRjaF0gPz8gZmV0Y2gpKC4uLmFyZ3MpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGlmIChwcm92aWRlci50b2tlbj8uY29uZm9ybSkge1xuICAgICAgICBjb2RlR3JhbnRSZXNwb25zZSA9XG4gICAgICAgICAgICAoYXdhaXQgcHJvdmlkZXIudG9rZW4uY29uZm9ybShjb2RlR3JhbnRSZXNwb25zZS5jbG9uZSgpKSkgPz9cbiAgICAgICAgICAgICAgICBjb2RlR3JhbnRSZXNwb25zZTtcbiAgICB9XG4gICAgbGV0IHByb2ZpbGUgPSB7fTtcbiAgICBjb25zdCByZXF1aXJlSWRUb2tlbiA9IGlzT0lEQ1Byb3ZpZGVyKHByb3ZpZGVyKTtcbiAgICBpZiAocHJvdmlkZXJbY29uZm9ybUludGVybmFsXSkge1xuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyLmlkKSB7XG4gICAgICAgICAgICBjYXNlIFwibWljcm9zb2Z0LWVudHJhLWlkXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXp1cmUtYWRcIjoge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRoZXNlIHByb3ZpZGVycyBuZWVkIHRoZSBhdXRob3JpemF0aW9uIHNlcnZlciBtZXRhZGF0YSB0byBiZSByZS1wcm9jZXNzZWRcbiAgICAgICAgICAgICAgICAgKiBiYXNlZCBvbiB0aGUgYGlkX3Rva2VuYCdzIGB0aWRgIGNsYWltXG4gICAgICAgICAgICAgICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0RG9jcy9henVyZS1kb2NzL2lzc3Vlcy8xMTM5NDRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCB7IHRpZCB9ID0gZGVjb2RlSnd0KChhd2FpdCBjb2RlR3JhbnRSZXNwb25zZS5jbG9uZSgpLmpzb24oKSkuaWRfdG9rZW4pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGlkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbmFudFJlID0gL21pY3Jvc29mdG9ubGluZVxcLmNvbVxcLyhcXHcrKVxcL3YyXFwuMC87XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbmFudElkID0gYXMuaXNzdWVyPy5tYXRjaCh0ZW5hbnRSZSk/LlsxXSA/PyBcImNvbW1vblwiO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc3N1ZXIgPSBuZXcgVVJMKGFzLmlzc3Vlci5yZXBsYWNlKHRlbmFudElkLCB0aWQpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzY292ZXJ5UmVzcG9uc2UgPSBhd2FpdCBvLmRpc2NvdmVyeVJlcXVlc3QoaXNzdWVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbby5jdXN0b21GZXRjaF06IHByb3ZpZGVyW2N1c3RvbUZldGNoXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGFzID0gYXdhaXQgby5wcm9jZXNzRGlzY292ZXJ5UmVzcG9uc2UoaXNzdWVyLCBkaXNjb3ZlcnlSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwcm9jZXNzZWRDb2RlUmVzcG9uc2UgPSBhd2FpdCBvLnByb2Nlc3NBdXRob3JpemF0aW9uQ29kZVJlc3BvbnNlKGFzLCBjbGllbnQsIGNvZGVHcmFudFJlc3BvbnNlLCB7XG4gICAgICAgIGV4cGVjdGVkTm9uY2U6IGF3YWl0IGNoZWNrcy5ub25jZS51c2UoY29va2llcywgcmVzQ29va2llcywgb3B0aW9ucyksXG4gICAgICAgIHJlcXVpcmVJZFRva2VuLFxuICAgIH0pO1xuICAgIGNvbnN0IHRva2VucyA9IHByb2Nlc3NlZENvZGVSZXNwb25zZTtcbiAgICBpZiAocmVxdWlyZUlkVG9rZW4pIHtcbiAgICAgICAgY29uc3QgaWRUb2tlbkNsYWltcyA9IG8uZ2V0VmFsaWRhdGVkSWRUb2tlbkNsYWltcyhwcm9jZXNzZWRDb2RlUmVzcG9uc2UpO1xuICAgICAgICBwcm9maWxlID0gaWRUb2tlbkNsYWltcztcbiAgICAgICAgLy8gQXBwbGUgc2VuZHMgc29tZSBvZiB0aGUgdXNlciBpbmZvcm1hdGlvbiBpbiBhIGB1c2VyYCBwYXJhbWV0ZXIgYXMgYSBzdHJpbmdpZmllZCBKU09OLlxuICAgICAgICAvLyBJdCBhbHNvIG9ubHkgZG9lcyBzbyB0aGUgZmlyc3QgdGltZSB0aGUgdXNlciBjb25zZW50cyB0byBzaGFyZSB0aGVpciBpbmZvcm1hdGlvbi5cbiAgICAgICAgaWYgKHByb3ZpZGVyW2NvbmZvcm1JbnRlcm5hbF0gJiYgcHJvdmlkZXIuaWQgPT09IFwiYXBwbGVcIikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwcm9maWxlLnVzZXIgPSBKU09OLnBhcnNlKHBhcmFtcz8udXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvdmlkZXIuaWRUb2tlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJpbmZvUmVzcG9uc2UgPSBhd2FpdCBvLnVzZXJJbmZvUmVxdWVzdChhcywgY2xpZW50LCBwcm9jZXNzZWRDb2RlUmVzcG9uc2UuYWNjZXNzX3Rva2VuLCB7XG4gICAgICAgICAgICAgICAgW28uY3VzdG9tRmV0Y2hdOiBwcm92aWRlcltjdXN0b21GZXRjaF0sXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogbW92ZSBhd2F5IGZyb20gYWxsb3dpbmcgaW5zZWN1cmUgSFRUUCByZXF1ZXN0c1xuICAgICAgICAgICAgICAgIFtvLmFsbG93SW5zZWN1cmVSZXF1ZXN0c106IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHByb2ZpbGUgPSBhd2FpdCBvLnByb2Nlc3NVc2VySW5mb1Jlc3BvbnNlKGFzLCBjbGllbnQsIGlkVG9rZW5DbGFpbXMuc3ViLCB1c2VyaW5mb1Jlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHVzZXJpbmZvPy5yZXF1ZXN0KSB7XG4gICAgICAgICAgICBjb25zdCBfcHJvZmlsZSA9IGF3YWl0IHVzZXJpbmZvLnJlcXVlc3QoeyB0b2tlbnMsIHByb3ZpZGVyIH0pO1xuICAgICAgICAgICAgaWYgKF9wcm9maWxlIGluc3RhbmNlb2YgT2JqZWN0KVxuICAgICAgICAgICAgICAgIHByb2ZpbGUgPSBfcHJvZmlsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1c2VyaW5mbz8udXJsKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyaW5mb1Jlc3BvbnNlID0gYXdhaXQgby51c2VySW5mb1JlcXVlc3QoYXMsIGNsaWVudCwgcHJvY2Vzc2VkQ29kZVJlc3BvbnNlLmFjY2Vzc190b2tlbiwgeyBbby5jdXN0b21GZXRjaF06IHByb3ZpZGVyW2N1c3RvbUZldGNoXSB9KTtcbiAgICAgICAgICAgIHByb2ZpbGUgPSBhd2FpdCB1c2VyaW5mb1Jlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJObyB1c2VyaW5mbyBlbmRwb2ludCBjb25maWd1cmVkXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0b2tlbnMuZXhwaXJlc19pbikge1xuICAgICAgICB0b2tlbnMuZXhwaXJlc19hdCA9XG4gICAgICAgICAgICBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSArIE51bWJlcih0b2tlbnMuZXhwaXJlc19pbik7XG4gICAgfVxuICAgIGNvbnN0IHByb2ZpbGVSZXN1bHQgPSBhd2FpdCBnZXRVc2VyQW5kQWNjb3VudChwcm9maWxlLCBwcm92aWRlciwgdG9rZW5zLCBsb2dnZXIpO1xuICAgIHJldHVybiB7IC4uLnByb2ZpbGVSZXN1bHQsIHByb2ZpbGUsIGNvb2tpZXM6IHJlc0Nvb2tpZXMgfTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgdXNlciBhbmQgYWNjb3VudCB0aGF0IGlzIGdvaW5nIHRvIGJlIGNyZWF0ZWQgaW4gdGhlIGRhdGFiYXNlLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQW5kQWNjb3VudChPQXV0aFByb2ZpbGUsIHByb3ZpZGVyLCB0b2tlbnMsIGxvZ2dlcikge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXJGcm9tUHJvZmlsZSA9IGF3YWl0IHByb3ZpZGVyLnByb2ZpbGUoT0F1dGhQcm9maWxlLCB0b2tlbnMpO1xuICAgICAgICBjb25zdCB1c2VyID0ge1xuICAgICAgICAgICAgLi4udXNlckZyb21Qcm9maWxlLFxuICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgICBlbWFpbDogdXNlckZyb21Qcm9maWxlLmVtYWlsPy50b0xvd2VyQ2FzZSgpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgIGFjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAuLi50b2tlbnMsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLmlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHByb3ZpZGVyLnR5cGUsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IHVzZXJGcm9tUHJvZmlsZS5pZCA/PyBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlIGVpdGhlciB0aGVyZSB3YXMgYSBwcm9ibGVtIHdpdGggdGhlIHByb3ZpZGVyXG4gICAgICAgIC8vIHJlc3BvbnNlICpvciogdGhlIHVzZXIgY2FuY2VsbGVkIHRoZSBhY3Rpb24gd2l0aCB0aGUgcHJvdmlkZXIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIHdlIGNhbid0IHRlbGwgd2hpY2ggLSBhdCBsZWFzdCBub3QgaW4gYSB3YXkgdGhhdCB3b3JrcyBmb3JcbiAgICAgICAgLy8gYWxsIHByb3ZpZGVycywgc28gd2UgcmV0dXJuIGFuIGVtcHR5IG9iamVjdDsgdGhlIHVzZXIgc2hvdWxkIHRoZW4gYmVcbiAgICAgICAgLy8gcmVkaXJlY3RlZCBiYWNrIHRvIHRoZSBzaWduIHVwIHBhZ2UuIFdlIGxvZyB0aGUgZXJyb3IgdG8gaGVscCBkZXZlbG9wZXJzXG4gICAgICAgIC8vIHdobyBtaWdodCBiZSB0cnlpbmcgdG8gZGVidWcgdGhpcyB3aGVuIGNvbmZpZ3VyaW5nIGEgbmV3IHByb3ZpZGVyLlxuICAgICAgICBsb2dnZXIuZGVidWcoXCJnZXRQcm9maWxlIGVycm9yIGRldGFpbHNcIiwgT0F1dGhQcm9maWxlKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKG5ldyBPQXV0aFByb2ZpbGVQYXJzZUVycm9yKGUsIHsgcHJvdmlkZXI6IHByb3ZpZGVyLmlkIH0pKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/callback.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/oauth/checks.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nonce: () => (/* binding */ nonce),\n/* harmony export */   pkce: () => (/* binding */ pkce),\n/* harmony export */   state: () => (/* binding */ state),\n/* harmony export */   webauthnChallenge: () => (/* binding */ webauthnChallenge)\n/* harmony export */ });\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! oauth4webapi */ \"(action-browser)/./node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _jwt_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../jwt.js */ \"(action-browser)/./node_modules/@auth/core/jwt.js\");\n\n\n// NOTE: We use the default JWT methods here because they encrypt/decrypt the payload, not just sign it.\n\nconst COOKIE_TTL = 60 * 15; // 15 minutes\n/** Returns a cookie with a JWT encrypted payload. */\nasync function sealCookie(name, payload, options) {\n    const { cookies, logger } = options;\n    const cookie = cookies[name];\n    const expires = new Date();\n    expires.setTime(expires.getTime() + COOKIE_TTL * 1000);\n    logger.debug(`CREATE_${name.toUpperCase()}`, {\n        name: cookie.name,\n        payload,\n        COOKIE_TTL,\n        expires,\n    });\n    const encoded = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.encode)({\n        ...options.jwt,\n        maxAge: COOKIE_TTL,\n        token: { value: payload },\n        salt: cookie.name,\n    });\n    const cookieOptions = { ...cookie.options, expires };\n    return { name: cookie.name, value: encoded, options: cookieOptions };\n}\nasync function parseCookie(name, value, options) {\n    try {\n        const { logger, cookies, jwt } = options;\n        logger.debug(`PARSE_${name.toUpperCase()}`, { cookie: value });\n        if (!value)\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(`${name} cookie was missing`);\n        const parsed = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.decode)({\n            ...jwt,\n            token: value,\n            salt: cookies[name].name,\n        });\n        if (parsed?.value)\n            return parsed.value;\n        throw new Error(\"Invalid cookie\");\n    }\n    catch (error) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(`${name} value could not be parsed`, {\n            cause: error,\n        });\n    }\n}\nfunction clearCookie(name, options, resCookies) {\n    const { logger, cookies } = options;\n    const cookie = cookies[name];\n    logger.debug(`CLEAR_${name.toUpperCase()}`, { cookie });\n    resCookies.push({\n        name: cookie.name,\n        value: \"\",\n        options: { ...cookies[name].options, maxAge: 0 },\n    });\n}\nfunction useCookie(check, name) {\n    return async function (cookies, resCookies, options) {\n        const { provider, logger } = options;\n        if (!provider?.checks?.includes(check))\n            return;\n        const cookieValue = cookies?.[options.cookies[name].name];\n        logger.debug(`USE_${name.toUpperCase()}`, { value: cookieValue });\n        const parsed = await parseCookie(name, cookieValue, options);\n        clearCookie(name, options, resCookies);\n        return parsed;\n    };\n}\n/**\n * @see https://www.rfc-editor.org/rfc/rfc7636\n * @see https://danielfett.de/2020/05/16/pkce-vs-nonce-equivalent-or-not/#pkce\n */\nconst pkce = {\n    /** Creates a PKCE code challenge and verifier pair. The verifier in stored in the cookie. */\n    async create(options) {\n        const code_verifier = oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.generateRandomCodeVerifier();\n        const value = await oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.calculatePKCECodeChallenge(code_verifier);\n        const cookie = await sealCookie(\"pkceCodeVerifier\", code_verifier, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns code_verifier if the provider is configured to use PKCE,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the code_verifier is missing or invalid.\n     */\n    use: useCookie(\"pkce\", \"pkceCodeVerifier\"),\n};\nconst STATE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nconst encodedStateSalt = \"encodedState\";\n/**\n * @see https://www.rfc-editor.org/rfc/rfc6749#section-10.12\n * @see https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1\n */\nconst state = {\n    /** Creates a state cookie with an optionally encoded body. */\n    async create(options, origin) {\n        const { provider } = options;\n        if (!provider.checks.includes(\"state\")) {\n            if (origin) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(\"State data was provided but the provider is not configured to use state\");\n            }\n            return;\n        }\n        // IDEA: Allow the user to pass data to be stored in the state\n        const payload = {\n            origin,\n            random: oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.generateRandomState(),\n        };\n        const value = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.encode)({\n            secret: options.jwt.secret,\n            token: payload,\n            salt: encodedStateSalt,\n            maxAge: STATE_MAX_AGE,\n        });\n        const cookie = await sealCookie(\"state\", value, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns state if the provider is configured to use state,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the state is missing or invalid.\n     */\n    use: useCookie(\"state\", \"state\"),\n    /** Decodes the state. If it could not be decoded, it throws an error. */\n    async decode(state, options) {\n        try {\n            options.logger.debug(\"DECODE_STATE\", { state });\n            const payload = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.decode)({\n                secret: options.jwt.secret,\n                token: state,\n                salt: encodedStateSalt,\n            });\n            if (payload)\n                return payload;\n            throw new Error(\"Invalid state\");\n        }\n        catch (error) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(\"State could not be decoded\", { cause: error });\n        }\n    },\n};\nconst nonce = {\n    async create(options) {\n        if (!options.provider.checks.includes(\"nonce\"))\n            return;\n        const value = oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.generateRandomNonce();\n        const cookie = await sealCookie(\"nonce\", value, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns nonce if the provider is configured to use nonce,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the nonce is missing or invalid.\n     * @see https://openid.net/specs/openid-connect-core-1_0.html#NonceNotes\n     * @see https://danielfett.de/2020/05/16/pkce-vs-nonce-equivalent-or-not/#nonce\n     */\n    use: useCookie(\"nonce\", \"nonce\"),\n};\nconst WEBAUTHN_CHALLENGE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nconst webauthnChallengeSalt = \"encodedWebauthnChallenge\";\nconst webauthnChallenge = {\n    async create(options, challenge, registerData) {\n        return {\n            cookie: await sealCookie(\"webauthnChallenge\", await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.encode)({\n                secret: options.jwt.secret,\n                token: { challenge, registerData },\n                salt: webauthnChallengeSalt,\n                maxAge: WEBAUTHN_CHALLENGE_MAX_AGE,\n            }), options),\n        };\n    },\n    /** Returns WebAuthn challenge if present. */\n    async use(options, cookies, resCookies) {\n        const cookieValue = cookies?.[options.cookies.webauthnChallenge.name];\n        const parsed = await parseCookie(\"webauthnChallenge\", cookieValue, options);\n        const payload = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.decode)({\n            secret: options.jwt.secret,\n            token: parsed,\n            salt: webauthnChallengeSalt,\n        });\n        // Clear the WebAuthn challenge cookie after use\n        clearCookie(\"webauthnChallenge\", options, resCookies);\n        if (!payload)\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(\"WebAuthn challenge was missing\");\n        return payload;\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL2NhbGxiYWNrL29hdXRoL2NoZWNrcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtDO0FBQ21CO0FBQ3JEO0FBQ29EO0FBQ3BELDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG1CQUFtQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCwwQkFBMEIsK0NBQU07QUFDaEM7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQSxLQUFLO0FBQ0wsNEJBQTRCO0FBQzVCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUJBQXVCO0FBQ3ZDLDhCQUE4QixtQkFBbUIsS0FBSyxlQUFlO0FBQ3JFO0FBQ0Esc0JBQXNCLG9EQUFZLElBQUksTUFBTTtBQUM1Qyw2QkFBNkIsK0NBQU07QUFDbkM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQVksSUFBSSxNQUFNO0FBQ3hDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCO0FBQ0EsMEJBQTBCLG1CQUFtQixLQUFLLFFBQVE7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFDQUFxQztBQUN4RCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1CQUFtQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbUJBQW1CLEtBQUssb0JBQW9CO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLDhCQUE4QixvRUFBNEI7QUFDMUQsNEJBQTRCLG9FQUE0QjtBQUN4RDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGdCQUFnQixXQUFXO0FBQzNCO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQVk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZEQUFxQjtBQUN6QztBQUNBLDRCQUE0QiwrQ0FBTTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELE9BQU87QUFDMUQsa0NBQWtDLCtDQUFNO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9EQUFZLGlDQUFpQyxjQUFjO0FBQ2pGO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkRBQXFCO0FBQzNDO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDTztBQUNQO0FBQ0E7QUFDQSxnRUFBZ0UsK0NBQU07QUFDdEU7QUFDQSx5QkFBeUIseUJBQXlCO0FBQ2xEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQU07QUFDcEM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvREFBWTtBQUNsQztBQUNBLEtBQUs7QUFDTCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXGFjdGlvbnNcXGNhbGxiYWNrXFxvYXV0aFxcY2hlY2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG8gZnJvbSBcIm9hdXRoNHdlYmFwaVwiO1xuaW1wb3J0IHsgSW52YWxpZENoZWNrIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2Vycm9ycy5qc1wiO1xuLy8gTk9URTogV2UgdXNlIHRoZSBkZWZhdWx0IEpXVCBtZXRob2RzIGhlcmUgYmVjYXVzZSB0aGV5IGVuY3J5cHQvZGVjcnlwdCB0aGUgcGF5bG9hZCwgbm90IGp1c3Qgc2lnbiBpdC5cbmltcG9ydCB7IGRlY29kZSwgZW5jb2RlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2p3dC5qc1wiO1xuY29uc3QgQ09PS0lFX1RUTCA9IDYwICogMTU7IC8vIDE1IG1pbnV0ZXNcbi8qKiBSZXR1cm5zIGEgY29va2llIHdpdGggYSBKV1QgZW5jcnlwdGVkIHBheWxvYWQuICovXG5hc3luYyBmdW5jdGlvbiBzZWFsQ29va2llKG5hbWUsIHBheWxvYWQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGNvb2tpZXMsIGxvZ2dlciB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBjb29raWUgPSBjb29raWVzW25hbWVdO1xuICAgIGNvbnN0IGV4cGlyZXMgPSBuZXcgRGF0ZSgpO1xuICAgIGV4cGlyZXMuc2V0VGltZShleHBpcmVzLmdldFRpbWUoKSArIENPT0tJRV9UVEwgKiAxMDAwKTtcbiAgICBsb2dnZXIuZGVidWcoYENSRUFURV8ke25hbWUudG9VcHBlckNhc2UoKX1gLCB7XG4gICAgICAgIG5hbWU6IGNvb2tpZS5uYW1lLFxuICAgICAgICBwYXlsb2FkLFxuICAgICAgICBDT09LSUVfVFRMLFxuICAgICAgICBleHBpcmVzLFxuICAgIH0pO1xuICAgIGNvbnN0IGVuY29kZWQgPSBhd2FpdCBlbmNvZGUoe1xuICAgICAgICAuLi5vcHRpb25zLmp3dCxcbiAgICAgICAgbWF4QWdlOiBDT09LSUVfVFRMLFxuICAgICAgICB0b2tlbjogeyB2YWx1ZTogcGF5bG9hZCB9LFxuICAgICAgICBzYWx0OiBjb29raWUubmFtZSxcbiAgICB9KTtcbiAgICBjb25zdCBjb29raWVPcHRpb25zID0geyAuLi5jb29raWUub3B0aW9ucywgZXhwaXJlcyB9O1xuICAgIHJldHVybiB7IG5hbWU6IGNvb2tpZS5uYW1lLCB2YWx1ZTogZW5jb2RlZCwgb3B0aW9uczogY29va2llT3B0aW9ucyB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcGFyc2VDb29raWUobmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGxvZ2dlciwgY29va2llcywgand0IH0gPSBvcHRpb25zO1xuICAgICAgICBsb2dnZXIuZGVidWcoYFBBUlNFXyR7bmFtZS50b1VwcGVyQ2FzZSgpfWAsIHsgY29va2llOiB2YWx1ZSB9KTtcbiAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQ2hlY2soYCR7bmFtZX0gY29va2llIHdhcyBtaXNzaW5nYCk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IGRlY29kZSh7XG4gICAgICAgICAgICAuLi5qd3QsXG4gICAgICAgICAgICB0b2tlbjogdmFsdWUsXG4gICAgICAgICAgICBzYWx0OiBjb29raWVzW25hbWVdLm5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocGFyc2VkPy52YWx1ZSlcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQudmFsdWU7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29va2llXCIpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRDaGVjayhgJHtuYW1lfSB2YWx1ZSBjb3VsZCBub3QgYmUgcGFyc2VkYCwge1xuICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbGVhckNvb2tpZShuYW1lLCBvcHRpb25zLCByZXNDb29raWVzKSB7XG4gICAgY29uc3QgeyBsb2dnZXIsIGNvb2tpZXMgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgY29va2llID0gY29va2llc1tuYW1lXTtcbiAgICBsb2dnZXIuZGVidWcoYENMRUFSXyR7bmFtZS50b1VwcGVyQ2FzZSgpfWAsIHsgY29va2llIH0pO1xuICAgIHJlc0Nvb2tpZXMucHVzaCh7XG4gICAgICAgIG5hbWU6IGNvb2tpZS5uYW1lLFxuICAgICAgICB2YWx1ZTogXCJcIixcbiAgICAgICAgb3B0aW9uczogeyAuLi5jb29raWVzW25hbWVdLm9wdGlvbnMsIG1heEFnZTogMCB9LFxuICAgIH0pO1xufVxuZnVuY3Rpb24gdXNlQ29va2llKGNoZWNrLCBuYW1lKSB7XG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIChjb29raWVzLCByZXNDb29raWVzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXIsIGxvZ2dlciB9ID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCFwcm92aWRlcj8uY2hlY2tzPy5pbmNsdWRlcyhjaGVjaykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNvb2tpZVZhbHVlID0gY29va2llcz8uW29wdGlvbnMuY29va2llc1tuYW1lXS5uYW1lXTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBVU0VfJHtuYW1lLnRvVXBwZXJDYXNlKCl9YCwgeyB2YWx1ZTogY29va2llVmFsdWUgfSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHBhcnNlQ29va2llKG5hbWUsIGNvb2tpZVZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgY2xlYXJDb29raWUobmFtZSwgb3B0aW9ucywgcmVzQ29va2llcyk7XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfTtcbn1cbi8qKlxuICogQHNlZSBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNzYzNlxuICogQHNlZSBodHRwczovL2RhbmllbGZldHQuZGUvMjAyMC8wNS8xNi9wa2NlLXZzLW5vbmNlLWVxdWl2YWxlbnQtb3Itbm90LyNwa2NlXG4gKi9cbmV4cG9ydCBjb25zdCBwa2NlID0ge1xuICAgIC8qKiBDcmVhdGVzIGEgUEtDRSBjb2RlIGNoYWxsZW5nZSBhbmQgdmVyaWZpZXIgcGFpci4gVGhlIHZlcmlmaWVyIGluIHN0b3JlZCBpbiB0aGUgY29va2llLiAqL1xuICAgIGFzeW5jIGNyZWF0ZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvZGVfdmVyaWZpZXIgPSBvLmdlbmVyYXRlUmFuZG9tQ29kZVZlcmlmaWVyKCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgby5jYWxjdWxhdGVQS0NFQ29kZUNoYWxsZW5nZShjb2RlX3ZlcmlmaWVyKTtcbiAgICAgICAgY29uc3QgY29va2llID0gYXdhaXQgc2VhbENvb2tpZShcInBrY2VDb2RlVmVyaWZpZXJcIiwgY29kZV92ZXJpZmllciwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB7IGNvb2tpZSwgdmFsdWUgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY29kZV92ZXJpZmllciBpZiB0aGUgcHJvdmlkZXIgaXMgY29uZmlndXJlZCB0byB1c2UgUEtDRSxcbiAgICAgKiBhbmQgY2xlYXJzIHRoZSBjb250YWluZXIgY29va2llIGFmdGVyd2FyZHMuXG4gICAgICogQW4gZXJyb3IgaXMgdGhyb3duIGlmIHRoZSBjb2RlX3ZlcmlmaWVyIGlzIG1pc3Npbmcgb3IgaW52YWxpZC5cbiAgICAgKi9cbiAgICB1c2U6IHVzZUNvb2tpZShcInBrY2VcIiwgXCJwa2NlQ29kZVZlcmlmaWVyXCIpLFxufTtcbmNvbnN0IFNUQVRFX01BWF9BR0UgPSA2MCAqIDE1OyAvLyAxNSBtaW51dGVzIGluIHNlY29uZHNcbmNvbnN0IGVuY29kZWRTdGF0ZVNhbHQgPSBcImVuY29kZWRTdGF0ZVwiO1xuLyoqXG4gKiBAc2VlIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM2NzQ5I3NlY3Rpb24tMTAuMTJcbiAqIEBzZWUgaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzY3NDkjc2VjdGlvbi00LjEuMVxuICovXG5leHBvcnQgY29uc3Qgc3RhdGUgPSB7XG4gICAgLyoqIENyZWF0ZXMgYSBzdGF0ZSBjb29raWUgd2l0aCBhbiBvcHRpb25hbGx5IGVuY29kZWQgYm9keS4gKi9cbiAgICBhc3luYyBjcmVhdGUob3B0aW9ucywgb3JpZ2luKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXIgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICghcHJvdmlkZXIuY2hlY2tzLmluY2x1ZGVzKFwic3RhdGVcIikpIHtcbiAgICAgICAgICAgIGlmIChvcmlnaW4pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZENoZWNrKFwiU3RhdGUgZGF0YSB3YXMgcHJvdmlkZWQgYnV0IHRoZSBwcm92aWRlciBpcyBub3QgY29uZmlndXJlZCB0byB1c2Ugc3RhdGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSURFQTogQWxsb3cgdGhlIHVzZXIgdG8gcGFzcyBkYXRhIHRvIGJlIHN0b3JlZCBpbiB0aGUgc3RhdGVcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgIHJhbmRvbTogby5nZW5lcmF0ZVJhbmRvbVN0YXRlKCksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgZW5jb2RlKHtcbiAgICAgICAgICAgIHNlY3JldDogb3B0aW9ucy5qd3Quc2VjcmV0LFxuICAgICAgICAgICAgdG9rZW46IHBheWxvYWQsXG4gICAgICAgICAgICBzYWx0OiBlbmNvZGVkU3RhdGVTYWx0LFxuICAgICAgICAgICAgbWF4QWdlOiBTVEFURV9NQVhfQUdFLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29va2llID0gYXdhaXQgc2VhbENvb2tpZShcInN0YXRlXCIsIHZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHsgY29va2llLCB2YWx1ZSB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBzdGF0ZSBpZiB0aGUgcHJvdmlkZXIgaXMgY29uZmlndXJlZCB0byB1c2Ugc3RhdGUsXG4gICAgICogYW5kIGNsZWFycyB0aGUgY29udGFpbmVyIGNvb2tpZSBhZnRlcndhcmRzLlxuICAgICAqIEFuIGVycm9yIGlzIHRocm93biBpZiB0aGUgc3RhdGUgaXMgbWlzc2luZyBvciBpbnZhbGlkLlxuICAgICAqL1xuICAgIHVzZTogdXNlQ29va2llKFwic3RhdGVcIiwgXCJzdGF0ZVwiKSxcbiAgICAvKiogRGVjb2RlcyB0aGUgc3RhdGUuIElmIGl0IGNvdWxkIG5vdCBiZSBkZWNvZGVkLCBpdCB0aHJvd3MgYW4gZXJyb3IuICovXG4gICAgYXN5bmMgZGVjb2RlKHN0YXRlLCBvcHRpb25zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvcHRpb25zLmxvZ2dlci5kZWJ1ZyhcIkRFQ09ERV9TVEFURVwiLCB7IHN0YXRlIH0pO1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGRlY29kZSh7XG4gICAgICAgICAgICAgICAgc2VjcmV0OiBvcHRpb25zLmp3dC5zZWNyZXQsXG4gICAgICAgICAgICAgICAgdG9rZW46IHN0YXRlLFxuICAgICAgICAgICAgICAgIHNhbHQ6IGVuY29kZWRTdGF0ZVNhbHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXlsb2FkKVxuICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQ2hlY2soXCJTdGF0ZSBjb3VsZCBub3QgYmUgZGVjb2RlZFwiLCB7IGNhdXNlOiBlcnJvciB9KTtcbiAgICAgICAgfVxuICAgIH0sXG59O1xuZXhwb3J0IGNvbnN0IG5vbmNlID0ge1xuICAgIGFzeW5jIGNyZWF0ZShvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5wcm92aWRlci5jaGVja3MuaW5jbHVkZXMoXCJub25jZVwiKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBvLmdlbmVyYXRlUmFuZG9tTm9uY2UoKTtcbiAgICAgICAgY29uc3QgY29va2llID0gYXdhaXQgc2VhbENvb2tpZShcIm5vbmNlXCIsIHZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHsgY29va2llLCB2YWx1ZSB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBub25jZSBpZiB0aGUgcHJvdmlkZXIgaXMgY29uZmlndXJlZCB0byB1c2Ugbm9uY2UsXG4gICAgICogYW5kIGNsZWFycyB0aGUgY29udGFpbmVyIGNvb2tpZSBhZnRlcndhcmRzLlxuICAgICAqIEFuIGVycm9yIGlzIHRocm93biBpZiB0aGUgbm9uY2UgaXMgbWlzc2luZyBvciBpbnZhbGlkLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9vcGVuaWQubmV0L3NwZWNzL29wZW5pZC1jb25uZWN0LWNvcmUtMV8wLmh0bWwjTm9uY2VOb3Rlc1xuICAgICAqIEBzZWUgaHR0cHM6Ly9kYW5pZWxmZXR0LmRlLzIwMjAvMDUvMTYvcGtjZS12cy1ub25jZS1lcXVpdmFsZW50LW9yLW5vdC8jbm9uY2VcbiAgICAgKi9cbiAgICB1c2U6IHVzZUNvb2tpZShcIm5vbmNlXCIsIFwibm9uY2VcIiksXG59O1xuY29uc3QgV0VCQVVUSE5fQ0hBTExFTkdFX01BWF9BR0UgPSA2MCAqIDE1OyAvLyAxNSBtaW51dGVzIGluIHNlY29uZHNcbmNvbnN0IHdlYmF1dGhuQ2hhbGxlbmdlU2FsdCA9IFwiZW5jb2RlZFdlYmF1dGhuQ2hhbGxlbmdlXCI7XG5leHBvcnQgY29uc3Qgd2ViYXV0aG5DaGFsbGVuZ2UgPSB7XG4gICAgYXN5bmMgY3JlYXRlKG9wdGlvbnMsIGNoYWxsZW5nZSwgcmVnaXN0ZXJEYXRhKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb29raWU6IGF3YWl0IHNlYWxDb29raWUoXCJ3ZWJhdXRobkNoYWxsZW5nZVwiLCBhd2FpdCBlbmNvZGUoe1xuICAgICAgICAgICAgICAgIHNlY3JldDogb3B0aW9ucy5qd3Quc2VjcmV0LFxuICAgICAgICAgICAgICAgIHRva2VuOiB7IGNoYWxsZW5nZSwgcmVnaXN0ZXJEYXRhIH0sXG4gICAgICAgICAgICAgICAgc2FsdDogd2ViYXV0aG5DaGFsbGVuZ2VTYWx0LFxuICAgICAgICAgICAgICAgIG1heEFnZTogV0VCQVVUSE5fQ0hBTExFTkdFX01BWF9BR0UsXG4gICAgICAgICAgICB9KSwgb3B0aW9ucyksXG4gICAgICAgIH07XG4gICAgfSxcbiAgICAvKiogUmV0dXJucyBXZWJBdXRobiBjaGFsbGVuZ2UgaWYgcHJlc2VudC4gKi9cbiAgICBhc3luYyB1c2Uob3B0aW9ucywgY29va2llcywgcmVzQ29va2llcykge1xuICAgICAgICBjb25zdCBjb29raWVWYWx1ZSA9IGNvb2tpZXM/LltvcHRpb25zLmNvb2tpZXMud2ViYXV0aG5DaGFsbGVuZ2UubmFtZV07XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHBhcnNlQ29va2llKFwid2ViYXV0aG5DaGFsbGVuZ2VcIiwgY29va2llVmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgZGVjb2RlKHtcbiAgICAgICAgICAgIHNlY3JldDogb3B0aW9ucy5qd3Quc2VjcmV0LFxuICAgICAgICAgICAgdG9rZW46IHBhcnNlZCxcbiAgICAgICAgICAgIHNhbHQ6IHdlYmF1dGhuQ2hhbGxlbmdlU2FsdCxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENsZWFyIHRoZSBXZWJBdXRobiBjaGFsbGVuZ2UgY29va2llIGFmdGVyIHVzZVxuICAgICAgICBjbGVhckNvb2tpZShcIndlYmF1dGhuQ2hhbGxlbmdlXCIsIG9wdGlvbnMsIHJlc0Nvb2tpZXMpO1xuICAgICAgICBpZiAoIXBheWxvYWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZENoZWNrKFwiV2ViQXV0aG4gY2hhbGxlbmdlIHdhcyBtaXNzaW5nXCIpO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9LFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/oauth/checks.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nonce: () => (/* binding */ nonce),\n/* harmony export */   pkce: () => (/* binding */ pkce),\n/* harmony export */   state: () => (/* binding */ state),\n/* harmony export */   webauthnChallenge: () => (/* binding */ webauthnChallenge)\n/* harmony export */ });\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! oauth4webapi */ \"(rsc)/./node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _jwt_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../jwt.js */ \"(rsc)/./node_modules/@auth/core/jwt.js\");\n\n\n// NOTE: We use the default JWT methods here because they encrypt/decrypt the payload, not just sign it.\n\nconst COOKIE_TTL = 60 * 15; // 15 minutes\n/** Returns a cookie with a JWT encrypted payload. */\nasync function sealCookie(name, payload, options) {\n    const { cookies, logger } = options;\n    const cookie = cookies[name];\n    const expires = new Date();\n    expires.setTime(expires.getTime() + COOKIE_TTL * 1000);\n    logger.debug(`CREATE_${name.toUpperCase()}`, {\n        name: cookie.name,\n        payload,\n        COOKIE_TTL,\n        expires,\n    });\n    const encoded = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.encode)({\n        ...options.jwt,\n        maxAge: COOKIE_TTL,\n        token: { value: payload },\n        salt: cookie.name,\n    });\n    const cookieOptions = { ...cookie.options, expires };\n    return { name: cookie.name, value: encoded, options: cookieOptions };\n}\nasync function parseCookie(name, value, options) {\n    try {\n        const { logger, cookies, jwt } = options;\n        logger.debug(`PARSE_${name.toUpperCase()}`, { cookie: value });\n        if (!value)\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(`${name} cookie was missing`);\n        const parsed = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.decode)({\n            ...jwt,\n            token: value,\n            salt: cookies[name].name,\n        });\n        if (parsed?.value)\n            return parsed.value;\n        throw new Error(\"Invalid cookie\");\n    }\n    catch (error) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(`${name} value could not be parsed`, {\n            cause: error,\n        });\n    }\n}\nfunction clearCookie(name, options, resCookies) {\n    const { logger, cookies } = options;\n    const cookie = cookies[name];\n    logger.debug(`CLEAR_${name.toUpperCase()}`, { cookie });\n    resCookies.push({\n        name: cookie.name,\n        value: \"\",\n        options: { ...cookies[name].options, maxAge: 0 },\n    });\n}\nfunction useCookie(check, name) {\n    return async function (cookies, resCookies, options) {\n        const { provider, logger } = options;\n        if (!provider?.checks?.includes(check))\n            return;\n        const cookieValue = cookies?.[options.cookies[name].name];\n        logger.debug(`USE_${name.toUpperCase()}`, { value: cookieValue });\n        const parsed = await parseCookie(name, cookieValue, options);\n        clearCookie(name, options, resCookies);\n        return parsed;\n    };\n}\n/**\n * @see https://www.rfc-editor.org/rfc/rfc7636\n * @see https://danielfett.de/2020/05/16/pkce-vs-nonce-equivalent-or-not/#pkce\n */\nconst pkce = {\n    /** Creates a PKCE code challenge and verifier pair. The verifier in stored in the cookie. */\n    async create(options) {\n        const code_verifier = oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.generateRandomCodeVerifier();\n        const value = await oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.calculatePKCECodeChallenge(code_verifier);\n        const cookie = await sealCookie(\"pkceCodeVerifier\", code_verifier, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns code_verifier if the provider is configured to use PKCE,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the code_verifier is missing or invalid.\n     */\n    use: useCookie(\"pkce\", \"pkceCodeVerifier\"),\n};\nconst STATE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nconst encodedStateSalt = \"encodedState\";\n/**\n * @see https://www.rfc-editor.org/rfc/rfc6749#section-10.12\n * @see https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1\n */\nconst state = {\n    /** Creates a state cookie with an optionally encoded body. */\n    async create(options, origin) {\n        const { provider } = options;\n        if (!provider.checks.includes(\"state\")) {\n            if (origin) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(\"State data was provided but the provider is not configured to use state\");\n            }\n            return;\n        }\n        // IDEA: Allow the user to pass data to be stored in the state\n        const payload = {\n            origin,\n            random: oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.generateRandomState(),\n        };\n        const value = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.encode)({\n            secret: options.jwt.secret,\n            token: payload,\n            salt: encodedStateSalt,\n            maxAge: STATE_MAX_AGE,\n        });\n        const cookie = await sealCookie(\"state\", value, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns state if the provider is configured to use state,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the state is missing or invalid.\n     */\n    use: useCookie(\"state\", \"state\"),\n    /** Decodes the state. If it could not be decoded, it throws an error. */\n    async decode(state, options) {\n        try {\n            options.logger.debug(\"DECODE_STATE\", { state });\n            const payload = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.decode)({\n                secret: options.jwt.secret,\n                token: state,\n                salt: encodedStateSalt,\n            });\n            if (payload)\n                return payload;\n            throw new Error(\"Invalid state\");\n        }\n        catch (error) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(\"State could not be decoded\", { cause: error });\n        }\n    },\n};\nconst nonce = {\n    async create(options) {\n        if (!options.provider.checks.includes(\"nonce\"))\n            return;\n        const value = oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.generateRandomNonce();\n        const cookie = await sealCookie(\"nonce\", value, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns nonce if the provider is configured to use nonce,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the nonce is missing or invalid.\n     * @see https://openid.net/specs/openid-connect-core-1_0.html#NonceNotes\n     * @see https://danielfett.de/2020/05/16/pkce-vs-nonce-equivalent-or-not/#nonce\n     */\n    use: useCookie(\"nonce\", \"nonce\"),\n};\nconst WEBAUTHN_CHALLENGE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nconst webauthnChallengeSalt = \"encodedWebauthnChallenge\";\nconst webauthnChallenge = {\n    async create(options, challenge, registerData) {\n        return {\n            cookie: await sealCookie(\"webauthnChallenge\", await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.encode)({\n                secret: options.jwt.secret,\n                token: { challenge, registerData },\n                salt: webauthnChallengeSalt,\n                maxAge: WEBAUTHN_CHALLENGE_MAX_AGE,\n            }), options),\n        };\n    },\n    /** Returns WebAuthn challenge if present. */\n    async use(options, cookies, resCookies) {\n        const cookieValue = cookies?.[options.cookies.webauthnChallenge.name];\n        const parsed = await parseCookie(\"webauthnChallenge\", cookieValue, options);\n        const payload = await (0,_jwt_js__WEBPACK_IMPORTED_MODULE_1__.decode)({\n            secret: options.jwt.secret,\n            token: parsed,\n            salt: webauthnChallengeSalt,\n        });\n        // Clear the WebAuthn challenge cookie after use\n        clearCookie(\"webauthnChallenge\", options, resCookies);\n        if (!payload)\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidCheck(\"WebAuthn challenge was missing\");\n        return payload;\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9jYWxsYmFjay9vYXV0aC9jaGVja3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFrQztBQUNtQjtBQUNyRDtBQUNvRDtBQUNwRCw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCLCtDQUFNO0FBQ2hDO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0EsS0FBSztBQUNMLDRCQUE0QjtBQUM1QixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVCQUF1QjtBQUN2Qyw4QkFBOEIsbUJBQW1CLEtBQUssZUFBZTtBQUNyRTtBQUNBLHNCQUFzQixvREFBWSxJQUFJLE1BQU07QUFDNUMsNkJBQTZCLCtDQUFNO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9EQUFZLElBQUksTUFBTTtBQUN4QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtCQUFrQjtBQUM5QjtBQUNBLDBCQUEwQixtQkFBbUIsS0FBSyxRQUFRO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxQ0FBcUM7QUFDeEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtQkFBbUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQixLQUFLLG9CQUFvQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSw4QkFBOEIsb0VBQTRCO0FBQzFELDRCQUE0QixvRUFBNEI7QUFDeEQ7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQjtBQUNBO0FBQ0EsMEJBQTBCLG9EQUFZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2REFBcUI7QUFDekM7QUFDQSw0QkFBNEIsK0NBQU07QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxPQUFPO0FBQzFELGtDQUFrQywrQ0FBTTtBQUN4QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvREFBWSxpQ0FBaUMsY0FBYztBQUNqRjtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZEQUFxQjtBQUMzQztBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ087QUFDUDtBQUNBO0FBQ0EsZ0VBQWdFLCtDQUFNO0FBQ3RFO0FBQ0EseUJBQXlCLHlCQUF5QjtBQUNsRDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFNO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0RBQVk7QUFDbEM7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxjYWxsYmFja1xcb2F1dGhcXGNoZWNrcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBvIGZyb20gXCJvYXV0aDR3ZWJhcGlcIjtcbmltcG9ydCB7IEludmFsaWRDaGVjayB9IGZyb20gXCIuLi8uLi8uLi8uLi9lcnJvcnMuanNcIjtcbi8vIE5PVEU6IFdlIHVzZSB0aGUgZGVmYXVsdCBKV1QgbWV0aG9kcyBoZXJlIGJlY2F1c2UgdGhleSBlbmNyeXB0L2RlY3J5cHQgdGhlIHBheWxvYWQsIG5vdCBqdXN0IHNpZ24gaXQuXG5pbXBvcnQgeyBkZWNvZGUsIGVuY29kZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9qd3QuanNcIjtcbmNvbnN0IENPT0tJRV9UVEwgPSA2MCAqIDE1OyAvLyAxNSBtaW51dGVzXG4vKiogUmV0dXJucyBhIGNvb2tpZSB3aXRoIGEgSldUIGVuY3J5cHRlZCBwYXlsb2FkLiAqL1xuYXN5bmMgZnVuY3Rpb24gc2VhbENvb2tpZShuYW1lLCBwYXlsb2FkLCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyBjb29raWVzLCBsb2dnZXIgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgY29va2llID0gY29va2llc1tuYW1lXTtcbiAgICBjb25zdCBleHBpcmVzID0gbmV3IERhdGUoKTtcbiAgICBleHBpcmVzLnNldFRpbWUoZXhwaXJlcy5nZXRUaW1lKCkgKyBDT09LSUVfVFRMICogMTAwMCk7XG4gICAgbG9nZ2VyLmRlYnVnKGBDUkVBVEVfJHtuYW1lLnRvVXBwZXJDYXNlKCl9YCwge1xuICAgICAgICBuYW1lOiBjb29raWUubmFtZSxcbiAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgQ09PS0lFX1RUTCxcbiAgICAgICAgZXhwaXJlcyxcbiAgICB9KTtcbiAgICBjb25zdCBlbmNvZGVkID0gYXdhaXQgZW5jb2RlKHtcbiAgICAgICAgLi4ub3B0aW9ucy5qd3QsXG4gICAgICAgIG1heEFnZTogQ09PS0lFX1RUTCxcbiAgICAgICAgdG9rZW46IHsgdmFsdWU6IHBheWxvYWQgfSxcbiAgICAgICAgc2FsdDogY29va2llLm5hbWUsXG4gICAgfSk7XG4gICAgY29uc3QgY29va2llT3B0aW9ucyA9IHsgLi4uY29va2llLm9wdGlvbnMsIGV4cGlyZXMgfTtcbiAgICByZXR1cm4geyBuYW1lOiBjb29raWUubmFtZSwgdmFsdWU6IGVuY29kZWQsIG9wdGlvbnM6IGNvb2tpZU9wdGlvbnMgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlQ29va2llKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBsb2dnZXIsIGNvb2tpZXMsIGp3dCB9ID0gb3B0aW9ucztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBQQVJTRV8ke25hbWUudG9VcHBlckNhc2UoKX1gLCB7IGNvb2tpZTogdmFsdWUgfSk7XG4gICAgICAgIGlmICghdmFsdWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZENoZWNrKGAke25hbWV9IGNvb2tpZSB3YXMgbWlzc2luZ2ApO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBkZWNvZGUoe1xuICAgICAgICAgICAgLi4uand0LFxuICAgICAgICAgICAgdG9rZW46IHZhbHVlLFxuICAgICAgICAgICAgc2FsdDogY29va2llc1tuYW1lXS5uYW1lLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHBhcnNlZD8udmFsdWUpXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkLnZhbHVlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvb2tpZVwiKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkQ2hlY2soYCR7bmFtZX0gdmFsdWUgY291bGQgbm90IGJlIHBhcnNlZGAsIHtcbiAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJDb29raWUobmFtZSwgb3B0aW9ucywgcmVzQ29va2llcykge1xuICAgIGNvbnN0IHsgbG9nZ2VyLCBjb29raWVzIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGNvb2tpZSA9IGNvb2tpZXNbbmFtZV07XG4gICAgbG9nZ2VyLmRlYnVnKGBDTEVBUl8ke25hbWUudG9VcHBlckNhc2UoKX1gLCB7IGNvb2tpZSB9KTtcbiAgICByZXNDb29raWVzLnB1c2goe1xuICAgICAgICBuYW1lOiBjb29raWUubmFtZSxcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgIG9wdGlvbnM6IHsgLi4uY29va2llc1tuYW1lXS5vcHRpb25zLCBtYXhBZ2U6IDAgfSxcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHVzZUNvb2tpZShjaGVjaywgbmFtZSkge1xuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiAoY29va2llcywgcmVzQ29va2llcywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHByb3ZpZGVyLCBsb2dnZXIgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICghcHJvdmlkZXI/LmNoZWNrcz8uaW5jbHVkZXMoY2hlY2spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjb29raWVWYWx1ZSA9IGNvb2tpZXM/LltvcHRpb25zLmNvb2tpZXNbbmFtZV0ubmFtZV07XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVVNFXyR7bmFtZS50b1VwcGVyQ2FzZSgpfWAsIHsgdmFsdWU6IGNvb2tpZVZhbHVlIH0pO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZUNvb2tpZShuYW1lLCBjb29raWVWYWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgIGNsZWFyQ29va2llKG5hbWUsIG9wdGlvbnMsIHJlc0Nvb2tpZXMpO1xuICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH07XG59XG4vKipcbiAqIEBzZWUgaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzc2MzZcbiAqIEBzZWUgaHR0cHM6Ly9kYW5pZWxmZXR0LmRlLzIwMjAvMDUvMTYvcGtjZS12cy1ub25jZS1lcXVpdmFsZW50LW9yLW5vdC8jcGtjZVxuICovXG5leHBvcnQgY29uc3QgcGtjZSA9IHtcbiAgICAvKiogQ3JlYXRlcyBhIFBLQ0UgY29kZSBjaGFsbGVuZ2UgYW5kIHZlcmlmaWVyIHBhaXIuIFRoZSB2ZXJpZmllciBpbiBzdG9yZWQgaW4gdGhlIGNvb2tpZS4gKi9cbiAgICBhc3luYyBjcmVhdGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb2RlX3ZlcmlmaWVyID0gby5nZW5lcmF0ZVJhbmRvbUNvZGVWZXJpZmllcigpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IG8uY2FsY3VsYXRlUEtDRUNvZGVDaGFsbGVuZ2UoY29kZV92ZXJpZmllcik7XG4gICAgICAgIGNvbnN0IGNvb2tpZSA9IGF3YWl0IHNlYWxDb29raWUoXCJwa2NlQ29kZVZlcmlmaWVyXCIsIGNvZGVfdmVyaWZpZXIsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4geyBjb29raWUsIHZhbHVlIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGNvZGVfdmVyaWZpZXIgaWYgdGhlIHByb3ZpZGVyIGlzIGNvbmZpZ3VyZWQgdG8gdXNlIFBLQ0UsXG4gICAgICogYW5kIGNsZWFycyB0aGUgY29udGFpbmVyIGNvb2tpZSBhZnRlcndhcmRzLlxuICAgICAqIEFuIGVycm9yIGlzIHRocm93biBpZiB0aGUgY29kZV92ZXJpZmllciBpcyBtaXNzaW5nIG9yIGludmFsaWQuXG4gICAgICovXG4gICAgdXNlOiB1c2VDb29raWUoXCJwa2NlXCIsIFwicGtjZUNvZGVWZXJpZmllclwiKSxcbn07XG5jb25zdCBTVEFURV9NQVhfQUdFID0gNjAgKiAxNTsgLy8gMTUgbWludXRlcyBpbiBzZWNvbmRzXG5jb25zdCBlbmNvZGVkU3RhdGVTYWx0ID0gXCJlbmNvZGVkU3RhdGVcIjtcbi8qKlxuICogQHNlZSBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNjc0OSNzZWN0aW9uLTEwLjEyXG4gKiBAc2VlIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM2NzQ5I3NlY3Rpb24tNC4xLjFcbiAqL1xuZXhwb3J0IGNvbnN0IHN0YXRlID0ge1xuICAgIC8qKiBDcmVhdGVzIGEgc3RhdGUgY29va2llIHdpdGggYW4gb3B0aW9uYWxseSBlbmNvZGVkIGJvZHkuICovXG4gICAgYXN5bmMgY3JlYXRlKG9wdGlvbnMsIG9yaWdpbikge1xuICAgICAgICBjb25zdCB7IHByb3ZpZGVyIH0gPSBvcHRpb25zO1xuICAgICAgICBpZiAoIXByb3ZpZGVyLmNoZWNrcy5pbmNsdWRlcyhcInN0YXRlXCIpKSB7XG4gICAgICAgICAgICBpZiAob3JpZ2luKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRDaGVjayhcIlN0YXRlIGRhdGEgd2FzIHByb3ZpZGVkIGJ1dCB0aGUgcHJvdmlkZXIgaXMgbm90IGNvbmZpZ3VyZWQgdG8gdXNlIHN0YXRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIElERUE6IEFsbG93IHRoZSB1c2VyIHRvIHBhc3MgZGF0YSB0byBiZSBzdG9yZWQgaW4gdGhlIHN0YXRlXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgICByYW5kb206IG8uZ2VuZXJhdGVSYW5kb21TdGF0ZSgpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IGVuY29kZSh7XG4gICAgICAgICAgICBzZWNyZXQ6IG9wdGlvbnMuand0LnNlY3JldCxcbiAgICAgICAgICAgIHRva2VuOiBwYXlsb2FkLFxuICAgICAgICAgICAgc2FsdDogZW5jb2RlZFN0YXRlU2FsdCxcbiAgICAgICAgICAgIG1heEFnZTogU1RBVEVfTUFYX0FHRSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvb2tpZSA9IGF3YWl0IHNlYWxDb29raWUoXCJzdGF0ZVwiLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB7IGNvb2tpZSwgdmFsdWUgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgc3RhdGUgaWYgdGhlIHByb3ZpZGVyIGlzIGNvbmZpZ3VyZWQgdG8gdXNlIHN0YXRlLFxuICAgICAqIGFuZCBjbGVhcnMgdGhlIGNvbnRhaW5lciBjb29raWUgYWZ0ZXJ3YXJkcy5cbiAgICAgKiBBbiBlcnJvciBpcyB0aHJvd24gaWYgdGhlIHN0YXRlIGlzIG1pc3Npbmcgb3IgaW52YWxpZC5cbiAgICAgKi9cbiAgICB1c2U6IHVzZUNvb2tpZShcInN0YXRlXCIsIFwic3RhdGVcIiksXG4gICAgLyoqIERlY29kZXMgdGhlIHN0YXRlLiBJZiBpdCBjb3VsZCBub3QgYmUgZGVjb2RlZCwgaXQgdGhyb3dzIGFuIGVycm9yLiAqL1xuICAgIGFzeW5jIGRlY29kZShzdGF0ZSwgb3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIuZGVidWcoXCJERUNPREVfU1RBVEVcIiwgeyBzdGF0ZSB9KTtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBkZWNvZGUoe1xuICAgICAgICAgICAgICAgIHNlY3JldDogb3B0aW9ucy5qd3Quc2VjcmV0LFxuICAgICAgICAgICAgICAgIHRva2VuOiBzdGF0ZSxcbiAgICAgICAgICAgICAgICBzYWx0OiBlbmNvZGVkU3RhdGVTYWx0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocGF5bG9hZClcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZENoZWNrKFwiU3RhdGUgY291bGQgbm90IGJlIGRlY29kZWRcIiwgeyBjYXVzZTogZXJyb3IgfSk7XG4gICAgICAgIH1cbiAgICB9LFxufTtcbmV4cG9ydCBjb25zdCBub25jZSA9IHtcbiAgICBhc3luYyBjcmVhdGUob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMucHJvdmlkZXIuY2hlY2tzLmluY2x1ZGVzKFwibm9uY2VcIikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHZhbHVlID0gby5nZW5lcmF0ZVJhbmRvbU5vbmNlKCk7XG4gICAgICAgIGNvbnN0IGNvb2tpZSA9IGF3YWl0IHNlYWxDb29raWUoXCJub25jZVwiLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB7IGNvb2tpZSwgdmFsdWUgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgbm9uY2UgaWYgdGhlIHByb3ZpZGVyIGlzIGNvbmZpZ3VyZWQgdG8gdXNlIG5vbmNlLFxuICAgICAqIGFuZCBjbGVhcnMgdGhlIGNvbnRhaW5lciBjb29raWUgYWZ0ZXJ3YXJkcy5cbiAgICAgKiBBbiBlcnJvciBpcyB0aHJvd24gaWYgdGhlIG5vbmNlIGlzIG1pc3Npbmcgb3IgaW52YWxpZC5cbiAgICAgKiBAc2VlIGh0dHBzOi8vb3BlbmlkLm5ldC9zcGVjcy9vcGVuaWQtY29ubmVjdC1jb3JlLTFfMC5odG1sI05vbmNlTm90ZXNcbiAgICAgKiBAc2VlIGh0dHBzOi8vZGFuaWVsZmV0dC5kZS8yMDIwLzA1LzE2L3BrY2UtdnMtbm9uY2UtZXF1aXZhbGVudC1vci1ub3QvI25vbmNlXG4gICAgICovXG4gICAgdXNlOiB1c2VDb29raWUoXCJub25jZVwiLCBcIm5vbmNlXCIpLFxufTtcbmNvbnN0IFdFQkFVVEhOX0NIQUxMRU5HRV9NQVhfQUdFID0gNjAgKiAxNTsgLy8gMTUgbWludXRlcyBpbiBzZWNvbmRzXG5jb25zdCB3ZWJhdXRobkNoYWxsZW5nZVNhbHQgPSBcImVuY29kZWRXZWJhdXRobkNoYWxsZW5nZVwiO1xuZXhwb3J0IGNvbnN0IHdlYmF1dGhuQ2hhbGxlbmdlID0ge1xuICAgIGFzeW5jIGNyZWF0ZShvcHRpb25zLCBjaGFsbGVuZ2UsIHJlZ2lzdGVyRGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29va2llOiBhd2FpdCBzZWFsQ29va2llKFwid2ViYXV0aG5DaGFsbGVuZ2VcIiwgYXdhaXQgZW5jb2RlKHtcbiAgICAgICAgICAgICAgICBzZWNyZXQ6IG9wdGlvbnMuand0LnNlY3JldCxcbiAgICAgICAgICAgICAgICB0b2tlbjogeyBjaGFsbGVuZ2UsIHJlZ2lzdGVyRGF0YSB9LFxuICAgICAgICAgICAgICAgIHNhbHQ6IHdlYmF1dGhuQ2hhbGxlbmdlU2FsdCxcbiAgICAgICAgICAgICAgICBtYXhBZ2U6IFdFQkFVVEhOX0NIQUxMRU5HRV9NQVhfQUdFLFxuICAgICAgICAgICAgfSksIG9wdGlvbnMpLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgLyoqIFJldHVybnMgV2ViQXV0aG4gY2hhbGxlbmdlIGlmIHByZXNlbnQuICovXG4gICAgYXN5bmMgdXNlKG9wdGlvbnMsIGNvb2tpZXMsIHJlc0Nvb2tpZXMpIHtcbiAgICAgICAgY29uc3QgY29va2llVmFsdWUgPSBjb29raWVzPy5bb3B0aW9ucy5jb29raWVzLndlYmF1dGhuQ2hhbGxlbmdlLm5hbWVdO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZUNvb2tpZShcIndlYmF1dGhuQ2hhbGxlbmdlXCIsIGNvb2tpZVZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGRlY29kZSh7XG4gICAgICAgICAgICBzZWNyZXQ6IG9wdGlvbnMuand0LnNlY3JldCxcbiAgICAgICAgICAgIHRva2VuOiBwYXJzZWQsXG4gICAgICAgICAgICBzYWx0OiB3ZWJhdXRobkNoYWxsZW5nZVNhbHQsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDbGVhciB0aGUgV2ViQXV0aG4gY2hhbGxlbmdlIGNvb2tpZSBhZnRlciB1c2VcbiAgICAgICAgY2xlYXJDb29raWUoXCJ3ZWJhdXRobkNoYWxsZW5nZVwiLCBvcHRpb25zLCByZXNDb29raWVzKTtcbiAgICAgICAgaWYgKCFwYXlsb2FkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRDaGVjayhcIldlYkF1dGhuIGNoYWxsZW5nZSB3YXMgbWlzc2luZ1wiKTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfSxcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCSRFToken: () => (/* binding */ createCSRFToken),\n/* harmony export */   validateCSRF: () => (/* binding */ validateCSRF)\n/* harmony export */ });\n/* harmony import */ var _utils_web_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/web.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/web.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n\n\n/**\n * Ensure CSRF Token cookie is set for any subsequent requests.\n * Used as part of the strategy for mitigation for CSRF tokens.\n *\n * Creates a cookie like 'next-auth.csrf-token' with the value 'token|hash',\n * where 'token' is the CSRF token and 'hash' is a hash made of the token and\n * the secret, and the two values are joined by a pipe '|'. By storing the\n * value and the hash of the value (with the secret used as a salt) we can\n * verify the cookie was set by the server and not by a malicious attacker.\n *\n * For more details, see the following OWASP links:\n * https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#double-submit-cookie\n * https://owasp.org/www-chapter-london/assets/slides/David_Johansson-Double_Defeat_of_Double-Submit_Cookie.pdf\n */\nasync function createCSRFToken({ options, cookieValue, isPost, bodyValue, }) {\n    if (cookieValue) {\n        const [csrfToken, csrfTokenHash] = cookieValue.split(\"|\");\n        const expectedCsrfTokenHash = await (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.createHash)(`${csrfToken}${options.secret}`);\n        if (csrfTokenHash === expectedCsrfTokenHash) {\n            // If hash matches then we trust the CSRF token value\n            // If this is a POST request and the CSRF Token in the POST request matches\n            // the cookie we have already verified is the one we have set, then the token is verified!\n            const csrfTokenVerified = isPost && csrfToken === bodyValue;\n            return { csrfTokenVerified, csrfToken };\n        }\n    }\n    // New CSRF token\n    const csrfToken = (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.randomString)(32);\n    const csrfTokenHash = await (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.createHash)(`${csrfToken}${options.secret}`);\n    const cookie = `${csrfToken}|${csrfTokenHash}`;\n    return { cookie, csrfToken };\n}\nfunction validateCSRF(action, verified) {\n    if (verified)\n        return;\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingCSRF(`CSRF token was missing during an action ${action}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL2NhbGxiYWNrL29hdXRoL2NzcmYtdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpRTtBQUNiO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxpQ0FBaUMsMENBQTBDO0FBQ2xGO0FBQ0E7QUFDQSw0Q0FBNEMseURBQVUsSUFBSSxVQUFVLEVBQUUsZUFBZTtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyREFBWTtBQUNsQyxnQ0FBZ0MseURBQVUsSUFBSSxVQUFVLEVBQUUsZUFBZTtBQUN6RSxzQkFBc0IsVUFBVSxHQUFHLGNBQWM7QUFDakQsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0EsY0FBYyxtREFBVyw0Q0FBNEMsT0FBTztBQUM1RSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXGFjdGlvbnNcXGNhbGxiYWNrXFxvYXV0aFxcY3NyZi10b2tlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYXNoLCByYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvd2ViLmpzXCI7XG5pbXBvcnQgeyBNaXNzaW5nQ1NSRiB9IGZyb20gXCIuLi8uLi8uLi8uLi9lcnJvcnMuanNcIjtcbi8qKlxuICogRW5zdXJlIENTUkYgVG9rZW4gY29va2llIGlzIHNldCBmb3IgYW55IHN1YnNlcXVlbnQgcmVxdWVzdHMuXG4gKiBVc2VkIGFzIHBhcnQgb2YgdGhlIHN0cmF0ZWd5IGZvciBtaXRpZ2F0aW9uIGZvciBDU1JGIHRva2Vucy5cbiAqXG4gKiBDcmVhdGVzIGEgY29va2llIGxpa2UgJ25leHQtYXV0aC5jc3JmLXRva2VuJyB3aXRoIHRoZSB2YWx1ZSAndG9rZW58aGFzaCcsXG4gKiB3aGVyZSAndG9rZW4nIGlzIHRoZSBDU1JGIHRva2VuIGFuZCAnaGFzaCcgaXMgYSBoYXNoIG1hZGUgb2YgdGhlIHRva2VuIGFuZFxuICogdGhlIHNlY3JldCwgYW5kIHRoZSB0d28gdmFsdWVzIGFyZSBqb2luZWQgYnkgYSBwaXBlICd8Jy4gQnkgc3RvcmluZyB0aGVcbiAqIHZhbHVlIGFuZCB0aGUgaGFzaCBvZiB0aGUgdmFsdWUgKHdpdGggdGhlIHNlY3JldCB1c2VkIGFzIGEgc2FsdCkgd2UgY2FuXG4gKiB2ZXJpZnkgdGhlIGNvb2tpZSB3YXMgc2V0IGJ5IHRoZSBzZXJ2ZXIgYW5kIG5vdCBieSBhIG1hbGljaW91cyBhdHRhY2tlci5cbiAqXG4gKiBGb3IgbW9yZSBkZXRhaWxzLCBzZWUgdGhlIGZvbGxvd2luZyBPV0FTUCBsaW5rczpcbiAqIGh0dHBzOi8vY2hlYXRzaGVldHNlcmllcy5vd2FzcC5vcmcvY2hlYXRzaGVldHMvQ3Jvc3MtU2l0ZV9SZXF1ZXN0X0ZvcmdlcnlfUHJldmVudGlvbl9DaGVhdF9TaGVldC5odG1sI2RvdWJsZS1zdWJtaXQtY29va2llXG4gKiBodHRwczovL293YXNwLm9yZy93d3ctY2hhcHRlci1sb25kb24vYXNzZXRzL3NsaWRlcy9EYXZpZF9Kb2hhbnNzb24tRG91YmxlX0RlZmVhdF9vZl9Eb3VibGUtU3VibWl0X0Nvb2tpZS5wZGZcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNTUkZUb2tlbih7IG9wdGlvbnMsIGNvb2tpZVZhbHVlLCBpc1Bvc3QsIGJvZHlWYWx1ZSwgfSkge1xuICAgIGlmIChjb29raWVWYWx1ZSkge1xuICAgICAgICBjb25zdCBbY3NyZlRva2VuLCBjc3JmVG9rZW5IYXNoXSA9IGNvb2tpZVZhbHVlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRDc3JmVG9rZW5IYXNoID0gYXdhaXQgY3JlYXRlSGFzaChgJHtjc3JmVG9rZW59JHtvcHRpb25zLnNlY3JldH1gKTtcbiAgICAgICAgaWYgKGNzcmZUb2tlbkhhc2ggPT09IGV4cGVjdGVkQ3NyZlRva2VuSGFzaCkge1xuICAgICAgICAgICAgLy8gSWYgaGFzaCBtYXRjaGVzIHRoZW4gd2UgdHJ1c3QgdGhlIENTUkYgdG9rZW4gdmFsdWVcbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBQT1NUIHJlcXVlc3QgYW5kIHRoZSBDU1JGIFRva2VuIGluIHRoZSBQT1NUIHJlcXVlc3QgbWF0Y2hlc1xuICAgICAgICAgICAgLy8gdGhlIGNvb2tpZSB3ZSBoYXZlIGFscmVhZHkgdmVyaWZpZWQgaXMgdGhlIG9uZSB3ZSBoYXZlIHNldCwgdGhlbiB0aGUgdG9rZW4gaXMgdmVyaWZpZWQhXG4gICAgICAgICAgICBjb25zdCBjc3JmVG9rZW5WZXJpZmllZCA9IGlzUG9zdCAmJiBjc3JmVG9rZW4gPT09IGJvZHlWYWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB7IGNzcmZUb2tlblZlcmlmaWVkLCBjc3JmVG9rZW4gfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBOZXcgQ1NSRiB0b2tlblxuICAgIGNvbnN0IGNzcmZUb2tlbiA9IHJhbmRvbVN0cmluZygzMik7XG4gICAgY29uc3QgY3NyZlRva2VuSGFzaCA9IGF3YWl0IGNyZWF0ZUhhc2goYCR7Y3NyZlRva2VufSR7b3B0aW9ucy5zZWNyZXR9YCk7XG4gICAgY29uc3QgY29va2llID0gYCR7Y3NyZlRva2VufXwke2NzcmZUb2tlbkhhc2h9YDtcbiAgICByZXR1cm4geyBjb29raWUsIGNzcmZUb2tlbiB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQ1NSRihhY3Rpb24sIHZlcmlmaWVkKSB7XG4gICAgaWYgKHZlcmlmaWVkKVxuICAgICAgICByZXR1cm47XG4gICAgdGhyb3cgbmV3IE1pc3NpbmdDU1JGKGBDU1JGIHRva2VuIHdhcyBtaXNzaW5nIGR1cmluZyBhbiBhY3Rpb24gJHthY3Rpb259YCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCSRFToken: () => (/* binding */ createCSRFToken),\n/* harmony export */   validateCSRF: () => (/* binding */ validateCSRF)\n/* harmony export */ });\n/* harmony import */ var _utils_web_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/web.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/web.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n\n\n/**\n * Ensure CSRF Token cookie is set for any subsequent requests.\n * Used as part of the strategy for mitigation for CSRF tokens.\n *\n * Creates a cookie like 'next-auth.csrf-token' with the value 'token|hash',\n * where 'token' is the CSRF token and 'hash' is a hash made of the token and\n * the secret, and the two values are joined by a pipe '|'. By storing the\n * value and the hash of the value (with the secret used as a salt) we can\n * verify the cookie was set by the server and not by a malicious attacker.\n *\n * For more details, see the following OWASP links:\n * https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#double-submit-cookie\n * https://owasp.org/www-chapter-london/assets/slides/David_Johansson-Double_Defeat_of_Double-Submit_Cookie.pdf\n */\nasync function createCSRFToken({ options, cookieValue, isPost, bodyValue, }) {\n    if (cookieValue) {\n        const [csrfToken, csrfTokenHash] = cookieValue.split(\"|\");\n        const expectedCsrfTokenHash = await (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.createHash)(`${csrfToken}${options.secret}`);\n        if (csrfTokenHash === expectedCsrfTokenHash) {\n            // If hash matches then we trust the CSRF token value\n            // If this is a POST request and the CSRF Token in the POST request matches\n            // the cookie we have already verified is the one we have set, then the token is verified!\n            const csrfTokenVerified = isPost && csrfToken === bodyValue;\n            return { csrfTokenVerified, csrfToken };\n        }\n    }\n    // New CSRF token\n    const csrfToken = (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.randomString)(32);\n    const csrfTokenHash = await (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.createHash)(`${csrfToken}${options.secret}`);\n    const cookie = `${csrfToken}|${csrfTokenHash}`;\n    return { cookie, csrfToken };\n}\nfunction validateCSRF(action, verified) {\n    if (verified)\n        return;\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingCSRF(`CSRF token was missing during an action ${action}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9jYWxsYmFjay9vYXV0aC9jc3JmLXRva2VuLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUU7QUFDYjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08saUNBQWlDLDBDQUEwQztBQUNsRjtBQUNBO0FBQ0EsNENBQTRDLHlEQUFVLElBQUksVUFBVSxFQUFFLGVBQWU7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMkRBQVk7QUFDbEMsZ0NBQWdDLHlEQUFVLElBQUksVUFBVSxFQUFFLGVBQWU7QUFDekUsc0JBQXNCLFVBQVUsR0FBRyxjQUFjO0FBQ2pELGFBQWE7QUFDYjtBQUNPO0FBQ1A7QUFDQTtBQUNBLGNBQWMsbURBQVcsNENBQTRDLE9BQU87QUFDNUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxjYWxsYmFja1xcb2F1dGhcXGNzcmYtdG9rZW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSGFzaCwgcmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3dlYi5qc1wiO1xuaW1wb3J0IHsgTWlzc2luZ0NTUkYgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZXJyb3JzLmpzXCI7XG4vKipcbiAqIEVuc3VyZSBDU1JGIFRva2VuIGNvb2tpZSBpcyBzZXQgZm9yIGFueSBzdWJzZXF1ZW50IHJlcXVlc3RzLlxuICogVXNlZCBhcyBwYXJ0IG9mIHRoZSBzdHJhdGVneSBmb3IgbWl0aWdhdGlvbiBmb3IgQ1NSRiB0b2tlbnMuXG4gKlxuICogQ3JlYXRlcyBhIGNvb2tpZSBsaWtlICduZXh0LWF1dGguY3NyZi10b2tlbicgd2l0aCB0aGUgdmFsdWUgJ3Rva2VufGhhc2gnLFxuICogd2hlcmUgJ3Rva2VuJyBpcyB0aGUgQ1NSRiB0b2tlbiBhbmQgJ2hhc2gnIGlzIGEgaGFzaCBtYWRlIG9mIHRoZSB0b2tlbiBhbmRcbiAqIHRoZSBzZWNyZXQsIGFuZCB0aGUgdHdvIHZhbHVlcyBhcmUgam9pbmVkIGJ5IGEgcGlwZSAnfCcuIEJ5IHN0b3JpbmcgdGhlXG4gKiB2YWx1ZSBhbmQgdGhlIGhhc2ggb2YgdGhlIHZhbHVlICh3aXRoIHRoZSBzZWNyZXQgdXNlZCBhcyBhIHNhbHQpIHdlIGNhblxuICogdmVyaWZ5IHRoZSBjb29raWUgd2FzIHNldCBieSB0aGUgc2VydmVyIGFuZCBub3QgYnkgYSBtYWxpY2lvdXMgYXR0YWNrZXIuXG4gKlxuICogRm9yIG1vcmUgZGV0YWlscywgc2VlIHRoZSBmb2xsb3dpbmcgT1dBU1AgbGlua3M6XG4gKiBodHRwczovL2NoZWF0c2hlZXRzZXJpZXMub3dhc3Aub3JnL2NoZWF0c2hlZXRzL0Nyb3NzLVNpdGVfUmVxdWVzdF9Gb3JnZXJ5X1ByZXZlbnRpb25fQ2hlYXRfU2hlZXQuaHRtbCNkb3VibGUtc3VibWl0LWNvb2tpZVxuICogaHR0cHM6Ly9vd2FzcC5vcmcvd3d3LWNoYXB0ZXItbG9uZG9uL2Fzc2V0cy9zbGlkZXMvRGF2aWRfSm9oYW5zc29uLURvdWJsZV9EZWZlYXRfb2ZfRG91YmxlLVN1Ym1pdF9Db29raWUucGRmXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDU1JGVG9rZW4oeyBvcHRpb25zLCBjb29raWVWYWx1ZSwgaXNQb3N0LCBib2R5VmFsdWUsIH0pIHtcbiAgICBpZiAoY29va2llVmFsdWUpIHtcbiAgICAgICAgY29uc3QgW2NzcmZUb2tlbiwgY3NyZlRva2VuSGFzaF0gPSBjb29raWVWYWx1ZS5zcGxpdChcInxcIik7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkQ3NyZlRva2VuSGFzaCA9IGF3YWl0IGNyZWF0ZUhhc2goYCR7Y3NyZlRva2VufSR7b3B0aW9ucy5zZWNyZXR9YCk7XG4gICAgICAgIGlmIChjc3JmVG9rZW5IYXNoID09PSBleHBlY3RlZENzcmZUb2tlbkhhc2gpIHtcbiAgICAgICAgICAgIC8vIElmIGhhc2ggbWF0Y2hlcyB0aGVuIHdlIHRydXN0IHRoZSBDU1JGIHRva2VuIHZhbHVlXG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgUE9TVCByZXF1ZXN0IGFuZCB0aGUgQ1NSRiBUb2tlbiBpbiB0aGUgUE9TVCByZXF1ZXN0IG1hdGNoZXNcbiAgICAgICAgICAgIC8vIHRoZSBjb29raWUgd2UgaGF2ZSBhbHJlYWR5IHZlcmlmaWVkIGlzIHRoZSBvbmUgd2UgaGF2ZSBzZXQsIHRoZW4gdGhlIHRva2VuIGlzIHZlcmlmaWVkIVxuICAgICAgICAgICAgY29uc3QgY3NyZlRva2VuVmVyaWZpZWQgPSBpc1Bvc3QgJiYgY3NyZlRva2VuID09PSBib2R5VmFsdWU7XG4gICAgICAgICAgICByZXR1cm4geyBjc3JmVG9rZW5WZXJpZmllZCwgY3NyZlRva2VuIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTmV3IENTUkYgdG9rZW5cbiAgICBjb25zdCBjc3JmVG9rZW4gPSByYW5kb21TdHJpbmcoMzIpO1xuICAgIGNvbnN0IGNzcmZUb2tlbkhhc2ggPSBhd2FpdCBjcmVhdGVIYXNoKGAke2NzcmZUb2tlbn0ke29wdGlvbnMuc2VjcmV0fWApO1xuICAgIGNvbnN0IGNvb2tpZSA9IGAke2NzcmZUb2tlbn18JHtjc3JmVG9rZW5IYXNofWA7XG4gICAgcmV0dXJuIHsgY29va2llLCBjc3JmVG9rZW4gfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNTUkYoYWN0aW9uLCB2ZXJpZmllZCkge1xuICAgIGlmICh2ZXJpZmllZClcbiAgICAgICAgcmV0dXJuO1xuICAgIHRocm93IG5ldyBNaXNzaW5nQ1NSRihgQ1NSRiB0b2tlbiB3YXMgbWlzc2luZyBkdXJpbmcgYW4gYWN0aW9uICR7YWN0aW9ufWApO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callback: () => (/* reexport safe */ _callback_index_js__WEBPACK_IMPORTED_MODULE_0__.callback),\n/* harmony export */   session: () => (/* reexport safe */ _session_js__WEBPACK_IMPORTED_MODULE_1__.session),\n/* harmony export */   signIn: () => (/* reexport safe */ _signin_index_js__WEBPACK_IMPORTED_MODULE_2__.signIn),\n/* harmony export */   signOut: () => (/* reexport safe */ _signout_js__WEBPACK_IMPORTED_MODULE_3__.signOut),\n/* harmony export */   webAuthnOptions: () => (/* reexport safe */ _webauthn_options_js__WEBPACK_IMPORTED_MODULE_4__.webAuthnOptions)\n/* harmony export */ });\n/* harmony import */ var _callback_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./callback/index.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/index.js\");\n/* harmony import */ var _session_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/session.js\");\n/* harmony import */ var _signin_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./signin/index.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/signin/index.js\");\n/* harmony import */ var _signout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./signout.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/signout.js\");\n/* harmony import */ var _webauthn_options_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./webauthn-options.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/webauthn-options.js\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDUjtBQUNJO0FBQ0o7QUFDaUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBjYWxsYmFjayB9IGZyb20gXCIuL2NhbGxiYWNrL2luZGV4LmpzXCI7XG5leHBvcnQgeyBzZXNzaW9uIH0gZnJvbSBcIi4vc2Vzc2lvbi5qc1wiO1xuZXhwb3J0IHsgc2lnbkluIH0gZnJvbSBcIi4vc2lnbmluL2luZGV4LmpzXCI7XG5leHBvcnQgeyBzaWduT3V0IH0gZnJvbSBcIi4vc2lnbm91dC5qc1wiO1xuZXhwb3J0IHsgd2ViQXV0aG5PcHRpb25zIH0gZnJvbSBcIi4vd2ViYXV0aG4tb3B0aW9ucy5qc1wiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callback: () => (/* reexport safe */ _callback_index_js__WEBPACK_IMPORTED_MODULE_0__.callback),\n/* harmony export */   session: () => (/* reexport safe */ _session_js__WEBPACK_IMPORTED_MODULE_1__.session),\n/* harmony export */   signIn: () => (/* reexport safe */ _signin_index_js__WEBPACK_IMPORTED_MODULE_2__.signIn),\n/* harmony export */   signOut: () => (/* reexport safe */ _signout_js__WEBPACK_IMPORTED_MODULE_3__.signOut),\n/* harmony export */   webAuthnOptions: () => (/* reexport safe */ _webauthn_options_js__WEBPACK_IMPORTED_MODULE_4__.webAuthnOptions)\n/* harmony export */ });\n/* harmony import */ var _callback_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./callback/index.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/index.js\");\n/* harmony import */ var _session_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/session.js\");\n/* harmony import */ var _signin_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./signin/index.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/signin/index.js\");\n/* harmony import */ var _signout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./signout.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/signout.js\");\n/* harmony import */ var _webauthn_options_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./webauthn-options.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/webauthn-options.js\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ1I7QUFDSTtBQUNKO0FBQ2lCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcYWN0aW9uc1xcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgY2FsbGJhY2sgfSBmcm9tIFwiLi9jYWxsYmFjay9pbmRleC5qc1wiO1xuZXhwb3J0IHsgc2Vzc2lvbiB9IGZyb20gXCIuL3Nlc3Npb24uanNcIjtcbmV4cG9ydCB7IHNpZ25JbiB9IGZyb20gXCIuL3NpZ25pbi9pbmRleC5qc1wiO1xuZXhwb3J0IHsgc2lnbk91dCB9IGZyb20gXCIuL3NpZ25vdXQuanNcIjtcbmV4cG9ydCB7IHdlYkF1dGhuT3B0aW9ucyB9IGZyb20gXCIuL3dlYmF1dGhuLW9wdGlvbnMuanNcIjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/session.js":
/*!********************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/session.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   session: () => (/* binding */ session)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_date_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/date.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/date.js\");\n\n\n/** Return a session object filtered via `callbacks.session` */\nasync function session(options, sessionStore, cookies, isUpdate, newSession) {\n    const { adapter, jwt, events, callbacks, logger, session: { strategy: sessionStrategy, maxAge: sessionMaxAge }, } = options;\n    const response = {\n        body: null,\n        headers: { \"Content-Type\": \"application/json\" },\n        cookies,\n    };\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return response;\n    if (sessionStrategy === \"jwt\") {\n        try {\n            const salt = options.cookies.sessionToken.name;\n            const payload = await jwt.decode({ ...jwt, token: sessionToken, salt });\n            if (!payload)\n                throw new Error(\"Invalid JWT\");\n            // @ts-expect-error\n            const token = await callbacks.jwt({\n                token: payload,\n                ...(isUpdate && { trigger: \"update\" }),\n                session: newSession,\n            });\n            const newExpires = (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(sessionMaxAge);\n            if (token !== null) {\n                // By default, only exposes a limited subset of information to the client\n                // as needed for presentation purposes (e.g. \"you are logged in as...\").\n                const session = {\n                    user: { name: token.name, email: token.email, image: token.picture },\n                    expires: newExpires.toISOString(),\n                };\n                // @ts-expect-error\n                const newSession = await callbacks.session({ session, token });\n                // Return session payload as response\n                response.body = newSession;\n                // Refresh JWT expiry by re-signing it, with an updated expiry date\n                const newToken = await jwt.encode({ ...jwt, token, salt });\n                // Set cookie, to also update expiry date on cookie\n                const sessionCookies = sessionStore.chunk(newToken, {\n                    expires: newExpires,\n                });\n                response.cookies?.push(...sessionCookies);\n                await events.session?.({ session: newSession, token });\n            }\n            else {\n                response.cookies?.push(...sessionStore.clean());\n            }\n        }\n        catch (e) {\n            logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTSessionError(e));\n            // If the JWT is not verifiable remove the broken session cookie(s).\n            response.cookies?.push(...sessionStore.clean());\n        }\n        return response;\n    }\n    // Retrieve session from database\n    try {\n        const { getSessionAndUser, deleteSession, updateSession } = adapter;\n        let userAndSession = await getSessionAndUser(sessionToken);\n        // If session has expired, clean up the database\n        if (userAndSession &&\n            userAndSession.session.expires.valueOf() < Date.now()) {\n            await deleteSession(sessionToken);\n            userAndSession = null;\n        }\n        if (userAndSession) {\n            const { user, session } = userAndSession;\n            const sessionUpdateAge = options.session.updateAge;\n            // Calculate last updated date to throttle write updates to database\n            // Formula: ({expiry date} - sessionMaxAge) + sessionUpdateAge\n            //     e.g. ({expiry date} - 30 days) + 1 hour\n            const sessionIsDueToBeUpdatedDate = session.expires.valueOf() -\n                sessionMaxAge * 1000 +\n                sessionUpdateAge * 1000;\n            const newExpires = (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(sessionMaxAge);\n            // Trigger update of session expiry date and write to database, only\n            // if the session was last updated more than {sessionUpdateAge} ago\n            if (sessionIsDueToBeUpdatedDate <= Date.now()) {\n                await updateSession({\n                    sessionToken: sessionToken,\n                    expires: newExpires,\n                });\n            }\n            // Pass Session through to the session callback\n            const sessionPayload = await callbacks.session({\n                // TODO: user already passed below,\n                // remove from session object in https://github.com/nextauthjs/next-auth/pull/9702\n                // @ts-expect-error\n                session: { ...session, user },\n                user,\n                newSession,\n                ...(isUpdate ? { trigger: \"update\" } : {}),\n            });\n            // Return session payload as response\n            response.body = sessionPayload;\n            // Set cookie again to update expiry\n            response.cookies?.push({\n                name: options.cookies.sessionToken.name,\n                value: sessionToken,\n                options: {\n                    ...options.cookies.sessionToken.options,\n                    expires: newExpires,\n                },\n            });\n            // @ts-expect-error\n            await events.session?.({ session: sessionPayload });\n        }\n        else if (sessionToken) {\n            // If `sessionToken` was found set but it's not valid for a session then\n            // remove the sessionToken cookie from browser.\n            response.cookies?.push(...sessionStore.clean());\n        }\n    }\n    catch (e) {\n        logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_0__.SessionTokenError(e));\n    }\n    return response;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL3Nlc3Npb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFFO0FBQ3pCO0FBQzVDO0FBQ087QUFDUCxZQUFZLG9EQUFvRCxrREFBa0QsSUFBSTtBQUN0SDtBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG1DQUFtQztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG1CQUFtQjtBQUNyRDtBQUNBLGFBQWE7QUFDYiwrQkFBK0Isd0RBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNERBQTREO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnQkFBZ0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELHFCQUFxQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSx5Q0FBeUMsNEJBQTRCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1REFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrREFBa0Q7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBLDBCQUEwQixhQUFhO0FBQ3ZDLDBCQUEwQixhQUFhO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix3REFBUTtBQUN2QztBQUNBLDBEQUEwRCxrQkFBa0I7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtCQUFrQjtBQUM3QztBQUNBO0FBQ0EsaUNBQWlDLG9CQUFvQixJQUFJO0FBQ3pELGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EscUNBQXFDLHlCQUF5QjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHlEQUFpQjtBQUMxQztBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxzZXNzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEpXVFNlc3Npb25FcnJvciwgU2Vzc2lvblRva2VuRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBmcm9tRGF0ZSB9IGZyb20gXCIuLi91dGlscy9kYXRlLmpzXCI7XG4vKiogUmV0dXJuIGEgc2Vzc2lvbiBvYmplY3QgZmlsdGVyZWQgdmlhIGBjYWxsYmFja3Muc2Vzc2lvbmAgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXNzaW9uKG9wdGlvbnMsIHNlc3Npb25TdG9yZSwgY29va2llcywgaXNVcGRhdGUsIG5ld1Nlc3Npb24pIHtcbiAgICBjb25zdCB7IGFkYXB0ZXIsIGp3dCwgZXZlbnRzLCBjYWxsYmFja3MsIGxvZ2dlciwgc2Vzc2lvbjogeyBzdHJhdGVneTogc2Vzc2lvblN0cmF0ZWd5LCBtYXhBZ2U6IHNlc3Npb25NYXhBZ2UgfSwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgIGJvZHk6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgY29va2llcyxcbiAgICB9O1xuICAgIGNvbnN0IHNlc3Npb25Ub2tlbiA9IHNlc3Npb25TdG9yZS52YWx1ZTtcbiAgICBpZiAoIXNlc3Npb25Ub2tlbilcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIGlmIChzZXNzaW9uU3RyYXRlZ3kgPT09IFwiand0XCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNhbHQgPSBvcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWU7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgand0LmRlY29kZSh7IC4uLmp3dCwgdG9rZW46IHNlc3Npb25Ub2tlbiwgc2FsdCB9KTtcbiAgICAgICAgICAgIGlmICghcGF5bG9hZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEpXVFwiKTtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgY2FsbGJhY2tzLmp3dCh7XG4gICAgICAgICAgICAgICAgdG9rZW46IHBheWxvYWQsXG4gICAgICAgICAgICAgICAgLi4uKGlzVXBkYXRlICYmIHsgdHJpZ2dlcjogXCJ1cGRhdGVcIiB9KSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiBuZXdTZXNzaW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBuZXdFeHBpcmVzID0gZnJvbURhdGUoc2Vzc2lvbk1heEFnZSk7XG4gICAgICAgICAgICBpZiAodG9rZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBCeSBkZWZhdWx0LCBvbmx5IGV4cG9zZXMgYSBsaW1pdGVkIHN1YnNldCBvZiBpbmZvcm1hdGlvbiB0byB0aGUgY2xpZW50XG4gICAgICAgICAgICAgICAgLy8gYXMgbmVlZGVkIGZvciBwcmVzZW50YXRpb24gcHVycG9zZXMgKGUuZy4gXCJ5b3UgYXJlIGxvZ2dlZCBpbiBhcy4uLlwiKS5cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgICAgICB1c2VyOiB7IG5hbWU6IHRva2VuLm5hbWUsIGVtYWlsOiB0b2tlbi5lbWFpbCwgaW1hZ2U6IHRva2VuLnBpY3R1cmUgfSxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogbmV3RXhwaXJlcy50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjYWxsYmFja3Muc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pO1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiBzZXNzaW9uIHBheWxvYWQgYXMgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICByZXNwb25zZS5ib2R5ID0gbmV3U2Vzc2lvbjtcbiAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIEpXVCBleHBpcnkgYnkgcmUtc2lnbmluZyBpdCwgd2l0aCBhbiB1cGRhdGVkIGV4cGlyeSBkYXRlXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBhd2FpdCBqd3QuZW5jb2RlKHsgLi4uand0LCB0b2tlbiwgc2FsdCB9KTtcbiAgICAgICAgICAgICAgICAvLyBTZXQgY29va2llLCB0byBhbHNvIHVwZGF0ZSBleHBpcnkgZGF0ZSBvbiBjb29raWVcbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uQ29va2llcyA9IHNlc3Npb25TdG9yZS5jaHVuayhuZXdUb2tlbiwge1xuICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBuZXdFeHBpcmVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNvb2tpZXM/LnB1c2goLi4uc2Vzc2lvbkNvb2tpZXMpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5zZXNzaW9uPy4oeyBzZXNzaW9uOiBuZXdTZXNzaW9uLCB0b2tlbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNvb2tpZXM/LnB1c2goLi4uc2Vzc2lvblN0b3JlLmNsZWFuKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IobmV3IEpXVFNlc3Npb25FcnJvcihlKSk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgSldUIGlzIG5vdCB2ZXJpZmlhYmxlIHJlbW92ZSB0aGUgYnJva2VuIHNlc3Npb24gY29va2llKHMpLlxuICAgICAgICAgICAgcmVzcG9uc2UuY29va2llcz8ucHVzaCguLi5zZXNzaW9uU3RvcmUuY2xlYW4oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICAvLyBSZXRyaWV2ZSBzZXNzaW9uIGZyb20gZGF0YWJhc2VcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGdldFNlc3Npb25BbmRVc2VyLCBkZWxldGVTZXNzaW9uLCB1cGRhdGVTZXNzaW9uIH0gPSBhZGFwdGVyO1xuICAgICAgICBsZXQgdXNlckFuZFNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uQW5kVXNlcihzZXNzaW9uVG9rZW4pO1xuICAgICAgICAvLyBJZiBzZXNzaW9uIGhhcyBleHBpcmVkLCBjbGVhbiB1cCB0aGUgZGF0YWJhc2VcbiAgICAgICAgaWYgKHVzZXJBbmRTZXNzaW9uICYmXG4gICAgICAgICAgICB1c2VyQW5kU2Vzc2lvbi5zZXNzaW9uLmV4cGlyZXMudmFsdWVPZigpIDwgRGF0ZS5ub3coKSkge1xuICAgICAgICAgICAgYXdhaXQgZGVsZXRlU2Vzc2lvbihzZXNzaW9uVG9rZW4pO1xuICAgICAgICAgICAgdXNlckFuZFNlc3Npb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyQW5kU2Vzc2lvbikge1xuICAgICAgICAgICAgY29uc3QgeyB1c2VyLCBzZXNzaW9uIH0gPSB1c2VyQW5kU2Vzc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25VcGRhdGVBZ2UgPSBvcHRpb25zLnNlc3Npb24udXBkYXRlQWdlO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGxhc3QgdXBkYXRlZCBkYXRlIHRvIHRocm90dGxlIHdyaXRlIHVwZGF0ZXMgdG8gZGF0YWJhc2VcbiAgICAgICAgICAgIC8vIEZvcm11bGE6ICh7ZXhwaXJ5IGRhdGV9IC0gc2Vzc2lvbk1heEFnZSkgKyBzZXNzaW9uVXBkYXRlQWdlXG4gICAgICAgICAgICAvLyAgICAgZS5nLiAoe2V4cGlyeSBkYXRlfSAtIDMwIGRheXMpICsgMSBob3VyXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uSXNEdWVUb0JlVXBkYXRlZERhdGUgPSBzZXNzaW9uLmV4cGlyZXMudmFsdWVPZigpIC1cbiAgICAgICAgICAgICAgICBzZXNzaW9uTWF4QWdlICogMTAwMCArXG4gICAgICAgICAgICAgICAgc2Vzc2lvblVwZGF0ZUFnZSAqIDEwMDA7XG4gICAgICAgICAgICBjb25zdCBuZXdFeHBpcmVzID0gZnJvbURhdGUoc2Vzc2lvbk1heEFnZSk7XG4gICAgICAgICAgICAvLyBUcmlnZ2VyIHVwZGF0ZSBvZiBzZXNzaW9uIGV4cGlyeSBkYXRlIGFuZCB3cml0ZSB0byBkYXRhYmFzZSwgb25seVxuICAgICAgICAgICAgLy8gaWYgdGhlIHNlc3Npb24gd2FzIGxhc3QgdXBkYXRlZCBtb3JlIHRoYW4ge3Nlc3Npb25VcGRhdGVBZ2V9IGFnb1xuICAgICAgICAgICAgaWYgKHNlc3Npb25Jc0R1ZVRvQmVVcGRhdGVkRGF0ZSA8PSBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU2Vzc2lvbih7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25Ub2tlbjogc2Vzc2lvblRva2VuLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBuZXdFeHBpcmVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUGFzcyBTZXNzaW9uIHRocm91Z2ggdG8gdGhlIHNlc3Npb24gY2FsbGJhY2tcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25QYXlsb2FkID0gYXdhaXQgY2FsbGJhY2tzLnNlc3Npb24oe1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IHVzZXIgYWxyZWFkeSBwYXNzZWQgYmVsb3csXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gc2Vzc2lvbiBvYmplY3QgaW4gaHR0cHM6Ly9naXRodWIuY29tL25leHRhdXRoanMvbmV4dC1hdXRoL3B1bGwvOTcwMlxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7IC4uLnNlc3Npb24sIHVzZXIgfSxcbiAgICAgICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgICAgIG5ld1Nlc3Npb24sXG4gICAgICAgICAgICAgICAgLi4uKGlzVXBkYXRlID8geyB0cmlnZ2VyOiBcInVwZGF0ZVwiIH0gOiB7fSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFJldHVybiBzZXNzaW9uIHBheWxvYWQgYXMgcmVzcG9uc2VcbiAgICAgICAgICAgIHJlc3BvbnNlLmJvZHkgPSBzZXNzaW9uUGF5bG9hZDtcbiAgICAgICAgICAgIC8vIFNldCBjb29raWUgYWdhaW4gdG8gdXBkYXRlIGV4cGlyeVxuICAgICAgICAgICAgcmVzcG9uc2UuY29va2llcz8ucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBzZXNzaW9uVG9rZW4sXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXM6IG5ld0V4cGlyZXMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgYXdhaXQgZXZlbnRzLnNlc3Npb24/Lih7IHNlc3Npb246IHNlc3Npb25QYXlsb2FkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlc3Npb25Ub2tlbikge1xuICAgICAgICAgICAgLy8gSWYgYHNlc3Npb25Ub2tlbmAgd2FzIGZvdW5kIHNldCBidXQgaXQncyBub3QgdmFsaWQgZm9yIGEgc2Vzc2lvbiB0aGVuXG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIHNlc3Npb25Ub2tlbiBjb29raWUgZnJvbSBicm93c2VyLlxuICAgICAgICAgICAgcmVzcG9uc2UuY29va2llcz8ucHVzaCguLi5zZXNzaW9uU3RvcmUuY2xlYW4oKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKG5ldyBTZXNzaW9uVG9rZW5FcnJvcihlKSk7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/session.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/session.js":
/*!********************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/session.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   session: () => (/* binding */ session)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_date_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/date.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/date.js\");\n\n\n/** Return a session object filtered via `callbacks.session` */\nasync function session(options, sessionStore, cookies, isUpdate, newSession) {\n    const { adapter, jwt, events, callbacks, logger, session: { strategy: sessionStrategy, maxAge: sessionMaxAge }, } = options;\n    const response = {\n        body: null,\n        headers: { \"Content-Type\": \"application/json\" },\n        cookies,\n    };\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return response;\n    if (sessionStrategy === \"jwt\") {\n        try {\n            const salt = options.cookies.sessionToken.name;\n            const payload = await jwt.decode({ ...jwt, token: sessionToken, salt });\n            if (!payload)\n                throw new Error(\"Invalid JWT\");\n            // @ts-expect-error\n            const token = await callbacks.jwt({\n                token: payload,\n                ...(isUpdate && { trigger: \"update\" }),\n                session: newSession,\n            });\n            const newExpires = (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(sessionMaxAge);\n            if (token !== null) {\n                // By default, only exposes a limited subset of information to the client\n                // as needed for presentation purposes (e.g. \"you are logged in as...\").\n                const session = {\n                    user: { name: token.name, email: token.email, image: token.picture },\n                    expires: newExpires.toISOString(),\n                };\n                // @ts-expect-error\n                const newSession = await callbacks.session({ session, token });\n                // Return session payload as response\n                response.body = newSession;\n                // Refresh JWT expiry by re-signing it, with an updated expiry date\n                const newToken = await jwt.encode({ ...jwt, token, salt });\n                // Set cookie, to also update expiry date on cookie\n                const sessionCookies = sessionStore.chunk(newToken, {\n                    expires: newExpires,\n                });\n                response.cookies?.push(...sessionCookies);\n                await events.session?.({ session: newSession, token });\n            }\n            else {\n                response.cookies?.push(...sessionStore.clean());\n            }\n        }\n        catch (e) {\n            logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTSessionError(e));\n            // If the JWT is not verifiable remove the broken session cookie(s).\n            response.cookies?.push(...sessionStore.clean());\n        }\n        return response;\n    }\n    // Retrieve session from database\n    try {\n        const { getSessionAndUser, deleteSession, updateSession } = adapter;\n        let userAndSession = await getSessionAndUser(sessionToken);\n        // If session has expired, clean up the database\n        if (userAndSession &&\n            userAndSession.session.expires.valueOf() < Date.now()) {\n            await deleteSession(sessionToken);\n            userAndSession = null;\n        }\n        if (userAndSession) {\n            const { user, session } = userAndSession;\n            const sessionUpdateAge = options.session.updateAge;\n            // Calculate last updated date to throttle write updates to database\n            // Formula: ({expiry date} - sessionMaxAge) + sessionUpdateAge\n            //     e.g. ({expiry date} - 30 days) + 1 hour\n            const sessionIsDueToBeUpdatedDate = session.expires.valueOf() -\n                sessionMaxAge * 1000 +\n                sessionUpdateAge * 1000;\n            const newExpires = (0,_utils_date_js__WEBPACK_IMPORTED_MODULE_1__.fromDate)(sessionMaxAge);\n            // Trigger update of session expiry date and write to database, only\n            // if the session was last updated more than {sessionUpdateAge} ago\n            if (sessionIsDueToBeUpdatedDate <= Date.now()) {\n                await updateSession({\n                    sessionToken: sessionToken,\n                    expires: newExpires,\n                });\n            }\n            // Pass Session through to the session callback\n            const sessionPayload = await callbacks.session({\n                // TODO: user already passed below,\n                // remove from session object in https://github.com/nextauthjs/next-auth/pull/9702\n                // @ts-expect-error\n                session: { ...session, user },\n                user,\n                newSession,\n                ...(isUpdate ? { trigger: \"update\" } : {}),\n            });\n            // Return session payload as response\n            response.body = sessionPayload;\n            // Set cookie again to update expiry\n            response.cookies?.push({\n                name: options.cookies.sessionToken.name,\n                value: sessionToken,\n                options: {\n                    ...options.cookies.sessionToken.options,\n                    expires: newExpires,\n                },\n            });\n            // @ts-expect-error\n            await events.session?.({ session: sessionPayload });\n        }\n        else if (sessionToken) {\n            // If `sessionToken` was found set but it's not valid for a session then\n            // remove the sessionToken cookie from browser.\n            response.cookies?.push(...sessionStore.clean());\n        }\n    }\n    catch (e) {\n        logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_0__.SessionTokenError(e));\n    }\n    return response;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9zZXNzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRTtBQUN6QjtBQUM1QztBQUNPO0FBQ1AsWUFBWSxvREFBb0Qsa0RBQWtELElBQUk7QUFDdEg7QUFDQTtBQUNBLG1CQUFtQixvQ0FBb0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxtQ0FBbUM7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxtQkFBbUI7QUFDckQ7QUFDQSxhQUFhO0FBQ2IsK0JBQStCLHdEQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDREQUE0RDtBQUN4RjtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsZ0JBQWdCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxxQkFBcUI7QUFDekU7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EseUNBQXlDLDRCQUE0QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdURBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isa0RBQWtEO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQSwwQkFBMEIsYUFBYTtBQUN2QywwQkFBMEIsYUFBYTtBQUN2QztBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0RBQVE7QUFDdkM7QUFDQSwwREFBMEQsa0JBQWtCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBLGlDQUFpQyxvQkFBb0IsSUFBSTtBQUN6RCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBLHFDQUFxQyx5QkFBeUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix5REFBaUI7QUFDMUM7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcYWN0aW9uc1xcc2Vzc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBKV1RTZXNzaW9uRXJyb3IsIFNlc3Npb25Ub2tlbkVycm9yIH0gZnJvbSBcIi4uLy4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgZnJvbURhdGUgfSBmcm9tIFwiLi4vdXRpbHMvZGF0ZS5qc1wiO1xuLyoqIFJldHVybiBhIHNlc3Npb24gb2JqZWN0IGZpbHRlcmVkIHZpYSBgY2FsbGJhY2tzLnNlc3Npb25gICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2Vzc2lvbihvcHRpb25zLCBzZXNzaW9uU3RvcmUsIGNvb2tpZXMsIGlzVXBkYXRlLCBuZXdTZXNzaW9uKSB7XG4gICAgY29uc3QgeyBhZGFwdGVyLCBqd3QsIGV2ZW50cywgY2FsbGJhY2tzLCBsb2dnZXIsIHNlc3Npb246IHsgc3RyYXRlZ3k6IHNlc3Npb25TdHJhdGVneSwgbWF4QWdlOiBzZXNzaW9uTWF4QWdlIH0sIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgICBib2R5OiBudWxsLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIGNvb2tpZXMsXG4gICAgfTtcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBzZXNzaW9uU3RvcmUudmFsdWU7XG4gICAgaWYgKCFzZXNzaW9uVG9rZW4pXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICBpZiAoc2Vzc2lvblN0cmF0ZWd5ID09PSBcImp3dFwiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzYWx0ID0gb3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lO1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGp3dC5kZWNvZGUoeyAuLi5qd3QsIHRva2VuOiBzZXNzaW9uVG9rZW4sIHNhbHQgfSk7XG4gICAgICAgICAgICBpZiAoIXBheWxvYWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBKV1RcIik7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGNhbGxiYWNrcy5qd3Qoe1xuICAgICAgICAgICAgICAgIHRva2VuOiBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIC4uLihpc1VwZGF0ZSAmJiB7IHRyaWdnZXI6IFwidXBkYXRlXCIgfSksXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjogbmV3U2Vzc2lvbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgbmV3RXhwaXJlcyA9IGZyb21EYXRlKHNlc3Npb25NYXhBZ2UpO1xuICAgICAgICAgICAgaWYgKHRva2VuICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gQnkgZGVmYXVsdCwgb25seSBleHBvc2VzIGEgbGltaXRlZCBzdWJzZXQgb2YgaW5mb3JtYXRpb24gdG8gdGhlIGNsaWVudFxuICAgICAgICAgICAgICAgIC8vIGFzIG5lZWRlZCBmb3IgcHJlc2VudGF0aW9uIHB1cnBvc2VzIChlLmcuIFwieW91IGFyZSBsb2dnZWQgaW4gYXMuLi5cIikuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcjogeyBuYW1lOiB0b2tlbi5uYW1lLCBlbWFpbDogdG9rZW4uZW1haWwsIGltYWdlOiB0b2tlbi5waWN0dXJlIH0sXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXM6IG5ld0V4cGlyZXMudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdTZXNzaW9uID0gYXdhaXQgY2FsbGJhY2tzLnNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KTtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gc2Vzc2lvbiBwYXlsb2FkIGFzIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuYm9keSA9IG5ld1Nlc3Npb247XG4gICAgICAgICAgICAgICAgLy8gUmVmcmVzaCBKV1QgZXhwaXJ5IGJ5IHJlLXNpZ25pbmcgaXQsIHdpdGggYW4gdXBkYXRlZCBleHBpcnkgZGF0ZVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VuID0gYXdhaXQgand0LmVuY29kZSh7IC4uLmp3dCwgdG9rZW4sIHNhbHQgfSk7XG4gICAgICAgICAgICAgICAgLy8gU2V0IGNvb2tpZSwgdG8gYWxzbyB1cGRhdGUgZXhwaXJ5IGRhdGUgb24gY29va2llXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkNvb2tpZXMgPSBzZXNzaW9uU3RvcmUuY2h1bmsobmV3VG9rZW4sIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogbmV3RXhwaXJlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5jb29raWVzPy5wdXNoKC4uLnNlc3Npb25Db29raWVzKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBldmVudHMuc2Vzc2lvbj8uKHsgc2Vzc2lvbjogbmV3U2Vzc2lvbiwgdG9rZW4gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5jb29raWVzPy5wdXNoKC4uLnNlc3Npb25TdG9yZS5jbGVhbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKG5ldyBKV1RTZXNzaW9uRXJyb3IoZSkpO1xuICAgICAgICAgICAgLy8gSWYgdGhlIEpXVCBpcyBub3QgdmVyaWZpYWJsZSByZW1vdmUgdGhlIGJyb2tlbiBzZXNzaW9uIGNvb2tpZShzKS5cbiAgICAgICAgICAgIHJlc3BvbnNlLmNvb2tpZXM/LnB1c2goLi4uc2Vzc2lvblN0b3JlLmNsZWFuKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgLy8gUmV0cmlldmUgc2Vzc2lvbiBmcm9tIGRhdGFiYXNlXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBnZXRTZXNzaW9uQW5kVXNlciwgZGVsZXRlU2Vzc2lvbiwgdXBkYXRlU2Vzc2lvbiB9ID0gYWRhcHRlcjtcbiAgICAgICAgbGV0IHVzZXJBbmRTZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkFuZFVzZXIoc2Vzc2lvblRva2VuKTtcbiAgICAgICAgLy8gSWYgc2Vzc2lvbiBoYXMgZXhwaXJlZCwgY2xlYW4gdXAgdGhlIGRhdGFiYXNlXG4gICAgICAgIGlmICh1c2VyQW5kU2Vzc2lvbiAmJlxuICAgICAgICAgICAgdXNlckFuZFNlc3Npb24uc2Vzc2lvbi5leHBpcmVzLnZhbHVlT2YoKSA8IERhdGUubm93KCkpIHtcbiAgICAgICAgICAgIGF3YWl0IGRlbGV0ZVNlc3Npb24oc2Vzc2lvblRva2VuKTtcbiAgICAgICAgICAgIHVzZXJBbmRTZXNzaW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlckFuZFNlc3Npb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlciwgc2Vzc2lvbiB9ID0gdXNlckFuZFNlc3Npb247XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uVXBkYXRlQWdlID0gb3B0aW9ucy5zZXNzaW9uLnVwZGF0ZUFnZTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBsYXN0IHVwZGF0ZWQgZGF0ZSB0byB0aHJvdHRsZSB3cml0ZSB1cGRhdGVzIHRvIGRhdGFiYXNlXG4gICAgICAgICAgICAvLyBGb3JtdWxhOiAoe2V4cGlyeSBkYXRlfSAtIHNlc3Npb25NYXhBZ2UpICsgc2Vzc2lvblVwZGF0ZUFnZVxuICAgICAgICAgICAgLy8gICAgIGUuZy4gKHtleHBpcnkgZGF0ZX0gLSAzMCBkYXlzKSArIDEgaG91clxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbklzRHVlVG9CZVVwZGF0ZWREYXRlID0gc2Vzc2lvbi5leHBpcmVzLnZhbHVlT2YoKSAtXG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1heEFnZSAqIDEwMDAgK1xuICAgICAgICAgICAgICAgIHNlc3Npb25VcGRhdGVBZ2UgKiAxMDAwO1xuICAgICAgICAgICAgY29uc3QgbmV3RXhwaXJlcyA9IGZyb21EYXRlKHNlc3Npb25NYXhBZ2UpO1xuICAgICAgICAgICAgLy8gVHJpZ2dlciB1cGRhdGUgb2Ygc2Vzc2lvbiBleHBpcnkgZGF0ZSBhbmQgd3JpdGUgdG8gZGF0YWJhc2UsIG9ubHlcbiAgICAgICAgICAgIC8vIGlmIHRoZSBzZXNzaW9uIHdhcyBsYXN0IHVwZGF0ZWQgbW9yZSB0aGFuIHtzZXNzaW9uVXBkYXRlQWdlfSBhZ29cbiAgICAgICAgICAgIGlmIChzZXNzaW9uSXNEdWVUb0JlVXBkYXRlZERhdGUgPD0gRGF0ZS5ub3coKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVNlc3Npb24oe1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uVG9rZW46IHNlc3Npb25Ub2tlbixcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlczogbmV3RXhwaXJlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFBhc3MgU2Vzc2lvbiB0aHJvdWdoIHRvIHRoZSBzZXNzaW9uIGNhbGxiYWNrXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uUGF5bG9hZCA9IGF3YWl0IGNhbGxiYWNrcy5zZXNzaW9uKHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiB1c2VyIGFscmVhZHkgcGFzc2VkIGJlbG93LFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIHNlc3Npb24gb2JqZWN0IGluIGh0dHBzOi8vZ2l0aHViLmNvbS9uZXh0YXV0aGpzL25leHQtYXV0aC9wdWxsLzk3MDJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjogeyAuLi5zZXNzaW9uLCB1c2VyIH0sXG4gICAgICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgICAgICBuZXdTZXNzaW9uLFxuICAgICAgICAgICAgICAgIC4uLihpc1VwZGF0ZSA/IHsgdHJpZ2dlcjogXCJ1cGRhdGVcIiB9IDoge30pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBSZXR1cm4gc2Vzc2lvbiBwYXlsb2FkIGFzIHJlc3BvbnNlXG4gICAgICAgICAgICByZXNwb25zZS5ib2R5ID0gc2Vzc2lvblBheWxvYWQ7XG4gICAgICAgICAgICAvLyBTZXQgY29va2llIGFnYWluIHRvIHVwZGF0ZSBleHBpcnlcbiAgICAgICAgICAgIHJlc3BvbnNlLmNvb2tpZXM/LnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogc2Vzc2lvblRva2VuLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiBuZXdFeHBpcmVzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5zZXNzaW9uPy4oeyBzZXNzaW9uOiBzZXNzaW9uUGF5bG9hZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgICAgIC8vIElmIGBzZXNzaW9uVG9rZW5gIHdhcyBmb3VuZCBzZXQgYnV0IGl0J3Mgbm90IHZhbGlkIGZvciBhIHNlc3Npb24gdGhlblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBzZXNzaW9uVG9rZW4gY29va2llIGZyb20gYnJvd3Nlci5cbiAgICAgICAgICAgIHJlc3BvbnNlLmNvb2tpZXM/LnB1c2goLi4uc2Vzc2lvblN0b3JlLmNsZWFuKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihuZXcgU2Vzc2lvblRva2VuRXJyb3IoZSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/session.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/signin/authorization-url.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/signin/authorization-url.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAuthorizationUrl: () => (/* binding */ getAuthorizationUrl)\n/* harmony export */ });\n/* harmony import */ var _callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callback/oauth/checks.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\");\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! oauth4webapi */ \"(action-browser)/./node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../symbols.js */ \"(action-browser)/./node_modules/@auth/core/lib/symbols.js\");\n\n\n\n/**\n * Generates an authorization/request token URL.\n *\n * [OAuth 2](https://www.oauth.com/oauth2-servers/authorization/the-authorization-request/)\n */\nasync function getAuthorizationUrl(query, options) {\n    const { logger, provider } = options;\n    let url = provider.authorization?.url;\n    let as;\n    // Falls back to authjs.dev if the user only passed params\n    if (!url || url.host === \"authjs.dev\") {\n        // If url is undefined, we assume that issuer is always defined\n        // We check this in assert.ts\n        const issuer = new URL(provider.issuer);\n        const discoveryResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.discoveryRequest(issuer, {\n            [oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_1__.customFetch],\n            // TODO: move away from allowing insecure HTTP requests\n            [oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.allowInsecureRequests]: true,\n        });\n        const as = await oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.processDiscoveryResponse(issuer, discoveryResponse);\n        if (!as.authorization_endpoint) {\n            throw new TypeError(\"Authorization server did not provide an authorization endpoint.\");\n        }\n        url = new URL(as.authorization_endpoint);\n    }\n    const authParams = url.searchParams;\n    let redirect_uri = provider.callbackUrl;\n    let data;\n    if (!options.isOnRedirectProxy && provider.redirectProxyUrl) {\n        redirect_uri = provider.redirectProxyUrl;\n        data = provider.callbackUrl;\n        logger.debug(\"using redirect proxy\", { redirect_uri, data });\n    }\n    const params = Object.assign({\n        response_type: \"code\",\n        // clientId can technically be undefined, should we check this in assert.ts or rely on the Authorization Server to do it?\n        client_id: provider.clientId,\n        redirect_uri,\n        // @ts-expect-error TODO:\n        ...provider.authorization?.params,\n    }, Object.fromEntries(provider.authorization?.url.searchParams ?? []), query);\n    for (const k in params)\n        authParams.set(k, params[k]);\n    const cookies = [];\n    if (\n    // Otherwise \"POST /redirect_uri\" wouldn't include the cookies\n    provider.authorization?.url.searchParams.get(\"response_mode\") ===\n        \"form_post\") {\n        options.cookies.state.options.sameSite = \"none\";\n        options.cookies.state.options.secure = true;\n        options.cookies.nonce.options.sameSite = \"none\";\n        options.cookies.nonce.options.secure = true;\n    }\n    const state = await _callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_0__.state.create(options, data);\n    if (state) {\n        authParams.set(\"state\", state.value);\n        cookies.push(state.cookie);\n    }\n    if (provider.checks?.includes(\"pkce\")) {\n        if (as && !as.code_challenge_methods_supported?.includes(\"S256\")) {\n            // We assume S256 PKCE support, if the server does not advertise that,\n            // a random `nonce` must be used for CSRF protection.\n            if (provider.type === \"oidc\")\n                provider.checks = [\"nonce\"];\n        }\n        else {\n            const { value, cookie } = await _callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_0__.pkce.create(options);\n            authParams.set(\"code_challenge\", value);\n            authParams.set(\"code_challenge_method\", \"S256\");\n            cookies.push(cookie);\n        }\n    }\n    const nonce = await _callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_0__.nonce.create(options);\n    if (nonce) {\n        authParams.set(\"nonce\", nonce.value);\n        cookies.push(nonce.cookie);\n    }\n    // TODO: This does not work in normalizeOAuth because authorization endpoint can come from discovery\n    // Need to make normalizeOAuth async\n    if (provider.type === \"oidc\" && !url.searchParams.has(\"scope\")) {\n        url.searchParams.set(\"scope\", \"openid profile email\");\n    }\n    logger.debug(\"authorization url is ready\", { url, cookies, provider });\n    return { redirect: url.toString(), cookies };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL3NpZ25pbi9hdXRob3JpemF0aW9uLXVybC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNEO0FBQ3BCO0FBQ2E7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMERBQWtCO0FBQzFELGFBQWEscURBQWEsWUFBWSxvREFBVztBQUNqRDtBQUNBLGFBQWEsK0RBQXVCO0FBQ3BDLFNBQVM7QUFDVCx5QkFBeUIsa0VBQTBCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDREQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0IsUUFBUSwyREFBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDREQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCx3QkFBd0I7QUFDekUsYUFBYTtBQUNiIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcYWN0aW9uc1xcc2lnbmluXFxhdXRob3JpemF0aW9uLXVybC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjaGVja3MgZnJvbSBcIi4uL2NhbGxiYWNrL29hdXRoL2NoZWNrcy5qc1wiO1xuaW1wb3J0ICogYXMgbyBmcm9tIFwib2F1dGg0d2ViYXBpXCI7XG5pbXBvcnQgeyBjdXN0b21GZXRjaCB9IGZyb20gXCIuLi8uLi9zeW1ib2xzLmpzXCI7XG4vKipcbiAqIEdlbmVyYXRlcyBhbiBhdXRob3JpemF0aW9uL3JlcXVlc3QgdG9rZW4gVVJMLlxuICpcbiAqIFtPQXV0aCAyXShodHRwczovL3d3dy5vYXV0aC5jb20vb2F1dGgyLXNlcnZlcnMvYXV0aG9yaXphdGlvbi90aGUtYXV0aG9yaXphdGlvbi1yZXF1ZXN0LylcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhvcml6YXRpb25VcmwocXVlcnksIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGxvZ2dlciwgcHJvdmlkZXIgfSA9IG9wdGlvbnM7XG4gICAgbGV0IHVybCA9IHByb3ZpZGVyLmF1dGhvcml6YXRpb24/LnVybDtcbiAgICBsZXQgYXM7XG4gICAgLy8gRmFsbHMgYmFjayB0byBhdXRoanMuZGV2IGlmIHRoZSB1c2VyIG9ubHkgcGFzc2VkIHBhcmFtc1xuICAgIGlmICghdXJsIHx8IHVybC5ob3N0ID09PSBcImF1dGhqcy5kZXZcIikge1xuICAgICAgICAvLyBJZiB1cmwgaXMgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhhdCBpc3N1ZXIgaXMgYWx3YXlzIGRlZmluZWRcbiAgICAgICAgLy8gV2UgY2hlY2sgdGhpcyBpbiBhc3NlcnQudHNcbiAgICAgICAgY29uc3QgaXNzdWVyID0gbmV3IFVSTChwcm92aWRlci5pc3N1ZXIpO1xuICAgICAgICBjb25zdCBkaXNjb3ZlcnlSZXNwb25zZSA9IGF3YWl0IG8uZGlzY292ZXJ5UmVxdWVzdChpc3N1ZXIsIHtcbiAgICAgICAgICAgIFtvLmN1c3RvbUZldGNoXTogcHJvdmlkZXJbY3VzdG9tRmV0Y2hdLFxuICAgICAgICAgICAgLy8gVE9ETzogbW92ZSBhd2F5IGZyb20gYWxsb3dpbmcgaW5zZWN1cmUgSFRUUCByZXF1ZXN0c1xuICAgICAgICAgICAgW28uYWxsb3dJbnNlY3VyZVJlcXVlc3RzXTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFzID0gYXdhaXQgby5wcm9jZXNzRGlzY292ZXJ5UmVzcG9uc2UoaXNzdWVyLCBkaXNjb3ZlcnlSZXNwb25zZSk7XG4gICAgICAgIGlmICghYXMuYXV0aG9yaXphdGlvbl9lbmRwb2ludCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkF1dGhvcml6YXRpb24gc2VydmVyIGRpZCBub3QgcHJvdmlkZSBhbiBhdXRob3JpemF0aW9uIGVuZHBvaW50LlwiKTtcbiAgICAgICAgfVxuICAgICAgICB1cmwgPSBuZXcgVVJMKGFzLmF1dGhvcml6YXRpb25fZW5kcG9pbnQpO1xuICAgIH1cbiAgICBjb25zdCBhdXRoUGFyYW1zID0gdXJsLnNlYXJjaFBhcmFtcztcbiAgICBsZXQgcmVkaXJlY3RfdXJpID0gcHJvdmlkZXIuY2FsbGJhY2tVcmw7XG4gICAgbGV0IGRhdGE7XG4gICAgaWYgKCFvcHRpb25zLmlzT25SZWRpcmVjdFByb3h5ICYmIHByb3ZpZGVyLnJlZGlyZWN0UHJveHlVcmwpIHtcbiAgICAgICAgcmVkaXJlY3RfdXJpID0gcHJvdmlkZXIucmVkaXJlY3RQcm94eVVybDtcbiAgICAgICAgZGF0YSA9IHByb3ZpZGVyLmNhbGxiYWNrVXJsO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJ1c2luZyByZWRpcmVjdCBwcm94eVwiLCB7IHJlZGlyZWN0X3VyaSwgZGF0YSB9KTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIHJlc3BvbnNlX3R5cGU6IFwiY29kZVwiLFxuICAgICAgICAvLyBjbGllbnRJZCBjYW4gdGVjaG5pY2FsbHkgYmUgdW5kZWZpbmVkLCBzaG91bGQgd2UgY2hlY2sgdGhpcyBpbiBhc3NlcnQudHMgb3IgcmVseSBvbiB0aGUgQXV0aG9yaXphdGlvbiBTZXJ2ZXIgdG8gZG8gaXQ/XG4gICAgICAgIGNsaWVudF9pZDogcHJvdmlkZXIuY2xpZW50SWQsXG4gICAgICAgIHJlZGlyZWN0X3VyaSxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOlxuICAgICAgICAuLi5wcm92aWRlci5hdXRob3JpemF0aW9uPy5wYXJhbXMsXG4gICAgfSwgT2JqZWN0LmZyb21FbnRyaWVzKHByb3ZpZGVyLmF1dGhvcml6YXRpb24/LnVybC5zZWFyY2hQYXJhbXMgPz8gW10pLCBxdWVyeSk7XG4gICAgZm9yIChjb25zdCBrIGluIHBhcmFtcylcbiAgICAgICAgYXV0aFBhcmFtcy5zZXQoaywgcGFyYW1zW2tdKTtcbiAgICBjb25zdCBjb29raWVzID0gW107XG4gICAgaWYgKFxuICAgIC8vIE90aGVyd2lzZSBcIlBPU1QgL3JlZGlyZWN0X3VyaVwiIHdvdWxkbid0IGluY2x1ZGUgdGhlIGNvb2tpZXNcbiAgICBwcm92aWRlci5hdXRob3JpemF0aW9uPy51cmwuc2VhcmNoUGFyYW1zLmdldChcInJlc3BvbnNlX21vZGVcIikgPT09XG4gICAgICAgIFwiZm9ybV9wb3N0XCIpIHtcbiAgICAgICAgb3B0aW9ucy5jb29raWVzLnN0YXRlLm9wdGlvbnMuc2FtZVNpdGUgPSBcIm5vbmVcIjtcbiAgICAgICAgb3B0aW9ucy5jb29raWVzLnN0YXRlLm9wdGlvbnMuc2VjdXJlID0gdHJ1ZTtcbiAgICAgICAgb3B0aW9ucy5jb29raWVzLm5vbmNlLm9wdGlvbnMuc2FtZVNpdGUgPSBcIm5vbmVcIjtcbiAgICAgICAgb3B0aW9ucy5jb29raWVzLm5vbmNlLm9wdGlvbnMuc2VjdXJlID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGUgPSBhd2FpdCBjaGVja3Muc3RhdGUuY3JlYXRlKG9wdGlvbnMsIGRhdGEpO1xuICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBhdXRoUGFyYW1zLnNldChcInN0YXRlXCIsIHN0YXRlLnZhbHVlKTtcbiAgICAgICAgY29va2llcy5wdXNoKHN0YXRlLmNvb2tpZSk7XG4gICAgfVxuICAgIGlmIChwcm92aWRlci5jaGVja3M/LmluY2x1ZGVzKFwicGtjZVwiKSkge1xuICAgICAgICBpZiAoYXMgJiYgIWFzLmNvZGVfY2hhbGxlbmdlX21ldGhvZHNfc3VwcG9ydGVkPy5pbmNsdWRlcyhcIlMyNTZcIikpIHtcbiAgICAgICAgICAgIC8vIFdlIGFzc3VtZSBTMjU2IFBLQ0Ugc3VwcG9ydCwgaWYgdGhlIHNlcnZlciBkb2VzIG5vdCBhZHZlcnRpc2UgdGhhdCxcbiAgICAgICAgICAgIC8vIGEgcmFuZG9tIGBub25jZWAgbXVzdCBiZSB1c2VkIGZvciBDU1JGIHByb3RlY3Rpb24uXG4gICAgICAgICAgICBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJvaWRjXCIpXG4gICAgICAgICAgICAgICAgcHJvdmlkZXIuY2hlY2tzID0gW1wibm9uY2VcIl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBjb29raWUgfSA9IGF3YWl0IGNoZWNrcy5wa2NlLmNyZWF0ZShvcHRpb25zKTtcbiAgICAgICAgICAgIGF1dGhQYXJhbXMuc2V0KFwiY29kZV9jaGFsbGVuZ2VcIiwgdmFsdWUpO1xuICAgICAgICAgICAgYXV0aFBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZV9tZXRob2RcIiwgXCJTMjU2XCIpO1xuICAgICAgICAgICAgY29va2llcy5wdXNoKGNvb2tpZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uY2UgPSBhd2FpdCBjaGVja3Mubm9uY2UuY3JlYXRlKG9wdGlvbnMpO1xuICAgIGlmIChub25jZSkge1xuICAgICAgICBhdXRoUGFyYW1zLnNldChcIm5vbmNlXCIsIG5vbmNlLnZhbHVlKTtcbiAgICAgICAgY29va2llcy5wdXNoKG5vbmNlLmNvb2tpZSk7XG4gICAgfVxuICAgIC8vIFRPRE86IFRoaXMgZG9lcyBub3Qgd29yayBpbiBub3JtYWxpemVPQXV0aCBiZWNhdXNlIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgY2FuIGNvbWUgZnJvbSBkaXNjb3ZlcnlcbiAgICAvLyBOZWVkIHRvIG1ha2Ugbm9ybWFsaXplT0F1dGggYXN5bmNcbiAgICBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJvaWRjXCIgJiYgIXVybC5zZWFyY2hQYXJhbXMuaGFzKFwic2NvcGVcIikpIHtcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzY29wZVwiLCBcIm9wZW5pZCBwcm9maWxlIGVtYWlsXCIpO1xuICAgIH1cbiAgICBsb2dnZXIuZGVidWcoXCJhdXRob3JpemF0aW9uIHVybCBpcyByZWFkeVwiLCB7IHVybCwgY29va2llcywgcHJvdmlkZXIgfSk7XG4gICAgcmV0dXJuIHsgcmVkaXJlY3Q6IHVybC50b1N0cmluZygpLCBjb29raWVzIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/signin/authorization-url.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/signin/authorization-url.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/signin/authorization-url.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAuthorizationUrl: () => (/* binding */ getAuthorizationUrl)\n/* harmony export */ });\n/* harmony import */ var _callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callback/oauth/checks.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\");\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! oauth4webapi */ \"(rsc)/./node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../symbols.js */ \"(rsc)/./node_modules/@auth/core/lib/symbols.js\");\n\n\n\n/**\n * Generates an authorization/request token URL.\n *\n * [OAuth 2](https://www.oauth.com/oauth2-servers/authorization/the-authorization-request/)\n */\nasync function getAuthorizationUrl(query, options) {\n    const { logger, provider } = options;\n    let url = provider.authorization?.url;\n    let as;\n    // Falls back to authjs.dev if the user only passed params\n    if (!url || url.host === \"authjs.dev\") {\n        // If url is undefined, we assume that issuer is always defined\n        // We check this in assert.ts\n        const issuer = new URL(provider.issuer);\n        const discoveryResponse = await oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.discoveryRequest(issuer, {\n            [oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.customFetch]: provider[_symbols_js__WEBPACK_IMPORTED_MODULE_1__.customFetch],\n            // TODO: move away from allowing insecure HTTP requests\n            [oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.allowInsecureRequests]: true,\n        });\n        const as = await oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.processDiscoveryResponse(issuer, discoveryResponse);\n        if (!as.authorization_endpoint) {\n            throw new TypeError(\"Authorization server did not provide an authorization endpoint.\");\n        }\n        url = new URL(as.authorization_endpoint);\n    }\n    const authParams = url.searchParams;\n    let redirect_uri = provider.callbackUrl;\n    let data;\n    if (!options.isOnRedirectProxy && provider.redirectProxyUrl) {\n        redirect_uri = provider.redirectProxyUrl;\n        data = provider.callbackUrl;\n        logger.debug(\"using redirect proxy\", { redirect_uri, data });\n    }\n    const params = Object.assign({\n        response_type: \"code\",\n        // clientId can technically be undefined, should we check this in assert.ts or rely on the Authorization Server to do it?\n        client_id: provider.clientId,\n        redirect_uri,\n        // @ts-expect-error TODO:\n        ...provider.authorization?.params,\n    }, Object.fromEntries(provider.authorization?.url.searchParams ?? []), query);\n    for (const k in params)\n        authParams.set(k, params[k]);\n    const cookies = [];\n    if (\n    // Otherwise \"POST /redirect_uri\" wouldn't include the cookies\n    provider.authorization?.url.searchParams.get(\"response_mode\") ===\n        \"form_post\") {\n        options.cookies.state.options.sameSite = \"none\";\n        options.cookies.state.options.secure = true;\n        options.cookies.nonce.options.sameSite = \"none\";\n        options.cookies.nonce.options.secure = true;\n    }\n    const state = await _callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_0__.state.create(options, data);\n    if (state) {\n        authParams.set(\"state\", state.value);\n        cookies.push(state.cookie);\n    }\n    if (provider.checks?.includes(\"pkce\")) {\n        if (as && !as.code_challenge_methods_supported?.includes(\"S256\")) {\n            // We assume S256 PKCE support, if the server does not advertise that,\n            // a random `nonce` must be used for CSRF protection.\n            if (provider.type === \"oidc\")\n                provider.checks = [\"nonce\"];\n        }\n        else {\n            const { value, cookie } = await _callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_0__.pkce.create(options);\n            authParams.set(\"code_challenge\", value);\n            authParams.set(\"code_challenge_method\", \"S256\");\n            cookies.push(cookie);\n        }\n    }\n    const nonce = await _callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_0__.nonce.create(options);\n    if (nonce) {\n        authParams.set(\"nonce\", nonce.value);\n        cookies.push(nonce.cookie);\n    }\n    // TODO: This does not work in normalizeOAuth because authorization endpoint can come from discovery\n    // Need to make normalizeOAuth async\n    if (provider.type === \"oidc\" && !url.searchParams.has(\"scope\")) {\n        url.searchParams.set(\"scope\", \"openid profile email\");\n    }\n    logger.debug(\"authorization url is ready\", { url, cookies, provider });\n    return { redirect: url.toString(), cookies };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9zaWduaW4vYXV0aG9yaXphdGlvbi11cmwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRDtBQUNwQjtBQUNhO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDBEQUFrQjtBQUMxRCxhQUFhLHFEQUFhLFlBQVksb0RBQVc7QUFDakQ7QUFDQSxhQUFhLCtEQUF1QjtBQUNwQyxTQUFTO0FBQ1QseUJBQXlCLGtFQUEwQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG9CQUFvQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0REFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCLFFBQVEsMkRBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0REFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsd0JBQXdCO0FBQ3pFLGFBQWE7QUFDYiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXGFjdGlvbnNcXHNpZ25pblxcYXV0aG9yaXphdGlvbi11cmwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2hlY2tzIGZyb20gXCIuLi9jYWxsYmFjay9vYXV0aC9jaGVja3MuanNcIjtcbmltcG9ydCAqIGFzIG8gZnJvbSBcIm9hdXRoNHdlYmFwaVwiO1xuaW1wb3J0IHsgY3VzdG9tRmV0Y2ggfSBmcm9tIFwiLi4vLi4vc3ltYm9scy5qc1wiO1xuLyoqXG4gKiBHZW5lcmF0ZXMgYW4gYXV0aG9yaXphdGlvbi9yZXF1ZXN0IHRva2VuIFVSTC5cbiAqXG4gKiBbT0F1dGggMl0oaHR0cHM6Ly93d3cub2F1dGguY29tL29hdXRoMi1zZXJ2ZXJzL2F1dGhvcml6YXRpb24vdGhlLWF1dGhvcml6YXRpb24tcmVxdWVzdC8pXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRob3JpemF0aW9uVXJsKHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyBsb2dnZXIsIHByb3ZpZGVyIH0gPSBvcHRpb25zO1xuICAgIGxldCB1cmwgPSBwcm92aWRlci5hdXRob3JpemF0aW9uPy51cmw7XG4gICAgbGV0IGFzO1xuICAgIC8vIEZhbGxzIGJhY2sgdG8gYXV0aGpzLmRldiBpZiB0aGUgdXNlciBvbmx5IHBhc3NlZCBwYXJhbXNcbiAgICBpZiAoIXVybCB8fCB1cmwuaG9zdCA9PT0gXCJhdXRoanMuZGV2XCIpIHtcbiAgICAgICAgLy8gSWYgdXJsIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoYXQgaXNzdWVyIGlzIGFsd2F5cyBkZWZpbmVkXG4gICAgICAgIC8vIFdlIGNoZWNrIHRoaXMgaW4gYXNzZXJ0LnRzXG4gICAgICAgIGNvbnN0IGlzc3VlciA9IG5ldyBVUkwocHJvdmlkZXIuaXNzdWVyKTtcbiAgICAgICAgY29uc3QgZGlzY292ZXJ5UmVzcG9uc2UgPSBhd2FpdCBvLmRpc2NvdmVyeVJlcXVlc3QoaXNzdWVyLCB7XG4gICAgICAgICAgICBbby5jdXN0b21GZXRjaF06IHByb3ZpZGVyW2N1c3RvbUZldGNoXSxcbiAgICAgICAgICAgIC8vIFRPRE86IG1vdmUgYXdheSBmcm9tIGFsbG93aW5nIGluc2VjdXJlIEhUVFAgcmVxdWVzdHNcbiAgICAgICAgICAgIFtvLmFsbG93SW5zZWN1cmVSZXF1ZXN0c106IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhcyA9IGF3YWl0IG8ucHJvY2Vzc0Rpc2NvdmVyeVJlc3BvbnNlKGlzc3VlciwgZGlzY292ZXJ5UmVzcG9uc2UpO1xuICAgICAgICBpZiAoIWFzLmF1dGhvcml6YXRpb25fZW5kcG9pbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBdXRob3JpemF0aW9uIHNlcnZlciBkaWQgbm90IHByb3ZpZGUgYW4gYXV0aG9yaXphdGlvbiBlbmRwb2ludC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdXJsID0gbmV3IFVSTChhcy5hdXRob3JpemF0aW9uX2VuZHBvaW50KTtcbiAgICB9XG4gICAgY29uc3QgYXV0aFBhcmFtcyA9IHVybC5zZWFyY2hQYXJhbXM7XG4gICAgbGV0IHJlZGlyZWN0X3VyaSA9IHByb3ZpZGVyLmNhbGxiYWNrVXJsO1xuICAgIGxldCBkYXRhO1xuICAgIGlmICghb3B0aW9ucy5pc09uUmVkaXJlY3RQcm94eSAmJiBwcm92aWRlci5yZWRpcmVjdFByb3h5VXJsKSB7XG4gICAgICAgIHJlZGlyZWN0X3VyaSA9IHByb3ZpZGVyLnJlZGlyZWN0UHJveHlVcmw7XG4gICAgICAgIGRhdGEgPSBwcm92aWRlci5jYWxsYmFja1VybDtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwidXNpbmcgcmVkaXJlY3QgcHJveHlcIiwgeyByZWRpcmVjdF91cmksIGRhdGEgfSk7XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICByZXNwb25zZV90eXBlOiBcImNvZGVcIixcbiAgICAgICAgLy8gY2xpZW50SWQgY2FuIHRlY2huaWNhbGx5IGJlIHVuZGVmaW5lZCwgc2hvdWxkIHdlIGNoZWNrIHRoaXMgaW4gYXNzZXJ0LnRzIG9yIHJlbHkgb24gdGhlIEF1dGhvcml6YXRpb24gU2VydmVyIHRvIGRvIGl0P1xuICAgICAgICBjbGllbnRfaWQ6IHByb3ZpZGVyLmNsaWVudElkLFxuICAgICAgICByZWRpcmVjdF91cmksXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzpcbiAgICAgICAgLi4ucHJvdmlkZXIuYXV0aG9yaXphdGlvbj8ucGFyYW1zLFxuICAgIH0sIE9iamVjdC5mcm9tRW50cmllcyhwcm92aWRlci5hdXRob3JpemF0aW9uPy51cmwuc2VhcmNoUGFyYW1zID8/IFtdKSwgcXVlcnkpO1xuICAgIGZvciAoY29uc3QgayBpbiBwYXJhbXMpXG4gICAgICAgIGF1dGhQYXJhbXMuc2V0KGssIHBhcmFtc1trXSk7XG4gICAgY29uc3QgY29va2llcyA9IFtdO1xuICAgIGlmIChcbiAgICAvLyBPdGhlcndpc2UgXCJQT1NUIC9yZWRpcmVjdF91cmlcIiB3b3VsZG4ndCBpbmNsdWRlIHRoZSBjb29raWVzXG4gICAgcHJvdmlkZXIuYXV0aG9yaXphdGlvbj8udXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJyZXNwb25zZV9tb2RlXCIpID09PVxuICAgICAgICBcImZvcm1fcG9zdFwiKSB7XG4gICAgICAgIG9wdGlvbnMuY29va2llcy5zdGF0ZS5vcHRpb25zLnNhbWVTaXRlID0gXCJub25lXCI7XG4gICAgICAgIG9wdGlvbnMuY29va2llcy5zdGF0ZS5vcHRpb25zLnNlY3VyZSA9IHRydWU7XG4gICAgICAgIG9wdGlvbnMuY29va2llcy5ub25jZS5vcHRpb25zLnNhbWVTaXRlID0gXCJub25lXCI7XG4gICAgICAgIG9wdGlvbnMuY29va2llcy5ub25jZS5vcHRpb25zLnNlY3VyZSA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgY2hlY2tzLnN0YXRlLmNyZWF0ZShvcHRpb25zLCBkYXRhKTtcbiAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgYXV0aFBhcmFtcy5zZXQoXCJzdGF0ZVwiLCBzdGF0ZS52YWx1ZSk7XG4gICAgICAgIGNvb2tpZXMucHVzaChzdGF0ZS5jb29raWUpO1xuICAgIH1cbiAgICBpZiAocHJvdmlkZXIuY2hlY2tzPy5pbmNsdWRlcyhcInBrY2VcIikpIHtcbiAgICAgICAgaWYgKGFzICYmICFhcy5jb2RlX2NoYWxsZW5nZV9tZXRob2RzX3N1cHBvcnRlZD8uaW5jbHVkZXMoXCJTMjU2XCIpKSB7XG4gICAgICAgICAgICAvLyBXZSBhc3N1bWUgUzI1NiBQS0NFIHN1cHBvcnQsIGlmIHRoZSBzZXJ2ZXIgZG9lcyBub3QgYWR2ZXJ0aXNlIHRoYXQsXG4gICAgICAgICAgICAvLyBhIHJhbmRvbSBgbm9uY2VgIG11c3QgYmUgdXNlZCBmb3IgQ1NSRiBwcm90ZWN0aW9uLlxuICAgICAgICAgICAgaWYgKHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiKVxuICAgICAgICAgICAgICAgIHByb3ZpZGVyLmNoZWNrcyA9IFtcIm5vbmNlXCJdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgY29va2llIH0gPSBhd2FpdCBjaGVja3MucGtjZS5jcmVhdGUob3B0aW9ucyk7XG4gICAgICAgICAgICBhdXRoUGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlXCIsIHZhbHVlKTtcbiAgICAgICAgICAgIGF1dGhQYXJhbXMuc2V0KFwiY29kZV9jaGFsbGVuZ2VfbWV0aG9kXCIsIFwiUzI1NlwiKTtcbiAgICAgICAgICAgIGNvb2tpZXMucHVzaChjb29raWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5vbmNlID0gYXdhaXQgY2hlY2tzLm5vbmNlLmNyZWF0ZShvcHRpb25zKTtcbiAgICBpZiAobm9uY2UpIHtcbiAgICAgICAgYXV0aFBhcmFtcy5zZXQoXCJub25jZVwiLCBub25jZS52YWx1ZSk7XG4gICAgICAgIGNvb2tpZXMucHVzaChub25jZS5jb29raWUpO1xuICAgIH1cbiAgICAvLyBUT0RPOiBUaGlzIGRvZXMgbm90IHdvcmsgaW4gbm9ybWFsaXplT0F1dGggYmVjYXVzZSBhdXRob3JpemF0aW9uIGVuZHBvaW50IGNhbiBjb21lIGZyb20gZGlzY292ZXJ5XG4gICAgLy8gTmVlZCB0byBtYWtlIG5vcm1hbGl6ZU9BdXRoIGFzeW5jXG4gICAgaWYgKHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiICYmICF1cmwuc2VhcmNoUGFyYW1zLmhhcyhcInNjb3BlXCIpKSB7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic2NvcGVcIiwgXCJvcGVuaWQgcHJvZmlsZSBlbWFpbFwiKTtcbiAgICB9XG4gICAgbG9nZ2VyLmRlYnVnKFwiYXV0aG9yaXphdGlvbiB1cmwgaXMgcmVhZHlcIiwgeyB1cmwsIGNvb2tpZXMsIHByb3ZpZGVyIH0pO1xuICAgIHJldHVybiB7IHJlZGlyZWN0OiB1cmwudG9TdHJpbmcoKSwgY29va2llcyB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/signin/authorization-url.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/signin/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/signin/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signIn: () => (/* binding */ signIn)\n/* harmony export */ });\n/* harmony import */ var _authorization_url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authorization-url.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/signin/authorization-url.js\");\n/* harmony import */ var _send_token_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./send-token.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/signin/send-token.js\");\n\n\nasync function signIn(request, cookies, options) {\n    const signInUrl = `${options.url.origin}${options.basePath}/signin`;\n    if (!options.provider)\n        return { redirect: signInUrl, cookies };\n    switch (options.provider.type) {\n        case \"oauth\":\n        case \"oidc\": {\n            const { redirect, cookies: authCookies } = await (0,_authorization_url_js__WEBPACK_IMPORTED_MODULE_0__.getAuthorizationUrl)(request.query, options);\n            if (authCookies)\n                cookies.push(...authCookies);\n            return { redirect, cookies };\n        }\n        case \"email\": {\n            const response = await (0,_send_token_js__WEBPACK_IMPORTED_MODULE_1__.sendToken)(request, options);\n            return { ...response, cookies };\n        }\n        default:\n            return { redirect: signInUrl, cookies };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL3NpZ25pbi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkQ7QUFDakI7QUFDckM7QUFDUCx5QkFBeUIsbUJBQW1CLEVBQUUsaUJBQWlCO0FBQy9EO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQ0FBaUMsUUFBUSwwRUFBbUI7QUFDaEY7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsbUNBQW1DLHlEQUFTO0FBQzVDLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxzaWduaW5cXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEF1dGhvcml6YXRpb25VcmwgfSBmcm9tIFwiLi9hdXRob3JpemF0aW9uLXVybC5qc1wiO1xuaW1wb3J0IHsgc2VuZFRva2VuIH0gZnJvbSBcIi4vc2VuZC10b2tlbi5qc1wiO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25JbihyZXF1ZXN0LCBjb29raWVzLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgc2lnbkluVXJsID0gYCR7b3B0aW9ucy51cmwub3JpZ2lufSR7b3B0aW9ucy5iYXNlUGF0aH0vc2lnbmluYDtcbiAgICBpZiAoIW9wdGlvbnMucHJvdmlkZXIpXG4gICAgICAgIHJldHVybiB7IHJlZGlyZWN0OiBzaWduSW5VcmwsIGNvb2tpZXMgfTtcbiAgICBzd2l0Y2ggKG9wdGlvbnMucHJvdmlkZXIudHlwZSkge1xuICAgICAgICBjYXNlIFwib2F1dGhcIjpcbiAgICAgICAgY2FzZSBcIm9pZGNcIjoge1xuICAgICAgICAgICAgY29uc3QgeyByZWRpcmVjdCwgY29va2llczogYXV0aENvb2tpZXMgfSA9IGF3YWl0IGdldEF1dGhvcml6YXRpb25VcmwocmVxdWVzdC5xdWVyeSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoYXV0aENvb2tpZXMpXG4gICAgICAgICAgICAgICAgY29va2llcy5wdXNoKC4uLmF1dGhDb29raWVzKTtcbiAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0LCBjb29raWVzIH07XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImVtYWlsXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZFRva2VuKHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4ucmVzcG9uc2UsIGNvb2tpZXMgfTtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3Q6IHNpZ25JblVybCwgY29va2llcyB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/signin/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/signin/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/signin/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signIn: () => (/* binding */ signIn)\n/* harmony export */ });\n/* harmony import */ var _authorization_url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authorization-url.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/signin/authorization-url.js\");\n/* harmony import */ var _send_token_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./send-token.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/signin/send-token.js\");\n\n\nasync function signIn(request, cookies, options) {\n    const signInUrl = `${options.url.origin}${options.basePath}/signin`;\n    if (!options.provider)\n        return { redirect: signInUrl, cookies };\n    switch (options.provider.type) {\n        case \"oauth\":\n        case \"oidc\": {\n            const { redirect, cookies: authCookies } = await (0,_authorization_url_js__WEBPACK_IMPORTED_MODULE_0__.getAuthorizationUrl)(request.query, options);\n            if (authCookies)\n                cookies.push(...authCookies);\n            return { redirect, cookies };\n        }\n        case \"email\": {\n            const response = await (0,_send_token_js__WEBPACK_IMPORTED_MODULE_1__.sendToken)(request, options);\n            return { ...response, cookies };\n        }\n        default:\n            return { redirect: signInUrl, cookies };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9zaWduaW4vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZEO0FBQ2pCO0FBQ3JDO0FBQ1AseUJBQXlCLG1CQUFtQixFQUFFLGlCQUFpQjtBQUMvRDtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUNBQWlDLFFBQVEsMEVBQW1CO0FBQ2hGO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLG1DQUFtQyx5REFBUztBQUM1QyxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcYWN0aW9uc1xcc2lnbmluXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBdXRob3JpemF0aW9uVXJsIH0gZnJvbSBcIi4vYXV0aG9yaXphdGlvbi11cmwuanNcIjtcbmltcG9ydCB7IHNlbmRUb2tlbiB9IGZyb20gXCIuL3NlbmQtdG9rZW4uanNcIjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduSW4ocmVxdWVzdCwgY29va2llcywgb3B0aW9ucykge1xuICAgIGNvbnN0IHNpZ25JblVybCA9IGAke29wdGlvbnMudXJsLm9yaWdpbn0ke29wdGlvbnMuYmFzZVBhdGh9L3NpZ25pbmA7XG4gICAgaWYgKCFvcHRpb25zLnByb3ZpZGVyKVxuICAgICAgICByZXR1cm4geyByZWRpcmVjdDogc2lnbkluVXJsLCBjb29raWVzIH07XG4gICAgc3dpdGNoIChvcHRpb25zLnByb3ZpZGVyLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcIm9hdXRoXCI6XG4gICAgICAgIGNhc2UgXCJvaWRjXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVkaXJlY3QsIGNvb2tpZXM6IGF1dGhDb29raWVzIH0gPSBhd2FpdCBnZXRBdXRob3JpemF0aW9uVXJsKHJlcXVlc3QucXVlcnksIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGF1dGhDb29raWVzKVxuICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaCguLi5hdXRoQ29va2llcyk7XG4gICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdCwgY29va2llcyB9O1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJlbWFpbFwiOiB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRUb2tlbihyZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnJlc3BvbnNlLCBjb29raWVzIH07XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0OiBzaWduSW5VcmwsIGNvb2tpZXMgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/signin/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/signin/send-token.js":
/*!******************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/signin/send-token.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendToken: () => (/* binding */ sendToken)\n/* harmony export */ });\n/* harmony import */ var _utils_web_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/web.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/web.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n\n\n/**\n * Starts an e-mail login flow, by generating a token,\n * and sending it to the user's e-mail (with the help of a DB adapter).\n * At the end, it returns a redirect to the `verify-request` page.\n */\nasync function sendToken(request, options) {\n    const { body } = request;\n    const { provider, callbacks, adapter } = options;\n    const normalizer = provider.normalizeIdentifier ?? defaultNormalizer;\n    const email = normalizer(body?.email);\n    const defaultUser = { id: crypto.randomUUID(), email, emailVerified: null };\n    const user = (await adapter.getUserByEmail(email)) ?? defaultUser;\n    const account = {\n        providerAccountId: email,\n        userId: user.id,\n        type: \"email\",\n        provider: provider.id,\n    };\n    let authorized;\n    try {\n        authorized = await callbacks.signIn({\n            user,\n            account,\n            email: { verificationRequest: true },\n        });\n    }\n    catch (e) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.AccessDenied(e);\n    }\n    if (!authorized)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.AccessDenied(\"AccessDenied\");\n    if (typeof authorized === \"string\") {\n        return {\n            redirect: await callbacks.redirect({\n                url: authorized,\n                baseUrl: options.url.origin,\n            }),\n        };\n    }\n    const { callbackUrl, theme } = options;\n    const token = (await provider.generateVerificationToken?.()) ?? (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.randomString)(32);\n    const ONE_DAY_IN_SECONDS = 86400;\n    const expires = new Date(Date.now() + (provider.maxAge ?? ONE_DAY_IN_SECONDS) * 1000);\n    const secret = provider.secret ?? options.secret;\n    const baseUrl = new URL(options.basePath, options.url.origin);\n    const sendRequest = provider.sendVerificationRequest({\n        identifier: email,\n        token,\n        expires,\n        url: `${baseUrl}/callback/${provider.id}?${new URLSearchParams({\n            callbackUrl,\n            token,\n            email,\n        })}`,\n        provider,\n        theme,\n        request: (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.toRequest)(request),\n    });\n    const createToken = adapter.createVerificationToken?.({\n        identifier: email,\n        token: await (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.createHash)(`${token}${secret}`),\n        expires,\n    });\n    await Promise.all([sendRequest, createToken]);\n    return {\n        redirect: `${baseUrl}/verify-request?${new URLSearchParams({\n            provider: provider.id,\n            type: provider.type,\n        })}`,\n    };\n}\nfunction defaultNormalizer(email) {\n    if (!email)\n        throw new Error(\"Missing email from request body.\");\n    // Get the first two elements only,\n    // separated by `@` from user input.\n    let [local, domain] = email.toLowerCase().trim().split(\"@\");\n    // The part before \"@\" can contain a \",\"\n    // but we remove it on the domain part\n    domain = domain.split(\",\")[0];\n    return `${local}@${domain}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL3NpZ25pbi9zZW5kLXRva2VuLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5RTtBQUN2QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLE9BQU87QUFDbkIsWUFBWSwrQkFBK0I7QUFDM0M7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkJBQTJCO0FBQ2hELFNBQVM7QUFDVDtBQUNBO0FBQ0Esa0JBQWtCLG9EQUFZO0FBQzlCO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsWUFBWSxxQkFBcUI7QUFDakMsb0VBQW9FLDJEQUFZO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUSxZQUFZLFlBQVksR0FBRztBQUNuRDtBQUNBO0FBQ0E7QUFDQSxTQUFTLEVBQUU7QUFDWDtBQUNBO0FBQ0EsaUJBQWlCLHdEQUFTO0FBQzFCLEtBQUs7QUFDTDtBQUNBO0FBQ0EscUJBQXFCLHlEQUFVLElBQUksTUFBTSxFQUFFLE9BQU87QUFDbEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHFCQUFxQixRQUFRLGtCQUFrQjtBQUMvQztBQUNBO0FBQ0EsU0FBUyxFQUFFO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTSxHQUFHLE9BQU87QUFDOUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxzaWduaW5cXHNlbmQtdG9rZW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSGFzaCwgcmFuZG9tU3RyaW5nLCB0b1JlcXVlc3QgfSBmcm9tIFwiLi4vLi4vdXRpbHMvd2ViLmpzXCI7XG5pbXBvcnQgeyBBY2Nlc3NEZW5pZWQgfSBmcm9tIFwiLi4vLi4vLi4vZXJyb3JzLmpzXCI7XG4vKipcbiAqIFN0YXJ0cyBhbiBlLW1haWwgbG9naW4gZmxvdywgYnkgZ2VuZXJhdGluZyBhIHRva2VuLFxuICogYW5kIHNlbmRpbmcgaXQgdG8gdGhlIHVzZXIncyBlLW1haWwgKHdpdGggdGhlIGhlbHAgb2YgYSBEQiBhZGFwdGVyKS5cbiAqIEF0IHRoZSBlbmQsIGl0IHJldHVybnMgYSByZWRpcmVjdCB0byB0aGUgYHZlcmlmeS1yZXF1ZXN0YCBwYWdlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZFRva2VuKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGJvZHkgfSA9IHJlcXVlc3Q7XG4gICAgY29uc3QgeyBwcm92aWRlciwgY2FsbGJhY2tzLCBhZGFwdGVyIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IG5vcm1hbGl6ZXIgPSBwcm92aWRlci5ub3JtYWxpemVJZGVudGlmaWVyID8/IGRlZmF1bHROb3JtYWxpemVyO1xuICAgIGNvbnN0IGVtYWlsID0gbm9ybWFsaXplcihib2R5Py5lbWFpbCk7XG4gICAgY29uc3QgZGVmYXVsdFVzZXIgPSB7IGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLCBlbWFpbCwgZW1haWxWZXJpZmllZDogbnVsbCB9O1xuICAgIGNvbnN0IHVzZXIgPSAoYXdhaXQgYWRhcHRlci5nZXRVc2VyQnlFbWFpbChlbWFpbCkpID8/IGRlZmF1bHRVc2VyO1xuICAgIGNvbnN0IGFjY291bnQgPSB7XG4gICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiBlbWFpbCxcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICB0eXBlOiBcImVtYWlsXCIsXG4gICAgICAgIHByb3ZpZGVyOiBwcm92aWRlci5pZCxcbiAgICB9O1xuICAgIGxldCBhdXRob3JpemVkO1xuICAgIHRyeSB7XG4gICAgICAgIGF1dGhvcml6ZWQgPSBhd2FpdCBjYWxsYmFja3Muc2lnbkluKHtcbiAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICBhY2NvdW50LFxuICAgICAgICAgICAgZW1haWw6IHsgdmVyaWZpY2F0aW9uUmVxdWVzdDogdHJ1ZSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFjY2Vzc0RlbmllZChlKTtcbiAgICB9XG4gICAgaWYgKCFhdXRob3JpemVkKVxuICAgICAgICB0aHJvdyBuZXcgQWNjZXNzRGVuaWVkKFwiQWNjZXNzRGVuaWVkXCIpO1xuICAgIGlmICh0eXBlb2YgYXV0aG9yaXplZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVkaXJlY3Q6IGF3YWl0IGNhbGxiYWNrcy5yZWRpcmVjdCh7XG4gICAgICAgICAgICAgICAgdXJsOiBhdXRob3JpemVkLFxuICAgICAgICAgICAgICAgIGJhc2VVcmw6IG9wdGlvbnMudXJsLm9yaWdpbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB7IGNhbGxiYWNrVXJsLCB0aGVtZSB9ID0gb3B0aW9ucztcbiAgICBjb25zdCB0b2tlbiA9IChhd2FpdCBwcm92aWRlci5nZW5lcmF0ZVZlcmlmaWNhdGlvblRva2VuPy4oKSkgPz8gcmFuZG9tU3RyaW5nKDMyKTtcbiAgICBjb25zdCBPTkVfREFZX0lOX1NFQ09ORFMgPSA4NjQwMDtcbiAgICBjb25zdCBleHBpcmVzID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIChwcm92aWRlci5tYXhBZ2UgPz8gT05FX0RBWV9JTl9TRUNPTkRTKSAqIDEwMDApO1xuICAgIGNvbnN0IHNlY3JldCA9IHByb3ZpZGVyLnNlY3JldCA/PyBvcHRpb25zLnNlY3JldDtcbiAgICBjb25zdCBiYXNlVXJsID0gbmV3IFVSTChvcHRpb25zLmJhc2VQYXRoLCBvcHRpb25zLnVybC5vcmlnaW4pO1xuICAgIGNvbnN0IHNlbmRSZXF1ZXN0ID0gcHJvdmlkZXIuc2VuZFZlcmlmaWNhdGlvblJlcXVlc3Qoe1xuICAgICAgICBpZGVudGlmaWVyOiBlbWFpbCxcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIGV4cGlyZXMsXG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vY2FsbGJhY2svJHtwcm92aWRlci5pZH0/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIGNhbGxiYWNrVXJsLFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgfSl9YCxcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRoZW1lLFxuICAgICAgICByZXF1ZXN0OiB0b1JlcXVlc3QocmVxdWVzdCksXG4gICAgfSk7XG4gICAgY29uc3QgY3JlYXRlVG9rZW4gPSBhZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblRva2VuPy4oe1xuICAgICAgICBpZGVudGlmaWVyOiBlbWFpbCxcbiAgICAgICAgdG9rZW46IGF3YWl0IGNyZWF0ZUhhc2goYCR7dG9rZW59JHtzZWNyZXR9YCksXG4gICAgICAgIGV4cGlyZXMsXG4gICAgfSk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW3NlbmRSZXF1ZXN0LCBjcmVhdGVUb2tlbl0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlZGlyZWN0OiBgJHtiYXNlVXJsfS92ZXJpZnktcmVxdWVzdD8ke25ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLmlkLFxuICAgICAgICAgICAgdHlwZTogcHJvdmlkZXIudHlwZSxcbiAgICAgICAgfSl9YCxcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdE5vcm1hbGl6ZXIoZW1haWwpIHtcbiAgICBpZiAoIWVtYWlsKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGVtYWlsIGZyb20gcmVxdWVzdCBib2R5LlwiKTtcbiAgICAvLyBHZXQgdGhlIGZpcnN0IHR3byBlbGVtZW50cyBvbmx5LFxuICAgIC8vIHNlcGFyYXRlZCBieSBgQGAgZnJvbSB1c2VyIGlucHV0LlxuICAgIGxldCBbbG9jYWwsIGRvbWFpbl0gPSBlbWFpbC50b0xvd2VyQ2FzZSgpLnRyaW0oKS5zcGxpdChcIkBcIik7XG4gICAgLy8gVGhlIHBhcnQgYmVmb3JlIFwiQFwiIGNhbiBjb250YWluIGEgXCIsXCJcbiAgICAvLyBidXQgd2UgcmVtb3ZlIGl0IG9uIHRoZSBkb21haW4gcGFydFxuICAgIGRvbWFpbiA9IGRvbWFpbi5zcGxpdChcIixcIilbMF07XG4gICAgcmV0dXJuIGAke2xvY2FsfUAke2RvbWFpbn1gO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/signin/send-token.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/signin/send-token.js":
/*!******************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/signin/send-token.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendToken: () => (/* binding */ sendToken)\n/* harmony export */ });\n/* harmony import */ var _utils_web_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/web.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/web.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n\n\n/**\n * Starts an e-mail login flow, by generating a token,\n * and sending it to the user's e-mail (with the help of a DB adapter).\n * At the end, it returns a redirect to the `verify-request` page.\n */\nasync function sendToken(request, options) {\n    const { body } = request;\n    const { provider, callbacks, adapter } = options;\n    const normalizer = provider.normalizeIdentifier ?? defaultNormalizer;\n    const email = normalizer(body?.email);\n    const defaultUser = { id: crypto.randomUUID(), email, emailVerified: null };\n    const user = (await adapter.getUserByEmail(email)) ?? defaultUser;\n    const account = {\n        providerAccountId: email,\n        userId: user.id,\n        type: \"email\",\n        provider: provider.id,\n    };\n    let authorized;\n    try {\n        authorized = await callbacks.signIn({\n            user,\n            account,\n            email: { verificationRequest: true },\n        });\n    }\n    catch (e) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.AccessDenied(e);\n    }\n    if (!authorized)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.AccessDenied(\"AccessDenied\");\n    if (typeof authorized === \"string\") {\n        return {\n            redirect: await callbacks.redirect({\n                url: authorized,\n                baseUrl: options.url.origin,\n            }),\n        };\n    }\n    const { callbackUrl, theme } = options;\n    const token = (await provider.generateVerificationToken?.()) ?? (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.randomString)(32);\n    const ONE_DAY_IN_SECONDS = 86400;\n    const expires = new Date(Date.now() + (provider.maxAge ?? ONE_DAY_IN_SECONDS) * 1000);\n    const secret = provider.secret ?? options.secret;\n    const baseUrl = new URL(options.basePath, options.url.origin);\n    const sendRequest = provider.sendVerificationRequest({\n        identifier: email,\n        token,\n        expires,\n        url: `${baseUrl}/callback/${provider.id}?${new URLSearchParams({\n            callbackUrl,\n            token,\n            email,\n        })}`,\n        provider,\n        theme,\n        request: (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.toRequest)(request),\n    });\n    const createToken = adapter.createVerificationToken?.({\n        identifier: email,\n        token: await (0,_utils_web_js__WEBPACK_IMPORTED_MODULE_0__.createHash)(`${token}${secret}`),\n        expires,\n    });\n    await Promise.all([sendRequest, createToken]);\n    return {\n        redirect: `${baseUrl}/verify-request?${new URLSearchParams({\n            provider: provider.id,\n            type: provider.type,\n        })}`,\n    };\n}\nfunction defaultNormalizer(email) {\n    if (!email)\n        throw new Error(\"Missing email from request body.\");\n    // Get the first two elements only,\n    // separated by `@` from user input.\n    let [local, domain] = email.toLowerCase().trim().split(\"@\");\n    // The part before \"@\" can contain a \",\"\n    // but we remove it on the domain part\n    domain = domain.split(\",\")[0];\n    return `${local}@${domain}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9zaWduaW4vc2VuZC10b2tlbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUU7QUFDdkI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSxPQUFPO0FBQ25CLFlBQVksK0JBQStCO0FBQzNDO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJCQUEyQjtBQUNoRCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtCQUFrQixvREFBWTtBQUM5QjtBQUNBO0FBQ0Esa0JBQWtCLG9EQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFlBQVkscUJBQXFCO0FBQ2pDLG9FQUFvRSwyREFBWTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVEsWUFBWSxZQUFZLEdBQUc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsU0FBUyxFQUFFO0FBQ1g7QUFDQTtBQUNBLGlCQUFpQix3REFBUztBQUMxQixLQUFLO0FBQ0w7QUFDQTtBQUNBLHFCQUFxQix5REFBVSxJQUFJLE1BQU0sRUFBRSxPQUFPO0FBQ2xEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxxQkFBcUIsUUFBUSxrQkFBa0I7QUFDL0M7QUFDQTtBQUNBLFNBQVMsRUFBRTtBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU0sR0FBRyxPQUFPO0FBQzlCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcYWN0aW9uc1xcc2lnbmluXFxzZW5kLXRva2VuLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUhhc2gsIHJhbmRvbVN0cmluZywgdG9SZXF1ZXN0IH0gZnJvbSBcIi4uLy4uL3V0aWxzL3dlYi5qc1wiO1xuaW1wb3J0IHsgQWNjZXNzRGVuaWVkIH0gZnJvbSBcIi4uLy4uLy4uL2Vycm9ycy5qc1wiO1xuLyoqXG4gKiBTdGFydHMgYW4gZS1tYWlsIGxvZ2luIGZsb3csIGJ5IGdlbmVyYXRpbmcgYSB0b2tlbixcbiAqIGFuZCBzZW5kaW5nIGl0IHRvIHRoZSB1c2VyJ3MgZS1tYWlsICh3aXRoIHRoZSBoZWxwIG9mIGEgREIgYWRhcHRlcikuXG4gKiBBdCB0aGUgZW5kLCBpdCByZXR1cm5zIGEgcmVkaXJlY3QgdG8gdGhlIGB2ZXJpZnktcmVxdWVzdGAgcGFnZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRUb2tlbihyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyBib2R5IH0gPSByZXF1ZXN0O1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIGNhbGxiYWNrcywgYWRhcHRlciB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBub3JtYWxpemVyID0gcHJvdmlkZXIubm9ybWFsaXplSWRlbnRpZmllciA/PyBkZWZhdWx0Tm9ybWFsaXplcjtcbiAgICBjb25zdCBlbWFpbCA9IG5vcm1hbGl6ZXIoYm9keT8uZW1haWwpO1xuICAgIGNvbnN0IGRlZmF1bHRVc2VyID0geyBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwgZW1haWwsIGVtYWlsVmVyaWZpZWQ6IG51bGwgfTtcbiAgICBjb25zdCB1c2VyID0gKGF3YWl0IGFkYXB0ZXIuZ2V0VXNlckJ5RW1haWwoZW1haWwpKSA/PyBkZWZhdWx0VXNlcjtcbiAgICBjb25zdCBhY2NvdW50ID0ge1xuICAgICAgICBwcm92aWRlckFjY291bnRJZDogZW1haWwsXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgdHlwZTogXCJlbWFpbFwiLFxuICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIuaWQsXG4gICAgfTtcbiAgICBsZXQgYXV0aG9yaXplZDtcbiAgICB0cnkge1xuICAgICAgICBhdXRob3JpemVkID0gYXdhaXQgY2FsbGJhY2tzLnNpZ25Jbih7XG4gICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgYWNjb3VudCxcbiAgICAgICAgICAgIGVtYWlsOiB7IHZlcmlmaWNhdGlvblJlcXVlc3Q6IHRydWUgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBBY2Nlc3NEZW5pZWQoZSk7XG4gICAgfVxuICAgIGlmICghYXV0aG9yaXplZClcbiAgICAgICAgdGhyb3cgbmV3IEFjY2Vzc0RlbmllZChcIkFjY2Vzc0RlbmllZFwiKTtcbiAgICBpZiAodHlwZW9mIGF1dGhvcml6ZWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlZGlyZWN0OiBhd2FpdCBjYWxsYmFja3MucmVkaXJlY3Qoe1xuICAgICAgICAgICAgICAgIHVybDogYXV0aG9yaXplZCxcbiAgICAgICAgICAgICAgICBiYXNlVXJsOiBvcHRpb25zLnVybC5vcmlnaW4sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgeyBjYWxsYmFja1VybCwgdGhlbWUgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgdG9rZW4gPSAoYXdhaXQgcHJvdmlkZXIuZ2VuZXJhdGVWZXJpZmljYXRpb25Ub2tlbj8uKCkpID8/IHJhbmRvbVN0cmluZygzMik7XG4gICAgY29uc3QgT05FX0RBWV9JTl9TRUNPTkRTID0gODY0MDA7XG4gICAgY29uc3QgZXhwaXJlcyA9IG5ldyBEYXRlKERhdGUubm93KCkgKyAocHJvdmlkZXIubWF4QWdlID8/IE9ORV9EQVlfSU5fU0VDT05EUykgKiAxMDAwKTtcbiAgICBjb25zdCBzZWNyZXQgPSBwcm92aWRlci5zZWNyZXQgPz8gb3B0aW9ucy5zZWNyZXQ7XG4gICAgY29uc3QgYmFzZVVybCA9IG5ldyBVUkwob3B0aW9ucy5iYXNlUGF0aCwgb3B0aW9ucy51cmwub3JpZ2luKTtcbiAgICBjb25zdCBzZW5kUmVxdWVzdCA9IHByb3ZpZGVyLnNlbmRWZXJpZmljYXRpb25SZXF1ZXN0KHtcbiAgICAgICAgaWRlbnRpZmllcjogZW1haWwsXG4gICAgICAgIHRva2VuLFxuICAgICAgICBleHBpcmVzLFxuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L2NhbGxiYWNrLyR7cHJvdmlkZXIuaWR9PyR7bmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICBjYWxsYmFja1VybCxcbiAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgZW1haWwsXG4gICAgICAgIH0pfWAsXG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0aGVtZSxcbiAgICAgICAgcmVxdWVzdDogdG9SZXF1ZXN0KHJlcXVlc3QpLFxuICAgIH0pO1xuICAgIGNvbnN0IGNyZWF0ZVRva2VuID0gYWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25Ub2tlbj8uKHtcbiAgICAgICAgaWRlbnRpZmllcjogZW1haWwsXG4gICAgICAgIHRva2VuOiBhd2FpdCBjcmVhdGVIYXNoKGAke3Rva2VufSR7c2VjcmV0fWApLFxuICAgICAgICBleHBpcmVzLFxuICAgIH0pO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFtzZW5kUmVxdWVzdCwgY3JlYXRlVG9rZW5dKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWRpcmVjdDogYCR7YmFzZVVybH0vdmVyaWZ5LXJlcXVlc3Q/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlci5pZCxcbiAgICAgICAgICAgIHR5cGU6IHByb3ZpZGVyLnR5cGUsXG4gICAgICAgIH0pfWAsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHROb3JtYWxpemVyKGVtYWlsKSB7XG4gICAgaWYgKCFlbWFpbClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBlbWFpbCBmcm9tIHJlcXVlc3QgYm9keS5cIik7XG4gICAgLy8gR2V0IHRoZSBmaXJzdCB0d28gZWxlbWVudHMgb25seSxcbiAgICAvLyBzZXBhcmF0ZWQgYnkgYEBgIGZyb20gdXNlciBpbnB1dC5cbiAgICBsZXQgW2xvY2FsLCBkb21haW5dID0gZW1haWwudG9Mb3dlckNhc2UoKS50cmltKCkuc3BsaXQoXCJAXCIpO1xuICAgIC8vIFRoZSBwYXJ0IGJlZm9yZSBcIkBcIiBjYW4gY29udGFpbiBhIFwiLFwiXG4gICAgLy8gYnV0IHdlIHJlbW92ZSBpdCBvbiB0aGUgZG9tYWluIHBhcnRcbiAgICBkb21haW4gPSBkb21haW4uc3BsaXQoXCIsXCIpWzBdO1xuICAgIHJldHVybiBgJHtsb2NhbH1AJHtkb21haW59YDtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/signin/send-token.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/signout.js":
/*!********************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/signout.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n\n/**\n * Destroys the session.\n * If the session strategy is database,\n * The session is also deleted from the database.\n * In any case, the session cookie is cleared and\n * {@link AuthConfig[\"events\"].signOut} is emitted.\n */\nasync function signOut(cookies, sessionStore, options) {\n    const { jwt, events, callbackUrl: redirect, logger, session } = options;\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return { redirect, cookies };\n    try {\n        if (session.strategy === \"jwt\") {\n            const salt = options.cookies.sessionToken.name;\n            const token = await jwt.decode({ ...jwt, token: sessionToken, salt });\n            await events.signOut?.({ token });\n        }\n        else {\n            const session = await options.adapter?.deleteSession(sessionToken);\n            await events.signOut?.({ session });\n        }\n    }\n    catch (e) {\n        logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_0__.SignOutError(e));\n    }\n    cookies.push(...sessionStore.clean());\n    return { redirect, cookies };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL3NpZ25vdXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksb0NBQW9DO0FBQ3hDO0FBQ087QUFDUCxZQUFZLHNEQUFzRDtBQUNsRTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxtQ0FBbUM7QUFDaEYscUNBQXFDLE9BQU87QUFDNUM7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFNBQVM7QUFDOUM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9EQUFZO0FBQ3JDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFxzaWdub3V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpZ25PdXRFcnJvciB9IGZyb20gXCIuLi8uLi9lcnJvcnMuanNcIjtcbi8qKlxuICogRGVzdHJveXMgdGhlIHNlc3Npb24uXG4gKiBJZiB0aGUgc2Vzc2lvbiBzdHJhdGVneSBpcyBkYXRhYmFzZSxcbiAqIFRoZSBzZXNzaW9uIGlzIGFsc28gZGVsZXRlZCBmcm9tIHRoZSBkYXRhYmFzZS5cbiAqIEluIGFueSBjYXNlLCB0aGUgc2Vzc2lvbiBjb29raWUgaXMgY2xlYXJlZCBhbmRcbiAqIHtAbGluayBBdXRoQ29uZmlnW1wiZXZlbnRzXCJdLnNpZ25PdXR9IGlzIGVtaXR0ZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduT3V0KGNvb2tpZXMsIHNlc3Npb25TdG9yZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgand0LCBldmVudHMsIGNhbGxiYWNrVXJsOiByZWRpcmVjdCwgbG9nZ2VyLCBzZXNzaW9uIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IHNlc3Npb25Ub2tlbiA9IHNlc3Npb25TdG9yZS52YWx1ZTtcbiAgICBpZiAoIXNlc3Npb25Ub2tlbilcbiAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3QsIGNvb2tpZXMgfTtcbiAgICB0cnkge1xuICAgICAgICBpZiAoc2Vzc2lvbi5zdHJhdGVneSA9PT0gXCJqd3RcIikge1xuICAgICAgICAgICAgY29uc3Qgc2FsdCA9IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgand0LmRlY29kZSh7IC4uLmp3dCwgdG9rZW46IHNlc3Npb25Ub2tlbiwgc2FsdCB9KTtcbiAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5zaWduT3V0Py4oeyB0b2tlbiB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBvcHRpb25zLmFkYXB0ZXI/LmRlbGV0ZVNlc3Npb24oc2Vzc2lvblRva2VuKTtcbiAgICAgICAgICAgIGF3YWl0IGV2ZW50cy5zaWduT3V0Py4oeyBzZXNzaW9uIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihuZXcgU2lnbk91dEVycm9yKGUpKTtcbiAgICB9XG4gICAgY29va2llcy5wdXNoKC4uLnNlc3Npb25TdG9yZS5jbGVhbigpKTtcbiAgICByZXR1cm4geyByZWRpcmVjdCwgY29va2llcyB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/signout.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/signout.js":
/*!********************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/signout.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n\n/**\n * Destroys the session.\n * If the session strategy is database,\n * The session is also deleted from the database.\n * In any case, the session cookie is cleared and\n * {@link AuthConfig[\"events\"].signOut} is emitted.\n */\nasync function signOut(cookies, sessionStore, options) {\n    const { jwt, events, callbackUrl: redirect, logger, session } = options;\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return { redirect, cookies };\n    try {\n        if (session.strategy === \"jwt\") {\n            const salt = options.cookies.sessionToken.name;\n            const token = await jwt.decode({ ...jwt, token: sessionToken, salt });\n            await events.signOut?.({ token });\n        }\n        else {\n            const session = await options.adapter?.deleteSession(sessionToken);\n            await events.signOut?.({ session });\n        }\n    }\n    catch (e) {\n        logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_0__.SignOutError(e));\n    }\n    cookies.push(...sessionStore.clean());\n    return { redirect, cookies };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy9zaWdub3V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG9DQUFvQztBQUN4QztBQUNPO0FBQ1AsWUFBWSxzREFBc0Q7QUFDbEU7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsbUNBQW1DO0FBQ2hGLHFDQUFxQyxPQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxTQUFTO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvREFBWTtBQUNyQztBQUNBO0FBQ0EsYUFBYTtBQUNiIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcYWN0aW9uc1xcc2lnbm91dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTaWduT3V0RXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3JzLmpzXCI7XG4vKipcbiAqIERlc3Ryb3lzIHRoZSBzZXNzaW9uLlxuICogSWYgdGhlIHNlc3Npb24gc3RyYXRlZ3kgaXMgZGF0YWJhc2UsXG4gKiBUaGUgc2Vzc2lvbiBpcyBhbHNvIGRlbGV0ZWQgZnJvbSB0aGUgZGF0YWJhc2UuXG4gKiBJbiBhbnkgY2FzZSwgdGhlIHNlc3Npb24gY29va2llIGlzIGNsZWFyZWQgYW5kXG4gKiB7QGxpbmsgQXV0aENvbmZpZ1tcImV2ZW50c1wiXS5zaWduT3V0fSBpcyBlbWl0dGVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnbk91dChjb29raWVzLCBzZXNzaW9uU3RvcmUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGp3dCwgZXZlbnRzLCBjYWxsYmFja1VybDogcmVkaXJlY3QsIGxvZ2dlciwgc2Vzc2lvbiB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBzZXNzaW9uU3RvcmUudmFsdWU7XG4gICAgaWYgKCFzZXNzaW9uVG9rZW4pXG4gICAgICAgIHJldHVybiB7IHJlZGlyZWN0LCBjb29raWVzIH07XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHNlc3Npb24uc3RyYXRlZ3kgPT09IFwiand0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhbHQgPSBvcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWU7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGp3dC5kZWNvZGUoeyAuLi5qd3QsIHRva2VuOiBzZXNzaW9uVG9rZW4sIHNhbHQgfSk7XG4gICAgICAgICAgICBhd2FpdCBldmVudHMuc2lnbk91dD8uKHsgdG9rZW4gfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgb3B0aW9ucy5hZGFwdGVyPy5kZWxldGVTZXNzaW9uKHNlc3Npb25Ub2tlbik7XG4gICAgICAgICAgICBhd2FpdCBldmVudHMuc2lnbk91dD8uKHsgc2Vzc2lvbiB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IobmV3IFNpZ25PdXRFcnJvcihlKSk7XG4gICAgfVxuICAgIGNvb2tpZXMucHVzaCguLi5zZXNzaW9uU3RvcmUuY2xlYW4oKSk7XG4gICAgcmV0dXJuIHsgcmVkaXJlY3QsIGNvb2tpZXMgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/signout.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/actions/webauthn-options.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/webauthn-options.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   webAuthnOptions: () => (/* binding */ webAuthnOptions)\n/* harmony export */ });\n/* harmony import */ var _utils_session_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/session.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/session.js\");\n/* harmony import */ var _utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/webauthn-utils.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/webauthn-utils.js\");\n\n\n/**\n * Returns authentication or registration options for a WebAuthn flow\n * depending on the parameters provided.\n */\nasync function webAuthnOptions(request, options, sessionStore, cookies\n// @ts-expect-error issue with returning from a switch case\n) {\n    // Return an error if the adapter is missing or if the provider\n    // is not a webauthn provider.\n    const narrowOptions = (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__.assertInternalOptionsWebAuthn)(options);\n    const { provider } = narrowOptions;\n    // Extract the action from the query parameters\n    const { action } = (request.query ?? {});\n    // Action must be either \"register\", \"authenticate\", or undefined\n    if (action !== \"register\" &&\n        action !== \"authenticate\" &&\n        typeof action !== \"undefined\") {\n        return {\n            status: 400,\n            body: { error: \"Invalid action\" },\n            cookies,\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        };\n    }\n    // Get the user info from the session\n    const sessionUser = await (0,_utils_session_js__WEBPACK_IMPORTED_MODULE_0__.getLoggedInUser)(options, sessionStore);\n    // Extract user info from request\n    // If session user exists, we don't need to call getUserInfo\n    const getUserInfoResponse = sessionUser\n        ? {\n            user: sessionUser,\n            exists: true,\n        }\n        : await provider.getUserInfo(options, request);\n    const userInfo = getUserInfoResponse?.user;\n    // Make a decision on what kind of webauthn options to return\n    const decision = (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__.inferWebAuthnOptions)(action, !!sessionUser, getUserInfoResponse);\n    switch (decision) {\n        case \"authenticate\":\n            return (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__.getAuthenticationResponse)(narrowOptions, request, userInfo, cookies);\n        case \"register\":\n            if (typeof userInfo?.email === \"string\") {\n                return (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__.getRegistrationResponse)(narrowOptions, request, userInfo, cookies);\n            }\n            break;\n        default:\n            return {\n                status: 400,\n                body: { error: \"Invalid request\" },\n                cookies,\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9hY3Rpb25zL3dlYmF1dGhuLW9wdGlvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNEO0FBQ2dHO0FBQ3RKO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix1RkFBNkI7QUFDdkQsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0EsWUFBWSxTQUFTLHNCQUFzQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0VBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOEVBQW9CO0FBQ3pDO0FBQ0E7QUFDQSxtQkFBbUIsbUZBQXlCO0FBQzVDO0FBQ0E7QUFDQSx1QkFBdUIsaUZBQXVCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQTBCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxhY3Rpb25zXFx3ZWJhdXRobi1vcHRpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldExvZ2dlZEluVXNlciB9IGZyb20gXCIuLi91dGlscy9zZXNzaW9uLmpzXCI7XG5pbXBvcnQgeyBhc3NlcnRJbnRlcm5hbE9wdGlvbnNXZWJBdXRobiwgaW5mZXJXZWJBdXRobk9wdGlvbnMsIGdldEF1dGhlbnRpY2F0aW9uUmVzcG9uc2UsIGdldFJlZ2lzdHJhdGlvblJlc3BvbnNlLCB9IGZyb20gXCIuLi91dGlscy93ZWJhdXRobi11dGlscy5qc1wiO1xuLyoqXG4gKiBSZXR1cm5zIGF1dGhlbnRpY2F0aW9uIG9yIHJlZ2lzdHJhdGlvbiBvcHRpb25zIGZvciBhIFdlYkF1dGhuIGZsb3dcbiAqIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVycyBwcm92aWRlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdlYkF1dGhuT3B0aW9ucyhyZXF1ZXN0LCBvcHRpb25zLCBzZXNzaW9uU3RvcmUsIGNvb2tpZXNcbi8vIEB0cy1leHBlY3QtZXJyb3IgaXNzdWUgd2l0aCByZXR1cm5pbmcgZnJvbSBhIHN3aXRjaCBjYXNlXG4pIHtcbiAgICAvLyBSZXR1cm4gYW4gZXJyb3IgaWYgdGhlIGFkYXB0ZXIgaXMgbWlzc2luZyBvciBpZiB0aGUgcHJvdmlkZXJcbiAgICAvLyBpcyBub3QgYSB3ZWJhdXRobiBwcm92aWRlci5cbiAgICBjb25zdCBuYXJyb3dPcHRpb25zID0gYXNzZXJ0SW50ZXJuYWxPcHRpb25zV2ViQXV0aG4ob3B0aW9ucyk7XG4gICAgY29uc3QgeyBwcm92aWRlciB9ID0gbmFycm93T3B0aW9ucztcbiAgICAvLyBFeHRyYWN0IHRoZSBhY3Rpb24gZnJvbSB0aGUgcXVlcnkgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHsgYWN0aW9uIH0gPSAocmVxdWVzdC5xdWVyeSA/PyB7fSk7XG4gICAgLy8gQWN0aW9uIG11c3QgYmUgZWl0aGVyIFwicmVnaXN0ZXJcIiwgXCJhdXRoZW50aWNhdGVcIiwgb3IgdW5kZWZpbmVkXG4gICAgaWYgKGFjdGlvbiAhPT0gXCJyZWdpc3RlclwiICYmXG4gICAgICAgIGFjdGlvbiAhPT0gXCJhdXRoZW50aWNhdGVcIiAmJlxuICAgICAgICB0eXBlb2YgYWN0aW9uICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICAgIGJvZHk6IHsgZXJyb3I6IFwiSW52YWxpZCBhY3Rpb25cIiB9LFxuICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEdldCB0aGUgdXNlciBpbmZvIGZyb20gdGhlIHNlc3Npb25cbiAgICBjb25zdCBzZXNzaW9uVXNlciA9IGF3YWl0IGdldExvZ2dlZEluVXNlcihvcHRpb25zLCBzZXNzaW9uU3RvcmUpO1xuICAgIC8vIEV4dHJhY3QgdXNlciBpbmZvIGZyb20gcmVxdWVzdFxuICAgIC8vIElmIHNlc3Npb24gdXNlciBleGlzdHMsIHdlIGRvbid0IG5lZWQgdG8gY2FsbCBnZXRVc2VySW5mb1xuICAgIGNvbnN0IGdldFVzZXJJbmZvUmVzcG9uc2UgPSBzZXNzaW9uVXNlclxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHVzZXI6IHNlc3Npb25Vc2VyLFxuICAgICAgICAgICAgZXhpc3RzOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDogYXdhaXQgcHJvdmlkZXIuZ2V0VXNlckluZm8ob3B0aW9ucywgcmVxdWVzdCk7XG4gICAgY29uc3QgdXNlckluZm8gPSBnZXRVc2VySW5mb1Jlc3BvbnNlPy51c2VyO1xuICAgIC8vIE1ha2UgYSBkZWNpc2lvbiBvbiB3aGF0IGtpbmQgb2Ygd2ViYXV0aG4gb3B0aW9ucyB0byByZXR1cm5cbiAgICBjb25zdCBkZWNpc2lvbiA9IGluZmVyV2ViQXV0aG5PcHRpb25zKGFjdGlvbiwgISFzZXNzaW9uVXNlciwgZ2V0VXNlckluZm9SZXNwb25zZSk7XG4gICAgc3dpdGNoIChkZWNpc2lvbikge1xuICAgICAgICBjYXNlIFwiYXV0aGVudGljYXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gZ2V0QXV0aGVudGljYXRpb25SZXNwb25zZShuYXJyb3dPcHRpb25zLCByZXF1ZXN0LCB1c2VySW5mbywgY29va2llcyk7XG4gICAgICAgIGNhc2UgXCJyZWdpc3RlclwiOlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB1c2VySW5mbz8uZW1haWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UmVnaXN0cmF0aW9uUmVzcG9uc2UobmFycm93T3B0aW9ucywgcmVxdWVzdCwgdXNlckluZm8sIGNvb2tpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgICAgICAgIGJvZHk6IHsgZXJyb3I6IFwiSW52YWxpZCByZXF1ZXN0XCIgfSxcbiAgICAgICAgICAgICAgICBjb29raWVzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/actions/webauthn-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/actions/webauthn-options.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@auth/core/lib/actions/webauthn-options.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   webAuthnOptions: () => (/* binding */ webAuthnOptions)\n/* harmony export */ });\n/* harmony import */ var _utils_session_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/session.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/session.js\");\n/* harmony import */ var _utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/webauthn-utils.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/webauthn-utils.js\");\n\n\n/**\n * Returns authentication or registration options for a WebAuthn flow\n * depending on the parameters provided.\n */\nasync function webAuthnOptions(request, options, sessionStore, cookies\n// @ts-expect-error issue with returning from a switch case\n) {\n    // Return an error if the adapter is missing or if the provider\n    // is not a webauthn provider.\n    const narrowOptions = (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__.assertInternalOptionsWebAuthn)(options);\n    const { provider } = narrowOptions;\n    // Extract the action from the query parameters\n    const { action } = (request.query ?? {});\n    // Action must be either \"register\", \"authenticate\", or undefined\n    if (action !== \"register\" &&\n        action !== \"authenticate\" &&\n        typeof action !== \"undefined\") {\n        return {\n            status: 400,\n            body: { error: \"Invalid action\" },\n            cookies,\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        };\n    }\n    // Get the user info from the session\n    const sessionUser = await (0,_utils_session_js__WEBPACK_IMPORTED_MODULE_0__.getLoggedInUser)(options, sessionStore);\n    // Extract user info from request\n    // If session user exists, we don't need to call getUserInfo\n    const getUserInfoResponse = sessionUser\n        ? {\n            user: sessionUser,\n            exists: true,\n        }\n        : await provider.getUserInfo(options, request);\n    const userInfo = getUserInfoResponse?.user;\n    // Make a decision on what kind of webauthn options to return\n    const decision = (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__.inferWebAuthnOptions)(action, !!sessionUser, getUserInfoResponse);\n    switch (decision) {\n        case \"authenticate\":\n            return (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__.getAuthenticationResponse)(narrowOptions, request, userInfo, cookies);\n        case \"register\":\n            if (typeof userInfo?.email === \"string\") {\n                return (0,_utils_webauthn_utils_js__WEBPACK_IMPORTED_MODULE_1__.getRegistrationResponse)(narrowOptions, request, userInfo, cookies);\n            }\n            break;\n        default:\n            return {\n                status: 400,\n                body: { error: \"Invalid request\" },\n                cookies,\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvYWN0aW9ucy93ZWJhdXRobi1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzRDtBQUNnRztBQUN0SjtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdUZBQTZCO0FBQ3ZELFlBQVksV0FBVztBQUN2QjtBQUNBLFlBQVksU0FBUyxzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtFQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDhFQUFvQjtBQUN6QztBQUNBO0FBQ0EsbUJBQW1CLG1GQUF5QjtBQUM1QztBQUNBO0FBQ0EsdUJBQXVCLGlGQUF1QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBCQUEwQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcYWN0aW9uc1xcd2ViYXV0aG4tb3B0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRMb2dnZWRJblVzZXIgfSBmcm9tIFwiLi4vdXRpbHMvc2Vzc2lvbi5qc1wiO1xuaW1wb3J0IHsgYXNzZXJ0SW50ZXJuYWxPcHRpb25zV2ViQXV0aG4sIGluZmVyV2ViQXV0aG5PcHRpb25zLCBnZXRBdXRoZW50aWNhdGlvblJlc3BvbnNlLCBnZXRSZWdpc3RyYXRpb25SZXNwb25zZSwgfSBmcm9tIFwiLi4vdXRpbHMvd2ViYXV0aG4tdXRpbHMuanNcIjtcbi8qKlxuICogUmV0dXJucyBhdXRoZW50aWNhdGlvbiBvciByZWdpc3RyYXRpb24gb3B0aW9ucyBmb3IgYSBXZWJBdXRobiBmbG93XG4gKiBkZXBlbmRpbmcgb24gdGhlIHBhcmFtZXRlcnMgcHJvdmlkZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3ZWJBdXRobk9wdGlvbnMocmVxdWVzdCwgb3B0aW9ucywgc2Vzc2lvblN0b3JlLCBjb29raWVzXG4vLyBAdHMtZXhwZWN0LWVycm9yIGlzc3VlIHdpdGggcmV0dXJuaW5nIGZyb20gYSBzd2l0Y2ggY2FzZVxuKSB7XG4gICAgLy8gUmV0dXJuIGFuIGVycm9yIGlmIHRoZSBhZGFwdGVyIGlzIG1pc3Npbmcgb3IgaWYgdGhlIHByb3ZpZGVyXG4gICAgLy8gaXMgbm90IGEgd2ViYXV0aG4gcHJvdmlkZXIuXG4gICAgY29uc3QgbmFycm93T3B0aW9ucyA9IGFzc2VydEludGVybmFsT3B0aW9uc1dlYkF1dGhuKG9wdGlvbnMpO1xuICAgIGNvbnN0IHsgcHJvdmlkZXIgfSA9IG5hcnJvd09wdGlvbnM7XG4gICAgLy8gRXh0cmFjdCB0aGUgYWN0aW9uIGZyb20gdGhlIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICBjb25zdCB7IGFjdGlvbiB9ID0gKHJlcXVlc3QucXVlcnkgPz8ge30pO1xuICAgIC8vIEFjdGlvbiBtdXN0IGJlIGVpdGhlciBcInJlZ2lzdGVyXCIsIFwiYXV0aGVudGljYXRlXCIsIG9yIHVuZGVmaW5lZFxuICAgIGlmIChhY3Rpb24gIT09IFwicmVnaXN0ZXJcIiAmJlxuICAgICAgICBhY3Rpb24gIT09IFwiYXV0aGVudGljYXRlXCIgJiZcbiAgICAgICAgdHlwZW9mIGFjdGlvbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgICBib2R5OiB7IGVycm9yOiBcIkludmFsaWQgYWN0aW9uXCIgfSxcbiAgICAgICAgICAgIGNvb2tpZXMsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBHZXQgdGhlIHVzZXIgaW5mbyBmcm9tIHRoZSBzZXNzaW9uXG4gICAgY29uc3Qgc2Vzc2lvblVzZXIgPSBhd2FpdCBnZXRMb2dnZWRJblVzZXIob3B0aW9ucywgc2Vzc2lvblN0b3JlKTtcbiAgICAvLyBFeHRyYWN0IHVzZXIgaW5mbyBmcm9tIHJlcXVlc3RcbiAgICAvLyBJZiBzZXNzaW9uIHVzZXIgZXhpc3RzLCB3ZSBkb24ndCBuZWVkIHRvIGNhbGwgZ2V0VXNlckluZm9cbiAgICBjb25zdCBnZXRVc2VySW5mb1Jlc3BvbnNlID0gc2Vzc2lvblVzZXJcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB1c2VyOiBzZXNzaW9uVXNlcixcbiAgICAgICAgICAgIGV4aXN0czogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgICA6IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKG9wdGlvbnMsIHJlcXVlc3QpO1xuICAgIGNvbnN0IHVzZXJJbmZvID0gZ2V0VXNlckluZm9SZXNwb25zZT8udXNlcjtcbiAgICAvLyBNYWtlIGEgZGVjaXNpb24gb24gd2hhdCBraW5kIG9mIHdlYmF1dGhuIG9wdGlvbnMgdG8gcmV0dXJuXG4gICAgY29uc3QgZGVjaXNpb24gPSBpbmZlcldlYkF1dGhuT3B0aW9ucyhhY3Rpb24sICEhc2Vzc2lvblVzZXIsIGdldFVzZXJJbmZvUmVzcG9uc2UpO1xuICAgIHN3aXRjaCAoZGVjaXNpb24pIHtcbiAgICAgICAgY2FzZSBcImF1dGhlbnRpY2F0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIGdldEF1dGhlbnRpY2F0aW9uUmVzcG9uc2UobmFycm93T3B0aW9ucywgcmVxdWVzdCwgdXNlckluZm8sIGNvb2tpZXMpO1xuICAgICAgICBjYXNlIFwicmVnaXN0ZXJcIjpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXNlckluZm8/LmVtYWlsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFJlZ2lzdHJhdGlvblJlc3BvbnNlKG5hcnJvd09wdGlvbnMsIHJlcXVlc3QsIHVzZXJJbmZvLCBjb29raWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICAgICAgICBib2R5OiB7IGVycm9yOiBcIkludmFsaWQgcmVxdWVzdFwiIH0sXG4gICAgICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/actions/webauthn-options.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/index.js":
/*!**********************************************!*\
  !*** ./node_modules/@auth/core/lib/index.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthInternal: () => (/* binding */ AuthInternal),\n/* harmony export */   customFetch: () => (/* reexport safe */ _symbols_js__WEBPACK_IMPORTED_MODULE_6__.customFetch),\n/* harmony export */   raw: () => (/* reexport safe */ _symbols_js__WEBPACK_IMPORTED_MODULE_6__.raw),\n/* harmony export */   skipCSRFCheck: () => (/* reexport safe */ _symbols_js__WEBPACK_IMPORTED_MODULE_6__.skipCSRFCheck)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_cookie_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/cookie.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/cookie.js\");\n/* harmony import */ var _init_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./init.js */ \"(action-browser)/./node_modules/@auth/core/lib/init.js\");\n/* harmony import */ var _pages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/index.js */ \"(action-browser)/./node_modules/@auth/core/lib/pages/index.js\");\n/* harmony import */ var _actions_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./actions/index.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/index.js\");\n/* harmony import */ var _actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions/callback/oauth/csrf-token.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js\");\n/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./symbols.js */ \"(action-browser)/./node_modules/@auth/core/lib/symbols.js\");\n\n\n\n\n\n\n\n\n/** @internal */\nasync function AuthInternal(request, authOptions) {\n    const { action, providerId, error, method } = request;\n    const csrfDisabled = authOptions.skipCSRFCheck === _symbols_js__WEBPACK_IMPORTED_MODULE_6__.skipCSRFCheck;\n    const { options, cookies } = await (0,_init_js__WEBPACK_IMPORTED_MODULE_2__.init)({\n        authOptions,\n        action,\n        providerId,\n        url: request.url,\n        callbackUrl: request.body?.callbackUrl ?? request.query?.callbackUrl,\n        csrfToken: request.body?.csrfToken,\n        cookies: request.cookies,\n        isPost: method === \"POST\",\n        csrfDisabled,\n    });\n    const sessionStore = new _utils_cookie_js__WEBPACK_IMPORTED_MODULE_1__.SessionStore(options.cookies.sessionToken, request.cookies, options.logger);\n    if (method === \"GET\") {\n        const render = (0,_pages_index_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({ ...options, query: request.query, cookies });\n        switch (action) {\n            case \"callback\":\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.callback(request, options, sessionStore, cookies);\n            case \"csrf\":\n                return render.csrf(csrfDisabled, options, cookies);\n            case \"error\":\n                return render.error(error);\n            case \"providers\":\n                return render.providers(options.providers);\n            case \"session\":\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.session(options, sessionStore, cookies);\n            case \"signin\":\n                return render.signin(providerId, error);\n            case \"signout\":\n                return render.signout();\n            case \"verify-request\":\n                return render.verifyRequest();\n            case \"webauthn-options\":\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.webAuthnOptions(request, options, sessionStore, cookies);\n            default:\n        }\n    }\n    else {\n        const { csrfTokenVerified } = options;\n        switch (action) {\n            case \"callback\":\n                if (options.provider.type === \"credentials\")\n                    // Verified CSRF Token required for credentials providers only\n                    (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__.validateCSRF)(action, csrfTokenVerified);\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.callback(request, options, sessionStore, cookies);\n            case \"session\":\n                (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__.validateCSRF)(action, csrfTokenVerified);\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.session(options, sessionStore, cookies, true, request.body?.data);\n            case \"signin\":\n                (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__.validateCSRF)(action, csrfTokenVerified);\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.signIn(request, cookies, options);\n            case \"signout\":\n                (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__.validateCSRF)(action, csrfTokenVerified);\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.signOut(cookies, sessionStore, options);\n            default:\n        }\n    }\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.UnknownAction(`Cannot handle action: ${action}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUE2QztBQUNJO0FBQ2hCO0FBQ1M7QUFDSTtBQUN3QjtBQUN6QjtBQUNrQjtBQUMvRDtBQUNPO0FBQ1AsWUFBWSxvQ0FBb0M7QUFDaEQsdURBQXVELHNEQUFhO0FBQ3BFLFlBQVksbUJBQW1CLFFBQVEsOENBQUk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDZCQUE2QiwwREFBWTtBQUN6QztBQUNBLHVCQUF1QiwyREFBVSxHQUFHLDJDQUEyQztBQUMvRTtBQUNBO0FBQ0EsNkJBQTZCLHVEQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixzREFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw4REFBdUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0JBQW9CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1GQUFZO0FBQ2hDLDZCQUE2Qix1REFBZ0I7QUFDN0M7QUFDQSxnQkFBZ0IsbUZBQVk7QUFDNUIsNkJBQTZCLHNEQUFlO0FBQzVDO0FBQ0EsZ0JBQWdCLG1GQUFZO0FBQzVCLDZCQUE2QixxREFBYztBQUMzQztBQUNBLGdCQUFnQixtRkFBWTtBQUM1Qiw2QkFBNkIsc0RBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxREFBYSwwQkFBMEIsT0FBTztBQUM1RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVua25vd25BY3Rpb24gfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBTZXNzaW9uU3RvcmUgfSBmcm9tIFwiLi91dGlscy9jb29raWUuanNcIjtcbmltcG9ydCB7IGluaXQgfSBmcm9tIFwiLi9pbml0LmpzXCI7XG5pbXBvcnQgcmVuZGVyUGFnZSBmcm9tIFwiLi9wYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tIFwiLi9hY3Rpb25zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUNTUkYgfSBmcm9tIFwiLi9hY3Rpb25zL2NhbGxiYWNrL29hdXRoL2NzcmYtdG9rZW4uanNcIjtcbmltcG9ydCB7IHNraXBDU1JGQ2hlY2sgfSBmcm9tIFwiLi9zeW1ib2xzLmpzXCI7XG5leHBvcnQgeyBjdXN0b21GZXRjaCwgcmF3LCBza2lwQ1NSRkNoZWNrIH0gZnJvbSBcIi4vc3ltYm9scy5qc1wiO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEF1dGhJbnRlcm5hbChyZXF1ZXN0LCBhdXRoT3B0aW9ucykge1xuICAgIGNvbnN0IHsgYWN0aW9uLCBwcm92aWRlcklkLCBlcnJvciwgbWV0aG9kIH0gPSByZXF1ZXN0O1xuICAgIGNvbnN0IGNzcmZEaXNhYmxlZCA9IGF1dGhPcHRpb25zLnNraXBDU1JGQ2hlY2sgPT09IHNraXBDU1JGQ2hlY2s7XG4gICAgY29uc3QgeyBvcHRpb25zLCBjb29raWVzIH0gPSBhd2FpdCBpbml0KHtcbiAgICAgICAgYXV0aE9wdGlvbnMsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgcHJvdmlkZXJJZCxcbiAgICAgICAgdXJsOiByZXF1ZXN0LnVybCxcbiAgICAgICAgY2FsbGJhY2tVcmw6IHJlcXVlc3QuYm9keT8uY2FsbGJhY2tVcmwgPz8gcmVxdWVzdC5xdWVyeT8uY2FsbGJhY2tVcmwsXG4gICAgICAgIGNzcmZUb2tlbjogcmVxdWVzdC5ib2R5Py5jc3JmVG9rZW4sXG4gICAgICAgIGNvb2tpZXM6IHJlcXVlc3QuY29va2llcyxcbiAgICAgICAgaXNQb3N0OiBtZXRob2QgPT09IFwiUE9TVFwiLFxuICAgICAgICBjc3JmRGlzYWJsZWQsXG4gICAgfSk7XG4gICAgY29uc3Qgc2Vzc2lvblN0b3JlID0gbmV3IFNlc3Npb25TdG9yZShvcHRpb25zLmNvb2tpZXMuc2Vzc2lvblRva2VuLCByZXF1ZXN0LmNvb2tpZXMsIG9wdGlvbnMubG9nZ2VyKTtcbiAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgICAgIGNvbnN0IHJlbmRlciA9IHJlbmRlclBhZ2UoeyAuLi5vcHRpb25zLCBxdWVyeTogcmVxdWVzdC5xdWVyeSwgY29va2llcyB9KTtcbiAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgXCJjYWxsYmFja1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBhY3Rpb25zLmNhbGxiYWNrKHJlcXVlc3QsIG9wdGlvbnMsIHNlc3Npb25TdG9yZSwgY29va2llcyk7XG4gICAgICAgICAgICBjYXNlIFwiY3NyZlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXIuY3NyZihjc3JmRGlzYWJsZWQsIG9wdGlvbnMsIGNvb2tpZXMpO1xuICAgICAgICAgICAgY2FzZSBcImVycm9yXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlci5wcm92aWRlcnMob3B0aW9ucy5wcm92aWRlcnMpO1xuICAgICAgICAgICAgY2FzZSBcInNlc3Npb25cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgYWN0aW9ucy5zZXNzaW9uKG9wdGlvbnMsIHNlc3Npb25TdG9yZSwgY29va2llcyk7XG4gICAgICAgICAgICBjYXNlIFwic2lnbmluXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlci5zaWduaW4ocHJvdmlkZXJJZCwgZXJyb3IpO1xuICAgICAgICAgICAgY2FzZSBcInNpZ25vdXRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyLnNpZ25vdXQoKTtcbiAgICAgICAgICAgIGNhc2UgXCJ2ZXJpZnktcmVxdWVzdFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXIudmVyaWZ5UmVxdWVzdCgpO1xuICAgICAgICAgICAgY2FzZSBcIndlYmF1dGhuLW9wdGlvbnNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgYWN0aW9ucy53ZWJBdXRobk9wdGlvbnMocmVxdWVzdCwgb3B0aW9ucywgc2Vzc2lvblN0b3JlLCBjb29raWVzKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgY3NyZlRva2VuVmVyaWZpZWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwiY2FsbGJhY2tcIjpcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wcm92aWRlci50eXBlID09PSBcImNyZWRlbnRpYWxzXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWVkIENTUkYgVG9rZW4gcmVxdWlyZWQgZm9yIGNyZWRlbnRpYWxzIHByb3ZpZGVycyBvbmx5XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ1NSRihhY3Rpb24sIGNzcmZUb2tlblZlcmlmaWVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgYWN0aW9ucy5jYWxsYmFjayhyZXF1ZXN0LCBvcHRpb25zLCBzZXNzaW9uU3RvcmUsIGNvb2tpZXMpO1xuICAgICAgICAgICAgY2FzZSBcInNlc3Npb25cIjpcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNTUkYoYWN0aW9uLCBjc3JmVG9rZW5WZXJpZmllZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFjdGlvbnMuc2Vzc2lvbihvcHRpb25zLCBzZXNzaW9uU3RvcmUsIGNvb2tpZXMsIHRydWUsIHJlcXVlc3QuYm9keT8uZGF0YSk7XG4gICAgICAgICAgICBjYXNlIFwic2lnbmluXCI6XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVDU1JGKGFjdGlvbiwgY3NyZlRva2VuVmVyaWZpZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBhY3Rpb25zLnNpZ25JbihyZXF1ZXN0LCBjb29raWVzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNhc2UgXCJzaWdub3V0XCI6XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVDU1JGKGFjdGlvbiwgY3NyZlRva2VuVmVyaWZpZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBhY3Rpb25zLnNpZ25PdXQoY29va2llcywgc2Vzc2lvblN0b3JlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IFVua25vd25BY3Rpb24oYENhbm5vdCBoYW5kbGUgYWN0aW9uOiAke2FjdGlvbn1gKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/index.js":
/*!**********************************************!*\
  !*** ./node_modules/@auth/core/lib/index.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthInternal: () => (/* binding */ AuthInternal),\n/* harmony export */   customFetch: () => (/* reexport safe */ _symbols_js__WEBPACK_IMPORTED_MODULE_6__.customFetch),\n/* harmony export */   raw: () => (/* reexport safe */ _symbols_js__WEBPACK_IMPORTED_MODULE_6__.raw),\n/* harmony export */   skipCSRFCheck: () => (/* reexport safe */ _symbols_js__WEBPACK_IMPORTED_MODULE_6__.skipCSRFCheck)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_cookie_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/cookie.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/cookie.js\");\n/* harmony import */ var _init_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./init.js */ \"(rsc)/./node_modules/@auth/core/lib/init.js\");\n/* harmony import */ var _pages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/index.js */ \"(rsc)/./node_modules/@auth/core/lib/pages/index.js\");\n/* harmony import */ var _actions_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./actions/index.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/index.js\");\n/* harmony import */ var _actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions/callback/oauth/csrf-token.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js\");\n/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./symbols.js */ \"(rsc)/./node_modules/@auth/core/lib/symbols.js\");\n\n\n\n\n\n\n\n\n/** @internal */\nasync function AuthInternal(request, authOptions) {\n    const { action, providerId, error, method } = request;\n    const csrfDisabled = authOptions.skipCSRFCheck === _symbols_js__WEBPACK_IMPORTED_MODULE_6__.skipCSRFCheck;\n    const { options, cookies } = await (0,_init_js__WEBPACK_IMPORTED_MODULE_2__.init)({\n        authOptions,\n        action,\n        providerId,\n        url: request.url,\n        callbackUrl: request.body?.callbackUrl ?? request.query?.callbackUrl,\n        csrfToken: request.body?.csrfToken,\n        cookies: request.cookies,\n        isPost: method === \"POST\",\n        csrfDisabled,\n    });\n    const sessionStore = new _utils_cookie_js__WEBPACK_IMPORTED_MODULE_1__.SessionStore(options.cookies.sessionToken, request.cookies, options.logger);\n    if (method === \"GET\") {\n        const render = (0,_pages_index_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({ ...options, query: request.query, cookies });\n        switch (action) {\n            case \"callback\":\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.callback(request, options, sessionStore, cookies);\n            case \"csrf\":\n                return render.csrf(csrfDisabled, options, cookies);\n            case \"error\":\n                return render.error(error);\n            case \"providers\":\n                return render.providers(options.providers);\n            case \"session\":\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.session(options, sessionStore, cookies);\n            case \"signin\":\n                return render.signin(providerId, error);\n            case \"signout\":\n                return render.signout();\n            case \"verify-request\":\n                return render.verifyRequest();\n            case \"webauthn-options\":\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.webAuthnOptions(request, options, sessionStore, cookies);\n            default:\n        }\n    }\n    else {\n        const { csrfTokenVerified } = options;\n        switch (action) {\n            case \"callback\":\n                if (options.provider.type === \"credentials\")\n                    // Verified CSRF Token required for credentials providers only\n                    (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__.validateCSRF)(action, csrfTokenVerified);\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.callback(request, options, sessionStore, cookies);\n            case \"session\":\n                (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__.validateCSRF)(action, csrfTokenVerified);\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.session(options, sessionStore, cookies, true, request.body?.data);\n            case \"signin\":\n                (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__.validateCSRF)(action, csrfTokenVerified);\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.signIn(request, cookies, options);\n            case \"signout\":\n                (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_5__.validateCSRF)(action, csrfTokenVerified);\n                return await _actions_index_js__WEBPACK_IMPORTED_MODULE_4__.signOut(cookies, sessionStore, options);\n            default:\n        }\n    }\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.UnknownAction(`Cannot handle action: ${action}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFDSTtBQUNoQjtBQUNTO0FBQ0k7QUFDd0I7QUFDekI7QUFDa0I7QUFDL0Q7QUFDTztBQUNQLFlBQVksb0NBQW9DO0FBQ2hELHVEQUF1RCxzREFBYTtBQUNwRSxZQUFZLG1CQUFtQixRQUFRLDhDQUFJO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw2QkFBNkIsMERBQVk7QUFDekM7QUFDQSx1QkFBdUIsMkRBQVUsR0FBRywyQ0FBMkM7QUFDL0U7QUFDQTtBQUNBLDZCQUE2Qix1REFBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsc0RBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOERBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9CQUFvQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtRkFBWTtBQUNoQyw2QkFBNkIsdURBQWdCO0FBQzdDO0FBQ0EsZ0JBQWdCLG1GQUFZO0FBQzVCLDZCQUE2QixzREFBZTtBQUM1QztBQUNBLGdCQUFnQixtRkFBWTtBQUM1Qiw2QkFBNkIscURBQWM7QUFDM0M7QUFDQSxnQkFBZ0IsbUZBQVk7QUFDNUIsNkJBQTZCLHNEQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLGNBQWMscURBQWEsMEJBQTBCLE9BQU87QUFDNUQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVbmtub3duQWN0aW9uIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgU2Vzc2lvblN0b3JlIH0gZnJvbSBcIi4vdXRpbHMvY29va2llLmpzXCI7XG5pbXBvcnQgeyBpbml0IH0gZnJvbSBcIi4vaW5pdC5qc1wiO1xuaW1wb3J0IHJlbmRlclBhZ2UgZnJvbSBcIi4vcGFnZXMvaW5kZXguanNcIjtcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSBcIi4vYWN0aW9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVDU1JGIH0gZnJvbSBcIi4vYWN0aW9ucy9jYWxsYmFjay9vYXV0aC9jc3JmLXRva2VuLmpzXCI7XG5pbXBvcnQgeyBza2lwQ1NSRkNoZWNrIH0gZnJvbSBcIi4vc3ltYm9scy5qc1wiO1xuZXhwb3J0IHsgY3VzdG9tRmV0Y2gsIHJhdywgc2tpcENTUkZDaGVjayB9IGZyb20gXCIuL3N5bWJvbHMuanNcIjtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBBdXRoSW50ZXJuYWwocmVxdWVzdCwgYXV0aE9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFjdGlvbiwgcHJvdmlkZXJJZCwgZXJyb3IsIG1ldGhvZCB9ID0gcmVxdWVzdDtcbiAgICBjb25zdCBjc3JmRGlzYWJsZWQgPSBhdXRoT3B0aW9ucy5za2lwQ1NSRkNoZWNrID09PSBza2lwQ1NSRkNoZWNrO1xuICAgIGNvbnN0IHsgb3B0aW9ucywgY29va2llcyB9ID0gYXdhaXQgaW5pdCh7XG4gICAgICAgIGF1dGhPcHRpb25zLFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIHByb3ZpZGVySWQsXG4gICAgICAgIHVybDogcmVxdWVzdC51cmwsXG4gICAgICAgIGNhbGxiYWNrVXJsOiByZXF1ZXN0LmJvZHk/LmNhbGxiYWNrVXJsID8/IHJlcXVlc3QucXVlcnk/LmNhbGxiYWNrVXJsLFxuICAgICAgICBjc3JmVG9rZW46IHJlcXVlc3QuYm9keT8uY3NyZlRva2VuLFxuICAgICAgICBjb29raWVzOiByZXF1ZXN0LmNvb2tpZXMsXG4gICAgICAgIGlzUG9zdDogbWV0aG9kID09PSBcIlBPU1RcIixcbiAgICAgICAgY3NyZkRpc2FibGVkLFxuICAgIH0pO1xuICAgIGNvbnN0IHNlc3Npb25TdG9yZSA9IG5ldyBTZXNzaW9uU3RvcmUob3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbiwgcmVxdWVzdC5jb29raWVzLCBvcHRpb25zLmxvZ2dlcik7XG4gICAgaWYgKG1ldGhvZCA9PT0gXCJHRVRcIikge1xuICAgICAgICBjb25zdCByZW5kZXIgPSByZW5kZXJQYWdlKHsgLi4ub3B0aW9ucywgcXVlcnk6IHJlcXVlc3QucXVlcnksIGNvb2tpZXMgfSk7XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwiY2FsbGJhY2tcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgYWN0aW9ucy5jYWxsYmFjayhyZXF1ZXN0LCBvcHRpb25zLCBzZXNzaW9uU3RvcmUsIGNvb2tpZXMpO1xuICAgICAgICAgICAgY2FzZSBcImNzcmZcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyLmNzcmYoY3NyZkRpc2FibGVkLCBvcHRpb25zLCBjb29raWVzKTtcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyc1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXIucHJvdmlkZXJzKG9wdGlvbnMucHJvdmlkZXJzKTtcbiAgICAgICAgICAgIGNhc2UgXCJzZXNzaW9uXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFjdGlvbnMuc2Vzc2lvbihvcHRpb25zLCBzZXNzaW9uU3RvcmUsIGNvb2tpZXMpO1xuICAgICAgICAgICAgY2FzZSBcInNpZ25pblwiOlxuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXIuc2lnbmluKHByb3ZpZGVySWQsIGVycm9yKTtcbiAgICAgICAgICAgIGNhc2UgXCJzaWdub3V0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlci5zaWdub3V0KCk7XG4gICAgICAgICAgICBjYXNlIFwidmVyaWZ5LXJlcXVlc3RcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyLnZlcmlmeVJlcXVlc3QoKTtcbiAgICAgICAgICAgIGNhc2UgXCJ3ZWJhdXRobi1vcHRpb25zXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFjdGlvbnMud2ViQXV0aG5PcHRpb25zKHJlcXVlc3QsIG9wdGlvbnMsIHNlc3Npb25TdG9yZSwgY29va2llcyk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB7IGNzcmZUb2tlblZlcmlmaWVkIH0gPSBvcHRpb25zO1xuICAgICAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBcImNhbGxiYWNrXCI6XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucHJvdmlkZXIudHlwZSA9PT0gXCJjcmVkZW50aWFsc1wiKVxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmllZCBDU1JGIFRva2VuIHJlcXVpcmVkIGZvciBjcmVkZW50aWFscyBwcm92aWRlcnMgb25seVxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUNTUkYoYWN0aW9uLCBjc3JmVG9rZW5WZXJpZmllZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFjdGlvbnMuY2FsbGJhY2socmVxdWVzdCwgb3B0aW9ucywgc2Vzc2lvblN0b3JlLCBjb29raWVzKTtcbiAgICAgICAgICAgIGNhc2UgXCJzZXNzaW9uXCI6XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVDU1JGKGFjdGlvbiwgY3NyZlRva2VuVmVyaWZpZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBhY3Rpb25zLnNlc3Npb24ob3B0aW9ucywgc2Vzc2lvblN0b3JlLCBjb29raWVzLCB0cnVlLCByZXF1ZXN0LmJvZHk/LmRhdGEpO1xuICAgICAgICAgICAgY2FzZSBcInNpZ25pblwiOlxuICAgICAgICAgICAgICAgIHZhbGlkYXRlQ1NSRihhY3Rpb24sIGNzcmZUb2tlblZlcmlmaWVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgYWN0aW9ucy5zaWduSW4ocmVxdWVzdCwgY29va2llcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBjYXNlIFwic2lnbm91dFwiOlxuICAgICAgICAgICAgICAgIHZhbGlkYXRlQ1NSRihhY3Rpb24sIGNzcmZUb2tlblZlcmlmaWVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgYWN0aW9ucy5zaWduT3V0KGNvb2tpZXMsIHNlc3Npb25TdG9yZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBVbmtub3duQWN0aW9uKGBDYW5ub3QgaGFuZGxlIGFjdGlvbjogJHthY3Rpb259YCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/init.js":
/*!*********************************************!*\
  !*** ./node_modules/@auth/core/lib/init.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultCallbacks: () => (/* binding */ defaultCallbacks),\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _jwt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../jwt.js */ \"(action-browser)/./node_modules/@auth/core/jwt.js\");\n/* harmony import */ var _utils_callback_url_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/callback-url.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/callback-url.js\");\n/* harmony import */ var _utils_cookie_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/cookie.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/cookie.js\");\n/* harmony import */ var _actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions/callback/oauth/csrf-token.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_providers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/providers.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/providers.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/logger.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/logger.js\");\n/* harmony import */ var _utils_merge_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/merge.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/merge.js\");\n\n\n\n\n\n\n\n\nconst defaultCallbacks = {\n    signIn() {\n        return true;\n    },\n    redirect({ url, baseUrl }) {\n        if (url.startsWith(\"/\"))\n            return `${baseUrl}${url}`;\n        else if (new URL(url).origin === baseUrl)\n            return url;\n        return baseUrl;\n    },\n    session({ session }) {\n        return {\n            user: {\n                name: session.user?.name,\n                email: session.user?.email,\n                image: session.user?.image,\n            },\n            expires: session.expires?.toISOString?.() ?? session.expires,\n        };\n    },\n    jwt({ token }) {\n        return token;\n    },\n};\n/** Initialize all internal options and cookies. */\nasync function init({ authOptions: config, providerId, action, url, cookies: reqCookies, callbackUrl: reqCallbackUrl, csrfToken: reqCsrfToken, csrfDisabled, isPost, }) {\n    const logger = (0,_utils_logger_js__WEBPACK_IMPORTED_MODULE_6__.setLogger)(config);\n    const { providers, provider } = (0,_utils_providers_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({ url, providerId, config });\n    const maxAge = 30 * 24 * 60 * 60; // Sessions expire after 30 days of being idle by default\n    let isOnRedirectProxy = false;\n    if ((provider?.type === \"oauth\" || provider?.type === \"oidc\") &&\n        provider.redirectProxyUrl) {\n        try {\n            isOnRedirectProxy =\n                new URL(provider.redirectProxyUrl).origin === url.origin;\n        }\n        catch {\n            throw new TypeError(`redirectProxyUrl must be a valid URL. Received: ${provider.redirectProxyUrl}`);\n        }\n    }\n    // User provided options are overridden by other options,\n    // except for the options with special handling above\n    const options = {\n        debug: false,\n        pages: {},\n        theme: {\n            colorScheme: \"auto\",\n            logo: \"\",\n            brandColor: \"\",\n            buttonText: \"\",\n        },\n        // Custom options override defaults\n        ...config,\n        // These computed settings can have values in userOptions but we override them\n        // and are request-specific.\n        url,\n        action,\n        // @ts-expect-errors\n        provider,\n        cookies: (0,_utils_merge_js__WEBPACK_IMPORTED_MODULE_7__.merge)(_utils_cookie_js__WEBPACK_IMPORTED_MODULE_2__.defaultCookies(config.useSecureCookies ?? url.protocol === \"https:\"), config.cookies),\n        providers,\n        // Session options\n        session: {\n            // If no adapter specified, force use of JSON Web Tokens (stateless)\n            strategy: config.adapter ? \"database\" : \"jwt\",\n            maxAge,\n            updateAge: 24 * 60 * 60,\n            generateSessionToken: () => crypto.randomUUID(),\n            ...config.session,\n        },\n        // JWT options\n        jwt: {\n            secret: config.secret, // Asserted in assert.ts\n            maxAge: config.session?.maxAge ?? maxAge, // default to same as `session.maxAge`\n            encode: _jwt_js__WEBPACK_IMPORTED_MODULE_0__.encode,\n            decode: _jwt_js__WEBPACK_IMPORTED_MODULE_0__.decode,\n            ...config.jwt,\n        },\n        // Event messages\n        events: eventsErrorHandler(config.events ?? {}, logger),\n        adapter: adapterErrorHandler(config.adapter, logger),\n        // Callback functions\n        callbacks: { ...defaultCallbacks, ...config.callbacks },\n        logger,\n        callbackUrl: url.origin,\n        isOnRedirectProxy,\n        experimental: {\n            ...config.experimental,\n        },\n    };\n    // Init cookies\n    const cookies = [];\n    if (csrfDisabled) {\n        options.csrfTokenVerified = true;\n    }\n    else {\n        const { csrfToken, cookie: csrfCookie, csrfTokenVerified, } = await (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_3__.createCSRFToken)({\n            options,\n            cookieValue: reqCookies?.[options.cookies.csrfToken.name],\n            isPost,\n            bodyValue: reqCsrfToken,\n        });\n        options.csrfToken = csrfToken;\n        options.csrfTokenVerified = csrfTokenVerified;\n        if (csrfCookie) {\n            cookies.push({\n                name: options.cookies.csrfToken.name,\n                value: csrfCookie,\n                options: options.cookies.csrfToken.options,\n            });\n        }\n    }\n    const { callbackUrl, callbackUrlCookie } = await (0,_utils_callback_url_js__WEBPACK_IMPORTED_MODULE_1__.createCallbackUrl)({\n        options,\n        cookieValue: reqCookies?.[options.cookies.callbackUrl.name],\n        paramValue: reqCallbackUrl,\n    });\n    options.callbackUrl = callbackUrl;\n    if (callbackUrlCookie) {\n        cookies.push({\n            name: options.cookies.callbackUrl.name,\n            value: callbackUrlCookie,\n            options: options.cookies.callbackUrl.options,\n        });\n    }\n    return { options, cookies };\n}\n/** Wraps an object of methods and adds error handling. */\nfunction eventsErrorHandler(methods, logger) {\n    return Object.keys(methods).reduce((acc, name) => {\n        acc[name] = async (...args) => {\n            try {\n                const method = methods[name];\n                return await method(...args);\n            }\n            catch (e) {\n                logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_4__.EventError(e));\n            }\n        };\n        return acc;\n    }, {});\n}\n/** Handles adapter induced errors. */\nfunction adapterErrorHandler(adapter, logger) {\n    if (!adapter)\n        return;\n    return Object.keys(adapter).reduce((acc, name) => {\n        acc[name] = async (...args) => {\n            try {\n                logger.debug(`adapter_${name}`, { args });\n                const method = adapter[name];\n                return await method(...args);\n            }\n            catch (e) {\n                const error = new _errors_js__WEBPACK_IMPORTED_MODULE_4__.AdapterError(e);\n                logger.error(error);\n                throw error;\n            }\n        };\n        return acc;\n    }, {});\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9pbml0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDMkI7QUFDaEI7QUFDNkI7QUFDakI7QUFDTjtBQUNKO0FBQ0w7QUFDbEM7QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMLGVBQWUsY0FBYztBQUM3QjtBQUNBLHNCQUFzQixRQUFRLEVBQUUsSUFBSTtBQUNwQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLEtBQUs7QUFDTCxVQUFVLE9BQU87QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPLHNCQUFzQixnSkFBZ0o7QUFDN0ssbUJBQW1CLDJEQUFTO0FBQzVCLFlBQVksc0JBQXNCLEVBQUUsK0RBQWMsR0FBRyx5QkFBeUI7QUFDOUUsc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsMEJBQTBCO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQUssQ0FBQyw0REFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJDQUFVO0FBQzlCLG9CQUFvQiwyQ0FBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0EscUJBQXFCLDBDQUEwQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9EQUFvRCxRQUFRLHNGQUFlO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxZQUFZLGlDQUFpQyxRQUFRLHlFQUFpQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGtEQUFVO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsS0FBSyxLQUFLLE1BQU07QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msb0RBQVk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcaW5pdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBqd3QgZnJvbSBcIi4uL2p3dC5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ2FsbGJhY2tVcmwgfSBmcm9tIFwiLi91dGlscy9jYWxsYmFjay11cmwuanNcIjtcbmltcG9ydCAqIGFzIGNvb2tpZSBmcm9tIFwiLi91dGlscy9jb29raWUuanNcIjtcbmltcG9ydCB7IGNyZWF0ZUNTUkZUb2tlbiB9IGZyb20gXCIuL2FjdGlvbnMvY2FsbGJhY2svb2F1dGgvY3NyZi10b2tlbi5qc1wiO1xuaW1wb3J0IHsgQWRhcHRlckVycm9yLCBFdmVudEVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHBhcnNlUHJvdmlkZXJzIGZyb20gXCIuL3V0aWxzL3Byb3ZpZGVycy5qc1wiO1xuaW1wb3J0IHsgc2V0TG9nZ2VyIH0gZnJvbSBcIi4vdXRpbHMvbG9nZ2VyLmpzXCI7XG5pbXBvcnQgeyBtZXJnZSB9IGZyb20gXCIuL3V0aWxzL21lcmdlLmpzXCI7XG5leHBvcnQgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICBzaWduSW4oKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgcmVkaXJlY3QoeyB1cmwsIGJhc2VVcmwgfSkge1xuICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXCIvXCIpKVxuICAgICAgICAgICAgcmV0dXJuIGAke2Jhc2VVcmx9JHt1cmx9YDtcbiAgICAgICAgZWxzZSBpZiAobmV3IFVSTCh1cmwpLm9yaWdpbiA9PT0gYmFzZVVybClcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIHJldHVybiBiYXNlVXJsO1xuICAgIH0sXG4gICAgc2Vzc2lvbih7IHNlc3Npb24gfSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNlc3Npb24udXNlcj8ubmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogc2Vzc2lvbi51c2VyPy5lbWFpbCxcbiAgICAgICAgICAgICAgICBpbWFnZTogc2Vzc2lvbi51c2VyPy5pbWFnZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBleHBpcmVzOiBzZXNzaW9uLmV4cGlyZXM/LnRvSVNPU3RyaW5nPy4oKSA/PyBzZXNzaW9uLmV4cGlyZXMsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBqd3QoeyB0b2tlbiB9KSB7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxufTtcbi8qKiBJbml0aWFsaXplIGFsbCBpbnRlcm5hbCBvcHRpb25zIGFuZCBjb29raWVzLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXQoeyBhdXRoT3B0aW9uczogY29uZmlnLCBwcm92aWRlcklkLCBhY3Rpb24sIHVybCwgY29va2llczogcmVxQ29va2llcywgY2FsbGJhY2tVcmw6IHJlcUNhbGxiYWNrVXJsLCBjc3JmVG9rZW46IHJlcUNzcmZUb2tlbiwgY3NyZkRpc2FibGVkLCBpc1Bvc3QsIH0pIHtcbiAgICBjb25zdCBsb2dnZXIgPSBzZXRMb2dnZXIoY29uZmlnKTtcbiAgICBjb25zdCB7IHByb3ZpZGVycywgcHJvdmlkZXIgfSA9IHBhcnNlUHJvdmlkZXJzKHsgdXJsLCBwcm92aWRlcklkLCBjb25maWcgfSk7XG4gICAgY29uc3QgbWF4QWdlID0gMzAgKiAyNCAqIDYwICogNjA7IC8vIFNlc3Npb25zIGV4cGlyZSBhZnRlciAzMCBkYXlzIG9mIGJlaW5nIGlkbGUgYnkgZGVmYXVsdFxuICAgIGxldCBpc09uUmVkaXJlY3RQcm94eSA9IGZhbHNlO1xuICAgIGlmICgocHJvdmlkZXI/LnR5cGUgPT09IFwib2F1dGhcIiB8fCBwcm92aWRlcj8udHlwZSA9PT0gXCJvaWRjXCIpICYmXG4gICAgICAgIHByb3ZpZGVyLnJlZGlyZWN0UHJveHlVcmwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlzT25SZWRpcmVjdFByb3h5ID1cbiAgICAgICAgICAgICAgICBuZXcgVVJMKHByb3ZpZGVyLnJlZGlyZWN0UHJveHlVcmwpLm9yaWdpbiA9PT0gdXJsLm9yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGByZWRpcmVjdFByb3h5VXJsIG11c3QgYmUgYSB2YWxpZCBVUkwuIFJlY2VpdmVkOiAke3Byb3ZpZGVyLnJlZGlyZWN0UHJveHlVcmx9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVXNlciBwcm92aWRlZCBvcHRpb25zIGFyZSBvdmVycmlkZGVuIGJ5IG90aGVyIG9wdGlvbnMsXG4gICAgLy8gZXhjZXB0IGZvciB0aGUgb3B0aW9ucyB3aXRoIHNwZWNpYWwgaGFuZGxpbmcgYWJvdmVcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgIHBhZ2VzOiB7fSxcbiAgICAgICAgdGhlbWU6IHtcbiAgICAgICAgICAgIGNvbG9yU2NoZW1lOiBcImF1dG9cIixcbiAgICAgICAgICAgIGxvZ286IFwiXCIsXG4gICAgICAgICAgICBicmFuZENvbG9yOiBcIlwiLFxuICAgICAgICAgICAgYnV0dG9uVGV4dDogXCJcIixcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQ3VzdG9tIG9wdGlvbnMgb3ZlcnJpZGUgZGVmYXVsdHNcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAvLyBUaGVzZSBjb21wdXRlZCBzZXR0aW5ncyBjYW4gaGF2ZSB2YWx1ZXMgaW4gdXNlck9wdGlvbnMgYnV0IHdlIG92ZXJyaWRlIHRoZW1cbiAgICAgICAgLy8gYW5kIGFyZSByZXF1ZXN0LXNwZWNpZmljLlxuICAgICAgICB1cmwsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcnNcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIGNvb2tpZXM6IG1lcmdlKGNvb2tpZS5kZWZhdWx0Q29va2llcyhjb25maWcudXNlU2VjdXJlQ29va2llcyA/PyB1cmwucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIpLCBjb25maWcuY29va2llcyksXG4gICAgICAgIHByb3ZpZGVycyxcbiAgICAgICAgLy8gU2Vzc2lvbiBvcHRpb25zXG4gICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgIC8vIElmIG5vIGFkYXB0ZXIgc3BlY2lmaWVkLCBmb3JjZSB1c2Ugb2YgSlNPTiBXZWIgVG9rZW5zIChzdGF0ZWxlc3MpXG4gICAgICAgICAgICBzdHJhdGVneTogY29uZmlnLmFkYXB0ZXIgPyBcImRhdGFiYXNlXCIgOiBcImp3dFwiLFxuICAgICAgICAgICAgbWF4QWdlLFxuICAgICAgICAgICAgdXBkYXRlQWdlOiAyNCAqIDYwICogNjAsXG4gICAgICAgICAgICBnZW5lcmF0ZVNlc3Npb25Ub2tlbjogKCkgPT4gY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICAgIC4uLmNvbmZpZy5zZXNzaW9uLFxuICAgICAgICB9LFxuICAgICAgICAvLyBKV1Qgb3B0aW9uc1xuICAgICAgICBqd3Q6IHtcbiAgICAgICAgICAgIHNlY3JldDogY29uZmlnLnNlY3JldCwgLy8gQXNzZXJ0ZWQgaW4gYXNzZXJ0LnRzXG4gICAgICAgICAgICBtYXhBZ2U6IGNvbmZpZy5zZXNzaW9uPy5tYXhBZ2UgPz8gbWF4QWdlLCAvLyBkZWZhdWx0IHRvIHNhbWUgYXMgYHNlc3Npb24ubWF4QWdlYFxuICAgICAgICAgICAgZW5jb2RlOiBqd3QuZW5jb2RlLFxuICAgICAgICAgICAgZGVjb2RlOiBqd3QuZGVjb2RlLFxuICAgICAgICAgICAgLi4uY29uZmlnLmp3dCxcbiAgICAgICAgfSxcbiAgICAgICAgLy8gRXZlbnQgbWVzc2FnZXNcbiAgICAgICAgZXZlbnRzOiBldmVudHNFcnJvckhhbmRsZXIoY29uZmlnLmV2ZW50cyA/PyB7fSwgbG9nZ2VyKSxcbiAgICAgICAgYWRhcHRlcjogYWRhcHRlckVycm9ySGFuZGxlcihjb25maWcuYWRhcHRlciwgbG9nZ2VyKSxcbiAgICAgICAgLy8gQ2FsbGJhY2sgZnVuY3Rpb25zXG4gICAgICAgIGNhbGxiYWNrczogeyAuLi5kZWZhdWx0Q2FsbGJhY2tzLCAuLi5jb25maWcuY2FsbGJhY2tzIH0sXG4gICAgICAgIGxvZ2dlcixcbiAgICAgICAgY2FsbGJhY2tVcmw6IHVybC5vcmlnaW4sXG4gICAgICAgIGlzT25SZWRpcmVjdFByb3h5LFxuICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgIC4uLmNvbmZpZy5leHBlcmltZW50YWwsXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICAvLyBJbml0IGNvb2tpZXNcbiAgICBjb25zdCBjb29raWVzID0gW107XG4gICAgaWYgKGNzcmZEaXNhYmxlZCkge1xuICAgICAgICBvcHRpb25zLmNzcmZUb2tlblZlcmlmaWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgY3NyZlRva2VuLCBjb29raWU6IGNzcmZDb29raWUsIGNzcmZUb2tlblZlcmlmaWVkLCB9ID0gYXdhaXQgY3JlYXRlQ1NSRlRva2VuKHtcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBjb29raWVWYWx1ZTogcmVxQ29va2llcz8uW29wdGlvbnMuY29va2llcy5jc3JmVG9rZW4ubmFtZV0sXG4gICAgICAgICAgICBpc1Bvc3QsXG4gICAgICAgICAgICBib2R5VmFsdWU6IHJlcUNzcmZUb2tlbixcbiAgICAgICAgfSk7XG4gICAgICAgIG9wdGlvbnMuY3NyZlRva2VuID0gY3NyZlRva2VuO1xuICAgICAgICBvcHRpb25zLmNzcmZUb2tlblZlcmlmaWVkID0gY3NyZlRva2VuVmVyaWZpZWQ7XG4gICAgICAgIGlmIChjc3JmQ29va2llKSB7XG4gICAgICAgICAgICBjb29raWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuY29va2llcy5jc3JmVG9rZW4ubmFtZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogY3NyZkNvb2tpZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLmNvb2tpZXMuY3NyZlRva2VuLm9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB7IGNhbGxiYWNrVXJsLCBjYWxsYmFja1VybENvb2tpZSB9ID0gYXdhaXQgY3JlYXRlQ2FsbGJhY2tVcmwoe1xuICAgICAgICBvcHRpb25zLFxuICAgICAgICBjb29raWVWYWx1ZTogcmVxQ29va2llcz8uW29wdGlvbnMuY29va2llcy5jYWxsYmFja1VybC5uYW1lXSxcbiAgICAgICAgcGFyYW1WYWx1ZTogcmVxQ2FsbGJhY2tVcmwsXG4gICAgfSk7XG4gICAgb3B0aW9ucy5jYWxsYmFja1VybCA9IGNhbGxiYWNrVXJsO1xuICAgIGlmIChjYWxsYmFja1VybENvb2tpZSkge1xuICAgICAgICBjb29raWVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5jb29raWVzLmNhbGxiYWNrVXJsLm5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogY2FsbGJhY2tVcmxDb29raWUsXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLmNvb2tpZXMuY2FsbGJhY2tVcmwub3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7IG9wdGlvbnMsIGNvb2tpZXMgfTtcbn1cbi8qKiBXcmFwcyBhbiBvYmplY3Qgb2YgbWV0aG9kcyBhbmQgYWRkcyBlcnJvciBoYW5kbGluZy4gKi9cbmZ1bmN0aW9uIGV2ZW50c0Vycm9ySGFuZGxlcihtZXRob2RzLCBsb2dnZXIpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMobWV0aG9kcykucmVkdWNlKChhY2MsIG5hbWUpID0+IHtcbiAgICAgICAgYWNjW25hbWVdID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gbWV0aG9kc1tuYW1lXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgbWV0aG9kKC4uLmFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IobmV3IEV2ZW50RXJyb3IoZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cbi8qKiBIYW5kbGVzIGFkYXB0ZXIgaW5kdWNlZCBlcnJvcnMuICovXG5mdW5jdGlvbiBhZGFwdGVyRXJyb3JIYW5kbGVyKGFkYXB0ZXIsIGxvZ2dlcikge1xuICAgIGlmICghYWRhcHRlcilcbiAgICAgICAgcmV0dXJuO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhhZGFwdGVyKS5yZWR1Y2UoKGFjYywgbmFtZSkgPT4ge1xuICAgICAgICBhY2NbbmFtZV0gPSBhc3luYyAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYGFkYXB0ZXJfJHtuYW1lfWAsIHsgYXJncyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2QgPSBhZGFwdGVyW25hbWVdO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBtZXRob2QoLi4uYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEFkYXB0ZXJFcnJvcihlKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/init.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/init.js":
/*!*********************************************!*\
  !*** ./node_modules/@auth/core/lib/init.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultCallbacks: () => (/* binding */ defaultCallbacks),\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _jwt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../jwt.js */ \"(rsc)/./node_modules/@auth/core/jwt.js\");\n/* harmony import */ var _utils_callback_url_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/callback-url.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/callback-url.js\");\n/* harmony import */ var _utils_cookie_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/cookie.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/cookie.js\");\n/* harmony import */ var _actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions/callback/oauth/csrf-token.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _utils_providers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/providers.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/providers.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/logger.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/logger.js\");\n/* harmony import */ var _utils_merge_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/merge.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/merge.js\");\n\n\n\n\n\n\n\n\nconst defaultCallbacks = {\n    signIn() {\n        return true;\n    },\n    redirect({ url, baseUrl }) {\n        if (url.startsWith(\"/\"))\n            return `${baseUrl}${url}`;\n        else if (new URL(url).origin === baseUrl)\n            return url;\n        return baseUrl;\n    },\n    session({ session }) {\n        return {\n            user: {\n                name: session.user?.name,\n                email: session.user?.email,\n                image: session.user?.image,\n            },\n            expires: session.expires?.toISOString?.() ?? session.expires,\n        };\n    },\n    jwt({ token }) {\n        return token;\n    },\n};\n/** Initialize all internal options and cookies. */\nasync function init({ authOptions: config, providerId, action, url, cookies: reqCookies, callbackUrl: reqCallbackUrl, csrfToken: reqCsrfToken, csrfDisabled, isPost, }) {\n    const logger = (0,_utils_logger_js__WEBPACK_IMPORTED_MODULE_6__.setLogger)(config);\n    const { providers, provider } = (0,_utils_providers_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({ url, providerId, config });\n    const maxAge = 30 * 24 * 60 * 60; // Sessions expire after 30 days of being idle by default\n    let isOnRedirectProxy = false;\n    if ((provider?.type === \"oauth\" || provider?.type === \"oidc\") &&\n        provider.redirectProxyUrl) {\n        try {\n            isOnRedirectProxy =\n                new URL(provider.redirectProxyUrl).origin === url.origin;\n        }\n        catch {\n            throw new TypeError(`redirectProxyUrl must be a valid URL. Received: ${provider.redirectProxyUrl}`);\n        }\n    }\n    // User provided options are overridden by other options,\n    // except for the options with special handling above\n    const options = {\n        debug: false,\n        pages: {},\n        theme: {\n            colorScheme: \"auto\",\n            logo: \"\",\n            brandColor: \"\",\n            buttonText: \"\",\n        },\n        // Custom options override defaults\n        ...config,\n        // These computed settings can have values in userOptions but we override them\n        // and are request-specific.\n        url,\n        action,\n        // @ts-expect-errors\n        provider,\n        cookies: (0,_utils_merge_js__WEBPACK_IMPORTED_MODULE_7__.merge)(_utils_cookie_js__WEBPACK_IMPORTED_MODULE_2__.defaultCookies(config.useSecureCookies ?? url.protocol === \"https:\"), config.cookies),\n        providers,\n        // Session options\n        session: {\n            // If no adapter specified, force use of JSON Web Tokens (stateless)\n            strategy: config.adapter ? \"database\" : \"jwt\",\n            maxAge,\n            updateAge: 24 * 60 * 60,\n            generateSessionToken: () => crypto.randomUUID(),\n            ...config.session,\n        },\n        // JWT options\n        jwt: {\n            secret: config.secret, // Asserted in assert.ts\n            maxAge: config.session?.maxAge ?? maxAge, // default to same as `session.maxAge`\n            encode: _jwt_js__WEBPACK_IMPORTED_MODULE_0__.encode,\n            decode: _jwt_js__WEBPACK_IMPORTED_MODULE_0__.decode,\n            ...config.jwt,\n        },\n        // Event messages\n        events: eventsErrorHandler(config.events ?? {}, logger),\n        adapter: adapterErrorHandler(config.adapter, logger),\n        // Callback functions\n        callbacks: { ...defaultCallbacks, ...config.callbacks },\n        logger,\n        callbackUrl: url.origin,\n        isOnRedirectProxy,\n        experimental: {\n            ...config.experimental,\n        },\n    };\n    // Init cookies\n    const cookies = [];\n    if (csrfDisabled) {\n        options.csrfTokenVerified = true;\n    }\n    else {\n        const { csrfToken, cookie: csrfCookie, csrfTokenVerified, } = await (0,_actions_callback_oauth_csrf_token_js__WEBPACK_IMPORTED_MODULE_3__.createCSRFToken)({\n            options,\n            cookieValue: reqCookies?.[options.cookies.csrfToken.name],\n            isPost,\n            bodyValue: reqCsrfToken,\n        });\n        options.csrfToken = csrfToken;\n        options.csrfTokenVerified = csrfTokenVerified;\n        if (csrfCookie) {\n            cookies.push({\n                name: options.cookies.csrfToken.name,\n                value: csrfCookie,\n                options: options.cookies.csrfToken.options,\n            });\n        }\n    }\n    const { callbackUrl, callbackUrlCookie } = await (0,_utils_callback_url_js__WEBPACK_IMPORTED_MODULE_1__.createCallbackUrl)({\n        options,\n        cookieValue: reqCookies?.[options.cookies.callbackUrl.name],\n        paramValue: reqCallbackUrl,\n    });\n    options.callbackUrl = callbackUrl;\n    if (callbackUrlCookie) {\n        cookies.push({\n            name: options.cookies.callbackUrl.name,\n            value: callbackUrlCookie,\n            options: options.cookies.callbackUrl.options,\n        });\n    }\n    return { options, cookies };\n}\n/** Wraps an object of methods and adds error handling. */\nfunction eventsErrorHandler(methods, logger) {\n    return Object.keys(methods).reduce((acc, name) => {\n        acc[name] = async (...args) => {\n            try {\n                const method = methods[name];\n                return await method(...args);\n            }\n            catch (e) {\n                logger.error(new _errors_js__WEBPACK_IMPORTED_MODULE_4__.EventError(e));\n            }\n        };\n        return acc;\n    }, {});\n}\n/** Handles adapter induced errors. */\nfunction adapterErrorHandler(adapter, logger) {\n    if (!adapter)\n        return;\n    return Object.keys(adapter).reduce((acc, name) => {\n        acc[name] = async (...args) => {\n            try {\n                logger.debug(`adapter_${name}`, { args });\n                const method = adapter[name];\n                return await method(...args);\n            }\n            catch (e) {\n                const error = new _errors_js__WEBPACK_IMPORTED_MODULE_4__.AdapterError(e);\n                logger.error(error);\n                throw error;\n            }\n        };\n        return acc;\n    }, {});\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvaW5pdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWlDO0FBQzJCO0FBQ2hCO0FBQzZCO0FBQ2pCO0FBQ047QUFDSjtBQUNMO0FBQ2xDO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTCxlQUFlLGNBQWM7QUFDN0I7QUFDQSxzQkFBc0IsUUFBUSxFQUFFLElBQUk7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGNBQWMsU0FBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsVUFBVSxPQUFPO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTyxzQkFBc0IsZ0pBQWdKO0FBQzdLLG1CQUFtQiwyREFBUztBQUM1QixZQUFZLHNCQUFzQixFQUFFLCtEQUFjLEdBQUcseUJBQXlCO0FBQzlFLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GLDBCQUEwQjtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFLLENBQUMsNERBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwyQ0FBVTtBQUM5QixvQkFBb0IsMkNBQVU7QUFDOUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBLHFCQUFxQiwwQ0FBMEM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvREFBb0QsUUFBUSxzRkFBZTtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsWUFBWSxpQ0FBaUMsUUFBUSx5RUFBaUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxrREFBVTtBQUMzQztBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLEtBQUssS0FBSyxNQUFNO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG9EQUFZO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXGluaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgand0IGZyb20gXCIuLi9qd3QuanNcIjtcbmltcG9ydCB7IGNyZWF0ZUNhbGxiYWNrVXJsIH0gZnJvbSBcIi4vdXRpbHMvY2FsbGJhY2stdXJsLmpzXCI7XG5pbXBvcnQgKiBhcyBjb29raWUgZnJvbSBcIi4vdXRpbHMvY29va2llLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVDU1JGVG9rZW4gfSBmcm9tIFwiLi9hY3Rpb25zL2NhbGxiYWNrL29hdXRoL2NzcmYtdG9rZW4uanNcIjtcbmltcG9ydCB7IEFkYXB0ZXJFcnJvciwgRXZlbnRFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCBwYXJzZVByb3ZpZGVycyBmcm9tIFwiLi91dGlscy9wcm92aWRlcnMuanNcIjtcbmltcG9ydCB7IHNldExvZ2dlciB9IGZyb20gXCIuL3V0aWxzL2xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgbWVyZ2UgfSBmcm9tIFwiLi91dGlscy9tZXJnZS5qc1wiO1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgc2lnbkluKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIHJlZGlyZWN0KHsgdXJsLCBiYXNlVXJsIH0pIHtcbiAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKFwiL1wiKSlcbiAgICAgICAgICAgIHJldHVybiBgJHtiYXNlVXJsfSR7dXJsfWA7XG4gICAgICAgIGVsc2UgaWYgKG5ldyBVUkwodXJsKS5vcmlnaW4gPT09IGJhc2VVcmwpXG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICByZXR1cm4gYmFzZVVybDtcbiAgICB9LFxuICAgIHNlc3Npb24oeyBzZXNzaW9uIH0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzZXNzaW9uLnVzZXI/Lm5hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHNlc3Npb24udXNlcj8uZW1haWwsXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHNlc3Npb24udXNlcj8uaW1hZ2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXhwaXJlczogc2Vzc2lvbi5leHBpcmVzPy50b0lTT1N0cmluZz8uKCkgPz8gc2Vzc2lvbi5leHBpcmVzLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgand0KHsgdG9rZW4gfSkge1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgfSxcbn07XG4vKiogSW5pdGlhbGl6ZSBhbGwgaW50ZXJuYWwgb3B0aW9ucyBhbmQgY29va2llcy4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0KHsgYXV0aE9wdGlvbnM6IGNvbmZpZywgcHJvdmlkZXJJZCwgYWN0aW9uLCB1cmwsIGNvb2tpZXM6IHJlcUNvb2tpZXMsIGNhbGxiYWNrVXJsOiByZXFDYWxsYmFja1VybCwgY3NyZlRva2VuOiByZXFDc3JmVG9rZW4sIGNzcmZEaXNhYmxlZCwgaXNQb3N0LCB9KSB7XG4gICAgY29uc3QgbG9nZ2VyID0gc2V0TG9nZ2VyKGNvbmZpZyk7XG4gICAgY29uc3QgeyBwcm92aWRlcnMsIHByb3ZpZGVyIH0gPSBwYXJzZVByb3ZpZGVycyh7IHVybCwgcHJvdmlkZXJJZCwgY29uZmlnIH0pO1xuICAgIGNvbnN0IG1heEFnZSA9IDMwICogMjQgKiA2MCAqIDYwOyAvLyBTZXNzaW9ucyBleHBpcmUgYWZ0ZXIgMzAgZGF5cyBvZiBiZWluZyBpZGxlIGJ5IGRlZmF1bHRcbiAgICBsZXQgaXNPblJlZGlyZWN0UHJveHkgPSBmYWxzZTtcbiAgICBpZiAoKHByb3ZpZGVyPy50eXBlID09PSBcIm9hdXRoXCIgfHwgcHJvdmlkZXI/LnR5cGUgPT09IFwib2lkY1wiKSAmJlxuICAgICAgICBwcm92aWRlci5yZWRpcmVjdFByb3h5VXJsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpc09uUmVkaXJlY3RQcm94eSA9XG4gICAgICAgICAgICAgICAgbmV3IFVSTChwcm92aWRlci5yZWRpcmVjdFByb3h5VXJsKS5vcmlnaW4gPT09IHVybC5vcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgcmVkaXJlY3RQcm94eVVybCBtdXN0IGJlIGEgdmFsaWQgVVJMLiBSZWNlaXZlZDogJHtwcm92aWRlci5yZWRpcmVjdFByb3h5VXJsfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFVzZXIgcHJvdmlkZWQgb3B0aW9ucyBhcmUgb3ZlcnJpZGRlbiBieSBvdGhlciBvcHRpb25zLFxuICAgIC8vIGV4Y2VwdCBmb3IgdGhlIG9wdGlvbnMgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGFib3ZlXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgZGVidWc6IGZhbHNlLFxuICAgICAgICBwYWdlczoge30sXG4gICAgICAgIHRoZW1lOiB7XG4gICAgICAgICAgICBjb2xvclNjaGVtZTogXCJhdXRvXCIsXG4gICAgICAgICAgICBsb2dvOiBcIlwiLFxuICAgICAgICAgICAgYnJhbmRDb2xvcjogXCJcIixcbiAgICAgICAgICAgIGJ1dHRvblRleHQ6IFwiXCIsXG4gICAgICAgIH0sXG4gICAgICAgIC8vIEN1c3RvbSBvcHRpb25zIG92ZXJyaWRlIGRlZmF1bHRzXG4gICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgLy8gVGhlc2UgY29tcHV0ZWQgc2V0dGluZ3MgY2FuIGhhdmUgdmFsdWVzIGluIHVzZXJPcHRpb25zIGJ1dCB3ZSBvdmVycmlkZSB0aGVtXG4gICAgICAgIC8vIGFuZCBhcmUgcmVxdWVzdC1zcGVjaWZpYy5cbiAgICAgICAgdXJsLFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JzXG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICBjb29raWVzOiBtZXJnZShjb29raWUuZGVmYXVsdENvb2tpZXMoY29uZmlnLnVzZVNlY3VyZUNvb2tpZXMgPz8gdXJsLnByb3RvY29sID09PSBcImh0dHBzOlwiKSwgY29uZmlnLmNvb2tpZXMpLFxuICAgICAgICBwcm92aWRlcnMsXG4gICAgICAgIC8vIFNlc3Npb24gb3B0aW9uc1xuICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAvLyBJZiBubyBhZGFwdGVyIHNwZWNpZmllZCwgZm9yY2UgdXNlIG9mIEpTT04gV2ViIFRva2VucyAoc3RhdGVsZXNzKVxuICAgICAgICAgICAgc3RyYXRlZ3k6IGNvbmZpZy5hZGFwdGVyID8gXCJkYXRhYmFzZVwiIDogXCJqd3RcIixcbiAgICAgICAgICAgIG1heEFnZSxcbiAgICAgICAgICAgIHVwZGF0ZUFnZTogMjQgKiA2MCAqIDYwLFxuICAgICAgICAgICAgZ2VuZXJhdGVTZXNzaW9uVG9rZW46ICgpID0+IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgICAuLi5jb25maWcuc2Vzc2lvbixcbiAgICAgICAgfSxcbiAgICAgICAgLy8gSldUIG9wdGlvbnNcbiAgICAgICAgand0OiB7XG4gICAgICAgICAgICBzZWNyZXQ6IGNvbmZpZy5zZWNyZXQsIC8vIEFzc2VydGVkIGluIGFzc2VydC50c1xuICAgICAgICAgICAgbWF4QWdlOiBjb25maWcuc2Vzc2lvbj8ubWF4QWdlID8/IG1heEFnZSwgLy8gZGVmYXVsdCB0byBzYW1lIGFzIGBzZXNzaW9uLm1heEFnZWBcbiAgICAgICAgICAgIGVuY29kZTogand0LmVuY29kZSxcbiAgICAgICAgICAgIGRlY29kZTogand0LmRlY29kZSxcbiAgICAgICAgICAgIC4uLmNvbmZpZy5qd3QsXG4gICAgICAgIH0sXG4gICAgICAgIC8vIEV2ZW50IG1lc3NhZ2VzXG4gICAgICAgIGV2ZW50czogZXZlbnRzRXJyb3JIYW5kbGVyKGNvbmZpZy5ldmVudHMgPz8ge30sIGxvZ2dlciksXG4gICAgICAgIGFkYXB0ZXI6IGFkYXB0ZXJFcnJvckhhbmRsZXIoY29uZmlnLmFkYXB0ZXIsIGxvZ2dlciksXG4gICAgICAgIC8vIENhbGxiYWNrIGZ1bmN0aW9uc1xuICAgICAgICBjYWxsYmFja3M6IHsgLi4uZGVmYXVsdENhbGxiYWNrcywgLi4uY29uZmlnLmNhbGxiYWNrcyB9LFxuICAgICAgICBsb2dnZXIsXG4gICAgICAgIGNhbGxiYWNrVXJsOiB1cmwub3JpZ2luLFxuICAgICAgICBpc09uUmVkaXJlY3RQcm94eSxcbiAgICAgICAgZXhwZXJpbWVudGFsOiB7XG4gICAgICAgICAgICAuLi5jb25maWcuZXhwZXJpbWVudGFsLFxuICAgICAgICB9LFxuICAgIH07XG4gICAgLy8gSW5pdCBjb29raWVzXG4gICAgY29uc3QgY29va2llcyA9IFtdO1xuICAgIGlmIChjc3JmRGlzYWJsZWQpIHtcbiAgICAgICAgb3B0aW9ucy5jc3JmVG9rZW5WZXJpZmllZCA9IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB7IGNzcmZUb2tlbiwgY29va2llOiBjc3JmQ29va2llLCBjc3JmVG9rZW5WZXJpZmllZCwgfSA9IGF3YWl0IGNyZWF0ZUNTUkZUb2tlbih7XG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgY29va2llVmFsdWU6IHJlcUNvb2tpZXM/LltvcHRpb25zLmNvb2tpZXMuY3NyZlRva2VuLm5hbWVdLFxuICAgICAgICAgICAgaXNQb3N0LFxuICAgICAgICAgICAgYm9keVZhbHVlOiByZXFDc3JmVG9rZW4sXG4gICAgICAgIH0pO1xuICAgICAgICBvcHRpb25zLmNzcmZUb2tlbiA9IGNzcmZUb2tlbjtcbiAgICAgICAgb3B0aW9ucy5jc3JmVG9rZW5WZXJpZmllZCA9IGNzcmZUb2tlblZlcmlmaWVkO1xuICAgICAgICBpZiAoY3NyZkNvb2tpZSkge1xuICAgICAgICAgICAgY29va2llcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBvcHRpb25zLmNvb2tpZXMuY3NyZlRva2VuLm5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNzcmZDb29raWUsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9ucy5jb29raWVzLmNzcmZUb2tlbi5vcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgeyBjYWxsYmFja1VybCwgY2FsbGJhY2tVcmxDb29raWUgfSA9IGF3YWl0IGNyZWF0ZUNhbGxiYWNrVXJsKHtcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgY29va2llVmFsdWU6IHJlcUNvb2tpZXM/LltvcHRpb25zLmNvb2tpZXMuY2FsbGJhY2tVcmwubmFtZV0sXG4gICAgICAgIHBhcmFtVmFsdWU6IHJlcUNhbGxiYWNrVXJsLFxuICAgIH0pO1xuICAgIG9wdGlvbnMuY2FsbGJhY2tVcmwgPSBjYWxsYmFja1VybDtcbiAgICBpZiAoY2FsbGJhY2tVcmxDb29raWUpIHtcbiAgICAgICAgY29va2llcy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuY29va2llcy5jYWxsYmFja1VybC5uYW1lLFxuICAgICAgICAgICAgdmFsdWU6IGNhbGxiYWNrVXJsQ29va2llLFxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9ucy5jb29raWVzLmNhbGxiYWNrVXJsLm9wdGlvbnMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4geyBvcHRpb25zLCBjb29raWVzIH07XG59XG4vKiogV3JhcHMgYW4gb2JqZWN0IG9mIG1ldGhvZHMgYW5kIGFkZHMgZXJyb3IgaGFuZGxpbmcuICovXG5mdW5jdGlvbiBldmVudHNFcnJvckhhbmRsZXIobWV0aG9kcywgbG9nZ2VyKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG1ldGhvZHMpLnJlZHVjZSgoYWNjLCBuYW1lKSA9PiB7XG4gICAgICAgIGFjY1tuYW1lXSA9IGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9IG1ldGhvZHNbbmFtZV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG1ldGhvZCguLi5hcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKG5ldyBFdmVudEVycm9yKGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG4vKiogSGFuZGxlcyBhZGFwdGVyIGluZHVjZWQgZXJyb3JzLiAqL1xuZnVuY3Rpb24gYWRhcHRlckVycm9ySGFuZGxlcihhZGFwdGVyLCBsb2dnZXIpIHtcbiAgICBpZiAoIWFkYXB0ZXIpXG4gICAgICAgIHJldHVybjtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoYWRhcHRlcikucmVkdWNlKChhY2MsIG5hbWUpID0+IHtcbiAgICAgICAgYWNjW25hbWVdID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBhZGFwdGVyXyR7bmFtZX1gLCB7IGFyZ3MgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gYWRhcHRlcltuYW1lXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgbWV0aG9kKC4uLmFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBBZGFwdGVyRXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/init.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/pages/error.js":
/*!****************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/error.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ErrorPage)\n/* harmony export */ });\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/jsx-runtime */ \"(action-browser)/./node_modules/preact/jsx-runtime/dist/jsxRuntime.mjs\");\n\n/** Renders an error page. */\nfunction ErrorPage(props) {\n    const { url, error = \"default\", theme } = props;\n    const signinPageUrl = `${url}/signin`;\n    const errors = {\n        default: {\n            status: 200,\n            heading: \"Error\",\n            message: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { className: \"site\", href: url?.origin, children: url?.host }) })),\n        },\n        Configuration: {\n            status: 500,\n            heading: \"Server error\",\n            message: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"There is a problem with the server configuration.\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"Check the server logs for more information.\" })] })),\n        },\n        AccessDenied: {\n            status: 403,\n            heading: \"Access Denied\",\n            message: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"You do not have permission to sign in.\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { className: \"button\", href: signinPageUrl, children: \"Sign in\" }) })] })),\n        },\n        Verification: {\n            status: 403,\n            heading: \"Unable to sign in\",\n            message: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"The sign in link is no longer valid.\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"It may have been used already or it may have expired.\" })] })),\n            signin: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { className: \"button\", href: signinPageUrl, children: \"Sign in\" })),\n        },\n    };\n    const { status, heading, message, signin } = errors[error] ?? errors.default;\n    return {\n        status,\n        html: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"error\", children: [theme?.brandColor && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                        __html: `\n        :root {\n          --brand-color: ${theme?.brandColor}\n        }\n      `,\n                    } })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"card\", children: [theme?.logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { src: theme?.logo, alt: \"Logo\", className: \"logo\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h1\", { children: heading }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"message\", children: message }), signin] })] })),\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9wYWdlcy9lcnJvci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRTtBQUNoRTtBQUNlO0FBQ2YsWUFBWSxnQ0FBZ0M7QUFDNUMsNkJBQTZCLElBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdURBQUksUUFBUSxVQUFVLHVEQUFJLFFBQVEsMkRBQTJELEdBQUc7QUFDdEgsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3REFBSyxVQUFVLFdBQVcsdURBQUksUUFBUSwrREFBK0QsR0FBRyx1REFBSSxRQUFRLHlEQUF5RCxJQUFJO0FBQ3ZNLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0RBQUssVUFBVSxXQUFXLHVEQUFJLFFBQVEsb0RBQW9ELEdBQUcsdURBQUksUUFBUSxVQUFVLHVEQUFJLFFBQVEsK0RBQStELEdBQUcsSUFBSTtBQUMzTixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFLLFVBQVUsV0FBVyx1REFBSSxRQUFRLGtEQUFrRCxHQUFHLHVEQUFJLFFBQVEsbUVBQW1FLElBQUk7QUFDcE0scUJBQXFCLHVEQUFJLFFBQVEsK0RBQStEO0FBQ2hHLFNBQVM7QUFDVDtBQUNBLFlBQVksbUNBQW1DO0FBQy9DO0FBQ0E7QUFDQSxlQUFlLHdEQUFLLFVBQVUscURBQXFELHVEQUFJLFlBQVk7QUFDbkc7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0EsdUJBQXVCLElBQUksd0RBQUssVUFBVSw2Q0FBNkMsdURBQUksVUFBVSxrREFBa0QsR0FBRyx1REFBSSxTQUFTLG1CQUFtQixHQUFHLHVEQUFJLFVBQVUseUNBQXlDLFlBQVksSUFBSTtBQUNwUTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxccGFnZXNcXGVycm9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInByZWFjdC9qc3gtcnVudGltZVwiO1xuLyoqIFJlbmRlcnMgYW4gZXJyb3IgcGFnZS4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEVycm9yUGFnZShwcm9wcykge1xuICAgIGNvbnN0IHsgdXJsLCBlcnJvciA9IFwiZGVmYXVsdFwiLCB0aGVtZSB9ID0gcHJvcHM7XG4gICAgY29uc3Qgc2lnbmluUGFnZVVybCA9IGAke3VybH0vc2lnbmluYDtcbiAgICBjb25zdCBlcnJvcnMgPSB7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgaGVhZGluZzogXCJFcnJvclwiLFxuICAgICAgICAgICAgbWVzc2FnZTogKF9qc3goXCJwXCIsIHsgY2hpbGRyZW46IF9qc3goXCJhXCIsIHsgY2xhc3NOYW1lOiBcInNpdGVcIiwgaHJlZjogdXJsPy5vcmlnaW4sIGNoaWxkcmVuOiB1cmw/Lmhvc3QgfSkgfSkpLFxuICAgICAgICB9LFxuICAgICAgICBDb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgIGhlYWRpbmc6IFwiU2VydmVyIGVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiAoX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJwXCIsIHsgY2hpbGRyZW46IFwiVGhlcmUgaXMgYSBwcm9ibGVtIHdpdGggdGhlIHNlcnZlciBjb25maWd1cmF0aW9uLlwiIH0pLCBfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIkNoZWNrIHRoZSBzZXJ2ZXIgbG9ncyBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cIiB9KV0gfSkpLFxuICAgICAgICB9LFxuICAgICAgICBBY2Nlc3NEZW5pZWQ6IHtcbiAgICAgICAgICAgIHN0YXR1czogNDAzLFxuICAgICAgICAgICAgaGVhZGluZzogXCJBY2Nlc3MgRGVuaWVkXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiAoX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJwXCIsIHsgY2hpbGRyZW46IFwiWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gc2lnbiBpbi5cIiB9KSwgX2pzeChcInBcIiwgeyBjaGlsZHJlbjogX2pzeChcImFcIiwgeyBjbGFzc05hbWU6IFwiYnV0dG9uXCIsIGhyZWY6IHNpZ25pblBhZ2VVcmwsIGNoaWxkcmVuOiBcIlNpZ24gaW5cIiB9KSB9KV0gfSkpLFxuICAgICAgICB9LFxuICAgICAgICBWZXJpZmljYXRpb246IHtcbiAgICAgICAgICAgIHN0YXR1czogNDAzLFxuICAgICAgICAgICAgaGVhZGluZzogXCJVbmFibGUgdG8gc2lnbiBpblwiLFxuICAgICAgICAgICAgbWVzc2FnZTogKF9qc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIlRoZSBzaWduIGluIGxpbmsgaXMgbm8gbG9uZ2VyIHZhbGlkLlwiIH0pLCBfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIkl0IG1heSBoYXZlIGJlZW4gdXNlZCBhbHJlYWR5IG9yIGl0IG1heSBoYXZlIGV4cGlyZWQuXCIgfSldIH0pKSxcbiAgICAgICAgICAgIHNpZ25pbjogKF9qc3goXCJhXCIsIHsgY2xhc3NOYW1lOiBcImJ1dHRvblwiLCBocmVmOiBzaWduaW5QYWdlVXJsLCBjaGlsZHJlbjogXCJTaWduIGluXCIgfSkpLFxuICAgICAgICB9LFxuICAgIH07XG4gICAgY29uc3QgeyBzdGF0dXMsIGhlYWRpbmcsIG1lc3NhZ2UsIHNpZ25pbiB9ID0gZXJyb3JzW2Vycm9yXSA/PyBlcnJvcnMuZGVmYXVsdDtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXMsXG4gICAgICAgIGh0bWw6IChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJlcnJvclwiLCBjaGlsZHJlbjogW3RoZW1lPy5icmFuZENvbG9yICYmIChfanN4KFwic3R5bGVcIiwgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX19odG1sOiBgXG4gICAgICAgIDpyb290IHtcbiAgICAgICAgICAtLWJyYW5kLWNvbG9yOiAke3RoZW1lPy5icmFuZENvbG9yfVxuICAgICAgICB9XG4gICAgICBgLFxuICAgICAgICAgICAgICAgICAgICB9IH0pKSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FyZFwiLCBjaGlsZHJlbjogW3RoZW1lPy5sb2dvICYmIF9qc3goXCJpbWdcIiwgeyBzcmM6IHRoZW1lPy5sb2dvLCBhbHQ6IFwiTG9nb1wiLCBjbGFzc05hbWU6IFwibG9nb1wiIH0pLCBfanN4KFwiaDFcIiwgeyBjaGlsZHJlbjogaGVhZGluZyB9KSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtZXNzYWdlXCIsIGNoaWxkcmVuOiBtZXNzYWdlIH0pLCBzaWduaW5dIH0pXSB9KSksXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/pages/error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/pages/error.js":
/*!****************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/error.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ErrorPage)\n/* harmony export */ });\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/jsx-runtime */ \"(rsc)/./node_modules/preact/jsx-runtime/dist/jsxRuntime.mjs\");\n\n/** Renders an error page. */\nfunction ErrorPage(props) {\n    const { url, error = \"default\", theme } = props;\n    const signinPageUrl = `${url}/signin`;\n    const errors = {\n        default: {\n            status: 200,\n            heading: \"Error\",\n            message: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { className: \"site\", href: url?.origin, children: url?.host }) })),\n        },\n        Configuration: {\n            status: 500,\n            heading: \"Server error\",\n            message: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"There is a problem with the server configuration.\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"Check the server logs for more information.\" })] })),\n        },\n        AccessDenied: {\n            status: 403,\n            heading: \"Access Denied\",\n            message: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"You do not have permission to sign in.\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { className: \"button\", href: signinPageUrl, children: \"Sign in\" }) })] })),\n        },\n        Verification: {\n            status: 403,\n            heading: \"Unable to sign in\",\n            message: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"The sign in link is no longer valid.\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"It may have been used already or it may have expired.\" })] })),\n            signin: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { className: \"button\", href: signinPageUrl, children: \"Sign in\" })),\n        },\n    };\n    const { status, heading, message, signin } = errors[error] ?? errors.default;\n    return {\n        status,\n        html: ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"error\", children: [theme?.brandColor && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                        __html: `\n        :root {\n          --brand-color: ${theme?.brandColor}\n        }\n      `,\n                    } })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"card\", children: [theme?.logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { src: theme?.logo, alt: \"Logo\", className: \"logo\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h1\", { children: heading }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"message\", children: message }), signin] })] })),\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvcGFnZXMvZXJyb3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBZ0U7QUFDaEU7QUFDZTtBQUNmLFlBQVksZ0NBQWdDO0FBQzVDLDZCQUE2QixJQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVEQUFJLFFBQVEsVUFBVSx1REFBSSxRQUFRLDJEQUEyRCxHQUFHO0FBQ3RILFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0RBQUssVUFBVSxXQUFXLHVEQUFJLFFBQVEsK0RBQStELEdBQUcsdURBQUksUUFBUSx5REFBeUQsSUFBSTtBQUN2TSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFLLFVBQVUsV0FBVyx1REFBSSxRQUFRLG9EQUFvRCxHQUFHLHVEQUFJLFFBQVEsVUFBVSx1REFBSSxRQUFRLCtEQUErRCxHQUFHLElBQUk7QUFDM04sU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3REFBSyxVQUFVLFdBQVcsdURBQUksUUFBUSxrREFBa0QsR0FBRyx1REFBSSxRQUFRLG1FQUFtRSxJQUFJO0FBQ3BNLHFCQUFxQix1REFBSSxRQUFRLCtEQUErRDtBQUNoRyxTQUFTO0FBQ1Q7QUFDQSxZQUFZLG1DQUFtQztBQUMvQztBQUNBO0FBQ0EsZUFBZSx3REFBSyxVQUFVLHFEQUFxRCx1REFBSSxZQUFZO0FBQ25HO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBLHVCQUF1QixJQUFJLHdEQUFLLFVBQVUsNkNBQTZDLHVEQUFJLFVBQVUsa0RBQWtELEdBQUcsdURBQUksU0FBUyxtQkFBbUIsR0FBRyx1REFBSSxVQUFVLHlDQUF5QyxZQUFZLElBQUk7QUFDcFE7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHBhZ2VzXFxlcnJvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJwcmVhY3QvanN4LXJ1bnRpbWVcIjtcbi8qKiBSZW5kZXJzIGFuIGVycm9yIHBhZ2UuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBFcnJvclBhZ2UocHJvcHMpIHtcbiAgICBjb25zdCB7IHVybCwgZXJyb3IgPSBcImRlZmF1bHRcIiwgdGhlbWUgfSA9IHByb3BzO1xuICAgIGNvbnN0IHNpZ25pblBhZ2VVcmwgPSBgJHt1cmx9L3NpZ25pbmA7XG4gICAgY29uc3QgZXJyb3JzID0ge1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgIGhlYWRpbmc6IFwiRXJyb3JcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IChfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBfanN4KFwiYVwiLCB7IGNsYXNzTmFtZTogXCJzaXRlXCIsIGhyZWY6IHVybD8ub3JpZ2luLCBjaGlsZHJlbjogdXJsPy5ob3N0IH0pIH0pKSxcbiAgICAgICAgfSxcbiAgICAgICAgQ29uZmlndXJhdGlvbjoge1xuICAgICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgICBoZWFkaW5nOiBcIlNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgbWVzc2FnZTogKF9qc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIlRoZXJlIGlzIGEgcHJvYmxlbSB3aXRoIHRoZSBzZXJ2ZXIgY29uZmlndXJhdGlvbi5cIiB9KSwgX2pzeChcInBcIiwgeyBjaGlsZHJlbjogXCJDaGVjayB0aGUgc2VydmVyIGxvZ3MgZm9yIG1vcmUgaW5mb3JtYXRpb24uXCIgfSldIH0pKSxcbiAgICAgICAgfSxcbiAgICAgICAgQWNjZXNzRGVuaWVkOiB7XG4gICAgICAgICAgICBzdGF0dXM6IDQwMyxcbiAgICAgICAgICAgIGhlYWRpbmc6IFwiQWNjZXNzIERlbmllZFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogKF9qc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIllvdSBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIHNpZ24gaW4uXCIgfSksIF9qc3goXCJwXCIsIHsgY2hpbGRyZW46IF9qc3goXCJhXCIsIHsgY2xhc3NOYW1lOiBcImJ1dHRvblwiLCBocmVmOiBzaWduaW5QYWdlVXJsLCBjaGlsZHJlbjogXCJTaWduIGluXCIgfSkgfSldIH0pKSxcbiAgICAgICAgfSxcbiAgICAgICAgVmVyaWZpY2F0aW9uOiB7XG4gICAgICAgICAgICBzdGF0dXM6IDQwMyxcbiAgICAgICAgICAgIGhlYWRpbmc6IFwiVW5hYmxlIHRvIHNpZ24gaW5cIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IChfanN4cyhcImRpdlwiLCB7IGNoaWxkcmVuOiBbX2pzeChcInBcIiwgeyBjaGlsZHJlbjogXCJUaGUgc2lnbiBpbiBsaW5rIGlzIG5vIGxvbmdlciB2YWxpZC5cIiB9KSwgX2pzeChcInBcIiwgeyBjaGlsZHJlbjogXCJJdCBtYXkgaGF2ZSBiZWVuIHVzZWQgYWxyZWFkeSBvciBpdCBtYXkgaGF2ZSBleHBpcmVkLlwiIH0pXSB9KSksXG4gICAgICAgICAgICBzaWduaW46IChfanN4KFwiYVwiLCB7IGNsYXNzTmFtZTogXCJidXR0b25cIiwgaHJlZjogc2lnbmluUGFnZVVybCwgY2hpbGRyZW46IFwiU2lnbiBpblwiIH0pKSxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGNvbnN0IHsgc3RhdHVzLCBoZWFkaW5nLCBtZXNzYWdlLCBzaWduaW4gfSA9IGVycm9yc1tlcnJvcl0gPz8gZXJyb3JzLmRlZmF1bHQ7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBodG1sOiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZXJyb3JcIiwgY2hpbGRyZW46IFt0aGVtZT8uYnJhbmRDb2xvciAmJiAoX2pzeChcInN0eWxlXCIsIHsgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9faHRtbDogYFxuICAgICAgICA6cm9vdCB7XG4gICAgICAgICAgLS1icmFuZC1jb2xvcjogJHt0aGVtZT8uYnJhbmRDb2xvcn1cbiAgICAgICAgfVxuICAgICAgYCxcbiAgICAgICAgICAgICAgICAgICAgfSB9KSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhcmRcIiwgY2hpbGRyZW46IFt0aGVtZT8ubG9nbyAmJiBfanN4KFwiaW1nXCIsIHsgc3JjOiB0aGVtZT8ubG9nbywgYWx0OiBcIkxvZ29cIiwgY2xhc3NOYW1lOiBcImxvZ29cIiB9KSwgX2pzeChcImgxXCIsIHsgY2hpbGRyZW46IGhlYWRpbmcgfSksIF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibWVzc2FnZVwiLCBjaGlsZHJlbjogbWVzc2FnZSB9KSwgc2lnbmluXSB9KV0gfSkpLFxuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/pages/error.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/pages/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ renderPage)\n/* harmony export */ });\n/* harmony import */ var preact_render_to_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact-render-to-string */ \"(action-browser)/./node_modules/preact-render-to-string/dist/index.mjs\");\n/* harmony import */ var _error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./error.js */ \"(action-browser)/./node_modules/@auth/core/lib/pages/error.js\");\n/* harmony import */ var _signin_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./signin.js */ \"(action-browser)/./node_modules/@auth/core/lib/pages/signin.js\");\n/* harmony import */ var _signout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./signout.js */ \"(action-browser)/./node_modules/@auth/core/lib/pages/signout.js\");\n/* harmony import */ var _styles_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles.js */ \"(action-browser)/./node_modules/@auth/core/lib/pages/styles.js\");\n/* harmony import */ var _verify_request_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./verify-request.js */ \"(action-browser)/./node_modules/@auth/core/lib/pages/verify-request.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n\n\n\n\n\n\n\nfunction send({ html, title, status, cookies, theme, headTags, }) {\n    return {\n        cookies,\n        status,\n        headers: { \"Content-Type\": \"text/html\" },\n        body: `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><style>${_styles_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]}</style><title>${title}</title>${headTags ?? \"\"}</head><body class=\"__next-auth-theme-${theme?.colorScheme ?? \"auto\"}\"><div class=\"page\">${(0,preact_render_to_string__WEBPACK_IMPORTED_MODULE_0__.renderToString)(html)}</div></body></html>`,\n    };\n}\n/**\n * Unless the user defines their [own pages](https://authjs.dev/reference/core#pages),\n * we render a set of default ones, using Preact SSR.\n */\nfunction renderPage(params) {\n    const { url, theme, query, cookies, pages, providers } = params;\n    return {\n        csrf(skip, options, cookies) {\n            if (!skip) {\n                return {\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: { csrfToken: options.csrfToken },\n                    cookies,\n                };\n            }\n            options.logger.warn(\"csrf-disabled\");\n            cookies.push({\n                name: options.cookies.csrfToken.name,\n                value: \"\",\n                options: { ...options.cookies.csrfToken.options, maxAge: 0 },\n            });\n            return { status: 404, cookies };\n        },\n        providers(providers) {\n            return {\n                headers: { \"Content-Type\": \"application/json\" },\n                body: providers.reduce((acc, { id, name, type, signinUrl, callbackUrl }) => {\n                    acc[id] = { id, name, type, signinUrl, callbackUrl };\n                    return acc;\n                }, {}),\n            };\n        },\n        signin(providerId, error) {\n            if (providerId)\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.UnknownAction(\"Unsupported action\");\n            if (pages?.signIn) {\n                let signinUrl = `${pages.signIn}${pages.signIn.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl: params.callbackUrl ?? \"/\" })}`;\n                if (error)\n                    signinUrl = `${signinUrl}&${new URLSearchParams({ error })}`;\n                return { redirect: signinUrl, cookies };\n            }\n            // If we have a webauthn provider with conditional UI and\n            // a simpleWebAuthnBrowserScript is defined, we need to\n            // render the script in the page.\n            const webauthnProvider = providers?.find((p) => p.type === \"webauthn\" &&\n                p.enableConditionalUI &&\n                !!p.simpleWebAuthnBrowserVersion);\n            let simpleWebAuthnBrowserScript = \"\";\n            if (webauthnProvider) {\n                const { simpleWebAuthnBrowserVersion } = webauthnProvider;\n                simpleWebAuthnBrowserScript = `<script src=\"https://unpkg.com/@simplewebauthn/browser@${simpleWebAuthnBrowserVersion}/dist/bundle/index.umd.min.js\" crossorigin=\"anonymous\"></script>`;\n            }\n            return send({\n                cookies,\n                theme,\n                html: (0,_signin_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n                    csrfToken: params.csrfToken,\n                    // We only want to render providers\n                    providers: params.providers?.filter((provider) => \n                    // Always render oauth and email type providers\n                    [\"email\", \"oauth\", \"oidc\"].includes(provider.type) ||\n                        // Only render credentials type provider if credentials are defined\n                        (provider.type === \"credentials\" && provider.credentials) ||\n                        // Only render webauthn type provider if formFields are defined\n                        (provider.type === \"webauthn\" && provider.formFields) ||\n                        // Don't render other provider types\n                        false),\n                    callbackUrl: params.callbackUrl,\n                    theme: params.theme,\n                    error,\n                    ...query,\n                }),\n                title: \"Sign In\",\n                headTags: simpleWebAuthnBrowserScript,\n            });\n        },\n        signout() {\n            if (pages?.signOut)\n                return { redirect: pages.signOut, cookies };\n            return send({\n                cookies,\n                theme,\n                html: (0,_signout_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({ csrfToken: params.csrfToken, url, theme }),\n                title: \"Sign Out\",\n            });\n        },\n        verifyRequest(props) {\n            if (pages?.verifyRequest)\n                return { redirect: pages.verifyRequest, cookies };\n            return send({\n                cookies,\n                theme,\n                html: (0,_verify_request_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({ url, theme, ...props }),\n                title: \"Verify Request\",\n            });\n        },\n        error(error) {\n            if (pages?.error) {\n                return {\n                    redirect: `${pages.error}${pages.error.includes(\"?\") ? \"&\" : \"?\"}error=${error}`,\n                    cookies,\n                };\n            }\n            return send({\n                cookies,\n                theme,\n                // @ts-expect-error fix error type\n                ...(0,_error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({ url, theme, error }),\n                title: \"Error\",\n            });\n        },\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9wYWdlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF5RDtBQUN0QjtBQUNFO0FBQ0U7QUFDVDtBQUNzQjtBQUNKO0FBQ2hELGdCQUFnQixnREFBZ0Q7QUFDaEU7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZCQUE2QjtBQUNoRCw4TUFBOE0sa0RBQUcsQ0FBQyxpQkFBaUIsTUFBTSxVQUFVLGVBQWUsd0NBQXdDLDZCQUE2QixzQkFBc0IsdUVBQWMsT0FBTztBQUNsWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmLFlBQVksK0NBQStDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9DQUFvQztBQUNuRSw0QkFBNEIsOEJBQThCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFpRDtBQUM1RSxhQUFhO0FBQ2IscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsMkJBQTJCLG9DQUFvQztBQUMvRCwrQ0FBK0Msd0NBQXdDO0FBQ3ZGLGdDQUFnQztBQUNoQztBQUNBLGlCQUFpQixJQUFJO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwwQkFBMEIscURBQWE7QUFDdkM7QUFDQSxtQ0FBbUMsYUFBYSxFQUFFLHVDQUF1QyxFQUFFLHNCQUFzQix3Q0FBd0MsRUFBRTtBQUMzSjtBQUNBLG1DQUFtQyxVQUFVLEdBQUcsc0JBQXNCLE9BQU8sRUFBRTtBQUMvRSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLCtCQUErQjtBQUN2RCx3R0FBd0csNkJBQTZCO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNEQUFVO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1REFBVyxHQUFHLHlDQUF5QztBQUM3RTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOERBQWlCLEdBQUcsc0JBQXNCO0FBQ2hFO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsWUFBWSxFQUFFLHNDQUFzQyxRQUFRLE1BQU07QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscURBQVMsR0FBRyxtQkFBbUI7QUFDbEQ7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxwYWdlc1xcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyVG9TdHJpbmcgfSBmcm9tIFwicHJlYWN0LXJlbmRlci10by1zdHJpbmdcIjtcbmltcG9ydCBFcnJvclBhZ2UgZnJvbSBcIi4vZXJyb3IuanNcIjtcbmltcG9ydCBTaWduaW5QYWdlIGZyb20gXCIuL3NpZ25pbi5qc1wiO1xuaW1wb3J0IFNpZ25vdXRQYWdlIGZyb20gXCIuL3NpZ25vdXQuanNcIjtcbmltcG9ydCBjc3MgZnJvbSBcIi4vc3R5bGVzLmpzXCI7XG5pbXBvcnQgVmVyaWZ5UmVxdWVzdFBhZ2UgZnJvbSBcIi4vdmVyaWZ5LXJlcXVlc3QuanNcIjtcbmltcG9ydCB7IFVua25vd25BY3Rpb24gfSBmcm9tIFwiLi4vLi4vZXJyb3JzLmpzXCI7XG5mdW5jdGlvbiBzZW5kKHsgaHRtbCwgdGl0bGUsIHN0YXR1cywgY29va2llcywgdGhlbWUsIGhlYWRUYWdzLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29va2llcyxcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwidGV4dC9odG1sXCIgfSxcbiAgICAgICAgYm9keTogYDwhRE9DVFlQRSBodG1sPjxodG1sIGxhbmc9XCJlblwiPjxoZWFkPjxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPjxtZXRhIGh0dHAtZXF1aXY9XCJYLVVBLUNvbXBhdGlibGVcIiBjb250ZW50PVwiSUU9ZWRnZVwiPjxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+PHN0eWxlPiR7Y3NzfTwvc3R5bGU+PHRpdGxlPiR7dGl0bGV9PC90aXRsZT4ke2hlYWRUYWdzID8/IFwiXCJ9PC9oZWFkPjxib2R5IGNsYXNzPVwiX19uZXh0LWF1dGgtdGhlbWUtJHt0aGVtZT8uY29sb3JTY2hlbWUgPz8gXCJhdXRvXCJ9XCI+PGRpdiBjbGFzcz1cInBhZ2VcIj4ke3JlbmRlclRvU3RyaW5nKGh0bWwpfTwvZGl2PjwvYm9keT48L2h0bWw+YCxcbiAgICB9O1xufVxuLyoqXG4gKiBVbmxlc3MgdGhlIHVzZXIgZGVmaW5lcyB0aGVpciBbb3duIHBhZ2VzXShodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUjcGFnZXMpLFxuICogd2UgcmVuZGVyIGEgc2V0IG9mIGRlZmF1bHQgb25lcywgdXNpbmcgUHJlYWN0IFNTUi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVuZGVyUGFnZShwYXJhbXMpIHtcbiAgICBjb25zdCB7IHVybCwgdGhlbWUsIHF1ZXJ5LCBjb29raWVzLCBwYWdlcywgcHJvdmlkZXJzIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3NyZihza2lwLCBvcHRpb25zLCBjb29raWVzKSB7XG4gICAgICAgICAgICBpZiAoIXNraXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHsgY3NyZlRva2VuOiBvcHRpb25zLmNzcmZUb2tlbiB9LFxuICAgICAgICAgICAgICAgICAgICBjb29raWVzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmxvZ2dlci53YXJuKFwiY3NyZi1kaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIGNvb2tpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5jb29raWVzLmNzcmZUb2tlbi5uYW1lLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsgLi4ub3B0aW9ucy5jb29raWVzLmNzcmZUb2tlbi5vcHRpb25zLCBtYXhBZ2U6IDAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiA0MDQsIGNvb2tpZXMgfTtcbiAgICAgICAgfSxcbiAgICAgICAgcHJvdmlkZXJzKHByb3ZpZGVycykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgYm9keTogcHJvdmlkZXJzLnJlZHVjZSgoYWNjLCB7IGlkLCBuYW1lLCB0eXBlLCBzaWduaW5VcmwsIGNhbGxiYWNrVXJsIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjW2lkXSA9IHsgaWQsIG5hbWUsIHR5cGUsIHNpZ25pblVybCwgY2FsbGJhY2tVcmwgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBzaWduaW4ocHJvdmlkZXJJZCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChwcm92aWRlcklkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbmtub3duQWN0aW9uKFwiVW5zdXBwb3J0ZWQgYWN0aW9uXCIpO1xuICAgICAgICAgICAgaWYgKHBhZ2VzPy5zaWduSW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgc2lnbmluVXJsID0gYCR7cGFnZXMuc2lnbklufSR7cGFnZXMuc2lnbkluLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHsgY2FsbGJhY2tVcmw6IHBhcmFtcy5jYWxsYmFja1VybCA/PyBcIi9cIiB9KX1gO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgc2lnbmluVXJsID0gYCR7c2lnbmluVXJsfSYke25ldyBVUkxTZWFyY2hQYXJhbXMoeyBlcnJvciB9KX1gO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0OiBzaWduaW5VcmwsIGNvb2tpZXMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSB3ZWJhdXRobiBwcm92aWRlciB3aXRoIGNvbmRpdGlvbmFsIFVJIGFuZFxuICAgICAgICAgICAgLy8gYSBzaW1wbGVXZWJBdXRobkJyb3dzZXJTY3JpcHQgaXMgZGVmaW5lZCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gcmVuZGVyIHRoZSBzY3JpcHQgaW4gdGhlIHBhZ2UuXG4gICAgICAgICAgICBjb25zdCB3ZWJhdXRoblByb3ZpZGVyID0gcHJvdmlkZXJzPy5maW5kKChwKSA9PiBwLnR5cGUgPT09IFwid2ViYXV0aG5cIiAmJlxuICAgICAgICAgICAgICAgIHAuZW5hYmxlQ29uZGl0aW9uYWxVSSAmJlxuICAgICAgICAgICAgICAgICEhcC5zaW1wbGVXZWJBdXRobkJyb3dzZXJWZXJzaW9uKTtcbiAgICAgICAgICAgIGxldCBzaW1wbGVXZWJBdXRobkJyb3dzZXJTY3JpcHQgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHdlYmF1dGhuUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNpbXBsZVdlYkF1dGhuQnJvd3NlclZlcnNpb24gfSA9IHdlYmF1dGhuUHJvdmlkZXI7XG4gICAgICAgICAgICAgICAgc2ltcGxlV2ViQXV0aG5Ccm93c2VyU2NyaXB0ID0gYDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly91bnBrZy5jb20vQHNpbXBsZXdlYmF1dGhuL2Jyb3dzZXJAJHtzaW1wbGVXZWJBdXRobkJyb3dzZXJWZXJzaW9ufS9kaXN0L2J1bmRsZS9pbmRleC51bWQubWluLmpzXCIgY3Jvc3NvcmlnaW49XCJhbm9ueW1vdXNcIj48L3NjcmlwdD5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbmQoe1xuICAgICAgICAgICAgICAgIGNvb2tpZXMsXG4gICAgICAgICAgICAgICAgdGhlbWUsXG4gICAgICAgICAgICAgICAgaHRtbDogU2lnbmluUGFnZSh7XG4gICAgICAgICAgICAgICAgICAgIGNzcmZUb2tlbjogcGFyYW1zLmNzcmZUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHJlbmRlciBwcm92aWRlcnNcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBwYXJhbXMucHJvdmlkZXJzPy5maWx0ZXIoKHByb3ZpZGVyKSA9PiBcbiAgICAgICAgICAgICAgICAgICAgLy8gQWx3YXlzIHJlbmRlciBvYXV0aCBhbmQgZW1haWwgdHlwZSBwcm92aWRlcnNcbiAgICAgICAgICAgICAgICAgICAgW1wiZW1haWxcIiwgXCJvYXV0aFwiLCBcIm9pZGNcIl0uaW5jbHVkZXMocHJvdmlkZXIudHlwZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgcmVuZGVyIGNyZWRlbnRpYWxzIHR5cGUgcHJvdmlkZXIgaWYgY3JlZGVudGlhbHMgYXJlIGRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIChwcm92aWRlci50eXBlID09PSBcImNyZWRlbnRpYWxzXCIgJiYgcHJvdmlkZXIuY3JlZGVudGlhbHMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJlbmRlciB3ZWJhdXRobiB0eXBlIHByb3ZpZGVyIGlmIGZvcm1GaWVsZHMgYXJlIGRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIChwcm92aWRlci50eXBlID09PSBcIndlYmF1dGhuXCIgJiYgcHJvdmlkZXIuZm9ybUZpZWxkcykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHJlbmRlciBvdGhlciBwcm92aWRlciB0eXBlc1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UpLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja1VybDogcGFyYW1zLmNhbGxiYWNrVXJsLFxuICAgICAgICAgICAgICAgICAgICB0aGVtZTogcGFyYW1zLnRoZW1lLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiU2lnbiBJblwiLFxuICAgICAgICAgICAgICAgIGhlYWRUYWdzOiBzaW1wbGVXZWJBdXRobkJyb3dzZXJTY3JpcHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc2lnbm91dCgpIHtcbiAgICAgICAgICAgIGlmIChwYWdlcz8uc2lnbk91dClcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdDogcGFnZXMuc2lnbk91dCwgY29va2llcyB9O1xuICAgICAgICAgICAgcmV0dXJuIHNlbmQoe1xuICAgICAgICAgICAgICAgIGNvb2tpZXMsXG4gICAgICAgICAgICAgICAgdGhlbWUsXG4gICAgICAgICAgICAgICAgaHRtbDogU2lnbm91dFBhZ2UoeyBjc3JmVG9rZW46IHBhcmFtcy5jc3JmVG9rZW4sIHVybCwgdGhlbWUgfSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiU2lnbiBPdXRcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB2ZXJpZnlSZXF1ZXN0KHByb3BzKSB7XG4gICAgICAgICAgICBpZiAocGFnZXM/LnZlcmlmeVJlcXVlc3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3Q6IHBhZ2VzLnZlcmlmeVJlcXVlc3QsIGNvb2tpZXMgfTtcbiAgICAgICAgICAgIHJldHVybiBzZW5kKHtcbiAgICAgICAgICAgICAgICBjb29raWVzLFxuICAgICAgICAgICAgICAgIHRoZW1lLFxuICAgICAgICAgICAgICAgIGh0bWw6IFZlcmlmeVJlcXVlc3RQYWdlKHsgdXJsLCB0aGVtZSwgLi4ucHJvcHMgfSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiVmVyaWZ5IFJlcXVlc3RcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcihlcnJvcikge1xuICAgICAgICAgICAgaWYgKHBhZ2VzPy5lcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBgJHtwYWdlcy5lcnJvcn0ke3BhZ2VzLmVycm9yLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9ZXJyb3I9JHtlcnJvcn1gLFxuICAgICAgICAgICAgICAgICAgICBjb29raWVzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VuZCh7XG4gICAgICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgICAgICB0aGVtZSxcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGZpeCBlcnJvciB0eXBlXG4gICAgICAgICAgICAgICAgLi4uRXJyb3JQYWdlKHsgdXJsLCB0aGVtZSwgZXJyb3IgfSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/pages/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/pages/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ renderPage)\n/* harmony export */ });\n/* harmony import */ var preact_render_to_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact-render-to-string */ \"(rsc)/./node_modules/preact-render-to-string/dist/index.mjs\");\n/* harmony import */ var _error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./error.js */ \"(rsc)/./node_modules/@auth/core/lib/pages/error.js\");\n/* harmony import */ var _signin_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./signin.js */ \"(rsc)/./node_modules/@auth/core/lib/pages/signin.js\");\n/* harmony import */ var _signout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./signout.js */ \"(rsc)/./node_modules/@auth/core/lib/pages/signout.js\");\n/* harmony import */ var _styles_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles.js */ \"(rsc)/./node_modules/@auth/core/lib/pages/styles.js\");\n/* harmony import */ var _verify_request_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./verify-request.js */ \"(rsc)/./node_modules/@auth/core/lib/pages/verify-request.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n\n\n\n\n\n\n\nfunction send({ html, title, status, cookies, theme, headTags, }) {\n    return {\n        cookies,\n        status,\n        headers: { \"Content-Type\": \"text/html\" },\n        body: `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><style>${_styles_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]}</style><title>${title}</title>${headTags ?? \"\"}</head><body class=\"__next-auth-theme-${theme?.colorScheme ?? \"auto\"}\"><div class=\"page\">${(0,preact_render_to_string__WEBPACK_IMPORTED_MODULE_0__.renderToString)(html)}</div></body></html>`,\n    };\n}\n/**\n * Unless the user defines their [own pages](https://authjs.dev/reference/core#pages),\n * we render a set of default ones, using Preact SSR.\n */\nfunction renderPage(params) {\n    const { url, theme, query, cookies, pages, providers } = params;\n    return {\n        csrf(skip, options, cookies) {\n            if (!skip) {\n                return {\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: { csrfToken: options.csrfToken },\n                    cookies,\n                };\n            }\n            options.logger.warn(\"csrf-disabled\");\n            cookies.push({\n                name: options.cookies.csrfToken.name,\n                value: \"\",\n                options: { ...options.cookies.csrfToken.options, maxAge: 0 },\n            });\n            return { status: 404, cookies };\n        },\n        providers(providers) {\n            return {\n                headers: { \"Content-Type\": \"application/json\" },\n                body: providers.reduce((acc, { id, name, type, signinUrl, callbackUrl }) => {\n                    acc[id] = { id, name, type, signinUrl, callbackUrl };\n                    return acc;\n                }, {}),\n            };\n        },\n        signin(providerId, error) {\n            if (providerId)\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.UnknownAction(\"Unsupported action\");\n            if (pages?.signIn) {\n                let signinUrl = `${pages.signIn}${pages.signIn.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl: params.callbackUrl ?? \"/\" })}`;\n                if (error)\n                    signinUrl = `${signinUrl}&${new URLSearchParams({ error })}`;\n                return { redirect: signinUrl, cookies };\n            }\n            // If we have a webauthn provider with conditional UI and\n            // a simpleWebAuthnBrowserScript is defined, we need to\n            // render the script in the page.\n            const webauthnProvider = providers?.find((p) => p.type === \"webauthn\" &&\n                p.enableConditionalUI &&\n                !!p.simpleWebAuthnBrowserVersion);\n            let simpleWebAuthnBrowserScript = \"\";\n            if (webauthnProvider) {\n                const { simpleWebAuthnBrowserVersion } = webauthnProvider;\n                simpleWebAuthnBrowserScript = `<script src=\"https://unpkg.com/@simplewebauthn/browser@${simpleWebAuthnBrowserVersion}/dist/bundle/index.umd.min.js\" crossorigin=\"anonymous\"></script>`;\n            }\n            return send({\n                cookies,\n                theme,\n                html: (0,_signin_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n                    csrfToken: params.csrfToken,\n                    // We only want to render providers\n                    providers: params.providers?.filter((provider) => \n                    // Always render oauth and email type providers\n                    [\"email\", \"oauth\", \"oidc\"].includes(provider.type) ||\n                        // Only render credentials type provider if credentials are defined\n                        (provider.type === \"credentials\" && provider.credentials) ||\n                        // Only render webauthn type provider if formFields are defined\n                        (provider.type === \"webauthn\" && provider.formFields) ||\n                        // Don't render other provider types\n                        false),\n                    callbackUrl: params.callbackUrl,\n                    theme: params.theme,\n                    error,\n                    ...query,\n                }),\n                title: \"Sign In\",\n                headTags: simpleWebAuthnBrowserScript,\n            });\n        },\n        signout() {\n            if (pages?.signOut)\n                return { redirect: pages.signOut, cookies };\n            return send({\n                cookies,\n                theme,\n                html: (0,_signout_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({ csrfToken: params.csrfToken, url, theme }),\n                title: \"Sign Out\",\n            });\n        },\n        verifyRequest(props) {\n            if (pages?.verifyRequest)\n                return { redirect: pages.verifyRequest, cookies };\n            return send({\n                cookies,\n                theme,\n                html: (0,_verify_request_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({ url, theme, ...props }),\n                title: \"Verify Request\",\n            });\n        },\n        error(error) {\n            if (pages?.error) {\n                return {\n                    redirect: `${pages.error}${pages.error.includes(\"?\") ? \"&\" : \"?\"}error=${error}`,\n                    cookies,\n                };\n            }\n            return send({\n                cookies,\n                theme,\n                // @ts-expect-error fix error type\n                ...(0,_error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({ url, theme, error }),\n                title: \"Error\",\n            });\n        },\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvcGFnZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDdEI7QUFDRTtBQUNFO0FBQ1Q7QUFDc0I7QUFDSjtBQUNoRCxnQkFBZ0IsZ0RBQWdEO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2QkFBNkI7QUFDaEQsOE1BQThNLGtEQUFHLENBQUMsaUJBQWlCLE1BQU0sVUFBVSxlQUFlLHdDQUF3Qyw2QkFBNkIsc0JBQXNCLHVFQUFjLE9BQU87QUFDbFg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZixZQUFZLCtDQUErQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixvQ0FBb0M7QUFDbkUsNEJBQTRCLDhCQUE4QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpREFBaUQ7QUFDNUUsYUFBYTtBQUNiLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBLDJCQUEyQixvQ0FBb0M7QUFDL0QsK0NBQStDLHdDQUF3QztBQUN2RixnQ0FBZ0M7QUFDaEM7QUFDQSxpQkFBaUIsSUFBSTtBQUNyQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsMEJBQTBCLHFEQUFhO0FBQ3ZDO0FBQ0EsbUNBQW1DLGFBQWEsRUFBRSx1Q0FBdUMsRUFBRSxzQkFBc0Isd0NBQXdDLEVBQUU7QUFDM0o7QUFDQSxtQ0FBbUMsVUFBVSxHQUFHLHNCQUFzQixPQUFPLEVBQUU7QUFDL0UseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQkFBK0I7QUFDdkQsd0dBQXdHLDZCQUE2QjtBQUNySTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdURBQVcsR0FBRyx5Q0FBeUM7QUFDN0U7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFpQixHQUFHLHNCQUFzQjtBQUNoRTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFlBQVksRUFBRSxzQ0FBc0MsUUFBUSxNQUFNO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFEQUFTLEdBQUcsbUJBQW1CO0FBQ2xEO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxccGFnZXNcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlclRvU3RyaW5nIH0gZnJvbSBcInByZWFjdC1yZW5kZXItdG8tc3RyaW5nXCI7XG5pbXBvcnQgRXJyb3JQYWdlIGZyb20gXCIuL2Vycm9yLmpzXCI7XG5pbXBvcnQgU2lnbmluUGFnZSBmcm9tIFwiLi9zaWduaW4uanNcIjtcbmltcG9ydCBTaWdub3V0UGFnZSBmcm9tIFwiLi9zaWdub3V0LmpzXCI7XG5pbXBvcnQgY3NzIGZyb20gXCIuL3N0eWxlcy5qc1wiO1xuaW1wb3J0IFZlcmlmeVJlcXVlc3RQYWdlIGZyb20gXCIuL3ZlcmlmeS1yZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBVbmtub3duQWN0aW9uIH0gZnJvbSBcIi4uLy4uL2Vycm9ycy5qc1wiO1xuZnVuY3Rpb24gc2VuZCh7IGh0bWwsIHRpdGxlLCBzdGF0dXMsIGNvb2tpZXMsIHRoZW1lLCBoZWFkVGFncywgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvb2tpZXMsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcInRleHQvaHRtbFwiIH0sXG4gICAgICAgIGJvZHk6IGA8IURPQ1RZUEUgaHRtbD48aHRtbCBsYW5nPVwiZW5cIj48aGVhZD48bWV0YSBjaGFyc2V0PVwiVVRGLThcIj48bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cIklFPWVkZ2VcIj48bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPjxzdHlsZT4ke2Nzc308L3N0eWxlPjx0aXRsZT4ke3RpdGxlfTwvdGl0bGU+JHtoZWFkVGFncyA/PyBcIlwifTwvaGVhZD48Ym9keSBjbGFzcz1cIl9fbmV4dC1hdXRoLXRoZW1lLSR7dGhlbWU/LmNvbG9yU2NoZW1lID8/IFwiYXV0b1wifVwiPjxkaXYgY2xhc3M9XCJwYWdlXCI+JHtyZW5kZXJUb1N0cmluZyhodG1sKX08L2Rpdj48L2JvZHk+PC9odG1sPmAsXG4gICAgfTtcbn1cbi8qKlxuICogVW5sZXNzIHRoZSB1c2VyIGRlZmluZXMgdGhlaXIgW293biBwYWdlc10oaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlI3BhZ2VzKSxcbiAqIHdlIHJlbmRlciBhIHNldCBvZiBkZWZhdWx0IG9uZXMsIHVzaW5nIFByZWFjdCBTU1IuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbmRlclBhZ2UocGFyYW1zKSB7XG4gICAgY29uc3QgeyB1cmwsIHRoZW1lLCBxdWVyeSwgY29va2llcywgcGFnZXMsIHByb3ZpZGVycyB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNzcmYoc2tpcCwgb3B0aW9ucywgY29va2llcykge1xuICAgICAgICAgICAgaWYgKCFza2lwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgICAgICBib2R5OiB7IGNzcmZUb2tlbjogb3B0aW9ucy5jc3JmVG9rZW4gfSxcbiAgICAgICAgICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIud2FybihcImNzcmYtZGlzYWJsZWRcIik7XG4gICAgICAgICAgICBjb29raWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuY29va2llcy5jc3JmVG9rZW4ubmFtZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJcIixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7IC4uLm9wdGlvbnMuY29va2llcy5jc3JmVG9rZW4ub3B0aW9ucywgbWF4QWdlOiAwIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogNDA0LCBjb29raWVzIH07XG4gICAgICAgIH0sXG4gICAgICAgIHByb3ZpZGVycyhwcm92aWRlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IHByb3ZpZGVycy5yZWR1Y2UoKGFjYywgeyBpZCwgbmFtZSwgdHlwZSwgc2lnbmluVXJsLCBjYWxsYmFja1VybCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFjY1tpZF0gPSB7IGlkLCBuYW1lLCB0eXBlLCBzaWduaW5VcmwsIGNhbGxiYWNrVXJsIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgfSwge30pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgc2lnbmluKHByb3ZpZGVySWQsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAocHJvdmlkZXJJZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5rbm93bkFjdGlvbihcIlVuc3VwcG9ydGVkIGFjdGlvblwiKTtcbiAgICAgICAgICAgIGlmIChwYWdlcz8uc2lnbkluKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNpZ25pblVybCA9IGAke3BhZ2VzLnNpZ25Jbn0ke3BhZ2VzLnNpZ25Jbi5pbmNsdWRlcyhcIj9cIikgPyBcIiZcIiA6IFwiP1wifSR7bmV3IFVSTFNlYXJjaFBhcmFtcyh7IGNhbGxiYWNrVXJsOiBwYXJhbXMuY2FsbGJhY2tVcmwgPz8gXCIvXCIgfSl9YDtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHNpZ25pblVybCA9IGAke3NpZ25pblVybH0mJHtuZXcgVVJMU2VhcmNoUGFyYW1zKHsgZXJyb3IgfSl9YDtcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWRpcmVjdDogc2lnbmluVXJsLCBjb29raWVzIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgd2ViYXV0aG4gcHJvdmlkZXIgd2l0aCBjb25kaXRpb25hbCBVSSBhbmRcbiAgICAgICAgICAgIC8vIGEgc2ltcGxlV2ViQXV0aG5Ccm93c2VyU2NyaXB0IGlzIGRlZmluZWQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIHJlbmRlciB0aGUgc2NyaXB0IGluIHRoZSBwYWdlLlxuICAgICAgICAgICAgY29uc3Qgd2ViYXV0aG5Qcm92aWRlciA9IHByb3ZpZGVycz8uZmluZCgocCkgPT4gcC50eXBlID09PSBcIndlYmF1dGhuXCIgJiZcbiAgICAgICAgICAgICAgICBwLmVuYWJsZUNvbmRpdGlvbmFsVUkgJiZcbiAgICAgICAgICAgICAgICAhIXAuc2ltcGxlV2ViQXV0aG5Ccm93c2VyVmVyc2lvbik7XG4gICAgICAgICAgICBsZXQgc2ltcGxlV2ViQXV0aG5Ccm93c2VyU2NyaXB0ID0gXCJcIjtcbiAgICAgICAgICAgIGlmICh3ZWJhdXRoblByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzaW1wbGVXZWJBdXRobkJyb3dzZXJWZXJzaW9uIH0gPSB3ZWJhdXRoblByb3ZpZGVyO1xuICAgICAgICAgICAgICAgIHNpbXBsZVdlYkF1dGhuQnJvd3NlclNjcmlwdCA9IGA8c2NyaXB0IHNyYz1cImh0dHBzOi8vdW5wa2cuY29tL0BzaW1wbGV3ZWJhdXRobi9icm93c2VyQCR7c2ltcGxlV2ViQXV0aG5Ccm93c2VyVmVyc2lvbn0vZGlzdC9idW5kbGUvaW5kZXgudW1kLm1pbi5qc1wiIGNyb3Nzb3JpZ2luPVwiYW5vbnltb3VzXCI+PC9zY3JpcHQ+YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZW5kKHtcbiAgICAgICAgICAgICAgICBjb29raWVzLFxuICAgICAgICAgICAgICAgIHRoZW1lLFxuICAgICAgICAgICAgICAgIGh0bWw6IFNpZ25pblBhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBjc3JmVG9rZW46IHBhcmFtcy5jc3JmVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byByZW5kZXIgcHJvdmlkZXJzXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyczogcGFyYW1zLnByb3ZpZGVycz8uZmlsdGVyKChwcm92aWRlcikgPT4gXG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyByZW5kZXIgb2F1dGggYW5kIGVtYWlsIHR5cGUgcHJvdmlkZXJzXG4gICAgICAgICAgICAgICAgICAgIFtcImVtYWlsXCIsIFwib2F1dGhcIiwgXCJvaWRjXCJdLmluY2x1ZGVzKHByb3ZpZGVyLnR5cGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJlbmRlciBjcmVkZW50aWFscyB0eXBlIHByb3ZpZGVyIGlmIGNyZWRlbnRpYWxzIGFyZSBkZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAocHJvdmlkZXIudHlwZSA9PT0gXCJjcmVkZW50aWFsc1wiICYmIHByb3ZpZGVyLmNyZWRlbnRpYWxzKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSByZW5kZXIgd2ViYXV0aG4gdHlwZSBwcm92aWRlciBpZiBmb3JtRmllbGRzIGFyZSBkZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAocHJvdmlkZXIudHlwZSA9PT0gXCJ3ZWJhdXRoblwiICYmIHByb3ZpZGVyLmZvcm1GaWVsZHMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZW5kZXIgb3RoZXIgcHJvdmlkZXIgdHlwZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlKSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tVcmw6IHBhcmFtcy5jYWxsYmFja1VybCxcbiAgICAgICAgICAgICAgICAgICAgdGhlbWU6IHBhcmFtcy50aGVtZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIC4uLnF1ZXJ5LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlNpZ24gSW5cIixcbiAgICAgICAgICAgICAgICBoZWFkVGFnczogc2ltcGxlV2ViQXV0aG5Ccm93c2VyU2NyaXB0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNpZ25vdXQoKSB7XG4gICAgICAgICAgICBpZiAocGFnZXM/LnNpZ25PdXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVkaXJlY3Q6IHBhZ2VzLnNpZ25PdXQsIGNvb2tpZXMgfTtcbiAgICAgICAgICAgIHJldHVybiBzZW5kKHtcbiAgICAgICAgICAgICAgICBjb29raWVzLFxuICAgICAgICAgICAgICAgIHRoZW1lLFxuICAgICAgICAgICAgICAgIGh0bWw6IFNpZ25vdXRQYWdlKHsgY3NyZlRva2VuOiBwYXJhbXMuY3NyZlRva2VuLCB1cmwsIHRoZW1lIH0pLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlNpZ24gT3V0XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdmVyaWZ5UmVxdWVzdChwcm9wcykge1xuICAgICAgICAgICAgaWYgKHBhZ2VzPy52ZXJpZnlSZXF1ZXN0KVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZGlyZWN0OiBwYWdlcy52ZXJpZnlSZXF1ZXN0LCBjb29raWVzIH07XG4gICAgICAgICAgICByZXR1cm4gc2VuZCh7XG4gICAgICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgICAgICB0aGVtZSxcbiAgICAgICAgICAgICAgICBodG1sOiBWZXJpZnlSZXF1ZXN0UGFnZSh7IHVybCwgdGhlbWUsIC4uLnByb3BzIH0pLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlZlcmlmeSBSZXF1ZXN0XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChwYWdlcz8uZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogYCR7cGFnZXMuZXJyb3J9JHtwYWdlcy5lcnJvci5pbmNsdWRlcyhcIj9cIikgPyBcIiZcIiA6IFwiP1wifWVycm9yPSR7ZXJyb3J9YCxcbiAgICAgICAgICAgICAgICAgICAgY29va2llcyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbmQoe1xuICAgICAgICAgICAgICAgIGNvb2tpZXMsXG4gICAgICAgICAgICAgICAgdGhlbWUsXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBmaXggZXJyb3IgdHlwZVxuICAgICAgICAgICAgICAgIC4uLkVycm9yUGFnZSh7IHVybCwgdGhlbWUsIGVycm9yIH0pLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIkVycm9yXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/pages/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/pages/signin.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/signin.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SigninPage)\n/* harmony export */ });\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/jsx-runtime */ \"(action-browser)/./node_modules/preact/jsx-runtime/dist/jsxRuntime.mjs\");\n/* harmony import */ var _utils_webauthn_client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/webauthn-client.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/webauthn-client.js\");\n\n\nconst signinErrors = {\n    default: \"Unable to sign in.\",\n    Signin: \"Try signing in with a different account.\",\n    OAuthSignin: \"Try signing in with a different account.\",\n    OAuthCallbackError: \"Try signing in with a different account.\",\n    OAuthCreateAccount: \"Try signing in with a different account.\",\n    EmailCreateAccount: \"Try signing in with a different account.\",\n    Callback: \"Try signing in with a different account.\",\n    OAuthAccountNotLinked: \"To confirm your identity, sign in with the same account you used originally.\",\n    EmailSignin: \"The e-mail could not be sent.\",\n    CredentialsSignin: \"Sign in failed. Check the details you provided are correct.\",\n    SessionRequired: \"Please sign in to access this page.\",\n};\nfunction ConditionalUIScript(providerID) {\n    const startConditionalUIScript = `\nconst currentURL = window.location.href;\nconst authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));\n(${_utils_webauthn_client_js__WEBPACK_IMPORTED_MODULE_1__.webauthnScript})(authURL, \"${providerID}\");\n`;\n    return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"script\", { dangerouslySetInnerHTML: { __html: startConditionalUIScript } }) }));\n}\nfunction SigninPage(props) {\n    const { csrfToken, providers = [], callbackUrl, theme, email, error: errorType, } = props;\n    if (typeof document !== \"undefined\" && theme?.brandColor) {\n        document.documentElement.style.setProperty(\"--brand-color\", theme.brandColor);\n    }\n    if (typeof document !== \"undefined\" && theme?.buttonText) {\n        document.documentElement.style.setProperty(\"--button-text-color\", theme.buttonText);\n    }\n    const error = errorType && (signinErrors[errorType] ?? signinErrors.default);\n    const providerLogoPath = \"https://authjs.dev/img/providers\";\n    const conditionalUIProviderID = providers.find((provider) => provider.type === \"webauthn\" && provider.enableConditionalUI)?.id;\n    return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"signin\", children: [theme?.brandColor && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `:root {--brand-color: ${theme.brandColor}}`,\n                } })), theme?.buttonText && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `,\n                } })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"card\", children: [error && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"error\", children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: error }) })), theme?.logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), providers.map((provider, i) => {\n                        let bg, brandColor, logo;\n                        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n                            ;\n                            ({\n                                bg = \"#fff\",\n                                brandColor,\n                                logo = `${providerLogoPath}/${provider.id}.svg`,\n                            } = provider.style ?? {});\n                        }\n                        const color = brandColor ?? bg ?? \"#fff\";\n                        return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"provider\", children: [provider.type === \"oauth\" || provider.type === \"oidc\" ? ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: provider.signinUrl, method: \"POST\", children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), callbackUrl && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"callbackUrl\", value: callbackUrl })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { type: \"submit\", className: \"button\", style: {\n                                                \"--provider-bg\": \"#fff\",\n                                                \"--provider-bg-hover\": `color-mix(in srgb, ${color} 30%, #fff)`,\n                                                \"--provider-dark-bg\": \"#161b22\",\n                                                \"--provider-dark-bg-hover\": `color-mix(in srgb, ${color} 30%, #000)`,\n                                            }, tabIndex: 0, children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { style: {\n                                                        filter: \"invert(1) grayscale(1) brightness(1.3) contrast(9000)\",\n                                                        \"mix-blend-mode\": \"luminosity\",\n                                                        opacity: 0.95,\n                                                    }, children: [\"Sign in with \", provider.name] }), logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { loading: \"lazy\", height: 24, src: logo })] })] })) : null, (provider.type === \"email\" ||\n                                    provider.type === \"credentials\" ||\n                                    provider.type === \"webauthn\") &&\n                                    i > 0 &&\n                                    providers[i - 1].type !== \"email\" &&\n                                    providers[i - 1].type !== \"credentials\" &&\n                                    providers[i - 1].type !== \"webauthn\" && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"hr\", {}), provider.type === \"email\" && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: provider.signinUrl, method: \"POST\", children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"label\", { className: \"section-header\", htmlFor: `input-email-for-${provider.id}-provider`, children: \"Email\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { id: `input-email-for-${provider.id}-provider`, autoFocus: true, type: \"email\", name: \"email\", value: email, placeholder: \"email@example.com\", required: true }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { id: \"submitButton\", type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), provider.type === \"credentials\" && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: provider.callbackUrl, method: \"POST\", children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), Object.keys(provider.credentials).map((credential) => {\n                                            return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"label\", { className: \"section-header\", htmlFor: `input-${credential}-for-${provider.id}-provider`, children: provider.credentials[credential].label ?? credential }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { name: credential, id: `input-${credential}-for-${provider.id}-provider`, type: provider.credentials[credential].type ?? \"text\", placeholder: provider.credentials[credential].placeholder ?? \"\", ...provider.credentials[credential] })] }, `input-group-${provider.id}`));\n                                        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { id: \"submitButton\", type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), provider.type === \"webauthn\" && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: provider.callbackUrl, method: \"POST\", id: `${provider.id}-form`, children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), Object.keys(provider.formFields).map((field) => {\n                                            return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"label\", { className: \"section-header\", htmlFor: `input-${field}-for-${provider.id}-provider`, children: provider.formFields[field].label ?? field }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { name: field, \"data-form-field\": true, id: `input-${field}-for-${provider.id}-provider`, type: provider.formFields[field].type ?? \"text\", placeholder: provider.formFields[field].placeholder ?? \"\", ...provider.formFields[field] })] }, `input-group-${provider.id}`));\n                                        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { id: `submitButton-${provider.id}`, type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), (provider.type === \"email\" ||\n                                    provider.type === \"credentials\" ||\n                                    provider.type === \"webauthn\") &&\n                                    i + 1 < providers.length && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"hr\", {})] }, provider.id));\n                    })] }), conditionalUIProviderID && ConditionalUIScript(conditionalUIProviderID)] }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9wYWdlcy9zaWduaW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVGO0FBQzFCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLHFFQUFjLENBQUMsY0FBYyxXQUFXO0FBQzNDO0FBQ0EsWUFBWSx1REFBSSxDQUFDLHdEQUFTLElBQUksVUFBVSx1REFBSSxhQUFhLDJCQUEyQixvQ0FBb0MsR0FBRztBQUMzSDtBQUNlO0FBQ2YsWUFBWSwwRUFBMEU7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3REFBSyxVQUFVLHNEQUFzRCx1REFBSSxZQUFZO0FBQ2pHLG9DQUFvQyxpQkFBaUIsa0JBQWtCO0FBQ3ZFLG1CQUFtQiwwQkFBMEIsdURBQUksWUFBWTtBQUM3RDtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxtQkFBbUIsSUFBSSx3REFBSyxVQUFVLHdDQUF3Qyx1REFBSSxVQUFVLDhCQUE4Qix1REFBSSxRQUFRLGlCQUFpQixHQUFHLG1CQUFtQix1REFBSSxVQUFVLGlEQUFpRDtBQUM1TztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsaUJBQWlCLEdBQUcsWUFBWTtBQUMxRSw4QkFBOEIsc0JBQXNCO0FBQ3BEO0FBQ0E7QUFDQSxnQ0FBZ0Msd0RBQUssVUFBVSwyRkFBMkYsd0RBQUssV0FBVyx1REFBdUQsdURBQUksWUFBWSxxREFBcUQsbUJBQW1CLHVEQUFJLFlBQVkseURBQXlELElBQUksd0RBQUssYUFBYTtBQUN4WTtBQUNBLDZGQUE2RixPQUFPO0FBQ3BHO0FBQ0Esa0dBQWtHLE9BQU87QUFDekcsNkNBQTZDLDBCQUEwQix3REFBSyxXQUFXO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCw4Q0FBOEMsV0FBVyx1REFBSSxVQUFVLHdDQUF3QyxJQUFJLElBQUk7QUFDNUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSx1REFBSSxTQUFTLGlDQUFpQyx3REFBSyxXQUFXLHVEQUF1RCx1REFBSSxZQUFZLHFEQUFxRCxHQUFHLHVEQUFJLFlBQVkseURBQXlELFlBQVksK0JBQStCLEdBQUcsdURBQUksWUFBWSx1QkFBdUIsWUFBWSwySEFBMkgsR0FBRyx3REFBSyxhQUFhLDZGQUE2RixJQUFJLHdDQUF3Qyx3REFBSyxXQUFXLHlEQUF5RCx1REFBSSxZQUFZLHFEQUFxRDtBQUMxMUIsb0RBQW9ELHdEQUFLLFVBQVUsV0FBVyx1REFBSSxZQUFZLCtDQUErQyxXQUFXLE9BQU8sWUFBWSw0RUFBNEUsR0FBRyx1REFBSSxZQUFZLCtCQUErQixXQUFXLE9BQU8sWUFBWSx5S0FBeUssSUFBSSxpQkFBaUIsWUFBWTtBQUNqaEIseUNBQXlDLEdBQUcsd0RBQUssYUFBYSw2RkFBNkYsSUFBSSxxQ0FBcUMsd0RBQUssV0FBVyxxREFBcUQsWUFBWSxtQkFBbUIsdURBQUksWUFBWSxxREFBcUQ7QUFDN1csb0RBQW9ELHdEQUFLLFVBQVUsV0FBVyx1REFBSSxZQUFZLCtDQUErQyxNQUFNLE9BQU8sWUFBWSxpRUFBaUUsR0FBRyx1REFBSSxZQUFZLG1EQUFtRCxNQUFNLE9BQU8sWUFBWSx1SkFBdUosSUFBSSxpQkFBaUIsWUFBWTtBQUM5Zix5Q0FBeUMsR0FBRyx3REFBSyxhQUFhLG9CQUFvQixZQUFZLDRFQUE0RSxJQUFJO0FBQzlLO0FBQ0E7QUFDQSxnRUFBZ0UsdURBQUksU0FBUyxJQUFJO0FBQ2pGLHFCQUFxQixJQUFJLDZFQUE2RTtBQUN0RyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHBhZ2VzXFxzaWduaW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IGFzIF9qc3gsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJwcmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHdlYmF1dGhuU2NyaXB0IH0gZnJvbSBcIi4uL3V0aWxzL3dlYmF1dGhuLWNsaWVudC5qc1wiO1xuY29uc3Qgc2lnbmluRXJyb3JzID0ge1xuICAgIGRlZmF1bHQ6IFwiVW5hYmxlIHRvIHNpZ24gaW4uXCIsXG4gICAgU2lnbmluOiBcIlRyeSBzaWduaW5nIGluIHdpdGggYSBkaWZmZXJlbnQgYWNjb3VudC5cIixcbiAgICBPQXV0aFNpZ25pbjogXCJUcnkgc2lnbmluZyBpbiB3aXRoIGEgZGlmZmVyZW50IGFjY291bnQuXCIsXG4gICAgT0F1dGhDYWxsYmFja0Vycm9yOiBcIlRyeSBzaWduaW5nIGluIHdpdGggYSBkaWZmZXJlbnQgYWNjb3VudC5cIixcbiAgICBPQXV0aENyZWF0ZUFjY291bnQ6IFwiVHJ5IHNpZ25pbmcgaW4gd2l0aCBhIGRpZmZlcmVudCBhY2NvdW50LlwiLFxuICAgIEVtYWlsQ3JlYXRlQWNjb3VudDogXCJUcnkgc2lnbmluZyBpbiB3aXRoIGEgZGlmZmVyZW50IGFjY291bnQuXCIsXG4gICAgQ2FsbGJhY2s6IFwiVHJ5IHNpZ25pbmcgaW4gd2l0aCBhIGRpZmZlcmVudCBhY2NvdW50LlwiLFxuICAgIE9BdXRoQWNjb3VudE5vdExpbmtlZDogXCJUbyBjb25maXJtIHlvdXIgaWRlbnRpdHksIHNpZ24gaW4gd2l0aCB0aGUgc2FtZSBhY2NvdW50IHlvdSB1c2VkIG9yaWdpbmFsbHkuXCIsXG4gICAgRW1haWxTaWduaW46IFwiVGhlIGUtbWFpbCBjb3VsZCBub3QgYmUgc2VudC5cIixcbiAgICBDcmVkZW50aWFsc1NpZ25pbjogXCJTaWduIGluIGZhaWxlZC4gQ2hlY2sgdGhlIGRldGFpbHMgeW91IHByb3ZpZGVkIGFyZSBjb3JyZWN0LlwiLFxuICAgIFNlc3Npb25SZXF1aXJlZDogXCJQbGVhc2Ugc2lnbiBpbiB0byBhY2Nlc3MgdGhpcyBwYWdlLlwiLFxufTtcbmZ1bmN0aW9uIENvbmRpdGlvbmFsVUlTY3JpcHQocHJvdmlkZXJJRCkge1xuICAgIGNvbnN0IHN0YXJ0Q29uZGl0aW9uYWxVSVNjcmlwdCA9IGBcbmNvbnN0IGN1cnJlbnRVUkwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbmNvbnN0IGF1dGhVUkwgPSBjdXJyZW50VVJMLnN1YnN0cmluZygwLCBjdXJyZW50VVJMLmxhc3RJbmRleE9mKCcvJykpO1xuKCR7d2ViYXV0aG5TY3JpcHR9KShhdXRoVVJMLCBcIiR7cHJvdmlkZXJJRH1cIik7XG5gO1xuICAgIHJldHVybiAoX2pzeChfRnJhZ21lbnQsIHsgY2hpbGRyZW46IF9qc3goXCJzY3JpcHRcIiwgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IHN0YXJ0Q29uZGl0aW9uYWxVSVNjcmlwdCB9IH0pIH0pKTtcbn1cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNpZ25pblBhZ2UocHJvcHMpIHtcbiAgICBjb25zdCB7IGNzcmZUb2tlbiwgcHJvdmlkZXJzID0gW10sIGNhbGxiYWNrVXJsLCB0aGVtZSwgZW1haWwsIGVycm9yOiBlcnJvclR5cGUsIH0gPSBwcm9wcztcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIHRoZW1lPy5icmFuZENvbG9yKSB7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tYnJhbmQtY29sb3JcIiwgdGhlbWUuYnJhbmRDb2xvcik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgdGhlbWU/LmJ1dHRvblRleHQpIHtcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1idXR0b24tdGV4dC1jb2xvclwiLCB0aGVtZS5idXR0b25UZXh0KTtcbiAgICB9XG4gICAgY29uc3QgZXJyb3IgPSBlcnJvclR5cGUgJiYgKHNpZ25pbkVycm9yc1tlcnJvclR5cGVdID8/IHNpZ25pbkVycm9ycy5kZWZhdWx0KTtcbiAgICBjb25zdCBwcm92aWRlckxvZ29QYXRoID0gXCJodHRwczovL2F1dGhqcy5kZXYvaW1nL3Byb3ZpZGVyc1wiO1xuICAgIGNvbnN0IGNvbmRpdGlvbmFsVUlQcm92aWRlcklEID0gcHJvdmlkZXJzLmZpbmQoKHByb3ZpZGVyKSA9PiBwcm92aWRlci50eXBlID09PSBcIndlYmF1dGhuXCIgJiYgcHJvdmlkZXIuZW5hYmxlQ29uZGl0aW9uYWxVSSk/LmlkO1xuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic2lnbmluXCIsIGNoaWxkcmVuOiBbdGhlbWU/LmJyYW5kQ29sb3IgJiYgKF9qc3goXCJzdHlsZVwiLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7XG4gICAgICAgICAgICAgICAgICAgIF9faHRtbDogYDpyb290IHstLWJyYW5kLWNvbG9yOiAke3RoZW1lLmJyYW5kQ29sb3J9fWAsXG4gICAgICAgICAgICAgICAgfSB9KSksIHRoZW1lPy5idXR0b25UZXh0ICYmIChfanN4KFwic3R5bGVcIiwgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgICAgICAgICAgICBfX2h0bWw6IGBcbiAgICAgICAgOnJvb3Qge1xuICAgICAgICAgIC0tYnV0dG9uLXRleHQtY29sb3I6ICR7dGhlbWUuYnV0dG9uVGV4dH1cbiAgICAgICAgfVxuICAgICAgYCxcbiAgICAgICAgICAgICAgICB9IH0pKSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FyZFwiLCBjaGlsZHJlbjogW2Vycm9yICYmIChfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImVycm9yXCIsIGNoaWxkcmVuOiBfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBlcnJvciB9KSB9KSksIHRoZW1lPy5sb2dvICYmIF9qc3goXCJpbWdcIiwgeyBzcmM6IHRoZW1lLmxvZ28sIGFsdDogXCJMb2dvXCIsIGNsYXNzTmFtZTogXCJsb2dvXCIgfSksIHByb3ZpZGVycy5tYXAoKHByb3ZpZGVyLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmcsIGJyYW5kQ29sb3IsIGxvZ287XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJvYXV0aFwiIHx8IHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJnID0gXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyYW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ28gPSBgJHtwcm92aWRlckxvZ29QYXRofS8ke3Byb3ZpZGVyLmlkfS5zdmdgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gPSBwcm92aWRlci5zdHlsZSA/PyB7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9IGJyYW5kQ29sb3IgPz8gYmcgPz8gXCIjZmZmXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInByb3ZpZGVyXCIsIGNoaWxkcmVuOiBbcHJvdmlkZXIudHlwZSA9PT0gXCJvYXV0aFwiIHx8IHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiID8gKF9qc3hzKFwiZm9ybVwiLCB7IGFjdGlvbjogcHJvdmlkZXIuc2lnbmluVXJsLCBtZXRob2Q6IFwiUE9TVFwiLCBjaGlsZHJlbjogW19qc3goXCJpbnB1dFwiLCB7IHR5cGU6IFwiaGlkZGVuXCIsIG5hbWU6IFwiY3NyZlRva2VuXCIsIHZhbHVlOiBjc3JmVG9rZW4gfSksIGNhbGxiYWNrVXJsICYmIChfanN4KFwiaW5wdXRcIiwgeyB0eXBlOiBcImhpZGRlblwiLCBuYW1lOiBcImNhbGxiYWNrVXJsXCIsIHZhbHVlOiBjYWxsYmFja1VybCB9KSksIF9qc3hzKFwiYnV0dG9uXCIsIHsgdHlwZTogXCJzdWJtaXRcIiwgY2xhc3NOYW1lOiBcImJ1dHRvblwiLCBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCItLXByb3ZpZGVyLWJnXCI6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCItLXByb3ZpZGVyLWJnLWhvdmVyXCI6IGBjb2xvci1taXgoaW4gc3JnYiwgJHtjb2xvcn0gMzAlLCAjZmZmKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi0tcHJvdmlkZXItZGFyay1iZ1wiOiBcIiMxNjFiMjJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLS1wcm92aWRlci1kYXJrLWJnLWhvdmVyXCI6IGBjb2xvci1taXgoaW4gc3JnYiwgJHtjb2xvcn0gMzAlLCAjMDAwKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRhYkluZGV4OiAwLCBjaGlsZHJlbjogW19qc3hzKFwic3BhblwiLCB7IHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogXCJpbnZlcnQoMSkgZ3JheXNjYWxlKDEpIGJyaWdodG5lc3MoMS4zKSBjb250cmFzdCg5MDAwKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1peC1ibGVuZC1tb2RlXCI6IFwibHVtaW5vc2l0eVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjk1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNoaWxkcmVuOiBbXCJTaWduIGluIHdpdGggXCIsIHByb3ZpZGVyLm5hbWVdIH0pLCBsb2dvICYmIF9qc3goXCJpbWdcIiwgeyBsb2FkaW5nOiBcImxhenlcIiwgaGVpZ2h0OiAyNCwgc3JjOiBsb2dvIH0pXSB9KV0gfSkpIDogbnVsbCwgKHByb3ZpZGVyLnR5cGUgPT09IFwiZW1haWxcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIudHlwZSA9PT0gXCJjcmVkZW50aWFsc1wiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlci50eXBlID09PSBcIndlYmF1dGhuXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzW2kgLSAxXS50eXBlICE9PSBcImVtYWlsXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyc1tpIC0gMV0udHlwZSAhPT0gXCJjcmVkZW50aWFsc1wiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcnNbaSAtIDFdLnR5cGUgIT09IFwid2ViYXV0aG5cIiAmJiBfanN4KFwiaHJcIiwge30pLCBwcm92aWRlci50eXBlID09PSBcImVtYWlsXCIgJiYgKF9qc3hzKFwiZm9ybVwiLCB7IGFjdGlvbjogcHJvdmlkZXIuc2lnbmluVXJsLCBtZXRob2Q6IFwiUE9TVFwiLCBjaGlsZHJlbjogW19qc3goXCJpbnB1dFwiLCB7IHR5cGU6IFwiaGlkZGVuXCIsIG5hbWU6IFwiY3NyZlRva2VuXCIsIHZhbHVlOiBjc3JmVG9rZW4gfSksIF9qc3goXCJsYWJlbFwiLCB7IGNsYXNzTmFtZTogXCJzZWN0aW9uLWhlYWRlclwiLCBodG1sRm9yOiBgaW5wdXQtZW1haWwtZm9yLSR7cHJvdmlkZXIuaWR9LXByb3ZpZGVyYCwgY2hpbGRyZW46IFwiRW1haWxcIiB9KSwgX2pzeChcImlucHV0XCIsIHsgaWQ6IGBpbnB1dC1lbWFpbC1mb3ItJHtwcm92aWRlci5pZH0tcHJvdmlkZXJgLCBhdXRvRm9jdXM6IHRydWUsIHR5cGU6IFwiZW1haWxcIiwgbmFtZTogXCJlbWFpbFwiLCB2YWx1ZTogZW1haWwsIHBsYWNlaG9sZGVyOiBcImVtYWlsQGV4YW1wbGUuY29tXCIsIHJlcXVpcmVkOiB0cnVlIH0pLCBfanN4cyhcImJ1dHRvblwiLCB7IGlkOiBcInN1Ym1pdEJ1dHRvblwiLCB0eXBlOiBcInN1Ym1pdFwiLCB0YWJJbmRleDogMCwgY2hpbGRyZW46IFtcIlNpZ24gaW4gd2l0aCBcIiwgcHJvdmlkZXIubmFtZV0gfSldIH0pKSwgcHJvdmlkZXIudHlwZSA9PT0gXCJjcmVkZW50aWFsc1wiICYmIChfanN4cyhcImZvcm1cIiwgeyBhY3Rpb246IHByb3ZpZGVyLmNhbGxiYWNrVXJsLCBtZXRob2Q6IFwiUE9TVFwiLCBjaGlsZHJlbjogW19qc3goXCJpbnB1dFwiLCB7IHR5cGU6IFwiaGlkZGVuXCIsIG5hbWU6IFwiY3NyZlRva2VuXCIsIHZhbHVlOiBjc3JmVG9rZW4gfSksIE9iamVjdC5rZXlzKHByb3ZpZGVyLmNyZWRlbnRpYWxzKS5tYXAoKGNyZWRlbnRpYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNoaWxkcmVuOiBbX2pzeChcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBcInNlY3Rpb24taGVhZGVyXCIsIGh0bWxGb3I6IGBpbnB1dC0ke2NyZWRlbnRpYWx9LWZvci0ke3Byb3ZpZGVyLmlkfS1wcm92aWRlcmAsIGNoaWxkcmVuOiBwcm92aWRlci5jcmVkZW50aWFsc1tjcmVkZW50aWFsXS5sYWJlbCA/PyBjcmVkZW50aWFsIH0pLCBfanN4KFwiaW5wdXRcIiwgeyBuYW1lOiBjcmVkZW50aWFsLCBpZDogYGlucHV0LSR7Y3JlZGVudGlhbH0tZm9yLSR7cHJvdmlkZXIuaWR9LXByb3ZpZGVyYCwgdHlwZTogcHJvdmlkZXIuY3JlZGVudGlhbHNbY3JlZGVudGlhbF0udHlwZSA/PyBcInRleHRcIiwgcGxhY2Vob2xkZXI6IHByb3ZpZGVyLmNyZWRlbnRpYWxzW2NyZWRlbnRpYWxdLnBsYWNlaG9sZGVyID8/IFwiXCIsIC4uLnByb3ZpZGVyLmNyZWRlbnRpYWxzW2NyZWRlbnRpYWxdIH0pXSB9LCBgaW5wdXQtZ3JvdXAtJHtwcm92aWRlci5pZH1gKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIF9qc3hzKFwiYnV0dG9uXCIsIHsgaWQ6IFwic3VibWl0QnV0dG9uXCIsIHR5cGU6IFwic3VibWl0XCIsIHRhYkluZGV4OiAwLCBjaGlsZHJlbjogW1wiU2lnbiBpbiB3aXRoIFwiLCBwcm92aWRlci5uYW1lXSB9KV0gfSkpLCBwcm92aWRlci50eXBlID09PSBcIndlYmF1dGhuXCIgJiYgKF9qc3hzKFwiZm9ybVwiLCB7IGFjdGlvbjogcHJvdmlkZXIuY2FsbGJhY2tVcmwsIG1ldGhvZDogXCJQT1NUXCIsIGlkOiBgJHtwcm92aWRlci5pZH0tZm9ybWAsIGNoaWxkcmVuOiBbX2pzeChcImlucHV0XCIsIHsgdHlwZTogXCJoaWRkZW5cIiwgbmFtZTogXCJjc3JmVG9rZW5cIiwgdmFsdWU6IGNzcmZUb2tlbiB9KSwgT2JqZWN0LmtleXMocHJvdmlkZXIuZm9ybUZpZWxkcykubWFwKChmaWVsZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtfanN4KFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IFwic2VjdGlvbi1oZWFkZXJcIiwgaHRtbEZvcjogYGlucHV0LSR7ZmllbGR9LWZvci0ke3Byb3ZpZGVyLmlkfS1wcm92aWRlcmAsIGNoaWxkcmVuOiBwcm92aWRlci5mb3JtRmllbGRzW2ZpZWxkXS5sYWJlbCA/PyBmaWVsZCB9KSwgX2pzeChcImlucHV0XCIsIHsgbmFtZTogZmllbGQsIFwiZGF0YS1mb3JtLWZpZWxkXCI6IHRydWUsIGlkOiBgaW5wdXQtJHtmaWVsZH0tZm9yLSR7cHJvdmlkZXIuaWR9LXByb3ZpZGVyYCwgdHlwZTogcHJvdmlkZXIuZm9ybUZpZWxkc1tmaWVsZF0udHlwZSA/PyBcInRleHRcIiwgcGxhY2Vob2xkZXI6IHByb3ZpZGVyLmZvcm1GaWVsZHNbZmllbGRdLnBsYWNlaG9sZGVyID8/IFwiXCIsIC4uLnByb3ZpZGVyLmZvcm1GaWVsZHNbZmllbGRdIH0pXSB9LCBgaW5wdXQtZ3JvdXAtJHtwcm92aWRlci5pZH1gKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIF9qc3hzKFwiYnV0dG9uXCIsIHsgaWQ6IGBzdWJtaXRCdXR0b24tJHtwcm92aWRlci5pZH1gLCB0eXBlOiBcInN1Ym1pdFwiLCB0YWJJbmRleDogMCwgY2hpbGRyZW46IFtcIlNpZ24gaW4gd2l0aCBcIiwgcHJvdmlkZXIubmFtZV0gfSldIH0pKSwgKHByb3ZpZGVyLnR5cGUgPT09IFwiZW1haWxcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIudHlwZSA9PT0gXCJjcmVkZW50aWFsc1wiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlci50eXBlID09PSBcIndlYmF1dGhuXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICsgMSA8IHByb3ZpZGVycy5sZW5ndGggJiYgX2pzeChcImhyXCIsIHt9KV0gfSwgcHJvdmlkZXIuaWQpKTtcbiAgICAgICAgICAgICAgICAgICAgfSldIH0pLCBjb25kaXRpb25hbFVJUHJvdmlkZXJJRCAmJiBDb25kaXRpb25hbFVJU2NyaXB0KGNvbmRpdGlvbmFsVUlQcm92aWRlcklEKV0gfSkpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/pages/signin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/pages/signin.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/signin.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SigninPage)\n/* harmony export */ });\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/jsx-runtime */ \"(rsc)/./node_modules/preact/jsx-runtime/dist/jsxRuntime.mjs\");\n/* harmony import */ var _utils_webauthn_client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/webauthn-client.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/webauthn-client.js\");\n\n\nconst signinErrors = {\n    default: \"Unable to sign in.\",\n    Signin: \"Try signing in with a different account.\",\n    OAuthSignin: \"Try signing in with a different account.\",\n    OAuthCallbackError: \"Try signing in with a different account.\",\n    OAuthCreateAccount: \"Try signing in with a different account.\",\n    EmailCreateAccount: \"Try signing in with a different account.\",\n    Callback: \"Try signing in with a different account.\",\n    OAuthAccountNotLinked: \"To confirm your identity, sign in with the same account you used originally.\",\n    EmailSignin: \"The e-mail could not be sent.\",\n    CredentialsSignin: \"Sign in failed. Check the details you provided are correct.\",\n    SessionRequired: \"Please sign in to access this page.\",\n};\nfunction ConditionalUIScript(providerID) {\n    const startConditionalUIScript = `\nconst currentURL = window.location.href;\nconst authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));\n(${_utils_webauthn_client_js__WEBPACK_IMPORTED_MODULE_1__.webauthnScript})(authURL, \"${providerID}\");\n`;\n    return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"script\", { dangerouslySetInnerHTML: { __html: startConditionalUIScript } }) }));\n}\nfunction SigninPage(props) {\n    const { csrfToken, providers = [], callbackUrl, theme, email, error: errorType, } = props;\n    if (typeof document !== \"undefined\" && theme?.brandColor) {\n        document.documentElement.style.setProperty(\"--brand-color\", theme.brandColor);\n    }\n    if (typeof document !== \"undefined\" && theme?.buttonText) {\n        document.documentElement.style.setProperty(\"--button-text-color\", theme.buttonText);\n    }\n    const error = errorType && (signinErrors[errorType] ?? signinErrors.default);\n    const providerLogoPath = \"https://authjs.dev/img/providers\";\n    const conditionalUIProviderID = providers.find((provider) => provider.type === \"webauthn\" && provider.enableConditionalUI)?.id;\n    return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"signin\", children: [theme?.brandColor && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `:root {--brand-color: ${theme.brandColor}}`,\n                } })), theme?.buttonText && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `,\n                } })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"card\", children: [error && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"error\", children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: error }) })), theme?.logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), providers.map((provider, i) => {\n                        let bg, brandColor, logo;\n                        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n                            ;\n                            ({\n                                bg = \"#fff\",\n                                brandColor,\n                                logo = `${providerLogoPath}/${provider.id}.svg`,\n                            } = provider.style ?? {});\n                        }\n                        const color = brandColor ?? bg ?? \"#fff\";\n                        return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"provider\", children: [provider.type === \"oauth\" || provider.type === \"oidc\" ? ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: provider.signinUrl, method: \"POST\", children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), callbackUrl && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"callbackUrl\", value: callbackUrl })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { type: \"submit\", className: \"button\", style: {\n                                                \"--provider-bg\": \"#fff\",\n                                                \"--provider-bg-hover\": `color-mix(in srgb, ${color} 30%, #fff)`,\n                                                \"--provider-dark-bg\": \"#161b22\",\n                                                \"--provider-dark-bg-hover\": `color-mix(in srgb, ${color} 30%, #000)`,\n                                            }, tabIndex: 0, children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { style: {\n                                                        filter: \"invert(1) grayscale(1) brightness(1.3) contrast(9000)\",\n                                                        \"mix-blend-mode\": \"luminosity\",\n                                                        opacity: 0.95,\n                                                    }, children: [\"Sign in with \", provider.name] }), logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { loading: \"lazy\", height: 24, src: logo })] })] })) : null, (provider.type === \"email\" ||\n                                    provider.type === \"credentials\" ||\n                                    provider.type === \"webauthn\") &&\n                                    i > 0 &&\n                                    providers[i - 1].type !== \"email\" &&\n                                    providers[i - 1].type !== \"credentials\" &&\n                                    providers[i - 1].type !== \"webauthn\" && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"hr\", {}), provider.type === \"email\" && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: provider.signinUrl, method: \"POST\", children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"label\", { className: \"section-header\", htmlFor: `input-email-for-${provider.id}-provider`, children: \"Email\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { id: `input-email-for-${provider.id}-provider`, autoFocus: true, type: \"email\", name: \"email\", value: email, placeholder: \"email@example.com\", required: true }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { id: \"submitButton\", type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), provider.type === \"credentials\" && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: provider.callbackUrl, method: \"POST\", children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), Object.keys(provider.credentials).map((credential) => {\n                                            return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"label\", { className: \"section-header\", htmlFor: `input-${credential}-for-${provider.id}-provider`, children: provider.credentials[credential].label ?? credential }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { name: credential, id: `input-${credential}-for-${provider.id}-provider`, type: provider.credentials[credential].type ?? \"text\", placeholder: provider.credentials[credential].placeholder ?? \"\", ...provider.credentials[credential] })] }, `input-group-${provider.id}`));\n                                        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { id: \"submitButton\", type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), provider.type === \"webauthn\" && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: provider.callbackUrl, method: \"POST\", id: `${provider.id}-form`, children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), Object.keys(provider.formFields).map((field) => {\n                                            return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"label\", { className: \"section-header\", htmlFor: `input-${field}-for-${provider.id}-provider`, children: provider.formFields[field].label ?? field }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { name: field, \"data-form-field\": true, id: `input-${field}-for-${provider.id}-provider`, type: provider.formFields[field].type ?? \"text\", placeholder: provider.formFields[field].placeholder ?? \"\", ...provider.formFields[field] })] }, `input-group-${provider.id}`));\n                                        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { id: `submitButton-${provider.id}`, type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), (provider.type === \"email\" ||\n                                    provider.type === \"credentials\" ||\n                                    provider.type === \"webauthn\") &&\n                                    i + 1 < providers.length && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"hr\", {})] }, provider.id));\n                    })] }), conditionalUIProviderID && ConditionalUIScript(conditionalUIProviderID)] }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvcGFnZXMvc2lnbmluLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RjtBQUMxQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxxRUFBYyxDQUFDLGNBQWMsV0FBVztBQUMzQztBQUNBLFlBQVksdURBQUksQ0FBQyx3REFBUyxJQUFJLFVBQVUsdURBQUksYUFBYSwyQkFBMkIsb0NBQW9DLEdBQUc7QUFDM0g7QUFDZTtBQUNmLFlBQVksMEVBQTBFO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQUssVUFBVSxzREFBc0QsdURBQUksWUFBWTtBQUNqRyxvQ0FBb0MsaUJBQWlCLGtCQUFrQjtBQUN2RSxtQkFBbUIsMEJBQTBCLHVEQUFJLFlBQVk7QUFDN0Q7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsbUJBQW1CLElBQUksd0RBQUssVUFBVSx3Q0FBd0MsdURBQUksVUFBVSw4QkFBOEIsdURBQUksUUFBUSxpQkFBaUIsR0FBRyxtQkFBbUIsdURBQUksVUFBVSxpREFBaUQ7QUFDNU87QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGlCQUFpQixHQUFHLFlBQVk7QUFDMUUsOEJBQThCLHNCQUFzQjtBQUNwRDtBQUNBO0FBQ0EsZ0NBQWdDLHdEQUFLLFVBQVUsMkZBQTJGLHdEQUFLLFdBQVcsdURBQXVELHVEQUFJLFlBQVkscURBQXFELG1CQUFtQix1REFBSSxZQUFZLHlEQUF5RCxJQUFJLHdEQUFLLGFBQWE7QUFDeFk7QUFDQSw2RkFBNkYsT0FBTztBQUNwRztBQUNBLGtHQUFrRyxPQUFPO0FBQ3pHLDZDQUE2QywwQkFBMEIsd0RBQUssV0FBVztBQUN2RjtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsOENBQThDLFdBQVcsdURBQUksVUFBVSx3Q0FBd0MsSUFBSSxJQUFJO0FBQzVLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsdURBQUksU0FBUyxpQ0FBaUMsd0RBQUssV0FBVyx1REFBdUQsdURBQUksWUFBWSxxREFBcUQsR0FBRyx1REFBSSxZQUFZLHlEQUF5RCxZQUFZLCtCQUErQixHQUFHLHVEQUFJLFlBQVksdUJBQXVCLFlBQVksMkhBQTJILEdBQUcsd0RBQUssYUFBYSw2RkFBNkYsSUFBSSx3Q0FBd0Msd0RBQUssV0FBVyx5REFBeUQsdURBQUksWUFBWSxxREFBcUQ7QUFDMTFCLG9EQUFvRCx3REFBSyxVQUFVLFdBQVcsdURBQUksWUFBWSwrQ0FBK0MsV0FBVyxPQUFPLFlBQVksNEVBQTRFLEdBQUcsdURBQUksWUFBWSwrQkFBK0IsV0FBVyxPQUFPLFlBQVkseUtBQXlLLElBQUksaUJBQWlCLFlBQVk7QUFDamhCLHlDQUF5QyxHQUFHLHdEQUFLLGFBQWEsNkZBQTZGLElBQUkscUNBQXFDLHdEQUFLLFdBQVcscURBQXFELFlBQVksbUJBQW1CLHVEQUFJLFlBQVkscURBQXFEO0FBQzdXLG9EQUFvRCx3REFBSyxVQUFVLFdBQVcsdURBQUksWUFBWSwrQ0FBK0MsTUFBTSxPQUFPLFlBQVksaUVBQWlFLEdBQUcsdURBQUksWUFBWSxtREFBbUQsTUFBTSxPQUFPLFlBQVksdUpBQXVKLElBQUksaUJBQWlCLFlBQVk7QUFDOWYseUNBQXlDLEdBQUcsd0RBQUssYUFBYSxvQkFBb0IsWUFBWSw0RUFBNEUsSUFBSTtBQUM5SztBQUNBO0FBQ0EsZ0VBQWdFLHVEQUFJLFNBQVMsSUFBSTtBQUNqRixxQkFBcUIsSUFBSSw2RUFBNkU7QUFDdEciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxwYWdlc1xcc2lnbmluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicHJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyB3ZWJhdXRoblNjcmlwdCB9IGZyb20gXCIuLi91dGlscy93ZWJhdXRobi1jbGllbnQuanNcIjtcbmNvbnN0IHNpZ25pbkVycm9ycyA9IHtcbiAgICBkZWZhdWx0OiBcIlVuYWJsZSB0byBzaWduIGluLlwiLFxuICAgIFNpZ25pbjogXCJUcnkgc2lnbmluZyBpbiB3aXRoIGEgZGlmZmVyZW50IGFjY291bnQuXCIsXG4gICAgT0F1dGhTaWduaW46IFwiVHJ5IHNpZ25pbmcgaW4gd2l0aCBhIGRpZmZlcmVudCBhY2NvdW50LlwiLFxuICAgIE9BdXRoQ2FsbGJhY2tFcnJvcjogXCJUcnkgc2lnbmluZyBpbiB3aXRoIGEgZGlmZmVyZW50IGFjY291bnQuXCIsXG4gICAgT0F1dGhDcmVhdGVBY2NvdW50OiBcIlRyeSBzaWduaW5nIGluIHdpdGggYSBkaWZmZXJlbnQgYWNjb3VudC5cIixcbiAgICBFbWFpbENyZWF0ZUFjY291bnQ6IFwiVHJ5IHNpZ25pbmcgaW4gd2l0aCBhIGRpZmZlcmVudCBhY2NvdW50LlwiLFxuICAgIENhbGxiYWNrOiBcIlRyeSBzaWduaW5nIGluIHdpdGggYSBkaWZmZXJlbnQgYWNjb3VudC5cIixcbiAgICBPQXV0aEFjY291bnROb3RMaW5rZWQ6IFwiVG8gY29uZmlybSB5b3VyIGlkZW50aXR5LCBzaWduIGluIHdpdGggdGhlIHNhbWUgYWNjb3VudCB5b3UgdXNlZCBvcmlnaW5hbGx5LlwiLFxuICAgIEVtYWlsU2lnbmluOiBcIlRoZSBlLW1haWwgY291bGQgbm90IGJlIHNlbnQuXCIsXG4gICAgQ3JlZGVudGlhbHNTaWduaW46IFwiU2lnbiBpbiBmYWlsZWQuIENoZWNrIHRoZSBkZXRhaWxzIHlvdSBwcm92aWRlZCBhcmUgY29ycmVjdC5cIixcbiAgICBTZXNzaW9uUmVxdWlyZWQ6IFwiUGxlYXNlIHNpZ24gaW4gdG8gYWNjZXNzIHRoaXMgcGFnZS5cIixcbn07XG5mdW5jdGlvbiBDb25kaXRpb25hbFVJU2NyaXB0KHByb3ZpZGVySUQpIHtcbiAgICBjb25zdCBzdGFydENvbmRpdGlvbmFsVUlTY3JpcHQgPSBgXG5jb25zdCBjdXJyZW50VVJMID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5jb25zdCBhdXRoVVJMID0gY3VycmVudFVSTC5zdWJzdHJpbmcoMCwgY3VycmVudFVSTC5sYXN0SW5kZXhPZignLycpKTtcbigke3dlYmF1dGhuU2NyaXB0fSkoYXV0aFVSTCwgXCIke3Byb3ZpZGVySUR9XCIpO1xuYDtcbiAgICByZXR1cm4gKF9qc3goX0ZyYWdtZW50LCB7IGNoaWxkcmVuOiBfanN4KFwic2NyaXB0XCIsIHsgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsgX19odG1sOiBzdGFydENvbmRpdGlvbmFsVUlTY3JpcHQgfSB9KSB9KSk7XG59XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTaWduaW5QYWdlKHByb3BzKSB7XG4gICAgY29uc3QgeyBjc3JmVG9rZW4sIHByb3ZpZGVycyA9IFtdLCBjYWxsYmFja1VybCwgdGhlbWUsIGVtYWlsLCBlcnJvcjogZXJyb3JUeXBlLCB9ID0gcHJvcHM7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0aGVtZT8uYnJhbmRDb2xvcikge1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWJyYW5kLWNvbG9yXCIsIHRoZW1lLmJyYW5kQ29sb3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIHRoZW1lPy5idXR0b25UZXh0KSB7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tYnV0dG9uLXRleHQtY29sb3JcIiwgdGhlbWUuYnV0dG9uVGV4dCk7XG4gICAgfVxuICAgIGNvbnN0IGVycm9yID0gZXJyb3JUeXBlICYmIChzaWduaW5FcnJvcnNbZXJyb3JUeXBlXSA/PyBzaWduaW5FcnJvcnMuZGVmYXVsdCk7XG4gICAgY29uc3QgcHJvdmlkZXJMb2dvUGF0aCA9IFwiaHR0cHM6Ly9hdXRoanMuZGV2L2ltZy9wcm92aWRlcnNcIjtcbiAgICBjb25zdCBjb25kaXRpb25hbFVJUHJvdmlkZXJJRCA9IHByb3ZpZGVycy5maW5kKChwcm92aWRlcikgPT4gcHJvdmlkZXIudHlwZSA9PT0gXCJ3ZWJhdXRoblwiICYmIHByb3ZpZGVyLmVuYWJsZUNvbmRpdGlvbmFsVUkpPy5pZDtcbiAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInNpZ25pblwiLCBjaGlsZHJlbjogW3RoZW1lPy5icmFuZENvbG9yICYmIChfanN4KFwic3R5bGVcIiwgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgICAgICAgICAgICBfX2h0bWw6IGA6cm9vdCB7LS1icmFuZC1jb2xvcjogJHt0aGVtZS5icmFuZENvbG9yfX1gLFxuICAgICAgICAgICAgICAgIH0gfSkpLCB0aGVtZT8uYnV0dG9uVGV4dCAmJiAoX2pzeChcInN0eWxlXCIsIHsgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICAgICAgICAgICAgX19odG1sOiBgXG4gICAgICAgIDpyb290IHtcbiAgICAgICAgICAtLWJ1dHRvbi10ZXh0LWNvbG9yOiAke3RoZW1lLmJ1dHRvblRleHR9XG4gICAgICAgIH1cbiAgICAgIGAsXG4gICAgICAgICAgICAgICAgfSB9KSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhcmRcIiwgY2hpbGRyZW46IFtlcnJvciAmJiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJlcnJvclwiLCBjaGlsZHJlbjogX2pzeChcInBcIiwgeyBjaGlsZHJlbjogZXJyb3IgfSkgfSkpLCB0aGVtZT8ubG9nbyAmJiBfanN4KFwiaW1nXCIsIHsgc3JjOiB0aGVtZS5sb2dvLCBhbHQ6IFwiTG9nb1wiLCBjbGFzc05hbWU6IFwibG9nb1wiIH0pLCBwcm92aWRlcnMubWFwKChwcm92aWRlciwgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJnLCBicmFuZENvbG9yLCBsb2dvO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3ZpZGVyLnR5cGUgPT09IFwib2F1dGhcIiB8fCBwcm92aWRlci50eXBlID09PSBcIm9pZGNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZyA9IFwiI2ZmZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmFuZENvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dvID0gYCR7cHJvdmlkZXJMb2dvUGF0aH0vJHtwcm92aWRlci5pZH0uc3ZnYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ID0gcHJvdmlkZXIuc3R5bGUgPz8ge30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBicmFuZENvbG9yID8/IGJnID8/IFwiI2ZmZlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJwcm92aWRlclwiLCBjaGlsZHJlbjogW3Byb3ZpZGVyLnR5cGUgPT09IFwib2F1dGhcIiB8fCBwcm92aWRlci50eXBlID09PSBcIm9pZGNcIiA/IChfanN4cyhcImZvcm1cIiwgeyBhY3Rpb246IHByb3ZpZGVyLnNpZ25pblVybCwgbWV0aG9kOiBcIlBPU1RcIiwgY2hpbGRyZW46IFtfanN4KFwiaW5wdXRcIiwgeyB0eXBlOiBcImhpZGRlblwiLCBuYW1lOiBcImNzcmZUb2tlblwiLCB2YWx1ZTogY3NyZlRva2VuIH0pLCBjYWxsYmFja1VybCAmJiAoX2pzeChcImlucHV0XCIsIHsgdHlwZTogXCJoaWRkZW5cIiwgbmFtZTogXCJjYWxsYmFja1VybFwiLCB2YWx1ZTogY2FsbGJhY2tVcmwgfSkpLCBfanN4cyhcImJ1dHRvblwiLCB7IHR5cGU6IFwic3VibWl0XCIsIGNsYXNzTmFtZTogXCJidXR0b25cIiwgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLS1wcm92aWRlci1iZ1wiOiBcIiNmZmZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLS1wcm92aWRlci1iZy1ob3ZlclwiOiBgY29sb3ItbWl4KGluIHNyZ2IsICR7Y29sb3J9IDMwJSwgI2ZmZilgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCItLXByb3ZpZGVyLWRhcmstYmdcIjogXCIjMTYxYjIyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi0tcHJvdmlkZXItZGFyay1iZy1ob3ZlclwiOiBgY29sb3ItbWl4KGluIHNyZ2IsICR7Y29sb3J9IDMwJSwgIzAwMClgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0YWJJbmRleDogMCwgY2hpbGRyZW46IFtfanN4cyhcInNwYW5cIiwgeyBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IFwiaW52ZXJ0KDEpIGdyYXlzY2FsZSgxKSBicmlnaHRuZXNzKDEuMykgY29udHJhc3QoOTAwMClcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtaXgtYmxlbmQtbW9kZVwiOiBcImx1bWlub3NpdHlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC45NSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBjaGlsZHJlbjogW1wiU2lnbiBpbiB3aXRoIFwiLCBwcm92aWRlci5uYW1lXSB9KSwgbG9nbyAmJiBfanN4KFwiaW1nXCIsIHsgbG9hZGluZzogXCJsYXp5XCIsIGhlaWdodDogMjQsIHNyYzogbG9nbyB9KV0gfSldIH0pKSA6IG51bGwsIChwcm92aWRlci50eXBlID09PSBcImVtYWlsXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLnR5cGUgPT09IFwiY3JlZGVudGlhbHNcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIudHlwZSA9PT0gXCJ3ZWJhdXRoblwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyc1tpIC0gMV0udHlwZSAhPT0gXCJlbWFpbFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcnNbaSAtIDFdLnR5cGUgIT09IFwiY3JlZGVudGlhbHNcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzW2kgLSAxXS50eXBlICE9PSBcIndlYmF1dGhuXCIgJiYgX2pzeChcImhyXCIsIHt9KSwgcHJvdmlkZXIudHlwZSA9PT0gXCJlbWFpbFwiICYmIChfanN4cyhcImZvcm1cIiwgeyBhY3Rpb246IHByb3ZpZGVyLnNpZ25pblVybCwgbWV0aG9kOiBcIlBPU1RcIiwgY2hpbGRyZW46IFtfanN4KFwiaW5wdXRcIiwgeyB0eXBlOiBcImhpZGRlblwiLCBuYW1lOiBcImNzcmZUb2tlblwiLCB2YWx1ZTogY3NyZlRva2VuIH0pLCBfanN4KFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IFwic2VjdGlvbi1oZWFkZXJcIiwgaHRtbEZvcjogYGlucHV0LWVtYWlsLWZvci0ke3Byb3ZpZGVyLmlkfS1wcm92aWRlcmAsIGNoaWxkcmVuOiBcIkVtYWlsXCIgfSksIF9qc3goXCJpbnB1dFwiLCB7IGlkOiBgaW5wdXQtZW1haWwtZm9yLSR7cHJvdmlkZXIuaWR9LXByb3ZpZGVyYCwgYXV0b0ZvY3VzOiB0cnVlLCB0eXBlOiBcImVtYWlsXCIsIG5hbWU6IFwiZW1haWxcIiwgdmFsdWU6IGVtYWlsLCBwbGFjZWhvbGRlcjogXCJlbWFpbEBleGFtcGxlLmNvbVwiLCByZXF1aXJlZDogdHJ1ZSB9KSwgX2pzeHMoXCJidXR0b25cIiwgeyBpZDogXCJzdWJtaXRCdXR0b25cIiwgdHlwZTogXCJzdWJtaXRcIiwgdGFiSW5kZXg6IDAsIGNoaWxkcmVuOiBbXCJTaWduIGluIHdpdGggXCIsIHByb3ZpZGVyLm5hbWVdIH0pXSB9KSksIHByb3ZpZGVyLnR5cGUgPT09IFwiY3JlZGVudGlhbHNcIiAmJiAoX2pzeHMoXCJmb3JtXCIsIHsgYWN0aW9uOiBwcm92aWRlci5jYWxsYmFja1VybCwgbWV0aG9kOiBcIlBPU1RcIiwgY2hpbGRyZW46IFtfanN4KFwiaW5wdXRcIiwgeyB0eXBlOiBcImhpZGRlblwiLCBuYW1lOiBcImNzcmZUb2tlblwiLCB2YWx1ZTogY3NyZlRva2VuIH0pLCBPYmplY3Qua2V5cyhwcm92aWRlci5jcmVkZW50aWFscykubWFwKChjcmVkZW50aWFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJsYWJlbFwiLCB7IGNsYXNzTmFtZTogXCJzZWN0aW9uLWhlYWRlclwiLCBodG1sRm9yOiBgaW5wdXQtJHtjcmVkZW50aWFsfS1mb3ItJHtwcm92aWRlci5pZH0tcHJvdmlkZXJgLCBjaGlsZHJlbjogcHJvdmlkZXIuY3JlZGVudGlhbHNbY3JlZGVudGlhbF0ubGFiZWwgPz8gY3JlZGVudGlhbCB9KSwgX2pzeChcImlucHV0XCIsIHsgbmFtZTogY3JlZGVudGlhbCwgaWQ6IGBpbnB1dC0ke2NyZWRlbnRpYWx9LWZvci0ke3Byb3ZpZGVyLmlkfS1wcm92aWRlcmAsIHR5cGU6IHByb3ZpZGVyLmNyZWRlbnRpYWxzW2NyZWRlbnRpYWxdLnR5cGUgPz8gXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBwcm92aWRlci5jcmVkZW50aWFsc1tjcmVkZW50aWFsXS5wbGFjZWhvbGRlciA/PyBcIlwiLCAuLi5wcm92aWRlci5jcmVkZW50aWFsc1tjcmVkZW50aWFsXSB9KV0gfSwgYGlucHV0LWdyb3VwLSR7cHJvdmlkZXIuaWR9YCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBfanN4cyhcImJ1dHRvblwiLCB7IGlkOiBcInN1Ym1pdEJ1dHRvblwiLCB0eXBlOiBcInN1Ym1pdFwiLCB0YWJJbmRleDogMCwgY2hpbGRyZW46IFtcIlNpZ24gaW4gd2l0aCBcIiwgcHJvdmlkZXIubmFtZV0gfSldIH0pKSwgcHJvdmlkZXIudHlwZSA9PT0gXCJ3ZWJhdXRoblwiICYmIChfanN4cyhcImZvcm1cIiwgeyBhY3Rpb246IHByb3ZpZGVyLmNhbGxiYWNrVXJsLCBtZXRob2Q6IFwiUE9TVFwiLCBpZDogYCR7cHJvdmlkZXIuaWR9LWZvcm1gLCBjaGlsZHJlbjogW19qc3goXCJpbnB1dFwiLCB7IHR5cGU6IFwiaGlkZGVuXCIsIG5hbWU6IFwiY3NyZlRva2VuXCIsIHZhbHVlOiBjc3JmVG9rZW4gfSksIE9iamVjdC5rZXlzKHByb3ZpZGVyLmZvcm1GaWVsZHMpLm1hcCgoZmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNoaWxkcmVuOiBbX2pzeChcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBcInNlY3Rpb24taGVhZGVyXCIsIGh0bWxGb3I6IGBpbnB1dC0ke2ZpZWxkfS1mb3ItJHtwcm92aWRlci5pZH0tcHJvdmlkZXJgLCBjaGlsZHJlbjogcHJvdmlkZXIuZm9ybUZpZWxkc1tmaWVsZF0ubGFiZWwgPz8gZmllbGQgfSksIF9qc3goXCJpbnB1dFwiLCB7IG5hbWU6IGZpZWxkLCBcImRhdGEtZm9ybS1maWVsZFwiOiB0cnVlLCBpZDogYGlucHV0LSR7ZmllbGR9LWZvci0ke3Byb3ZpZGVyLmlkfS1wcm92aWRlcmAsIHR5cGU6IHByb3ZpZGVyLmZvcm1GaWVsZHNbZmllbGRdLnR5cGUgPz8gXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBwcm92aWRlci5mb3JtRmllbGRzW2ZpZWxkXS5wbGFjZWhvbGRlciA/PyBcIlwiLCAuLi5wcm92aWRlci5mb3JtRmllbGRzW2ZpZWxkXSB9KV0gfSwgYGlucHV0LWdyb3VwLSR7cHJvdmlkZXIuaWR9YCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBfanN4cyhcImJ1dHRvblwiLCB7IGlkOiBgc3VibWl0QnV0dG9uLSR7cHJvdmlkZXIuaWR9YCwgdHlwZTogXCJzdWJtaXRcIiwgdGFiSW5kZXg6IDAsIGNoaWxkcmVuOiBbXCJTaWduIGluIHdpdGggXCIsIHByb3ZpZGVyLm5hbWVdIH0pXSB9KSksIChwcm92aWRlci50eXBlID09PSBcImVtYWlsXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLnR5cGUgPT09IFwiY3JlZGVudGlhbHNcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIudHlwZSA9PT0gXCJ3ZWJhdXRoblwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArIDEgPCBwcm92aWRlcnMubGVuZ3RoICYmIF9qc3goXCJoclwiLCB7fSldIH0sIHByb3ZpZGVyLmlkKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXSB9KSwgY29uZGl0aW9uYWxVSVByb3ZpZGVySUQgJiYgQ29uZGl0aW9uYWxVSVNjcmlwdChjb25kaXRpb25hbFVJUHJvdmlkZXJJRCldIH0pKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/pages/signin.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/pages/signout.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/signout.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SignoutPage)\n/* harmony export */ });\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/jsx-runtime */ \"(action-browser)/./node_modules/preact/jsx-runtime/dist/jsxRuntime.mjs\");\n\nfunction SignoutPage(props) {\n    const { url, csrfToken, theme } = props;\n    return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"signout\", children: [theme?.brandColor && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `,\n                } })), theme?.buttonText && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `,\n                } })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"card\", children: [theme?.logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h1\", { children: \"Signout\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"Are you sure you want to sign out?\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: url?.toString(), method: \"POST\", children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { id: \"submitButton\", type: \"submit\", children: \"Sign out\" })] })] })] }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9wYWdlcy9zaWdub3V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdFO0FBQ2pEO0FBQ2YsWUFBWSx3QkFBd0I7QUFDcEMsWUFBWSx3REFBSyxVQUFVLHVEQUF1RCx1REFBSSxZQUFZO0FBQ2xHO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBLG1CQUFtQiwwQkFBMEIsdURBQUksWUFBWTtBQUM3RDtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxtQkFBbUIsSUFBSSx3REFBSyxVQUFVLDZDQUE2Qyx1REFBSSxVQUFVLGlEQUFpRCxHQUFHLHVEQUFJLFNBQVMscUJBQXFCLEdBQUcsdURBQUksUUFBUSxnREFBZ0QsR0FBRyx3REFBSyxXQUFXLG9EQUFvRCx1REFBSSxZQUFZLHFEQUFxRCxHQUFHLHVEQUFJLGFBQWEsMERBQTBELElBQUksSUFBSSxJQUFJO0FBQzVkIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxccGFnZXNcXHNpZ25vdXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicHJlYWN0L2pzeC1ydW50aW1lXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTaWdub3V0UGFnZShwcm9wcykge1xuICAgIGNvbnN0IHsgdXJsLCBjc3JmVG9rZW4sIHRoZW1lIH0gPSBwcm9wcztcbiAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInNpZ25vdXRcIiwgY2hpbGRyZW46IFt0aGVtZT8uYnJhbmRDb2xvciAmJiAoX2pzeChcInN0eWxlXCIsIHsgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICAgICAgICAgICAgX19odG1sOiBgXG4gICAgICAgIDpyb290IHtcbiAgICAgICAgICAtLWJyYW5kLWNvbG9yOiAke3RoZW1lLmJyYW5kQ29sb3J9XG4gICAgICAgIH1cbiAgICAgIGAsXG4gICAgICAgICAgICAgICAgfSB9KSksIHRoZW1lPy5idXR0b25UZXh0ICYmIChfanN4KFwic3R5bGVcIiwgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgICAgICAgICAgICBfX2h0bWw6IGBcbiAgICAgICAgOnJvb3Qge1xuICAgICAgICAgIC0tYnV0dG9uLXRleHQtY29sb3I6ICR7dGhlbWUuYnV0dG9uVGV4dH1cbiAgICAgICAgfVxuICAgICAgYCxcbiAgICAgICAgICAgICAgICB9IH0pKSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FyZFwiLCBjaGlsZHJlbjogW3RoZW1lPy5sb2dvICYmIF9qc3goXCJpbWdcIiwgeyBzcmM6IHRoZW1lLmxvZ28sIGFsdDogXCJMb2dvXCIsIGNsYXNzTmFtZTogXCJsb2dvXCIgfSksIF9qc3goXCJoMVwiLCB7IGNoaWxkcmVuOiBcIlNpZ25vdXRcIiB9KSwgX2pzeChcInBcIiwgeyBjaGlsZHJlbjogXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2lnbiBvdXQ/XCIgfSksIF9qc3hzKFwiZm9ybVwiLCB7IGFjdGlvbjogdXJsPy50b1N0cmluZygpLCBtZXRob2Q6IFwiUE9TVFwiLCBjaGlsZHJlbjogW19qc3goXCJpbnB1dFwiLCB7IHR5cGU6IFwiaGlkZGVuXCIsIG5hbWU6IFwiY3NyZlRva2VuXCIsIHZhbHVlOiBjc3JmVG9rZW4gfSksIF9qc3goXCJidXR0b25cIiwgeyBpZDogXCJzdWJtaXRCdXR0b25cIiwgdHlwZTogXCJzdWJtaXRcIiwgY2hpbGRyZW46IFwiU2lnbiBvdXRcIiB9KV0gfSldIH0pXSB9KSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/pages/signout.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/pages/signout.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/signout.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SignoutPage)\n/* harmony export */ });\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/jsx-runtime */ \"(rsc)/./node_modules/preact/jsx-runtime/dist/jsxRuntime.mjs\");\n\nfunction SignoutPage(props) {\n    const { url, csrfToken, theme } = props;\n    return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"signout\", children: [theme?.brandColor && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `,\n                } })), theme?.buttonText && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `,\n                } })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"card\", children: [theme?.logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h1\", { children: \"Signout\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"Are you sure you want to sign out?\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { action: url?.toString(), method: \"POST\", children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { id: \"submitButton\", type: \"submit\", children: \"Sign out\" })] })] })] }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvcGFnZXMvc2lnbm91dC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRTtBQUNqRDtBQUNmLFlBQVksd0JBQXdCO0FBQ3BDLFlBQVksd0RBQUssVUFBVSx1REFBdUQsdURBQUksWUFBWTtBQUNsRztBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQSxtQkFBbUIsMEJBQTBCLHVEQUFJLFlBQVk7QUFDN0Q7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsbUJBQW1CLElBQUksd0RBQUssVUFBVSw2Q0FBNkMsdURBQUksVUFBVSxpREFBaUQsR0FBRyx1REFBSSxTQUFTLHFCQUFxQixHQUFHLHVEQUFJLFFBQVEsZ0RBQWdELEdBQUcsd0RBQUssV0FBVyxvREFBb0QsdURBQUksWUFBWSxxREFBcUQsR0FBRyx1REFBSSxhQUFhLDBEQUEwRCxJQUFJLElBQUksSUFBSTtBQUM1ZCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHBhZ2VzXFxzaWdub3V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInByZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU2lnbm91dFBhZ2UocHJvcHMpIHtcbiAgICBjb25zdCB7IHVybCwgY3NyZlRva2VuLCB0aGVtZSB9ID0gcHJvcHM7XG4gICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzaWdub3V0XCIsIGNoaWxkcmVuOiBbdGhlbWU/LmJyYW5kQ29sb3IgJiYgKF9qc3goXCJzdHlsZVwiLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7XG4gICAgICAgICAgICAgICAgICAgIF9faHRtbDogYFxuICAgICAgICA6cm9vdCB7XG4gICAgICAgICAgLS1icmFuZC1jb2xvcjogJHt0aGVtZS5icmFuZENvbG9yfVxuICAgICAgICB9XG4gICAgICBgLFxuICAgICAgICAgICAgICAgIH0gfSkpLCB0aGVtZT8uYnV0dG9uVGV4dCAmJiAoX2pzeChcInN0eWxlXCIsIHsgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICAgICAgICAgICAgX19odG1sOiBgXG4gICAgICAgIDpyb290IHtcbiAgICAgICAgICAtLWJ1dHRvbi10ZXh0LWNvbG9yOiAke3RoZW1lLmJ1dHRvblRleHR9XG4gICAgICAgIH1cbiAgICAgIGAsXG4gICAgICAgICAgICAgICAgfSB9KSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhcmRcIiwgY2hpbGRyZW46IFt0aGVtZT8ubG9nbyAmJiBfanN4KFwiaW1nXCIsIHsgc3JjOiB0aGVtZS5sb2dvLCBhbHQ6IFwiTG9nb1wiLCBjbGFzc05hbWU6IFwibG9nb1wiIH0pLCBfanN4KFwiaDFcIiwgeyBjaGlsZHJlbjogXCJTaWdub3V0XCIgfSksIF9qc3goXCJwXCIsIHsgY2hpbGRyZW46IFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHNpZ24gb3V0P1wiIH0pLCBfanN4cyhcImZvcm1cIiwgeyBhY3Rpb246IHVybD8udG9TdHJpbmcoKSwgbWV0aG9kOiBcIlBPU1RcIiwgY2hpbGRyZW46IFtfanN4KFwiaW5wdXRcIiwgeyB0eXBlOiBcImhpZGRlblwiLCBuYW1lOiBcImNzcmZUb2tlblwiLCB2YWx1ZTogY3NyZlRva2VuIH0pLCBfanN4KFwiYnV0dG9uXCIsIHsgaWQ6IFwic3VibWl0QnV0dG9uXCIsIHR5cGU6IFwic3VibWl0XCIsIGNoaWxkcmVuOiBcIlNpZ24gb3V0XCIgfSldIH0pXSB9KV0gfSkpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/pages/signout.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/pages/styles.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/styles.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Generated by `pnpm css`\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (`:root {\n  --border-width: 1px;\n  --border-radius: 0.5rem;\n  --color-error: #c94b4b;\n  --color-info: #157efb;\n  --color-info-hover: #0f6ddb;\n  --color-info-text: #fff;\n}\n\n.__next-auth-theme-auto,\n.__next-auth-theme-light {\n  --color-background: #ececec;\n  --color-background-hover: rgba(236, 236, 236, 0.8);\n  --color-background-card: #fff;\n  --color-text: #000;\n  --color-primary: #444;\n  --color-control-border: #bbb;\n  --color-button-active-background: #f9f9f9;\n  --color-button-active-border: #aaa;\n  --color-separator: #ccc;\n}\n\n.__next-auth-theme-dark {\n  --color-background: #161b22;\n  --color-background-hover: rgba(22, 27, 34, 0.8);\n  --color-background-card: #0d1117;\n  --color-text: #fff;\n  --color-primary: #ccc;\n  --color-control-border: #555;\n  --color-button-active-background: #060606;\n  --color-button-active-border: #666;\n  --color-separator: #444;\n}\n\n@media (prefers-color-scheme: dark) {\n  .__next-auth-theme-auto {\n    --color-background: #161b22;\n    --color-background-hover: rgba(22, 27, 34, 0.8);\n    --color-background-card: #0d1117;\n    --color-text: #fff;\n    --color-primary: #ccc;\n    --color-control-border: #555;\n    --color-button-active-background: #060606;\n    --color-button-active-border: #666;\n    --color-separator: #444;\n  }\n\n  button,\n  a.button {\n    color: var(--provider-dark-color, var(--color-primary)) !important;\n    background-color: var(\n      --provider-dark-bg,\n      var(--color-background)\n    ) !important;\n  }\n\n    :is(button,a.button):hover {\n      background-color: var(\n        --provider-dark-bg-hover,\n        var(--color-background-hover)\n      ) !important;\n    }\n\n    :is(button,a.button) span {\n      color: var(--provider-dark-bg) !important;\n    }\n}\n\nhtml {\n  box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: var(--color-background);\n  margin: 0;\n  padding: 0;\n  font-family:\n    ui-sans-serif,\n    system-ui,\n    -apple-system,\n    BlinkMacSystemFont,\n    \"Segoe UI\",\n    Roboto,\n    \"Helvetica Neue\",\n    Arial,\n    \"Noto Sans\",\n    sans-serif,\n    \"Apple Color Emoji\",\n    \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\",\n    \"Noto Color Emoji\";\n}\n\nh1 {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  font-weight: 400;\n  color: var(--color-text);\n}\n\np {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  color: var(--color-text);\n}\n\nform {\n  margin: 0;\n  padding: 0;\n}\n\nlabel {\n  font-weight: 500;\n  text-align: left;\n  margin-bottom: 0.25rem;\n  display: block;\n  color: var(--color-text);\n}\n\ninput[type] {\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  padding: 0.5rem 1rem;\n  border: var(--border-width) solid var(--color-control-border);\n  background: var(--color-background-card);\n  font-size: 1rem;\n  border-radius: var(--border-radius);\n  color: var(--color-text);\n}\n\np {\n  font-size: 1.1rem;\n  line-height: 2rem;\n}\n\na.button {\n  text-decoration: none;\n  line-height: 1rem;\n}\n\na.button:link,\n  a.button:visited {\n    background-color: var(--color-background);\n    color: var(--color-primary);\n  }\n\nbutton,\na.button {\n  padding: 0.75rem 1rem;\n  color: var(--provider-color, var(--color-primary));\n  background-color: var(--provider-bg, var(--color-background));\n  border: 1px solid #00000031;\n  font-size: 0.9rem;\n  height: 50px;\n  border-radius: var(--border-radius);\n  transition: background-color 250ms ease-in-out;\n  font-weight: 300;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n:is(button,a.button):hover {\n    background-color: var(--provider-bg-hover, var(--color-background-hover));\n    cursor: pointer;\n  }\n\n:is(button,a.button):active {\n    cursor: pointer;\n  }\n\n:is(button,a.button) span {\n    color: #fff;\n  }\n\n#submitButton {\n  color: var(--button-text-color, var(--color-info-text));\n  background-color: var(--brand-color, var(--color-info));\n  width: 100%;\n}\n\n#submitButton:hover {\n    background-color: var(\n      --button-hover-bg,\n      var(--color-info-hover)\n    ) !important;\n  }\n\na.site {\n  color: var(--color-primary);\n  text-decoration: none;\n  font-size: 1rem;\n  line-height: 2rem;\n}\n\na.site:hover {\n    text-decoration: underline;\n  }\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: grid;\n  place-items: center;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.page > div {\n    text-align: center;\n  }\n\n.error a.button {\n    padding-left: 2rem;\n    padding-right: 2rem;\n    margin-top: 0.5rem;\n  }\n\n.error .message {\n    margin-bottom: 1.5rem;\n  }\n\n.signin input[type=\"text\"] {\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n  }\n\n.signin hr {\n    display: block;\n    border: 0;\n    border-top: 1px solid var(--color-separator);\n    margin: 2rem auto 1rem auto;\n    overflow: visible;\n  }\n\n.signin hr::before {\n      content: \"or\";\n      background: var(--color-background-card);\n      color: #888;\n      padding: 0 0.4rem;\n      position: relative;\n      top: -0.7rem;\n    }\n\n.signin .error {\n    background: #f5f5f5;\n    font-weight: 500;\n    border-radius: 0.3rem;\n    background: var(--color-error);\n  }\n\n.signin .error p {\n      text-align: left;\n      padding: 0.5rem 1rem;\n      font-size: 0.9rem;\n      line-height: 1.2rem;\n      color: var(--color-info-text);\n    }\n\n.signin > div,\n  .signin form {\n    display: block;\n  }\n\n.signin > div input[type], .signin form input[type] {\n      margin-bottom: 0.5rem;\n    }\n\n.signin > div button, .signin form button {\n      width: 100%;\n    }\n\n.signin .provider + .provider {\n    margin-top: 1rem;\n  }\n\n.logo {\n  display: inline-block;\n  max-width: 150px;\n  margin: 1.25rem 0;\n  max-height: 70px;\n}\n\n.card {\n  background-color: var(--color-background-card);\n  border-radius: 1rem;\n  padding: 1.25rem 2rem;\n}\n\n.card .header {\n    color: var(--color-primary);\n  }\n\n.card input[type]::-moz-placeholder {\n    color: color-mix(\n      in srgb,\n      var(--color-text) 20%,\n      var(--color-button-active-background)\n    );\n  }\n\n.card input[type]::placeholder {\n    color: color-mix(\n      in srgb,\n      var(--color-text) 20%,\n      var(--color-button-active-background)\n    );\n  }\n\n.card input[type] {\n    background: color-mix(in srgb, var(--color-background-card) 95%, black);\n  }\n\n.section-header {\n  color: var(--color-text);\n}\n\n@media screen and (min-width: 450px) {\n  .card {\n    margin: 2rem 0;\n    width: 368px;\n  }\n}\n\n@media screen and (max-width: 450px) {\n  .card {\n    margin: 1rem 0;\n    width: 343px;\n  }\n}\n`);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9wYWdlcy9zdHlsZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0EsaUVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxccGFnZXNcXHN0eWxlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHZW5lcmF0ZWQgYnkgYHBucG0gY3NzYFxuZXhwb3J0IGRlZmF1bHQgYDpyb290IHtcbiAgLS1ib3JkZXItd2lkdGg6IDFweDtcbiAgLS1ib3JkZXItcmFkaXVzOiAwLjVyZW07XG4gIC0tY29sb3ItZXJyb3I6ICNjOTRiNGI7XG4gIC0tY29sb3ItaW5mbzogIzE1N2VmYjtcbiAgLS1jb2xvci1pbmZvLWhvdmVyOiAjMGY2ZGRiO1xuICAtLWNvbG9yLWluZm8tdGV4dDogI2ZmZjtcbn1cblxuLl9fbmV4dC1hdXRoLXRoZW1lLWF1dG8sXG4uX19uZXh0LWF1dGgtdGhlbWUtbGlnaHQge1xuICAtLWNvbG9yLWJhY2tncm91bmQ6ICNlY2VjZWM7XG4gIC0tY29sb3ItYmFja2dyb3VuZC1ob3ZlcjogcmdiYSgyMzYsIDIzNiwgMjM2LCAwLjgpO1xuICAtLWNvbG9yLWJhY2tncm91bmQtY2FyZDogI2ZmZjtcbiAgLS1jb2xvci10ZXh0OiAjMDAwO1xuICAtLWNvbG9yLXByaW1hcnk6ICM0NDQ7XG4gIC0tY29sb3ItY29udHJvbC1ib3JkZXI6ICNiYmI7XG4gIC0tY29sb3ItYnV0dG9uLWFjdGl2ZS1iYWNrZ3JvdW5kOiAjZjlmOWY5O1xuICAtLWNvbG9yLWJ1dHRvbi1hY3RpdmUtYm9yZGVyOiAjYWFhO1xuICAtLWNvbG9yLXNlcGFyYXRvcjogI2NjYztcbn1cblxuLl9fbmV4dC1hdXRoLXRoZW1lLWRhcmsge1xuICAtLWNvbG9yLWJhY2tncm91bmQ6ICMxNjFiMjI7XG4gIC0tY29sb3ItYmFja2dyb3VuZC1ob3ZlcjogcmdiYSgyMiwgMjcsIDM0LCAwLjgpO1xuICAtLWNvbG9yLWJhY2tncm91bmQtY2FyZDogIzBkMTExNztcbiAgLS1jb2xvci10ZXh0OiAjZmZmO1xuICAtLWNvbG9yLXByaW1hcnk6ICNjY2M7XG4gIC0tY29sb3ItY29udHJvbC1ib3JkZXI6ICM1NTU7XG4gIC0tY29sb3ItYnV0dG9uLWFjdGl2ZS1iYWNrZ3JvdW5kOiAjMDYwNjA2O1xuICAtLWNvbG9yLWJ1dHRvbi1hY3RpdmUtYm9yZGVyOiAjNjY2O1xuICAtLWNvbG9yLXNlcGFyYXRvcjogIzQ0NDtcbn1cblxuQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaykge1xuICAuX19uZXh0LWF1dGgtdGhlbWUtYXV0byB7XG4gICAgLS1jb2xvci1iYWNrZ3JvdW5kOiAjMTYxYjIyO1xuICAgIC0tY29sb3ItYmFja2dyb3VuZC1ob3ZlcjogcmdiYSgyMiwgMjcsIDM0LCAwLjgpO1xuICAgIC0tY29sb3ItYmFja2dyb3VuZC1jYXJkOiAjMGQxMTE3O1xuICAgIC0tY29sb3ItdGV4dDogI2ZmZjtcbiAgICAtLWNvbG9yLXByaW1hcnk6ICNjY2M7XG4gICAgLS1jb2xvci1jb250cm9sLWJvcmRlcjogIzU1NTtcbiAgICAtLWNvbG9yLWJ1dHRvbi1hY3RpdmUtYmFja2dyb3VuZDogIzA2MDYwNjtcbiAgICAtLWNvbG9yLWJ1dHRvbi1hY3RpdmUtYm9yZGVyOiAjNjY2O1xuICAgIC0tY29sb3Itc2VwYXJhdG9yOiAjNDQ0O1xuICB9XG5cbiAgYnV0dG9uLFxuICBhLmJ1dHRvbiB7XG4gICAgY29sb3I6IHZhcigtLXByb3ZpZGVyLWRhcmstY29sb3IsIHZhcigtLWNvbG9yLXByaW1hcnkpKSAhaW1wb3J0YW50O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tcHJvdmlkZXItZGFyay1iZyxcbiAgICAgIHZhcigtLWNvbG9yLWJhY2tncm91bmQpXG4gICAgKSAhaW1wb3J0YW50O1xuICB9XG5cbiAgICA6aXMoYnV0dG9uLGEuYnV0dG9uKTpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tcHJvdmlkZXItZGFyay1iZy1ob3ZlcixcbiAgICAgICAgdmFyKC0tY29sb3ItYmFja2dyb3VuZC1ob3ZlcilcbiAgICAgICkgIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICA6aXMoYnV0dG9uLGEuYnV0dG9uKSBzcGFuIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1wcm92aWRlci1kYXJrLWJnKSAhaW1wb3J0YW50O1xuICAgIH1cbn1cblxuaHRtbCB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbiosXG4qOmJlZm9yZSxcbio6YWZ0ZXIge1xuICBib3gtc2l6aW5nOiBpbmhlcml0O1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG59XG5cbmJvZHkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kKTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBmb250LWZhbWlseTpcbiAgICB1aS1zYW5zLXNlcmlmLFxuICAgIHN5c3RlbS11aSxcbiAgICAtYXBwbGUtc3lzdGVtLFxuICAgIEJsaW5rTWFjU3lzdGVtRm9udCxcbiAgICBcIlNlZ29lIFVJXCIsXG4gICAgUm9ib3RvLFxuICAgIFwiSGVsdmV0aWNhIE5ldWVcIixcbiAgICBBcmlhbCxcbiAgICBcIk5vdG8gU2Fuc1wiLFxuICAgIHNhbnMtc2VyaWYsXG4gICAgXCJBcHBsZSBDb2xvciBFbW9qaVwiLFxuICAgIFwiU2Vnb2UgVUkgRW1vamlcIixcbiAgICBcIlNlZ29lIFVJIFN5bWJvbFwiLFxuICAgIFwiTm90byBDb2xvciBFbW9qaVwiO1xufVxuXG5oMSB7XG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcbiAgcGFkZGluZzogMCAxcmVtO1xuICBmb250LXdlaWdodDogNDAwO1xuICBjb2xvcjogdmFyKC0tY29sb3ItdGV4dCk7XG59XG5cbnAge1xuICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XG4gIHBhZGRpbmc6IDAgMXJlbTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRleHQpO1xufVxuXG5mb3JtIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xufVxuXG5sYWJlbCB7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIG1hcmdpbi1ib3R0b206IDAuMjVyZW07XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBjb2xvcjogdmFyKC0tY29sb3ItdGV4dCk7XG59XG5cbmlucHV0W3R5cGVdIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgZGlzcGxheTogYmxvY2s7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcbiAgYm9yZGVyOiB2YXIoLS1ib3JkZXItd2lkdGgpIHNvbGlkIHZhcigtLWNvbG9yLWNvbnRyb2wtYm9yZGVyKTtcbiAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItYmFja2dyb3VuZC1jYXJkKTtcbiAgZm9udC1zaXplOiAxcmVtO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRleHQpO1xufVxuXG5wIHtcbiAgZm9udC1zaXplOiAxLjFyZW07XG4gIGxpbmUtaGVpZ2h0OiAycmVtO1xufVxuXG5hLmJ1dHRvbiB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgbGluZS1oZWlnaHQ6IDFyZW07XG59XG5cbmEuYnV0dG9uOmxpbmssXG4gIGEuYnV0dG9uOnZpc2l0ZWQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWJhY2tncm91bmQpO1xuICAgIGNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgfVxuXG5idXR0b24sXG5hLmJ1dHRvbiB7XG4gIHBhZGRpbmc6IDAuNzVyZW0gMXJlbTtcbiAgY29sb3I6IHZhcigtLXByb3ZpZGVyLWNvbG9yLCB2YXIoLS1jb2xvci1wcmltYXJ5KSk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByb3ZpZGVyLWJnLCB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kKSk7XG4gIGJvcmRlcjogMXB4IHNvbGlkICMwMDAwMDAzMTtcbiAgZm9udC1zaXplOiAwLjlyZW07XG4gIGhlaWdodDogNTBweDtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7XG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMjUwbXMgZWFzZS1pbi1vdXQ7XG4gIGZvbnQtd2VpZ2h0OiAzMDA7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG46aXMoYnV0dG9uLGEuYnV0dG9uKTpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJvdmlkZXItYmctaG92ZXIsIHZhcigtLWNvbG9yLWJhY2tncm91bmQtaG92ZXIpKTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cblxuOmlzKGJ1dHRvbixhLmJ1dHRvbik6YWN0aXZlIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cblxuOmlzKGJ1dHRvbixhLmJ1dHRvbikgc3BhbiB7XG4gICAgY29sb3I6ICNmZmY7XG4gIH1cblxuI3N1Ym1pdEJ1dHRvbiB7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tdGV4dC1jb2xvciwgdmFyKC0tY29sb3ItaW5mby10ZXh0KSk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJyYW5kLWNvbG9yLCB2YXIoLS1jb2xvci1pbmZvKSk7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4jc3VibWl0QnV0dG9uOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1iZyxcbiAgICAgIHZhcigtLWNvbG9yLWluZm8taG92ZXIpXG4gICAgKSAhaW1wb3J0YW50O1xuICB9XG5cbmEuc2l0ZSB7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBmb250LXNpemU6IDFyZW07XG4gIGxpbmUtaGVpZ2h0OiAycmVtO1xufVxuXG5hLnNpdGU6aG92ZXIge1xuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICB9XG5cbi5wYWdlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBncmlkO1xuICBwbGFjZS1pdGVtczogY2VudGVyO1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbi5wYWdlID4gZGl2IHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cblxuLmVycm9yIGEuYnV0dG9uIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDJyZW07XG4gICAgcGFkZGluZy1yaWdodDogMnJlbTtcbiAgICBtYXJnaW4tdG9wOiAwLjVyZW07XG4gIH1cblxuLmVycm9yIC5tZXNzYWdlIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XG4gIH1cblxuLnNpZ25pbiBpbnB1dFt0eXBlPVwidGV4dFwiXSB7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG5cbi5zaWduaW4gaHIge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGJvcmRlcjogMDtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tY29sb3Itc2VwYXJhdG9yKTtcbiAgICBtYXJnaW46IDJyZW0gYXV0byAxcmVtIGF1dG87XG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIH1cblxuLnNpZ25pbiBocjo6YmVmb3JlIHtcbiAgICAgIGNvbnRlbnQ6IFwib3JcIjtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWJhY2tncm91bmQtY2FyZCk7XG4gICAgICBjb2xvcjogIzg4ODtcbiAgICAgIHBhZGRpbmc6IDAgMC40cmVtO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgdG9wOiAtMC43cmVtO1xuICAgIH1cblxuLnNpZ25pbiAuZXJyb3Ige1xuICAgIGJhY2tncm91bmQ6ICNmNWY1ZjU7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBib3JkZXItcmFkaXVzOiAwLjNyZW07XG4gICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItZXJyb3IpO1xuICB9XG5cbi5zaWduaW4gLmVycm9yIHAge1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICAgICAgZm9udC1zaXplOiAwLjlyZW07XG4gICAgICBsaW5lLWhlaWdodDogMS4ycmVtO1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWluZm8tdGV4dCk7XG4gICAgfVxuXG4uc2lnbmluID4gZGl2LFxuICAuc2lnbmluIGZvcm0ge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG5cbi5zaWduaW4gPiBkaXYgaW5wdXRbdHlwZV0sIC5zaWduaW4gZm9ybSBpbnB1dFt0eXBlXSB7XG4gICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgfVxuXG4uc2lnbmluID4gZGl2IGJ1dHRvbiwgLnNpZ25pbiBmb3JtIGJ1dHRvbiB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG5cbi5zaWduaW4gLnByb3ZpZGVyICsgLnByb3ZpZGVyIHtcbiAgICBtYXJnaW4tdG9wOiAxcmVtO1xuICB9XG5cbi5sb2dvIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBtYXgtd2lkdGg6IDE1MHB4O1xuICBtYXJnaW46IDEuMjVyZW0gMDtcbiAgbWF4LWhlaWdodDogNzBweDtcbn1cblxuLmNhcmQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kLWNhcmQpO1xuICBib3JkZXItcmFkaXVzOiAxcmVtO1xuICBwYWRkaW5nOiAxLjI1cmVtIDJyZW07XG59XG5cbi5jYXJkIC5oZWFkZXIge1xuICAgIGNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgfVxuXG4uY2FyZCBpbnB1dFt0eXBlXTo6LW1vei1wbGFjZWhvbGRlciB7XG4gICAgY29sb3I6IGNvbG9yLW1peChcbiAgICAgIGluIHNyZ2IsXG4gICAgICB2YXIoLS1jb2xvci10ZXh0KSAyMCUsXG4gICAgICB2YXIoLS1jb2xvci1idXR0b24tYWN0aXZlLWJhY2tncm91bmQpXG4gICAgKTtcbiAgfVxuXG4uY2FyZCBpbnB1dFt0eXBlXTo6cGxhY2Vob2xkZXIge1xuICAgIGNvbG9yOiBjb2xvci1taXgoXG4gICAgICBpbiBzcmdiLFxuICAgICAgdmFyKC0tY29sb3ItdGV4dCkgMjAlLFxuICAgICAgdmFyKC0tY29sb3ItYnV0dG9uLWFjdGl2ZS1iYWNrZ3JvdW5kKVxuICAgICk7XG4gIH1cblxuLmNhcmQgaW5wdXRbdHlwZV0ge1xuICAgIGJhY2tncm91bmQ6IGNvbG9yLW1peChpbiBzcmdiLCB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kLWNhcmQpIDk1JSwgYmxhY2spO1xuICB9XG5cbi5zZWN0aW9uLWhlYWRlciB7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci10ZXh0KTtcbn1cblxuQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNDUwcHgpIHtcbiAgLmNhcmQge1xuICAgIG1hcmdpbjogMnJlbSAwO1xuICAgIHdpZHRoOiAzNjhweDtcbiAgfVxufVxuXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0NTBweCkge1xuICAuY2FyZCB7XG4gICAgbWFyZ2luOiAxcmVtIDA7XG4gICAgd2lkdGg6IDM0M3B4O1xuICB9XG59XG5gO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/pages/styles.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/pages/styles.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/styles.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Generated by `pnpm css`\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (`:root {\n  --border-width: 1px;\n  --border-radius: 0.5rem;\n  --color-error: #c94b4b;\n  --color-info: #157efb;\n  --color-info-hover: #0f6ddb;\n  --color-info-text: #fff;\n}\n\n.__next-auth-theme-auto,\n.__next-auth-theme-light {\n  --color-background: #ececec;\n  --color-background-hover: rgba(236, 236, 236, 0.8);\n  --color-background-card: #fff;\n  --color-text: #000;\n  --color-primary: #444;\n  --color-control-border: #bbb;\n  --color-button-active-background: #f9f9f9;\n  --color-button-active-border: #aaa;\n  --color-separator: #ccc;\n}\n\n.__next-auth-theme-dark {\n  --color-background: #161b22;\n  --color-background-hover: rgba(22, 27, 34, 0.8);\n  --color-background-card: #0d1117;\n  --color-text: #fff;\n  --color-primary: #ccc;\n  --color-control-border: #555;\n  --color-button-active-background: #060606;\n  --color-button-active-border: #666;\n  --color-separator: #444;\n}\n\n@media (prefers-color-scheme: dark) {\n  .__next-auth-theme-auto {\n    --color-background: #161b22;\n    --color-background-hover: rgba(22, 27, 34, 0.8);\n    --color-background-card: #0d1117;\n    --color-text: #fff;\n    --color-primary: #ccc;\n    --color-control-border: #555;\n    --color-button-active-background: #060606;\n    --color-button-active-border: #666;\n    --color-separator: #444;\n  }\n\n  button,\n  a.button {\n    color: var(--provider-dark-color, var(--color-primary)) !important;\n    background-color: var(\n      --provider-dark-bg,\n      var(--color-background)\n    ) !important;\n  }\n\n    :is(button,a.button):hover {\n      background-color: var(\n        --provider-dark-bg-hover,\n        var(--color-background-hover)\n      ) !important;\n    }\n\n    :is(button,a.button) span {\n      color: var(--provider-dark-bg) !important;\n    }\n}\n\nhtml {\n  box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: var(--color-background);\n  margin: 0;\n  padding: 0;\n  font-family:\n    ui-sans-serif,\n    system-ui,\n    -apple-system,\n    BlinkMacSystemFont,\n    \"Segoe UI\",\n    Roboto,\n    \"Helvetica Neue\",\n    Arial,\n    \"Noto Sans\",\n    sans-serif,\n    \"Apple Color Emoji\",\n    \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\",\n    \"Noto Color Emoji\";\n}\n\nh1 {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  font-weight: 400;\n  color: var(--color-text);\n}\n\np {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  color: var(--color-text);\n}\n\nform {\n  margin: 0;\n  padding: 0;\n}\n\nlabel {\n  font-weight: 500;\n  text-align: left;\n  margin-bottom: 0.25rem;\n  display: block;\n  color: var(--color-text);\n}\n\ninput[type] {\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  padding: 0.5rem 1rem;\n  border: var(--border-width) solid var(--color-control-border);\n  background: var(--color-background-card);\n  font-size: 1rem;\n  border-radius: var(--border-radius);\n  color: var(--color-text);\n}\n\np {\n  font-size: 1.1rem;\n  line-height: 2rem;\n}\n\na.button {\n  text-decoration: none;\n  line-height: 1rem;\n}\n\na.button:link,\n  a.button:visited {\n    background-color: var(--color-background);\n    color: var(--color-primary);\n  }\n\nbutton,\na.button {\n  padding: 0.75rem 1rem;\n  color: var(--provider-color, var(--color-primary));\n  background-color: var(--provider-bg, var(--color-background));\n  border: 1px solid #00000031;\n  font-size: 0.9rem;\n  height: 50px;\n  border-radius: var(--border-radius);\n  transition: background-color 250ms ease-in-out;\n  font-weight: 300;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n:is(button,a.button):hover {\n    background-color: var(--provider-bg-hover, var(--color-background-hover));\n    cursor: pointer;\n  }\n\n:is(button,a.button):active {\n    cursor: pointer;\n  }\n\n:is(button,a.button) span {\n    color: #fff;\n  }\n\n#submitButton {\n  color: var(--button-text-color, var(--color-info-text));\n  background-color: var(--brand-color, var(--color-info));\n  width: 100%;\n}\n\n#submitButton:hover {\n    background-color: var(\n      --button-hover-bg,\n      var(--color-info-hover)\n    ) !important;\n  }\n\na.site {\n  color: var(--color-primary);\n  text-decoration: none;\n  font-size: 1rem;\n  line-height: 2rem;\n}\n\na.site:hover {\n    text-decoration: underline;\n  }\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: grid;\n  place-items: center;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.page > div {\n    text-align: center;\n  }\n\n.error a.button {\n    padding-left: 2rem;\n    padding-right: 2rem;\n    margin-top: 0.5rem;\n  }\n\n.error .message {\n    margin-bottom: 1.5rem;\n  }\n\n.signin input[type=\"text\"] {\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n  }\n\n.signin hr {\n    display: block;\n    border: 0;\n    border-top: 1px solid var(--color-separator);\n    margin: 2rem auto 1rem auto;\n    overflow: visible;\n  }\n\n.signin hr::before {\n      content: \"or\";\n      background: var(--color-background-card);\n      color: #888;\n      padding: 0 0.4rem;\n      position: relative;\n      top: -0.7rem;\n    }\n\n.signin .error {\n    background: #f5f5f5;\n    font-weight: 500;\n    border-radius: 0.3rem;\n    background: var(--color-error);\n  }\n\n.signin .error p {\n      text-align: left;\n      padding: 0.5rem 1rem;\n      font-size: 0.9rem;\n      line-height: 1.2rem;\n      color: var(--color-info-text);\n    }\n\n.signin > div,\n  .signin form {\n    display: block;\n  }\n\n.signin > div input[type], .signin form input[type] {\n      margin-bottom: 0.5rem;\n    }\n\n.signin > div button, .signin form button {\n      width: 100%;\n    }\n\n.signin .provider + .provider {\n    margin-top: 1rem;\n  }\n\n.logo {\n  display: inline-block;\n  max-width: 150px;\n  margin: 1.25rem 0;\n  max-height: 70px;\n}\n\n.card {\n  background-color: var(--color-background-card);\n  border-radius: 1rem;\n  padding: 1.25rem 2rem;\n}\n\n.card .header {\n    color: var(--color-primary);\n  }\n\n.card input[type]::-moz-placeholder {\n    color: color-mix(\n      in srgb,\n      var(--color-text) 20%,\n      var(--color-button-active-background)\n    );\n  }\n\n.card input[type]::placeholder {\n    color: color-mix(\n      in srgb,\n      var(--color-text) 20%,\n      var(--color-button-active-background)\n    );\n  }\n\n.card input[type] {\n    background: color-mix(in srgb, var(--color-background-card) 95%, black);\n  }\n\n.section-header {\n  color: var(--color-text);\n}\n\n@media screen and (min-width: 450px) {\n  .card {\n    margin: 2rem 0;\n    width: 368px;\n  }\n}\n\n@media screen and (max-width: 450px) {\n  .card {\n    margin: 1rem 0;\n    width: 343px;\n  }\n}\n`);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvcGFnZXMvc3R5bGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBLGlFQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHBhZ2VzXFxzdHlsZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IGBwbnBtIGNzc2BcbmV4cG9ydCBkZWZhdWx0IGA6cm9vdCB7XG4gIC0tYm9yZGVyLXdpZHRoOiAxcHg7XG4gIC0tYm9yZGVyLXJhZGl1czogMC41cmVtO1xuICAtLWNvbG9yLWVycm9yOiAjYzk0YjRiO1xuICAtLWNvbG9yLWluZm86ICMxNTdlZmI7XG4gIC0tY29sb3ItaW5mby1ob3ZlcjogIzBmNmRkYjtcbiAgLS1jb2xvci1pbmZvLXRleHQ6ICNmZmY7XG59XG5cbi5fX25leHQtYXV0aC10aGVtZS1hdXRvLFxuLl9fbmV4dC1hdXRoLXRoZW1lLWxpZ2h0IHtcbiAgLS1jb2xvci1iYWNrZ3JvdW5kOiAjZWNlY2VjO1xuICAtLWNvbG9yLWJhY2tncm91bmQtaG92ZXI6IHJnYmEoMjM2LCAyMzYsIDIzNiwgMC44KTtcbiAgLS1jb2xvci1iYWNrZ3JvdW5kLWNhcmQ6ICNmZmY7XG4gIC0tY29sb3ItdGV4dDogIzAwMDtcbiAgLS1jb2xvci1wcmltYXJ5OiAjNDQ0O1xuICAtLWNvbG9yLWNvbnRyb2wtYm9yZGVyOiAjYmJiO1xuICAtLWNvbG9yLWJ1dHRvbi1hY3RpdmUtYmFja2dyb3VuZDogI2Y5ZjlmOTtcbiAgLS1jb2xvci1idXR0b24tYWN0aXZlLWJvcmRlcjogI2FhYTtcbiAgLS1jb2xvci1zZXBhcmF0b3I6ICNjY2M7XG59XG5cbi5fX25leHQtYXV0aC10aGVtZS1kYXJrIHtcbiAgLS1jb2xvci1iYWNrZ3JvdW5kOiAjMTYxYjIyO1xuICAtLWNvbG9yLWJhY2tncm91bmQtaG92ZXI6IHJnYmEoMjIsIDI3LCAzNCwgMC44KTtcbiAgLS1jb2xvci1iYWNrZ3JvdW5kLWNhcmQ6ICMwZDExMTc7XG4gIC0tY29sb3ItdGV4dDogI2ZmZjtcbiAgLS1jb2xvci1wcmltYXJ5OiAjY2NjO1xuICAtLWNvbG9yLWNvbnRyb2wtYm9yZGVyOiAjNTU1O1xuICAtLWNvbG9yLWJ1dHRvbi1hY3RpdmUtYmFja2dyb3VuZDogIzA2MDYwNjtcbiAgLS1jb2xvci1idXR0b24tYWN0aXZlLWJvcmRlcjogIzY2NjtcbiAgLS1jb2xvci1zZXBhcmF0b3I6ICM0NDQ7XG59XG5cbkBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIHtcbiAgLl9fbmV4dC1hdXRoLXRoZW1lLWF1dG8ge1xuICAgIC0tY29sb3ItYmFja2dyb3VuZDogIzE2MWIyMjtcbiAgICAtLWNvbG9yLWJhY2tncm91bmQtaG92ZXI6IHJnYmEoMjIsIDI3LCAzNCwgMC44KTtcbiAgICAtLWNvbG9yLWJhY2tncm91bmQtY2FyZDogIzBkMTExNztcbiAgICAtLWNvbG9yLXRleHQ6ICNmZmY7XG4gICAgLS1jb2xvci1wcmltYXJ5OiAjY2NjO1xuICAgIC0tY29sb3ItY29udHJvbC1ib3JkZXI6ICM1NTU7XG4gICAgLS1jb2xvci1idXR0b24tYWN0aXZlLWJhY2tncm91bmQ6ICMwNjA2MDY7XG4gICAgLS1jb2xvci1idXR0b24tYWN0aXZlLWJvcmRlcjogIzY2NjtcbiAgICAtLWNvbG9yLXNlcGFyYXRvcjogIzQ0NDtcbiAgfVxuXG4gIGJ1dHRvbixcbiAgYS5idXR0b24ge1xuICAgIGNvbG9yOiB2YXIoLS1wcm92aWRlci1kYXJrLWNvbG9yLCB2YXIoLS1jb2xvci1wcmltYXJ5KSkgIWltcG9ydGFudDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLXByb3ZpZGVyLWRhcmstYmcsXG4gICAgICB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kKVxuICAgICkgIWltcG9ydGFudDtcbiAgfVxuXG4gICAgOmlzKGJ1dHRvbixhLmJ1dHRvbik6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLXByb3ZpZGVyLWRhcmstYmctaG92ZXIsXG4gICAgICAgIHZhcigtLWNvbG9yLWJhY2tncm91bmQtaG92ZXIpXG4gICAgICApICFpbXBvcnRhbnQ7XG4gICAgfVxuXG4gICAgOmlzKGJ1dHRvbixhLmJ1dHRvbikgc3BhbiB7XG4gICAgICBjb2xvcjogdmFyKC0tcHJvdmlkZXItZGFyay1iZykgIWltcG9ydGFudDtcbiAgICB9XG59XG5cbmh0bWwge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4qLFxuKjpiZWZvcmUsXG4qOmFmdGVyIHtcbiAgYm94LXNpemluZzogaW5oZXJpdDtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xufVxuXG5ib2R5IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYmFja2dyb3VuZCk7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcbiAgZm9udC1mYW1pbHk6XG4gICAgdWktc2Fucy1zZXJpZixcbiAgICBzeXN0ZW0tdWksXG4gICAgLWFwcGxlLXN5c3RlbSxcbiAgICBCbGlua01hY1N5c3RlbUZvbnQsXG4gICAgXCJTZWdvZSBVSVwiLFxuICAgIFJvYm90byxcbiAgICBcIkhlbHZldGljYSBOZXVlXCIsXG4gICAgQXJpYWwsXG4gICAgXCJOb3RvIFNhbnNcIixcbiAgICBzYW5zLXNlcmlmLFxuICAgIFwiQXBwbGUgQ29sb3IgRW1vamlcIixcbiAgICBcIlNlZ29lIFVJIEVtb2ppXCIsXG4gICAgXCJTZWdvZSBVSSBTeW1ib2xcIixcbiAgICBcIk5vdG8gQ29sb3IgRW1vamlcIjtcbn1cblxuaDEge1xuICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XG4gIHBhZGRpbmc6IDAgMXJlbTtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRleHQpO1xufVxuXG5wIHtcbiAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xuICBwYWRkaW5nOiAwIDFyZW07XG4gIGNvbG9yOiB2YXIoLS1jb2xvci10ZXh0KTtcbn1cblxuZm9ybSB7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcbn1cblxubGFiZWwge1xuICBmb250LXdlaWdodDogNTAwO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBtYXJnaW4tYm90dG9tOiAwLjI1cmVtO1xuICBkaXNwbGF5OiBibG9jaztcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRleHQpO1xufVxuXG5pbnB1dFt0eXBlXSB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZzogMC41cmVtIDFyZW07XG4gIGJvcmRlcjogdmFyKC0tYm9yZGVyLXdpZHRoKSBzb2xpZCB2YXIoLS1jb2xvci1jb250cm9sLWJvcmRlcik7XG4gIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWJhY2tncm91bmQtY2FyZCk7XG4gIGZvbnQtc2l6ZTogMXJlbTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci10ZXh0KTtcbn1cblxucCB7XG4gIGZvbnQtc2l6ZTogMS4xcmVtO1xuICBsaW5lLWhlaWdodDogMnJlbTtcbn1cblxuYS5idXR0b24ge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIGxpbmUtaGVpZ2h0OiAxcmVtO1xufVxuXG5hLmJ1dHRvbjpsaW5rLFxuICBhLmJ1dHRvbjp2aXNpdGVkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kKTtcbiAgICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gIH1cblxuYnV0dG9uLFxuYS5idXR0b24ge1xuICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07XG4gIGNvbG9yOiB2YXIoLS1wcm92aWRlci1jb2xvciwgdmFyKC0tY29sb3ItcHJpbWFyeSkpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcm92aWRlci1iZywgdmFyKC0tY29sb3ItYmFja2dyb3VuZCkpO1xuICBib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwMzE7XG4gIGZvbnQtc2l6ZTogMC45cmVtO1xuICBoZWlnaHQ6IDUwcHg7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDI1MG1zIGVhc2UtaW4tb3V0O1xuICBmb250LXdlaWdodDogMzAwO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn1cblxuOmlzKGJ1dHRvbixhLmJ1dHRvbik6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByb3ZpZGVyLWJnLWhvdmVyLCB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kLWhvdmVyKSk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5cbjppcyhidXR0b24sYS5idXR0b24pOmFjdGl2ZSB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5cbjppcyhidXR0b24sYS5idXR0b24pIHNwYW4ge1xuICAgIGNvbG9yOiAjZmZmO1xuICB9XG5cbiNzdWJtaXRCdXR0b24ge1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLXRleHQtY29sb3IsIHZhcigtLWNvbG9yLWluZm8tdGV4dCkpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1icmFuZC1jb2xvciwgdmFyKC0tY29sb3ItaW5mbykpO1xuICB3aWR0aDogMTAwJTtcbn1cblxuI3N1Ym1pdEJ1dHRvbjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYmcsXG4gICAgICB2YXIoLS1jb2xvci1pbmZvLWhvdmVyKVxuICAgICkgIWltcG9ydGFudDtcbiAgfVxuXG5hLnNpdGUge1xuICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgZm9udC1zaXplOiAxcmVtO1xuICBsaW5lLWhlaWdodDogMnJlbTtcbn1cblxuYS5zaXRlOmhvdmVyIHtcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgfVxuXG4ucGFnZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgZGlzcGxheTogZ3JpZDtcbiAgcGxhY2UtaXRlbXM6IGNlbnRlcjtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4ucGFnZSA+IGRpdiB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG5cbi5lcnJvciBhLmJ1dHRvbiB7XG4gICAgcGFkZGluZy1sZWZ0OiAycmVtO1xuICAgIHBhZGRpbmctcmlnaHQ6IDJyZW07XG4gICAgbWFyZ2luLXRvcDogMC41cmVtO1xuICB9XG5cbi5lcnJvciAubWVzc2FnZSB7XG4gICAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xuICB9XG5cbi5zaWduaW4gaW5wdXRbdHlwZT1cInRleHRcIl0ge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxuXG4uc2lnbmluIGhyIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBib3JkZXI6IDA7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXNlcGFyYXRvcik7XG4gICAgbWFyZ2luOiAycmVtIGF1dG8gMXJlbSBhdXRvO1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICB9XG5cbi5zaWduaW4gaHI6OmJlZm9yZSB7XG4gICAgICBjb250ZW50OiBcIm9yXCI7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kLWNhcmQpO1xuICAgICAgY29sb3I6ICM4ODg7XG4gICAgICBwYWRkaW5nOiAwIDAuNHJlbTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRvcDogLTAuN3JlbTtcbiAgICB9XG5cbi5zaWduaW4gLmVycm9yIHtcbiAgICBiYWNrZ3JvdW5kOiAjZjVmNWY1O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgYm9yZGVyLXJhZGl1czogMC4zcmVtO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWVycm9yKTtcbiAgfVxuXG4uc2lnbmluIC5lcnJvciBwIHtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcbiAgICAgIGZvbnQtc2l6ZTogMC45cmVtO1xuICAgICAgbGluZS1oZWlnaHQ6IDEuMnJlbTtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1pbmZvLXRleHQpO1xuICAgIH1cblxuLnNpZ25pbiA+IGRpdixcbiAgLnNpZ25pbiBmb3JtIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxuXG4uc2lnbmluID4gZGl2IGlucHV0W3R5cGVdLCAuc2lnbmluIGZvcm0gaW5wdXRbdHlwZV0ge1xuICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgIH1cblxuLnNpZ25pbiA+IGRpdiBidXR0b24sIC5zaWduaW4gZm9ybSBidXR0b24ge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxuXG4uc2lnbmluIC5wcm92aWRlciArIC5wcm92aWRlciB7XG4gICAgbWFyZ2luLXRvcDogMXJlbTtcbiAgfVxuXG4ubG9nbyB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgbWF4LXdpZHRoOiAxNTBweDtcbiAgbWFyZ2luOiAxLjI1cmVtIDA7XG4gIG1heC1oZWlnaHQ6IDcwcHg7XG59XG5cbi5jYXJkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYmFja2dyb3VuZC1jYXJkKTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbiAgcGFkZGluZzogMS4yNXJlbSAycmVtO1xufVxuXG4uY2FyZCAuaGVhZGVyIHtcbiAgICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gIH1cblxuLmNhcmQgaW5wdXRbdHlwZV06Oi1tb3otcGxhY2Vob2xkZXIge1xuICAgIGNvbG9yOiBjb2xvci1taXgoXG4gICAgICBpbiBzcmdiLFxuICAgICAgdmFyKC0tY29sb3ItdGV4dCkgMjAlLFxuICAgICAgdmFyKC0tY29sb3ItYnV0dG9uLWFjdGl2ZS1iYWNrZ3JvdW5kKVxuICAgICk7XG4gIH1cblxuLmNhcmQgaW5wdXRbdHlwZV06OnBsYWNlaG9sZGVyIHtcbiAgICBjb2xvcjogY29sb3ItbWl4KFxuICAgICAgaW4gc3JnYixcbiAgICAgIHZhcigtLWNvbG9yLXRleHQpIDIwJSxcbiAgICAgIHZhcigtLWNvbG9yLWJ1dHRvbi1hY3RpdmUtYmFja2dyb3VuZClcbiAgICApO1xuICB9XG5cbi5jYXJkIGlucHV0W3R5cGVdIHtcbiAgICBiYWNrZ3JvdW5kOiBjb2xvci1taXgoaW4gc3JnYiwgdmFyKC0tY29sb3ItYmFja2dyb3VuZC1jYXJkKSA5NSUsIGJsYWNrKTtcbiAgfVxuXG4uc2VjdGlvbi1oZWFkZXIge1xuICBjb2xvcjogdmFyKC0tY29sb3ItdGV4dCk7XG59XG5cbkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDQ1MHB4KSB7XG4gIC5jYXJkIHtcbiAgICBtYXJnaW46IDJyZW0gMDtcbiAgICB3aWR0aDogMzY4cHg7XG4gIH1cbn1cblxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDUwcHgpIHtcbiAgLmNhcmQge1xuICAgIG1hcmdpbjogMXJlbSAwO1xuICAgIHdpZHRoOiAzNDNweDtcbiAgfVxufVxuYDtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/pages/styles.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/pages/verify-request.js":
/*!*************************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/verify-request.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ VerifyRequestPage)\n/* harmony export */ });\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/jsx-runtime */ \"(action-browser)/./node_modules/preact/jsx-runtime/dist/jsxRuntime.mjs\");\n\nfunction VerifyRequestPage(props) {\n    const { url, theme } = props;\n    return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"verify-request\", children: [theme.brandColor && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `,\n                } })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"card\", children: [theme.logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h1\", { children: \"Check your email\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"A sign in link has been sent to your email address.\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { className: \"site\", href: url.origin, children: url.host }) })] })] }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9wYWdlcy92ZXJpZnktcmVxdWVzdC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRTtBQUNqRDtBQUNmLFlBQVksYUFBYTtBQUN6QixZQUFZLHdEQUFLLFVBQVUsNkRBQTZELHVEQUFJLFlBQVk7QUFDeEc7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0EsbUJBQW1CLElBQUksd0RBQUssVUFBVSw0Q0FBNEMsdURBQUksVUFBVSxpREFBaUQsR0FBRyx1REFBSSxTQUFTLDhCQUE4QixHQUFHLHVEQUFJLFFBQVEsaUVBQWlFLEdBQUcsdURBQUksUUFBUSxVQUFVLHVEQUFJLFFBQVEseURBQXlELEdBQUcsSUFBSSxJQUFJO0FBQ3hYIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxccGFnZXNcXHZlcmlmeS1yZXF1ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInByZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVmVyaWZ5UmVxdWVzdFBhZ2UocHJvcHMpIHtcbiAgICBjb25zdCB7IHVybCwgdGhlbWUgfSA9IHByb3BzO1xuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidmVyaWZ5LXJlcXVlc3RcIiwgY2hpbGRyZW46IFt0aGVtZS5icmFuZENvbG9yICYmIChfanN4KFwic3R5bGVcIiwgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgICAgICAgICAgICBfX2h0bWw6IGBcbiAgICAgICAgOnJvb3Qge1xuICAgICAgICAgIC0tYnJhbmQtY29sb3I6ICR7dGhlbWUuYnJhbmRDb2xvcn1cbiAgICAgICAgfVxuICAgICAgYCxcbiAgICAgICAgICAgICAgICB9IH0pKSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FyZFwiLCBjaGlsZHJlbjogW3RoZW1lLmxvZ28gJiYgX2pzeChcImltZ1wiLCB7IHNyYzogdGhlbWUubG9nbywgYWx0OiBcIkxvZ29cIiwgY2xhc3NOYW1lOiBcImxvZ29cIiB9KSwgX2pzeChcImgxXCIsIHsgY2hpbGRyZW46IFwiQ2hlY2sgeW91ciBlbWFpbFwiIH0pLCBfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIkEgc2lnbiBpbiBsaW5rIGhhcyBiZWVuIHNlbnQgdG8geW91ciBlbWFpbCBhZGRyZXNzLlwiIH0pLCBfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBfanN4KFwiYVwiLCB7IGNsYXNzTmFtZTogXCJzaXRlXCIsIGhyZWY6IHVybC5vcmlnaW4sIGNoaWxkcmVuOiB1cmwuaG9zdCB9KSB9KV0gfSldIH0pKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/pages/verify-request.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/pages/verify-request.js":
/*!*************************************************************!*\
  !*** ./node_modules/@auth/core/lib/pages/verify-request.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ VerifyRequestPage)\n/* harmony export */ });\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/jsx-runtime */ \"(rsc)/./node_modules/preact/jsx-runtime/dist/jsxRuntime.mjs\");\n\nfunction VerifyRequestPage(props) {\n    const { url, theme } = props;\n    return ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"verify-request\", children: [theme.brandColor && ((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `,\n                } })), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"card\", children: [theme.logo && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h1\", { children: \"Check your email\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"A sign in link has been sent to your email address.\" }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { className: \"site\", href: url.origin, children: url.host }) })] })] }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvcGFnZXMvdmVyaWZ5LXJlcXVlc3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBZ0U7QUFDakQ7QUFDZixZQUFZLGFBQWE7QUFDekIsWUFBWSx3REFBSyxVQUFVLDZEQUE2RCx1REFBSSxZQUFZO0FBQ3hHO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBLG1CQUFtQixJQUFJLHdEQUFLLFVBQVUsNENBQTRDLHVEQUFJLFVBQVUsaURBQWlELEdBQUcsdURBQUksU0FBUyw4QkFBOEIsR0FBRyx1REFBSSxRQUFRLGlFQUFpRSxHQUFHLHVEQUFJLFFBQVEsVUFBVSx1REFBSSxRQUFRLHlEQUF5RCxHQUFHLElBQUksSUFBSTtBQUN4WCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHBhZ2VzXFx2ZXJpZnktcmVxdWVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJwcmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZlcmlmeVJlcXVlc3RQYWdlKHByb3BzKSB7XG4gICAgY29uc3QgeyB1cmwsIHRoZW1lIH0gPSBwcm9wcztcbiAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInZlcmlmeS1yZXF1ZXN0XCIsIGNoaWxkcmVuOiBbdGhlbWUuYnJhbmRDb2xvciAmJiAoX2pzeChcInN0eWxlXCIsIHsgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICAgICAgICAgICAgX19odG1sOiBgXG4gICAgICAgIDpyb290IHtcbiAgICAgICAgICAtLWJyYW5kLWNvbG9yOiAke3RoZW1lLmJyYW5kQ29sb3J9XG4gICAgICAgIH1cbiAgICAgIGAsXG4gICAgICAgICAgICAgICAgfSB9KSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhcmRcIiwgY2hpbGRyZW46IFt0aGVtZS5sb2dvICYmIF9qc3goXCJpbWdcIiwgeyBzcmM6IHRoZW1lLmxvZ28sIGFsdDogXCJMb2dvXCIsIGNsYXNzTmFtZTogXCJsb2dvXCIgfSksIF9qc3goXCJoMVwiLCB7IGNoaWxkcmVuOiBcIkNoZWNrIHlvdXIgZW1haWxcIiB9KSwgX2pzeChcInBcIiwgeyBjaGlsZHJlbjogXCJBIHNpZ24gaW4gbGluayBoYXMgYmVlbiBzZW50IHRvIHlvdXIgZW1haWwgYWRkcmVzcy5cIiB9KSwgX2pzeChcInBcIiwgeyBjaGlsZHJlbjogX2pzeChcImFcIiwgeyBjbGFzc05hbWU6IFwic2l0ZVwiLCBocmVmOiB1cmwub3JpZ2luLCBjaGlsZHJlbjogdXJsLmhvc3QgfSkgfSldIH0pXSB9KSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/pages/verify-request.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/symbols.js":
/*!************************************************!*\
  !*** ./node_modules/@auth/core/lib/symbols.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   conformInternal: () => (/* binding */ conformInternal),\n/* harmony export */   customFetch: () => (/* binding */ customFetch),\n/* harmony export */   raw: () => (/* binding */ raw),\n/* harmony export */   skipCSRFCheck: () => (/* binding */ skipCSRFCheck)\n/* harmony export */ });\n/**\n * :::danger\n * This option is intended for framework authors.\n * :::\n *\n * Auth.js comes with built-in CSRF protection, but\n * if you are implementing a framework that is already protected against CSRF attacks, you can skip this check by\n * passing this value to {@link AuthConfig.skipCSRFCheck}.\n */\nconst skipCSRFCheck = Symbol(\"skip-csrf-check\");\n/**\n * :::danger\n * This option is intended for framework authors.\n * :::\n *\n * Auth.js returns a web standard {@link Response} by default, but\n * if you are implementing a framework you might want to get access to the raw internal response\n * by passing this value to {@link AuthConfig.raw}.\n */\nconst raw = Symbol(\"return-type-raw\");\n/**\n * :::danger\n * This option allows you to override the default `fetch` function used by the provider\n * to make requests to the provider's OAuth endpoints directly.\n * Used incorrectly, it can have security implications.\n * :::\n *\n * It can be used to support corporate proxies, custom fetch libraries, cache discovery endpoints,\n * add mocks for testing, logging, set custom headers/params for non-spec compliant providers, etc.\n *\n * @example\n * ```ts\n * import { Auth, customFetch } from \"@auth/core\"\n * import GitHub from \"@auth/core/providers/github\"\n *\n * const dispatcher = new ProxyAgent(\"my.proxy.server\")\n * function proxy(...args: Parameters<typeof fetch>): ReturnType<typeof fetch> {\n *   return undici(args[0], { ...(args[1] ?? {}), dispatcher })\n * }\n *\n * const response = await Auth(request, {\n *   providers: [GitHub({ [customFetch]: proxy })]\n * })\n * ```\n *\n * @see https://undici.nodejs.org/#/docs/api/ProxyAgent?id=example-basic-proxy-request-with-local-agent-dispatcher\n * @see https://authjs.dev/guides/corporate-proxy\n */\nconst customFetch = Symbol(\"custom-fetch\");\n/**\n * @internal\n *\n * Used to mark some providers for processing within the core library.\n *\n * **Do not use or you will be fired.**\n */\nconst conformInternal = Symbol(\"conform-internal\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi9zeW1ib2xzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwrQkFBK0I7QUFDekQ7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0JBQWdCO0FBQ25EO0FBQ0EsNkJBQTZCLHFCQUFxQjtBQUNsRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvQkFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaUJBQWlCLGVBQWU7QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNCQUFzQjtBQUNoRCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHN5bWJvbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiA6OjpkYW5nZXJcbiAqIFRoaXMgb3B0aW9uIGlzIGludGVuZGVkIGZvciBmcmFtZXdvcmsgYXV0aG9ycy5cbiAqIDo6OlxuICpcbiAqIEF1dGguanMgY29tZXMgd2l0aCBidWlsdC1pbiBDU1JGIHByb3RlY3Rpb24sIGJ1dFxuICogaWYgeW91IGFyZSBpbXBsZW1lbnRpbmcgYSBmcmFtZXdvcmsgdGhhdCBpcyBhbHJlYWR5IHByb3RlY3RlZCBhZ2FpbnN0IENTUkYgYXR0YWNrcywgeW91IGNhbiBza2lwIHRoaXMgY2hlY2sgYnlcbiAqIHBhc3NpbmcgdGhpcyB2YWx1ZSB0byB7QGxpbmsgQXV0aENvbmZpZy5za2lwQ1NSRkNoZWNrfS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNraXBDU1JGQ2hlY2sgPSBTeW1ib2woXCJza2lwLWNzcmYtY2hlY2tcIik7XG4vKipcbiAqIDo6OmRhbmdlclxuICogVGhpcyBvcHRpb24gaXMgaW50ZW5kZWQgZm9yIGZyYW1ld29yayBhdXRob3JzLlxuICogOjo6XG4gKlxuICogQXV0aC5qcyByZXR1cm5zIGEgd2ViIHN0YW5kYXJkIHtAbGluayBSZXNwb25zZX0gYnkgZGVmYXVsdCwgYnV0XG4gKiBpZiB5b3UgYXJlIGltcGxlbWVudGluZyBhIGZyYW1ld29yayB5b3UgbWlnaHQgd2FudCB0byBnZXQgYWNjZXNzIHRvIHRoZSByYXcgaW50ZXJuYWwgcmVzcG9uc2VcbiAqIGJ5IHBhc3NpbmcgdGhpcyB2YWx1ZSB0byB7QGxpbmsgQXV0aENvbmZpZy5yYXd9LlxuICovXG5leHBvcnQgY29uc3QgcmF3ID0gU3ltYm9sKFwicmV0dXJuLXR5cGUtcmF3XCIpO1xuLyoqXG4gKiA6OjpkYW5nZXJcbiAqIFRoaXMgb3B0aW9uIGFsbG93cyB5b3UgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgYGZldGNoYCBmdW5jdGlvbiB1c2VkIGJ5IHRoZSBwcm92aWRlclxuICogdG8gbWFrZSByZXF1ZXN0cyB0byB0aGUgcHJvdmlkZXIncyBPQXV0aCBlbmRwb2ludHMgZGlyZWN0bHkuXG4gKiBVc2VkIGluY29ycmVjdGx5LCBpdCBjYW4gaGF2ZSBzZWN1cml0eSBpbXBsaWNhdGlvbnMuXG4gKiA6OjpcbiAqXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBzdXBwb3J0IGNvcnBvcmF0ZSBwcm94aWVzLCBjdXN0b20gZmV0Y2ggbGlicmFyaWVzLCBjYWNoZSBkaXNjb3ZlcnkgZW5kcG9pbnRzLFxuICogYWRkIG1vY2tzIGZvciB0ZXN0aW5nLCBsb2dnaW5nLCBzZXQgY3VzdG9tIGhlYWRlcnMvcGFyYW1zIGZvciBub24tc3BlYyBjb21wbGlhbnQgcHJvdmlkZXJzLCBldGMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBBdXRoLCBjdXN0b21GZXRjaCB9IGZyb20gXCJAYXV0aC9jb3JlXCJcbiAqIGltcG9ydCBHaXRIdWIgZnJvbSBcIkBhdXRoL2NvcmUvcHJvdmlkZXJzL2dpdGh1YlwiXG4gKlxuICogY29uc3QgZGlzcGF0Y2hlciA9IG5ldyBQcm94eUFnZW50KFwibXkucHJveHkuc2VydmVyXCIpXG4gKiBmdW5jdGlvbiBwcm94eSguLi5hcmdzOiBQYXJhbWV0ZXJzPHR5cGVvZiBmZXRjaD4pOiBSZXR1cm5UeXBlPHR5cGVvZiBmZXRjaD4ge1xuICogICByZXR1cm4gdW5kaWNpKGFyZ3NbMF0sIHsgLi4uKGFyZ3NbMV0gPz8ge30pLCBkaXNwYXRjaGVyIH0pXG4gKiB9XG4gKlxuICogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBdXRoKHJlcXVlc3QsIHtcbiAqICAgcHJvdmlkZXJzOiBbR2l0SHViKHsgW2N1c3RvbUZldGNoXTogcHJveHkgfSldXG4gKiB9KVxuICogYGBgXG4gKlxuICogQHNlZSBodHRwczovL3VuZGljaS5ub2RlanMub3JnLyMvZG9jcy9hcGkvUHJveHlBZ2VudD9pZD1leGFtcGxlLWJhc2ljLXByb3h5LXJlcXVlc3Qtd2l0aC1sb2NhbC1hZ2VudC1kaXNwYXRjaGVyXG4gKiBAc2VlIGh0dHBzOi8vYXV0aGpzLmRldi9ndWlkZXMvY29ycG9yYXRlLXByb3h5XG4gKi9cbmV4cG9ydCBjb25zdCBjdXN0b21GZXRjaCA9IFN5bWJvbChcImN1c3RvbS1mZXRjaFwiKTtcbi8qKlxuICogQGludGVybmFsXG4gKlxuICogVXNlZCB0byBtYXJrIHNvbWUgcHJvdmlkZXJzIGZvciBwcm9jZXNzaW5nIHdpdGhpbiB0aGUgY29yZSBsaWJyYXJ5LlxuICpcbiAqICoqRG8gbm90IHVzZSBvciB5b3Ugd2lsbCBiZSBmaXJlZC4qKlxuICovXG5leHBvcnQgY29uc3QgY29uZm9ybUludGVybmFsID0gU3ltYm9sKFwiY29uZm9ybS1pbnRlcm5hbFwiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/symbols.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/symbols.js":
/*!************************************************!*\
  !*** ./node_modules/@auth/core/lib/symbols.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   conformInternal: () => (/* binding */ conformInternal),\n/* harmony export */   customFetch: () => (/* binding */ customFetch),\n/* harmony export */   raw: () => (/* binding */ raw),\n/* harmony export */   skipCSRFCheck: () => (/* binding */ skipCSRFCheck)\n/* harmony export */ });\n/**\n * :::danger\n * This option is intended for framework authors.\n * :::\n *\n * Auth.js comes with built-in CSRF protection, but\n * if you are implementing a framework that is already protected against CSRF attacks, you can skip this check by\n * passing this value to {@link AuthConfig.skipCSRFCheck}.\n */\nconst skipCSRFCheck = Symbol(\"skip-csrf-check\");\n/**\n * :::danger\n * This option is intended for framework authors.\n * :::\n *\n * Auth.js returns a web standard {@link Response} by default, but\n * if you are implementing a framework you might want to get access to the raw internal response\n * by passing this value to {@link AuthConfig.raw}.\n */\nconst raw = Symbol(\"return-type-raw\");\n/**\n * :::danger\n * This option allows you to override the default `fetch` function used by the provider\n * to make requests to the provider's OAuth endpoints directly.\n * Used incorrectly, it can have security implications.\n * :::\n *\n * It can be used to support corporate proxies, custom fetch libraries, cache discovery endpoints,\n * add mocks for testing, logging, set custom headers/params for non-spec compliant providers, etc.\n *\n * @example\n * ```ts\n * import { Auth, customFetch } from \"@auth/core\"\n * import GitHub from \"@auth/core/providers/github\"\n *\n * const dispatcher = new ProxyAgent(\"my.proxy.server\")\n * function proxy(...args: Parameters<typeof fetch>): ReturnType<typeof fetch> {\n *   return undici(args[0], { ...(args[1] ?? {}), dispatcher })\n * }\n *\n * const response = await Auth(request, {\n *   providers: [GitHub({ [customFetch]: proxy })]\n * })\n * ```\n *\n * @see https://undici.nodejs.org/#/docs/api/ProxyAgent?id=example-basic-proxy-request-with-local-agent-dispatcher\n * @see https://authjs.dev/guides/corporate-proxy\n */\nconst customFetch = Symbol(\"custom-fetch\");\n/**\n * @internal\n *\n * Used to mark some providers for processing within the core library.\n *\n * **Do not use or you will be fired.**\n */\nconst conformInternal = Symbol(\"conform-internal\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvc3ltYm9scy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsK0JBQStCO0FBQ3pEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGdCQUFnQjtBQUNuRDtBQUNBLDZCQUE2QixxQkFBcUI7QUFDbEQ7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlCQUFpQixlQUFlO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzQkFBc0I7QUFDaEQsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08iLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFxzeW1ib2xzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogOjo6ZGFuZ2VyXG4gKiBUaGlzIG9wdGlvbiBpcyBpbnRlbmRlZCBmb3IgZnJhbWV3b3JrIGF1dGhvcnMuXG4gKiA6OjpcbiAqXG4gKiBBdXRoLmpzIGNvbWVzIHdpdGggYnVpbHQtaW4gQ1NSRiBwcm90ZWN0aW9uLCBidXRcbiAqIGlmIHlvdSBhcmUgaW1wbGVtZW50aW5nIGEgZnJhbWV3b3JrIHRoYXQgaXMgYWxyZWFkeSBwcm90ZWN0ZWQgYWdhaW5zdCBDU1JGIGF0dGFja3MsIHlvdSBjYW4gc2tpcCB0aGlzIGNoZWNrIGJ5XG4gKiBwYXNzaW5nIHRoaXMgdmFsdWUgdG8ge0BsaW5rIEF1dGhDb25maWcuc2tpcENTUkZDaGVja30uXG4gKi9cbmV4cG9ydCBjb25zdCBza2lwQ1NSRkNoZWNrID0gU3ltYm9sKFwic2tpcC1jc3JmLWNoZWNrXCIpO1xuLyoqXG4gKiA6OjpkYW5nZXJcbiAqIFRoaXMgb3B0aW9uIGlzIGludGVuZGVkIGZvciBmcmFtZXdvcmsgYXV0aG9ycy5cbiAqIDo6OlxuICpcbiAqIEF1dGguanMgcmV0dXJucyBhIHdlYiBzdGFuZGFyZCB7QGxpbmsgUmVzcG9uc2V9IGJ5IGRlZmF1bHQsIGJ1dFxuICogaWYgeW91IGFyZSBpbXBsZW1lbnRpbmcgYSBmcmFtZXdvcmsgeW91IG1pZ2h0IHdhbnQgdG8gZ2V0IGFjY2VzcyB0byB0aGUgcmF3IGludGVybmFsIHJlc3BvbnNlXG4gKiBieSBwYXNzaW5nIHRoaXMgdmFsdWUgdG8ge0BsaW5rIEF1dGhDb25maWcucmF3fS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJhdyA9IFN5bWJvbChcInJldHVybi10eXBlLXJhd1wiKTtcbi8qKlxuICogOjo6ZGFuZ2VyXG4gKiBUaGlzIG9wdGlvbiBhbGxvd3MgeW91IHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGBmZXRjaGAgZnVuY3Rpb24gdXNlZCBieSB0aGUgcHJvdmlkZXJcbiAqIHRvIG1ha2UgcmVxdWVzdHMgdG8gdGhlIHByb3ZpZGVyJ3MgT0F1dGggZW5kcG9pbnRzIGRpcmVjdGx5LlxuICogVXNlZCBpbmNvcnJlY3RseSwgaXQgY2FuIGhhdmUgc2VjdXJpdHkgaW1wbGljYXRpb25zLlxuICogOjo6XG4gKlxuICogSXQgY2FuIGJlIHVzZWQgdG8gc3VwcG9ydCBjb3Jwb3JhdGUgcHJveGllcywgY3VzdG9tIGZldGNoIGxpYnJhcmllcywgY2FjaGUgZGlzY292ZXJ5IGVuZHBvaW50cyxcbiAqIGFkZCBtb2NrcyBmb3IgdGVzdGluZywgbG9nZ2luZywgc2V0IGN1c3RvbSBoZWFkZXJzL3BhcmFtcyBmb3Igbm9uLXNwZWMgY29tcGxpYW50IHByb3ZpZGVycywgZXRjLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQXV0aCwgY3VzdG9tRmV0Y2ggfSBmcm9tIFwiQGF1dGgvY29yZVwiXG4gKiBpbXBvcnQgR2l0SHViIGZyb20gXCJAYXV0aC9jb3JlL3Byb3ZpZGVycy9naXRodWJcIlxuICpcbiAqIGNvbnN0IGRpc3BhdGNoZXIgPSBuZXcgUHJveHlBZ2VudChcIm15LnByb3h5LnNlcnZlclwiKVxuICogZnVuY3Rpb24gcHJveHkoLi4uYXJnczogUGFyYW1ldGVyczx0eXBlb2YgZmV0Y2g+KTogUmV0dXJuVHlwZTx0eXBlb2YgZmV0Y2g+IHtcbiAqICAgcmV0dXJuIHVuZGljaShhcmdzWzBdLCB7IC4uLihhcmdzWzFdID8/IHt9KSwgZGlzcGF0Y2hlciB9KVxuICogfVxuICpcbiAqIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXV0aChyZXF1ZXN0LCB7XG4gKiAgIHByb3ZpZGVyczogW0dpdEh1Yih7IFtjdXN0b21GZXRjaF06IHByb3h5IH0pXVxuICogfSlcbiAqIGBgYFxuICpcbiAqIEBzZWUgaHR0cHM6Ly91bmRpY2kubm9kZWpzLm9yZy8jL2RvY3MvYXBpL1Byb3h5QWdlbnQ/aWQ9ZXhhbXBsZS1iYXNpYy1wcm94eS1yZXF1ZXN0LXdpdGgtbG9jYWwtYWdlbnQtZGlzcGF0Y2hlclxuICogQHNlZSBodHRwczovL2F1dGhqcy5kZXYvZ3VpZGVzL2NvcnBvcmF0ZS1wcm94eVxuICovXG5leHBvcnQgY29uc3QgY3VzdG9tRmV0Y2ggPSBTeW1ib2woXCJjdXN0b20tZmV0Y2hcIik7XG4vKipcbiAqIEBpbnRlcm5hbFxuICpcbiAqIFVzZWQgdG8gbWFyayBzb21lIHByb3ZpZGVycyBmb3IgcHJvY2Vzc2luZyB3aXRoaW4gdGhlIGNvcmUgbGlicmFyeS5cbiAqXG4gKiAqKkRvIG5vdCB1c2Ugb3IgeW91IHdpbGwgYmUgZmlyZWQuKipcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbmZvcm1JbnRlcm5hbCA9IFN5bWJvbChcImNvbmZvcm0taW50ZXJuYWxcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/symbols.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/actions.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/actions.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAuthAction: () => (/* binding */ isAuthAction)\n/* harmony export */ });\nconst actions = [\n    \"providers\",\n    \"session\",\n    \"csrf\",\n    \"signin\",\n    \"signout\",\n    \"callback\",\n    \"verify-request\",\n    \"error\",\n    \"webauthn-options\",\n];\nfunction isAuthAction(action) {\n    return actions.includes(action);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9hY3Rpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXGFjdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYWN0aW9ucyA9IFtcbiAgICBcInByb3ZpZGVyc1wiLFxuICAgIFwic2Vzc2lvblwiLFxuICAgIFwiY3NyZlwiLFxuICAgIFwic2lnbmluXCIsXG4gICAgXCJzaWdub3V0XCIsXG4gICAgXCJjYWxsYmFja1wiLFxuICAgIFwidmVyaWZ5LXJlcXVlc3RcIixcbiAgICBcImVycm9yXCIsXG4gICAgXCJ3ZWJhdXRobi1vcHRpb25zXCIsXG5dO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aEFjdGlvbihhY3Rpb24pIHtcbiAgICByZXR1cm4gYWN0aW9ucy5pbmNsdWRlcyhhY3Rpb24pO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/actions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/actions.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/actions.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAuthAction: () => (/* binding */ isAuthAction)\n/* harmony export */ });\nconst actions = [\n    \"providers\",\n    \"session\",\n    \"csrf\",\n    \"signin\",\n    \"signout\",\n    \"callback\",\n    \"verify-request\",\n    \"error\",\n    \"webauthn-options\",\n];\nfunction isAuthAction(action) {\n    return actions.includes(action);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvYWN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxhY3Rpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFjdGlvbnMgPSBbXG4gICAgXCJwcm92aWRlcnNcIixcbiAgICBcInNlc3Npb25cIixcbiAgICBcImNzcmZcIixcbiAgICBcInNpZ25pblwiLFxuICAgIFwic2lnbm91dFwiLFxuICAgIFwiY2FsbGJhY2tcIixcbiAgICBcInZlcmlmeS1yZXF1ZXN0XCIsXG4gICAgXCJlcnJvclwiLFxuICAgIFwid2ViYXV0aG4tb3B0aW9uc1wiLFxuXTtcbmV4cG9ydCBmdW5jdGlvbiBpc0F1dGhBY3Rpb24oYWN0aW9uKSB7XG4gICAgcmV0dXJuIGFjdGlvbnMuaW5jbHVkZXMoYWN0aW9uKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/actions.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/assert.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/assert.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertConfig: () => (/* binding */ assertConfig)\n/* harmony export */ });\n/* harmony import */ var _cookie_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cookie.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/cookie.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n\n\nlet warned = false;\nfunction isValidHttpUrl(url, baseUrl) {\n    try {\n        return /^https?:/.test(new URL(url, url.startsWith(\"/\") ? baseUrl : undefined).protocol);\n    }\n    catch {\n        return false;\n    }\n}\nfunction isSemverString(version) {\n    return /^v\\d+(?:\\.\\d+){0,2}$/.test(version);\n}\nlet hasCredentials = false;\nlet hasEmail = false;\nlet hasWebAuthn = false;\nconst emailMethods = [\n    \"createVerificationToken\",\n    \"useVerificationToken\",\n    \"getUserByEmail\",\n];\nconst sessionMethods = [\n    \"createUser\",\n    \"getUser\",\n    \"getUserByEmail\",\n    \"getUserByAccount\",\n    \"updateUser\",\n    \"linkAccount\",\n    \"createSession\",\n    \"getSessionAndUser\",\n    \"updateSession\",\n    \"deleteSession\",\n];\nconst webauthnMethods = [\n    \"createUser\",\n    \"getUser\",\n    \"linkAccount\",\n    \"getAccount\",\n    \"getAuthenticator\",\n    \"createAuthenticator\",\n    \"listAuthenticatorsByUserId\",\n    \"updateAuthenticatorCounter\",\n];\n/**\n * Verify that the user configured Auth.js correctly.\n * Good place to mention deprecations as well.\n *\n * This is invoked before the init method, so default values are not available yet.\n */\nfunction assertConfig(request, options) {\n    const { url } = request;\n    const warnings = [];\n    if (!warned && options.debug)\n        warnings.push(\"debug-enabled\");\n    if (!options.trustHost) {\n        return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UntrustedHost(`Host must be trusted. URL was: ${request.url}`);\n    }\n    if (!options.secret?.length) {\n        return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingSecret(\"Please define a `secret`\");\n    }\n    const callbackUrlParam = request.query?.callbackUrl;\n    if (callbackUrlParam && !isValidHttpUrl(callbackUrlParam, url.origin)) {\n        return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidCallbackUrl(`Invalid callback URL. Received: ${callbackUrlParam}`);\n    }\n    const { callbackUrl: defaultCallbackUrl } = (0,_cookie_js__WEBPACK_IMPORTED_MODULE_0__.defaultCookies)(options.useSecureCookies ?? url.protocol === \"https:\");\n    const callbackUrlCookie = request.cookies?.[options.cookies?.callbackUrl?.name ?? defaultCallbackUrl.name];\n    if (callbackUrlCookie && !isValidHttpUrl(callbackUrlCookie, url.origin)) {\n        return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidCallbackUrl(`Invalid callback URL. Received: ${callbackUrlCookie}`);\n    }\n    // Keep track of webauthn providers that use conditional UI\n    let hasConditionalUIProvider = false;\n    for (const p of options.providers) {\n        const provider = typeof p === \"function\" ? p() : p;\n        if ((provider.type === \"oauth\" || provider.type === \"oidc\") &&\n            !(provider.issuer ?? provider.options?.issuer)) {\n            const { authorization: a, token: t, userinfo: u } = provider;\n            let key;\n            if (typeof a !== \"string\" && !a?.url)\n                key = \"authorization\";\n            else if (typeof t !== \"string\" && !t?.url)\n                key = \"token\";\n            else if (typeof u !== \"string\" && !u?.url)\n                key = \"userinfo\";\n            if (key) {\n                return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidEndpoints(`Provider \"${provider.id}\" is missing both \\`issuer\\` and \\`${key}\\` endpoint config. At least one of them is required`);\n            }\n        }\n        if (provider.type === \"credentials\")\n            hasCredentials = true;\n        else if (provider.type === \"email\")\n            hasEmail = true;\n        else if (provider.type === \"webauthn\") {\n            hasWebAuthn = true;\n            // Validate simpleWebAuthnBrowserVersion\n            if (provider.simpleWebAuthnBrowserVersion &&\n                !isSemverString(provider.simpleWebAuthnBrowserVersion)) {\n                return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.AuthError(`Invalid provider config for \"${provider.id}\": simpleWebAuthnBrowserVersion \"${provider.simpleWebAuthnBrowserVersion}\" must be a valid semver string.`);\n            }\n            if (provider.enableConditionalUI) {\n                // Make sure only one webauthn provider has \"enableConditionalUI\" set to true\n                if (hasConditionalUIProvider) {\n                    return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.DuplicateConditionalUI(`Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time`);\n                }\n                hasConditionalUIProvider = true;\n                // Make sure at least one formField has \"webauthn\" in its autocomplete param\n                const hasWebauthnFormField = Object.values(provider.formFields).some((f) => f.autocomplete && f.autocomplete.toString().indexOf(\"webauthn\") > -1);\n                if (!hasWebauthnFormField) {\n                    return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingWebAuthnAutocomplete(`Provider \"${provider.id}\" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`);\n                }\n            }\n        }\n    }\n    if (hasCredentials) {\n        const dbStrategy = options.session?.strategy === \"database\";\n        const onlyCredentials = !options.providers.some((p) => (typeof p === \"function\" ? p() : p).type !== \"credentials\");\n        if (dbStrategy && onlyCredentials) {\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnsupportedStrategy(\"Signing in with credentials only supported if JWT strategy is enabled\");\n        }\n        const credentialsNoAuthorize = options.providers.some((p) => {\n            const provider = typeof p === \"function\" ? p() : p;\n            return provider.type === \"credentials\" && !provider.authorize;\n        });\n        if (credentialsNoAuthorize) {\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAuthorize(\"Must define an authorize() handler to use credentials authentication provider\");\n        }\n    }\n    const { adapter, session } = options;\n    const requiredMethods = [];\n    if (hasEmail ||\n        session?.strategy === \"database\" ||\n        (!session?.strategy && adapter)) {\n        if (hasEmail) {\n            if (!adapter)\n                return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAdapter(\"Email login requires an adapter\");\n            requiredMethods.push(...emailMethods);\n        }\n        else {\n            if (!adapter)\n                return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAdapter(\"Database session requires an adapter\");\n            requiredMethods.push(...sessionMethods);\n        }\n    }\n    if (hasWebAuthn) {\n        // Log experimental warning\n        if (options.experimental?.enableWebAuthn) {\n            warnings.push(\"experimental-webauthn\");\n        }\n        else {\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.ExperimentalFeatureNotEnabled(\"WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config\");\n        }\n        if (!adapter)\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAdapter(\"WebAuthn requires an adapter\");\n        requiredMethods.push(...webauthnMethods);\n    }\n    if (adapter) {\n        const missing = requiredMethods.filter((m) => !(m in adapter));\n        if (missing.length) {\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAdapterMethods(`Required adapter methods were missing: ${missing.join(\", \")}`);\n        }\n    }\n    if (!warned)\n        warned = true;\n    return warnings;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9hc3NlcnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZDO0FBQ3NPO0FBQ25SO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLElBQUk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxREFBYSxtQ0FBbUMsWUFBWTtBQUMvRTtBQUNBO0FBQ0EsbUJBQW1CLHFEQUFhO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwwREFBa0Isb0NBQW9DLGlCQUFpQjtBQUMxRjtBQUNBLFlBQVksa0NBQWtDLEVBQUUsMERBQWM7QUFDOUQ7QUFDQTtBQUNBLG1CQUFtQiwwREFBa0Isb0NBQW9DLGtCQUFrQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBMEM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3REFBZ0IsY0FBYyxZQUFZLHFDQUFxQyxJQUFJO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsaURBQVMsaUNBQWlDLFlBQVksbUNBQW1DLHNDQUFzQztBQUMxSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4REFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtRUFBMkIsY0FBYyxZQUFZO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkRBQW1CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsdUJBQXVCLHdEQUFnQjtBQUN2QztBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixxRUFBNkI7QUFDcEQ7QUFDQTtBQUNBLHVCQUF1QixzREFBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZEQUFxQiwyQ0FBMkMsbUJBQW1CO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxhc3NlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmYXVsdENvb2tpZXMgfSBmcm9tIFwiLi9jb29raWUuanNcIjtcbmltcG9ydCB7IEF1dGhFcnJvciwgRHVwbGljYXRlQ29uZGl0aW9uYWxVSSwgRXhwZXJpbWVudGFsRmVhdHVyZU5vdEVuYWJsZWQsIEludmFsaWRDYWxsYmFja1VybCwgSW52YWxpZEVuZHBvaW50cywgTWlzc2luZ0FkYXB0ZXIsIE1pc3NpbmdBZGFwdGVyTWV0aG9kcywgTWlzc2luZ0F1dGhvcml6ZSwgTWlzc2luZ1NlY3JldCwgTWlzc2luZ1dlYkF1dGhuQXV0b2NvbXBsZXRlLCBVbnN1cHBvcnRlZFN0cmF0ZWd5LCBVbnRydXN0ZWRIb3N0LCB9IGZyb20gXCIuLi8uLi9lcnJvcnMuanNcIjtcbmxldCB3YXJuZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGlzVmFsaWRIdHRwVXJsKHVybCwgYmFzZVVybCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiAvXmh0dHBzPzovLnRlc3QobmV3IFVSTCh1cmwsIHVybC5zdGFydHNXaXRoKFwiL1wiKSA/IGJhc2VVcmwgOiB1bmRlZmluZWQpLnByb3RvY29sKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTZW12ZXJTdHJpbmcodmVyc2lvbikge1xuICAgIHJldHVybiAvXnZcXGQrKD86XFwuXFxkKyl7MCwyfSQvLnRlc3QodmVyc2lvbik7XG59XG5sZXQgaGFzQ3JlZGVudGlhbHMgPSBmYWxzZTtcbmxldCBoYXNFbWFpbCA9IGZhbHNlO1xubGV0IGhhc1dlYkF1dGhuID0gZmFsc2U7XG5jb25zdCBlbWFpbE1ldGhvZHMgPSBbXG4gICAgXCJjcmVhdGVWZXJpZmljYXRpb25Ub2tlblwiLFxuICAgIFwidXNlVmVyaWZpY2F0aW9uVG9rZW5cIixcbiAgICBcImdldFVzZXJCeUVtYWlsXCIsXG5dO1xuY29uc3Qgc2Vzc2lvbk1ldGhvZHMgPSBbXG4gICAgXCJjcmVhdGVVc2VyXCIsXG4gICAgXCJnZXRVc2VyXCIsXG4gICAgXCJnZXRVc2VyQnlFbWFpbFwiLFxuICAgIFwiZ2V0VXNlckJ5QWNjb3VudFwiLFxuICAgIFwidXBkYXRlVXNlclwiLFxuICAgIFwibGlua0FjY291bnRcIixcbiAgICBcImNyZWF0ZVNlc3Npb25cIixcbiAgICBcImdldFNlc3Npb25BbmRVc2VyXCIsXG4gICAgXCJ1cGRhdGVTZXNzaW9uXCIsXG4gICAgXCJkZWxldGVTZXNzaW9uXCIsXG5dO1xuY29uc3Qgd2ViYXV0aG5NZXRob2RzID0gW1xuICAgIFwiY3JlYXRlVXNlclwiLFxuICAgIFwiZ2V0VXNlclwiLFxuICAgIFwibGlua0FjY291bnRcIixcbiAgICBcImdldEFjY291bnRcIixcbiAgICBcImdldEF1dGhlbnRpY2F0b3JcIixcbiAgICBcImNyZWF0ZUF1dGhlbnRpY2F0b3JcIixcbiAgICBcImxpc3RBdXRoZW50aWNhdG9yc0J5VXNlcklkXCIsXG4gICAgXCJ1cGRhdGVBdXRoZW50aWNhdG9yQ291bnRlclwiLFxuXTtcbi8qKlxuICogVmVyaWZ5IHRoYXQgdGhlIHVzZXIgY29uZmlndXJlZCBBdXRoLmpzIGNvcnJlY3RseS5cbiAqIEdvb2QgcGxhY2UgdG8gbWVudGlvbiBkZXByZWNhdGlvbnMgYXMgd2VsbC5cbiAqXG4gKiBUaGlzIGlzIGludm9rZWQgYmVmb3JlIHRoZSBpbml0IG1ldGhvZCwgc28gZGVmYXVsdCB2YWx1ZXMgYXJlIG5vdCBhdmFpbGFibGUgeWV0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0Q29uZmlnKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHVybCB9ID0gcmVxdWVzdDtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGlmICghd2FybmVkICYmIG9wdGlvbnMuZGVidWcpXG4gICAgICAgIHdhcm5pbmdzLnB1c2goXCJkZWJ1Zy1lbmFibGVkXCIpO1xuICAgIGlmICghb3B0aW9ucy50cnVzdEhvc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVbnRydXN0ZWRIb3N0KGBIb3N0IG11c3QgYmUgdHJ1c3RlZC4gVVJMIHdhczogJHtyZXF1ZXN0LnVybH1gKTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLnNlY3JldD8ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWlzc2luZ1NlY3JldChcIlBsZWFzZSBkZWZpbmUgYSBgc2VjcmV0YFwiKTtcbiAgICB9XG4gICAgY29uc3QgY2FsbGJhY2tVcmxQYXJhbSA9IHJlcXVlc3QucXVlcnk/LmNhbGxiYWNrVXJsO1xuICAgIGlmIChjYWxsYmFja1VybFBhcmFtICYmICFpc1ZhbGlkSHR0cFVybChjYWxsYmFja1VybFBhcmFtLCB1cmwub3JpZ2luKSkge1xuICAgICAgICByZXR1cm4gbmV3IEludmFsaWRDYWxsYmFja1VybChgSW52YWxpZCBjYWxsYmFjayBVUkwuIFJlY2VpdmVkOiAke2NhbGxiYWNrVXJsUGFyYW19YCk7XG4gICAgfVxuICAgIGNvbnN0IHsgY2FsbGJhY2tVcmw6IGRlZmF1bHRDYWxsYmFja1VybCB9ID0gZGVmYXVsdENvb2tpZXMob3B0aW9ucy51c2VTZWN1cmVDb29raWVzID8/IHVybC5wcm90b2NvbCA9PT0gXCJodHRwczpcIik7XG4gICAgY29uc3QgY2FsbGJhY2tVcmxDb29raWUgPSByZXF1ZXN0LmNvb2tpZXM/LltvcHRpb25zLmNvb2tpZXM/LmNhbGxiYWNrVXJsPy5uYW1lID8/IGRlZmF1bHRDYWxsYmFja1VybC5uYW1lXTtcbiAgICBpZiAoY2FsbGJhY2tVcmxDb29raWUgJiYgIWlzVmFsaWRIdHRwVXJsKGNhbGxiYWNrVXJsQ29va2llLCB1cmwub3JpZ2luKSkge1xuICAgICAgICByZXR1cm4gbmV3IEludmFsaWRDYWxsYmFja1VybChgSW52YWxpZCBjYWxsYmFjayBVUkwuIFJlY2VpdmVkOiAke2NhbGxiYWNrVXJsQ29va2llfWApO1xuICAgIH1cbiAgICAvLyBLZWVwIHRyYWNrIG9mIHdlYmF1dGhuIHByb3ZpZGVycyB0aGF0IHVzZSBjb25kaXRpb25hbCBVSVxuICAgIGxldCBoYXNDb25kaXRpb25hbFVJUHJvdmlkZXIgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IHAgb2Ygb3B0aW9ucy5wcm92aWRlcnMpIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0eXBlb2YgcCA9PT0gXCJmdW5jdGlvblwiID8gcCgpIDogcDtcbiAgICAgICAgaWYgKChwcm92aWRlci50eXBlID09PSBcIm9hdXRoXCIgfHwgcHJvdmlkZXIudHlwZSA9PT0gXCJvaWRjXCIpICYmXG4gICAgICAgICAgICAhKHByb3ZpZGVyLmlzc3VlciA/PyBwcm92aWRlci5vcHRpb25zPy5pc3N1ZXIpKSB7XG4gICAgICAgICAgICBjb25zdCB7IGF1dGhvcml6YXRpb246IGEsIHRva2VuOiB0LCB1c2VyaW5mbzogdSB9ID0gcHJvdmlkZXI7XG4gICAgICAgICAgICBsZXQga2V5O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhICE9PSBcInN0cmluZ1wiICYmICFhPy51cmwpXG4gICAgICAgICAgICAgICAga2V5ID0gXCJhdXRob3JpemF0aW9uXCI7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdCAhPT0gXCJzdHJpbmdcIiAmJiAhdD8udXJsKVxuICAgICAgICAgICAgICAgIGtleSA9IFwidG9rZW5cIjtcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB1ICE9PSBcInN0cmluZ1wiICYmICF1Py51cmwpXG4gICAgICAgICAgICAgICAga2V5ID0gXCJ1c2VyaW5mb1wiO1xuICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZEVuZHBvaW50cyhgUHJvdmlkZXIgXCIke3Byb3ZpZGVyLmlkfVwiIGlzIG1pc3NpbmcgYm90aCBcXGBpc3N1ZXJcXGAgYW5kIFxcYCR7a2V5fVxcYCBlbmRwb2ludCBjb25maWcuIEF0IGxlYXN0IG9uZSBvZiB0aGVtIGlzIHJlcXVpcmVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3ZpZGVyLnR5cGUgPT09IFwiY3JlZGVudGlhbHNcIilcbiAgICAgICAgICAgIGhhc0NyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJlbWFpbFwiKVxuICAgICAgICAgICAgaGFzRW1haWwgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChwcm92aWRlci50eXBlID09PSBcIndlYmF1dGhuXCIpIHtcbiAgICAgICAgICAgIGhhc1dlYkF1dGhuID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHNpbXBsZVdlYkF1dGhuQnJvd3NlclZlcnNpb25cbiAgICAgICAgICAgIGlmIChwcm92aWRlci5zaW1wbGVXZWJBdXRobkJyb3dzZXJWZXJzaW9uICYmXG4gICAgICAgICAgICAgICAgIWlzU2VtdmVyU3RyaW5nKHByb3ZpZGVyLnNpbXBsZVdlYkF1dGhuQnJvd3NlclZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdXRoRXJyb3IoYEludmFsaWQgcHJvdmlkZXIgY29uZmlnIGZvciBcIiR7cHJvdmlkZXIuaWR9XCI6IHNpbXBsZVdlYkF1dGhuQnJvd3NlclZlcnNpb24gXCIke3Byb3ZpZGVyLnNpbXBsZVdlYkF1dGhuQnJvd3NlclZlcnNpb259XCIgbXVzdCBiZSBhIHZhbGlkIHNlbXZlciBzdHJpbmcuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvdmlkZXIuZW5hYmxlQ29uZGl0aW9uYWxVSSkge1xuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBvbmx5IG9uZSB3ZWJhdXRobiBwcm92aWRlciBoYXMgXCJlbmFibGVDb25kaXRpb25hbFVJXCIgc2V0IHRvIHRydWVcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ29uZGl0aW9uYWxVSVByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRHVwbGljYXRlQ29uZGl0aW9uYWxVSShgTXVsdGlwbGUgd2ViYXV0aG4gcHJvdmlkZXJzIGhhdmUgJ2VuYWJsZUNvbmRpdGlvbmFsVUknIHNldCB0byBUcnVlLiBPbmx5IG9uZSBwcm92aWRlciBjYW4gaGF2ZSB0aGlzIG9wdGlvbiBlbmFibGVkIGF0IGEgdGltZWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoYXNDb25kaXRpb25hbFVJUHJvdmlkZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBhdCBsZWFzdCBvbmUgZm9ybUZpZWxkIGhhcyBcIndlYmF1dGhuXCIgaW4gaXRzIGF1dG9jb21wbGV0ZSBwYXJhbVxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1dlYmF1dGhuRm9ybUZpZWxkID0gT2JqZWN0LnZhbHVlcyhwcm92aWRlci5mb3JtRmllbGRzKS5zb21lKChmKSA9PiBmLmF1dG9jb21wbGV0ZSAmJiBmLmF1dG9jb21wbGV0ZS50b1N0cmluZygpLmluZGV4T2YoXCJ3ZWJhdXRoblwiKSA+IC0xKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc1dlYmF1dGhuRm9ybUZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWlzc2luZ1dlYkF1dGhuQXV0b2NvbXBsZXRlKGBQcm92aWRlciBcIiR7cHJvdmlkZXIuaWR9XCIgaGFzICdlbmFibGVDb25kaXRpb25hbFVJJyBzZXQgdG8gVHJ1ZSwgYnV0IG5vbmUgb2YgaXRzIGZvcm1GaWVsZHMgaGF2ZSAnd2ViYXV0aG4nIGluIHRoZWlyIGF1dG9jb21wbGV0ZSBwYXJhbWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGFzQ3JlZGVudGlhbHMpIHtcbiAgICAgICAgY29uc3QgZGJTdHJhdGVneSA9IG9wdGlvbnMuc2Vzc2lvbj8uc3RyYXRlZ3kgPT09IFwiZGF0YWJhc2VcIjtcbiAgICAgICAgY29uc3Qgb25seUNyZWRlbnRpYWxzID0gIW9wdGlvbnMucHJvdmlkZXJzLnNvbWUoKHApID0+ICh0eXBlb2YgcCA9PT0gXCJmdW5jdGlvblwiID8gcCgpIDogcCkudHlwZSAhPT0gXCJjcmVkZW50aWFsc1wiKTtcbiAgICAgICAgaWYgKGRiU3RyYXRlZ3kgJiYgb25seUNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVuc3VwcG9ydGVkU3RyYXRlZ3koXCJTaWduaW5nIGluIHdpdGggY3JlZGVudGlhbHMgb25seSBzdXBwb3J0ZWQgaWYgSldUIHN0cmF0ZWd5IGlzIGVuYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3JlZGVudGlhbHNOb0F1dGhvcml6ZSA9IG9wdGlvbnMucHJvdmlkZXJzLnNvbWUoKHApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdHlwZW9mIHAgPT09IFwiZnVuY3Rpb25cIiA/IHAoKSA6IHA7XG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXIudHlwZSA9PT0gXCJjcmVkZW50aWFsc1wiICYmICFwcm92aWRlci5hdXRob3JpemU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3JlZGVudGlhbHNOb0F1dGhvcml6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNaXNzaW5nQXV0aG9yaXplKFwiTXVzdCBkZWZpbmUgYW4gYXV0aG9yaXplKCkgaGFuZGxlciB0byB1c2UgY3JlZGVudGlhbHMgYXV0aGVudGljYXRpb24gcHJvdmlkZXJcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgeyBhZGFwdGVyLCBzZXNzaW9uIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IHJlcXVpcmVkTWV0aG9kcyA9IFtdO1xuICAgIGlmIChoYXNFbWFpbCB8fFxuICAgICAgICBzZXNzaW9uPy5zdHJhdGVneSA9PT0gXCJkYXRhYmFzZVwiIHx8XG4gICAgICAgICghc2Vzc2lvbj8uc3RyYXRlZ3kgJiYgYWRhcHRlcikpIHtcbiAgICAgICAgaWYgKGhhc0VtYWlsKSB7XG4gICAgICAgICAgICBpZiAoIWFkYXB0ZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNaXNzaW5nQWRhcHRlcihcIkVtYWlsIGxvZ2luIHJlcXVpcmVzIGFuIGFkYXB0ZXJcIik7XG4gICAgICAgICAgICByZXF1aXJlZE1ldGhvZHMucHVzaCguLi5lbWFpbE1ldGhvZHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFhZGFwdGVyKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWlzc2luZ0FkYXB0ZXIoXCJEYXRhYmFzZSBzZXNzaW9uIHJlcXVpcmVzIGFuIGFkYXB0ZXJcIik7XG4gICAgICAgICAgICByZXF1aXJlZE1ldGhvZHMucHVzaCguLi5zZXNzaW9uTWV0aG9kcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc1dlYkF1dGhuKSB7XG4gICAgICAgIC8vIExvZyBleHBlcmltZW50YWwgd2FybmluZ1xuICAgICAgICBpZiAob3B0aW9ucy5leHBlcmltZW50YWw/LmVuYWJsZVdlYkF1dGhuKSB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKFwiZXhwZXJpbWVudGFsLXdlYmF1dGhuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHBlcmltZW50YWxGZWF0dXJlTm90RW5hYmxlZChcIldlYkF1dGhuIGlzIGFuIGV4cGVyaW1lbnRhbCBmZWF0dXJlLiBUbyBlbmFibGUgaXQsIHNldCBgZXhwZXJpbWVudGFsLmVuYWJsZVdlYkF1dGhuYCB0byBgdHJ1ZWAgaW4geW91ciBjb25maWdcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhZGFwdGVyKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNaXNzaW5nQWRhcHRlcihcIldlYkF1dGhuIHJlcXVpcmVzIGFuIGFkYXB0ZXJcIik7XG4gICAgICAgIHJlcXVpcmVkTWV0aG9kcy5wdXNoKC4uLndlYmF1dGhuTWV0aG9kcyk7XG4gICAgfVxuICAgIGlmIChhZGFwdGVyKSB7XG4gICAgICAgIGNvbnN0IG1pc3NpbmcgPSByZXF1aXJlZE1ldGhvZHMuZmlsdGVyKChtKSA9PiAhKG0gaW4gYWRhcHRlcikpO1xuICAgICAgICBpZiAobWlzc2luZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWlzc2luZ0FkYXB0ZXJNZXRob2RzKGBSZXF1aXJlZCBhZGFwdGVyIG1ldGhvZHMgd2VyZSBtaXNzaW5nOiAke21pc3Npbmcuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghd2FybmVkKVxuICAgICAgICB3YXJuZWQgPSB0cnVlO1xuICAgIHJldHVybiB3YXJuaW5ncztcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/assert.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/assert.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/assert.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertConfig: () => (/* binding */ assertConfig)\n/* harmony export */ });\n/* harmony import */ var _cookie_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cookie.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/cookie.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n\n\nlet warned = false;\nfunction isValidHttpUrl(url, baseUrl) {\n    try {\n        return /^https?:/.test(new URL(url, url.startsWith(\"/\") ? baseUrl : undefined).protocol);\n    }\n    catch {\n        return false;\n    }\n}\nfunction isSemverString(version) {\n    return /^v\\d+(?:\\.\\d+){0,2}$/.test(version);\n}\nlet hasCredentials = false;\nlet hasEmail = false;\nlet hasWebAuthn = false;\nconst emailMethods = [\n    \"createVerificationToken\",\n    \"useVerificationToken\",\n    \"getUserByEmail\",\n];\nconst sessionMethods = [\n    \"createUser\",\n    \"getUser\",\n    \"getUserByEmail\",\n    \"getUserByAccount\",\n    \"updateUser\",\n    \"linkAccount\",\n    \"createSession\",\n    \"getSessionAndUser\",\n    \"updateSession\",\n    \"deleteSession\",\n];\nconst webauthnMethods = [\n    \"createUser\",\n    \"getUser\",\n    \"linkAccount\",\n    \"getAccount\",\n    \"getAuthenticator\",\n    \"createAuthenticator\",\n    \"listAuthenticatorsByUserId\",\n    \"updateAuthenticatorCounter\",\n];\n/**\n * Verify that the user configured Auth.js correctly.\n * Good place to mention deprecations as well.\n *\n * This is invoked before the init method, so default values are not available yet.\n */\nfunction assertConfig(request, options) {\n    const { url } = request;\n    const warnings = [];\n    if (!warned && options.debug)\n        warnings.push(\"debug-enabled\");\n    if (!options.trustHost) {\n        return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UntrustedHost(`Host must be trusted. URL was: ${request.url}`);\n    }\n    if (!options.secret?.length) {\n        return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingSecret(\"Please define a `secret`\");\n    }\n    const callbackUrlParam = request.query?.callbackUrl;\n    if (callbackUrlParam && !isValidHttpUrl(callbackUrlParam, url.origin)) {\n        return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidCallbackUrl(`Invalid callback URL. Received: ${callbackUrlParam}`);\n    }\n    const { callbackUrl: defaultCallbackUrl } = (0,_cookie_js__WEBPACK_IMPORTED_MODULE_0__.defaultCookies)(options.useSecureCookies ?? url.protocol === \"https:\");\n    const callbackUrlCookie = request.cookies?.[options.cookies?.callbackUrl?.name ?? defaultCallbackUrl.name];\n    if (callbackUrlCookie && !isValidHttpUrl(callbackUrlCookie, url.origin)) {\n        return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidCallbackUrl(`Invalid callback URL. Received: ${callbackUrlCookie}`);\n    }\n    // Keep track of webauthn providers that use conditional UI\n    let hasConditionalUIProvider = false;\n    for (const p of options.providers) {\n        const provider = typeof p === \"function\" ? p() : p;\n        if ((provider.type === \"oauth\" || provider.type === \"oidc\") &&\n            !(provider.issuer ?? provider.options?.issuer)) {\n            const { authorization: a, token: t, userinfo: u } = provider;\n            let key;\n            if (typeof a !== \"string\" && !a?.url)\n                key = \"authorization\";\n            else if (typeof t !== \"string\" && !t?.url)\n                key = \"token\";\n            else if (typeof u !== \"string\" && !u?.url)\n                key = \"userinfo\";\n            if (key) {\n                return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidEndpoints(`Provider \"${provider.id}\" is missing both \\`issuer\\` and \\`${key}\\` endpoint config. At least one of them is required`);\n            }\n        }\n        if (provider.type === \"credentials\")\n            hasCredentials = true;\n        else if (provider.type === \"email\")\n            hasEmail = true;\n        else if (provider.type === \"webauthn\") {\n            hasWebAuthn = true;\n            // Validate simpleWebAuthnBrowserVersion\n            if (provider.simpleWebAuthnBrowserVersion &&\n                !isSemverString(provider.simpleWebAuthnBrowserVersion)) {\n                return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.AuthError(`Invalid provider config for \"${provider.id}\": simpleWebAuthnBrowserVersion \"${provider.simpleWebAuthnBrowserVersion}\" must be a valid semver string.`);\n            }\n            if (provider.enableConditionalUI) {\n                // Make sure only one webauthn provider has \"enableConditionalUI\" set to true\n                if (hasConditionalUIProvider) {\n                    return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.DuplicateConditionalUI(`Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time`);\n                }\n                hasConditionalUIProvider = true;\n                // Make sure at least one formField has \"webauthn\" in its autocomplete param\n                const hasWebauthnFormField = Object.values(provider.formFields).some((f) => f.autocomplete && f.autocomplete.toString().indexOf(\"webauthn\") > -1);\n                if (!hasWebauthnFormField) {\n                    return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingWebAuthnAutocomplete(`Provider \"${provider.id}\" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`);\n                }\n            }\n        }\n    }\n    if (hasCredentials) {\n        const dbStrategy = options.session?.strategy === \"database\";\n        const onlyCredentials = !options.providers.some((p) => (typeof p === \"function\" ? p() : p).type !== \"credentials\");\n        if (dbStrategy && onlyCredentials) {\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnsupportedStrategy(\"Signing in with credentials only supported if JWT strategy is enabled\");\n        }\n        const credentialsNoAuthorize = options.providers.some((p) => {\n            const provider = typeof p === \"function\" ? p() : p;\n            return provider.type === \"credentials\" && !provider.authorize;\n        });\n        if (credentialsNoAuthorize) {\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAuthorize(\"Must define an authorize() handler to use credentials authentication provider\");\n        }\n    }\n    const { adapter, session } = options;\n    const requiredMethods = [];\n    if (hasEmail ||\n        session?.strategy === \"database\" ||\n        (!session?.strategy && adapter)) {\n        if (hasEmail) {\n            if (!adapter)\n                return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAdapter(\"Email login requires an adapter\");\n            requiredMethods.push(...emailMethods);\n        }\n        else {\n            if (!adapter)\n                return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAdapter(\"Database session requires an adapter\");\n            requiredMethods.push(...sessionMethods);\n        }\n    }\n    if (hasWebAuthn) {\n        // Log experimental warning\n        if (options.experimental?.enableWebAuthn) {\n            warnings.push(\"experimental-webauthn\");\n        }\n        else {\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.ExperimentalFeatureNotEnabled(\"WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config\");\n        }\n        if (!adapter)\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAdapter(\"WebAuthn requires an adapter\");\n        requiredMethods.push(...webauthnMethods);\n    }\n    if (adapter) {\n        const missing = requiredMethods.filter((m) => !(m in adapter));\n        if (missing.length) {\n            return new _errors_js__WEBPACK_IMPORTED_MODULE_1__.MissingAdapterMethods(`Required adapter methods were missing: ${missing.join(\", \")}`);\n        }\n    }\n    if (!warned)\n        warned = true;\n    return warnings;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvYXNzZXJ0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUNzTztBQUNuUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixJQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLE1BQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscURBQWEsbUNBQW1DLFlBQVk7QUFDL0U7QUFDQTtBQUNBLG1CQUFtQixxREFBYTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMERBQWtCLG9DQUFvQyxpQkFBaUI7QUFDMUY7QUFDQSxZQUFZLGtDQUFrQyxFQUFFLDBEQUFjO0FBQzlEO0FBQ0E7QUFDQSxtQkFBbUIsMERBQWtCLG9DQUFvQyxrQkFBa0I7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMENBQTBDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQWdCLGNBQWMsWUFBWSxxQ0FBcUMsSUFBSTtBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFTLGlDQUFpQyxZQUFZLG1DQUFtQyxzQ0FBc0M7QUFDMUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOERBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsbUVBQTJCLGNBQWMsWUFBWTtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJEQUFtQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHVCQUF1Qix3REFBZ0I7QUFDdkM7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzREFBYztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzREFBYztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUVBQTZCO0FBQ3BEO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2REFBcUIsMkNBQTJDLG1CQUFtQjtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFx1dGlsc1xcYXNzZXJ0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHRDb29raWVzIH0gZnJvbSBcIi4vY29va2llLmpzXCI7XG5pbXBvcnQgeyBBdXRoRXJyb3IsIER1cGxpY2F0ZUNvbmRpdGlvbmFsVUksIEV4cGVyaW1lbnRhbEZlYXR1cmVOb3RFbmFibGVkLCBJbnZhbGlkQ2FsbGJhY2tVcmwsIEludmFsaWRFbmRwb2ludHMsIE1pc3NpbmdBZGFwdGVyLCBNaXNzaW5nQWRhcHRlck1ldGhvZHMsIE1pc3NpbmdBdXRob3JpemUsIE1pc3NpbmdTZWNyZXQsIE1pc3NpbmdXZWJBdXRobkF1dG9jb21wbGV0ZSwgVW5zdXBwb3J0ZWRTdHJhdGVneSwgVW50cnVzdGVkSG9zdCwgfSBmcm9tIFwiLi4vLi4vZXJyb3JzLmpzXCI7XG5sZXQgd2FybmVkID0gZmFsc2U7XG5mdW5jdGlvbiBpc1ZhbGlkSHR0cFVybCh1cmwsIGJhc2VVcmwpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gL15odHRwcz86Ly50ZXN0KG5ldyBVUkwodXJsLCB1cmwuc3RhcnRzV2l0aChcIi9cIikgPyBiYXNlVXJsIDogdW5kZWZpbmVkKS5wcm90b2NvbCk7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzU2VtdmVyU3RyaW5nKHZlcnNpb24pIHtcbiAgICByZXR1cm4gL152XFxkKyg/OlxcLlxcZCspezAsMn0kLy50ZXN0KHZlcnNpb24pO1xufVxubGV0IGhhc0NyZWRlbnRpYWxzID0gZmFsc2U7XG5sZXQgaGFzRW1haWwgPSBmYWxzZTtcbmxldCBoYXNXZWJBdXRobiA9IGZhbHNlO1xuY29uc3QgZW1haWxNZXRob2RzID0gW1xuICAgIFwiY3JlYXRlVmVyaWZpY2F0aW9uVG9rZW5cIixcbiAgICBcInVzZVZlcmlmaWNhdGlvblRva2VuXCIsXG4gICAgXCJnZXRVc2VyQnlFbWFpbFwiLFxuXTtcbmNvbnN0IHNlc3Npb25NZXRob2RzID0gW1xuICAgIFwiY3JlYXRlVXNlclwiLFxuICAgIFwiZ2V0VXNlclwiLFxuICAgIFwiZ2V0VXNlckJ5RW1haWxcIixcbiAgICBcImdldFVzZXJCeUFjY291bnRcIixcbiAgICBcInVwZGF0ZVVzZXJcIixcbiAgICBcImxpbmtBY2NvdW50XCIsXG4gICAgXCJjcmVhdGVTZXNzaW9uXCIsXG4gICAgXCJnZXRTZXNzaW9uQW5kVXNlclwiLFxuICAgIFwidXBkYXRlU2Vzc2lvblwiLFxuICAgIFwiZGVsZXRlU2Vzc2lvblwiLFxuXTtcbmNvbnN0IHdlYmF1dGhuTWV0aG9kcyA9IFtcbiAgICBcImNyZWF0ZVVzZXJcIixcbiAgICBcImdldFVzZXJcIixcbiAgICBcImxpbmtBY2NvdW50XCIsXG4gICAgXCJnZXRBY2NvdW50XCIsXG4gICAgXCJnZXRBdXRoZW50aWNhdG9yXCIsXG4gICAgXCJjcmVhdGVBdXRoZW50aWNhdG9yXCIsXG4gICAgXCJsaXN0QXV0aGVudGljYXRvcnNCeVVzZXJJZFwiLFxuICAgIFwidXBkYXRlQXV0aGVudGljYXRvckNvdW50ZXJcIixcbl07XG4vKipcbiAqIFZlcmlmeSB0aGF0IHRoZSB1c2VyIGNvbmZpZ3VyZWQgQXV0aC5qcyBjb3JyZWN0bHkuXG4gKiBHb29kIHBsYWNlIHRvIG1lbnRpb24gZGVwcmVjYXRpb25zIGFzIHdlbGwuXG4gKlxuICogVGhpcyBpcyBpbnZva2VkIGJlZm9yZSB0aGUgaW5pdCBtZXRob2QsIHNvIGRlZmF1bHQgdmFsdWVzIGFyZSBub3QgYXZhaWxhYmxlIHlldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydENvbmZpZyhyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyB1cmwgfSA9IHJlcXVlc3Q7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBpZiAoIXdhcm5lZCAmJiBvcHRpb25zLmRlYnVnKVxuICAgICAgICB3YXJuaW5ncy5wdXNoKFwiZGVidWctZW5hYmxlZFwiKTtcbiAgICBpZiAoIW9wdGlvbnMudHJ1c3RIb3N0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVW50cnVzdGVkSG9zdChgSG9zdCBtdXN0IGJlIHRydXN0ZWQuIFVSTCB3YXM6ICR7cmVxdWVzdC51cmx9YCk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5zZWNyZXQ/Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbmV3IE1pc3NpbmdTZWNyZXQoXCJQbGVhc2UgZGVmaW5lIGEgYHNlY3JldGBcIik7XG4gICAgfVxuICAgIGNvbnN0IGNhbGxiYWNrVXJsUGFyYW0gPSByZXF1ZXN0LnF1ZXJ5Py5jYWxsYmFja1VybDtcbiAgICBpZiAoY2FsbGJhY2tVcmxQYXJhbSAmJiAhaXNWYWxpZEh0dHBVcmwoY2FsbGJhY2tVcmxQYXJhbSwgdXJsLm9yaWdpbikpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnZhbGlkQ2FsbGJhY2tVcmwoYEludmFsaWQgY2FsbGJhY2sgVVJMLiBSZWNlaXZlZDogJHtjYWxsYmFja1VybFBhcmFtfWApO1xuICAgIH1cbiAgICBjb25zdCB7IGNhbGxiYWNrVXJsOiBkZWZhdWx0Q2FsbGJhY2tVcmwgfSA9IGRlZmF1bHRDb29raWVzKG9wdGlvbnMudXNlU2VjdXJlQ29va2llcyA/PyB1cmwucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIpO1xuICAgIGNvbnN0IGNhbGxiYWNrVXJsQ29va2llID0gcmVxdWVzdC5jb29raWVzPy5bb3B0aW9ucy5jb29raWVzPy5jYWxsYmFja1VybD8ubmFtZSA/PyBkZWZhdWx0Q2FsbGJhY2tVcmwubmFtZV07XG4gICAgaWYgKGNhbGxiYWNrVXJsQ29va2llICYmICFpc1ZhbGlkSHR0cFVybChjYWxsYmFja1VybENvb2tpZSwgdXJsLm9yaWdpbikpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnZhbGlkQ2FsbGJhY2tVcmwoYEludmFsaWQgY2FsbGJhY2sgVVJMLiBSZWNlaXZlZDogJHtjYWxsYmFja1VybENvb2tpZX1gKTtcbiAgICB9XG4gICAgLy8gS2VlcCB0cmFjayBvZiB3ZWJhdXRobiBwcm92aWRlcnMgdGhhdCB1c2UgY29uZGl0aW9uYWwgVUlcbiAgICBsZXQgaGFzQ29uZGl0aW9uYWxVSVByb3ZpZGVyID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBwIG9mIG9wdGlvbnMucHJvdmlkZXJzKSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdHlwZW9mIHAgPT09IFwiZnVuY3Rpb25cIiA/IHAoKSA6IHA7XG4gICAgICAgIGlmICgocHJvdmlkZXIudHlwZSA9PT0gXCJvYXV0aFwiIHx8IHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiKSAmJlxuICAgICAgICAgICAgIShwcm92aWRlci5pc3N1ZXIgPz8gcHJvdmlkZXIub3B0aW9ucz8uaXNzdWVyKSkge1xuICAgICAgICAgICAgY29uc3QgeyBhdXRob3JpemF0aW9uOiBhLCB0b2tlbjogdCwgdXNlcmluZm86IHUgfSA9IHByb3ZpZGVyO1xuICAgICAgICAgICAgbGV0IGtleTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYSAhPT0gXCJzdHJpbmdcIiAmJiAhYT8udXJsKVxuICAgICAgICAgICAgICAgIGtleSA9IFwiYXV0aG9yaXphdGlvblwiO1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHQgIT09IFwic3RyaW5nXCIgJiYgIXQ/LnVybClcbiAgICAgICAgICAgICAgICBrZXkgPSBcInRva2VuXCI7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdSAhPT0gXCJzdHJpbmdcIiAmJiAhdT8udXJsKVxuICAgICAgICAgICAgICAgIGtleSA9IFwidXNlcmluZm9cIjtcbiAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludmFsaWRFbmRwb2ludHMoYFByb3ZpZGVyIFwiJHtwcm92aWRlci5pZH1cIiBpcyBtaXNzaW5nIGJvdGggXFxgaXNzdWVyXFxgIGFuZCBcXGAke2tleX1cXGAgZW5kcG9pbnQgY29uZmlnLiBBdCBsZWFzdCBvbmUgb2YgdGhlbSBpcyByZXF1aXJlZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aWRlci50eXBlID09PSBcImNyZWRlbnRpYWxzXCIpXG4gICAgICAgICAgICBoYXNDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKHByb3ZpZGVyLnR5cGUgPT09IFwiZW1haWxcIilcbiAgICAgICAgICAgIGhhc0VtYWlsID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJ3ZWJhdXRoblwiKSB7XG4gICAgICAgICAgICBoYXNXZWJBdXRobiA9IHRydWU7XG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBzaW1wbGVXZWJBdXRobkJyb3dzZXJWZXJzaW9uXG4gICAgICAgICAgICBpZiAocHJvdmlkZXIuc2ltcGxlV2ViQXV0aG5Ccm93c2VyVmVyc2lvbiAmJlxuICAgICAgICAgICAgICAgICFpc1NlbXZlclN0cmluZyhwcm92aWRlci5zaW1wbGVXZWJBdXRobkJyb3dzZXJWZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXV0aEVycm9yKGBJbnZhbGlkIHByb3ZpZGVyIGNvbmZpZyBmb3IgXCIke3Byb3ZpZGVyLmlkfVwiOiBzaW1wbGVXZWJBdXRobkJyb3dzZXJWZXJzaW9uIFwiJHtwcm92aWRlci5zaW1wbGVXZWJBdXRobkJyb3dzZXJWZXJzaW9ufVwiIG11c3QgYmUgYSB2YWxpZCBzZW12ZXIgc3RyaW5nLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3ZpZGVyLmVuYWJsZUNvbmRpdGlvbmFsVUkpIHtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgb25seSBvbmUgd2ViYXV0aG4gcHJvdmlkZXIgaGFzIFwiZW5hYmxlQ29uZGl0aW9uYWxVSVwiIHNldCB0byB0cnVlXG4gICAgICAgICAgICAgICAgaWYgKGhhc0NvbmRpdGlvbmFsVUlQcm92aWRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IER1cGxpY2F0ZUNvbmRpdGlvbmFsVUkoYE11bHRpcGxlIHdlYmF1dGhuIHByb3ZpZGVycyBoYXZlICdlbmFibGVDb25kaXRpb25hbFVJJyBzZXQgdG8gVHJ1ZS4gT25seSBvbmUgcHJvdmlkZXIgY2FuIGhhdmUgdGhpcyBvcHRpb24gZW5hYmxlZCBhdCBhIHRpbWVgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGFzQ29uZGl0aW9uYWxVSVByb3ZpZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgYXQgbGVhc3Qgb25lIGZvcm1GaWVsZCBoYXMgXCJ3ZWJhdXRoblwiIGluIGl0cyBhdXRvY29tcGxldGUgcGFyYW1cbiAgICAgICAgICAgICAgICBjb25zdCBoYXNXZWJhdXRobkZvcm1GaWVsZCA9IE9iamVjdC52YWx1ZXMocHJvdmlkZXIuZm9ybUZpZWxkcykuc29tZSgoZikgPT4gZi5hdXRvY29tcGxldGUgJiYgZi5hdXRvY29tcGxldGUudG9TdHJpbmcoKS5pbmRleE9mKFwid2ViYXV0aG5cIikgPiAtMSk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNXZWJhdXRobkZvcm1GaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1pc3NpbmdXZWJBdXRobkF1dG9jb21wbGV0ZShgUHJvdmlkZXIgXCIke3Byb3ZpZGVyLmlkfVwiIGhhcyAnZW5hYmxlQ29uZGl0aW9uYWxVSScgc2V0IHRvIFRydWUsIGJ1dCBub25lIG9mIGl0cyBmb3JtRmllbGRzIGhhdmUgJ3dlYmF1dGhuJyBpbiB0aGVpciBhdXRvY29tcGxldGUgcGFyYW1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc0NyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IGRiU3RyYXRlZ3kgPSBvcHRpb25zLnNlc3Npb24/LnN0cmF0ZWd5ID09PSBcImRhdGFiYXNlXCI7XG4gICAgICAgIGNvbnN0IG9ubHlDcmVkZW50aWFscyA9ICFvcHRpb25zLnByb3ZpZGVycy5zb21lKChwKSA9PiAodHlwZW9mIHAgPT09IFwiZnVuY3Rpb25cIiA/IHAoKSA6IHApLnR5cGUgIT09IFwiY3JlZGVudGlhbHNcIik7XG4gICAgICAgIGlmIChkYlN0cmF0ZWd5ICYmIG9ubHlDcmVkZW50aWFscykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbnN1cHBvcnRlZFN0cmF0ZWd5KFwiU2lnbmluZyBpbiB3aXRoIGNyZWRlbnRpYWxzIG9ubHkgc3VwcG9ydGVkIGlmIEpXVCBzdHJhdGVneSBpcyBlbmFibGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzTm9BdXRob3JpemUgPSBvcHRpb25zLnByb3ZpZGVycy5zb21lKChwKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHR5cGVvZiBwID09PSBcImZ1bmN0aW9uXCIgPyBwKCkgOiBwO1xuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVyLnR5cGUgPT09IFwiY3JlZGVudGlhbHNcIiAmJiAhcHJvdmlkZXIuYXV0aG9yaXplO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNyZWRlbnRpYWxzTm9BdXRob3JpemUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWlzc2luZ0F1dGhvcml6ZShcIk11c3QgZGVmaW5lIGFuIGF1dGhvcml6ZSgpIGhhbmRsZXIgdG8gdXNlIGNyZWRlbnRpYWxzIGF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHsgYWRhcHRlciwgc2Vzc2lvbiB9ID0gb3B0aW9ucztcbiAgICBjb25zdCByZXF1aXJlZE1ldGhvZHMgPSBbXTtcbiAgICBpZiAoaGFzRW1haWwgfHxcbiAgICAgICAgc2Vzc2lvbj8uc3RyYXRlZ3kgPT09IFwiZGF0YWJhc2VcIiB8fFxuICAgICAgICAoIXNlc3Npb24/LnN0cmF0ZWd5ICYmIGFkYXB0ZXIpKSB7XG4gICAgICAgIGlmIChoYXNFbWFpbCkge1xuICAgICAgICAgICAgaWYgKCFhZGFwdGVyKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWlzc2luZ0FkYXB0ZXIoXCJFbWFpbCBsb2dpbiByZXF1aXJlcyBhbiBhZGFwdGVyXCIpO1xuICAgICAgICAgICAgcmVxdWlyZWRNZXRob2RzLnB1c2goLi4uZW1haWxNZXRob2RzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghYWRhcHRlcilcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1pc3NpbmdBZGFwdGVyKFwiRGF0YWJhc2Ugc2Vzc2lvbiByZXF1aXJlcyBhbiBhZGFwdGVyXCIpO1xuICAgICAgICAgICAgcmVxdWlyZWRNZXRob2RzLnB1c2goLi4uc2Vzc2lvbk1ldGhvZHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNXZWJBdXRobikge1xuICAgICAgICAvLyBMb2cgZXhwZXJpbWVudGFsIHdhcm5pbmdcbiAgICAgICAgaWYgKG9wdGlvbnMuZXhwZXJpbWVudGFsPy5lbmFibGVXZWJBdXRobikge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaChcImV4cGVyaW1lbnRhbC13ZWJhdXRoblwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXhwZXJpbWVudGFsRmVhdHVyZU5vdEVuYWJsZWQoXCJXZWJBdXRobiBpcyBhbiBleHBlcmltZW50YWwgZmVhdHVyZS4gVG8gZW5hYmxlIGl0LCBzZXQgYGV4cGVyaW1lbnRhbC5lbmFibGVXZWJBdXRobmAgdG8gYHRydWVgIGluIHlvdXIgY29uZmlnXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYWRhcHRlcilcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWlzc2luZ0FkYXB0ZXIoXCJXZWJBdXRobiByZXF1aXJlcyBhbiBhZGFwdGVyXCIpO1xuICAgICAgICByZXF1aXJlZE1ldGhvZHMucHVzaCguLi53ZWJhdXRobk1ldGhvZHMpO1xuICAgIH1cbiAgICBpZiAoYWRhcHRlcikge1xuICAgICAgICBjb25zdCBtaXNzaW5nID0gcmVxdWlyZWRNZXRob2RzLmZpbHRlcigobSkgPT4gIShtIGluIGFkYXB0ZXIpKTtcbiAgICAgICAgaWYgKG1pc3NpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1pc3NpbmdBZGFwdGVyTWV0aG9kcyhgUmVxdWlyZWQgYWRhcHRlciBtZXRob2RzIHdlcmUgbWlzc2luZzogJHttaXNzaW5nLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXdhcm5lZClcbiAgICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICByZXR1cm4gd2FybmluZ3M7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/assert.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/callback-url.js":
/*!***********************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/callback-url.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCallbackUrl: () => (/* binding */ createCallbackUrl)\n/* harmony export */ });\n/**\n * Get callback URL based on query param / cookie + validation,\n * and add it to `req.options.callbackUrl`.\n */\nasync function createCallbackUrl({ options, paramValue, cookieValue, }) {\n    const { url, callbacks } = options;\n    let callbackUrl = url.origin;\n    if (paramValue) {\n        // If callbackUrl form field or query parameter is passed try to use it if allowed\n        callbackUrl = await callbacks.redirect({\n            url: paramValue,\n            baseUrl: url.origin,\n        });\n    }\n    else if (cookieValue) {\n        // If no callbackUrl specified, try using the value from the cookie if allowed\n        callbackUrl = await callbacks.redirect({\n            url: cookieValue,\n            baseUrl: url.origin,\n        });\n    }\n    return {\n        callbackUrl,\n        // Save callback URL in a cookie so that it can be used for subsequent requests in signin/signout/callback flow\n        callbackUrlCookie: callbackUrl !== cookieValue ? callbackUrl : undefined,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9jYWxsYmFjay11cmwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sbUNBQW1DLG1DQUFtQztBQUM3RSxZQUFZLGlCQUFpQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXGNhbGxiYWNrLXVybC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEdldCBjYWxsYmFjayBVUkwgYmFzZWQgb24gcXVlcnkgcGFyYW0gLyBjb29raWUgKyB2YWxpZGF0aW9uLFxuICogYW5kIGFkZCBpdCB0byBgcmVxLm9wdGlvbnMuY2FsbGJhY2tVcmxgLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2FsbGJhY2tVcmwoeyBvcHRpb25zLCBwYXJhbVZhbHVlLCBjb29raWVWYWx1ZSwgfSkge1xuICAgIGNvbnN0IHsgdXJsLCBjYWxsYmFja3MgfSA9IG9wdGlvbnM7XG4gICAgbGV0IGNhbGxiYWNrVXJsID0gdXJsLm9yaWdpbjtcbiAgICBpZiAocGFyYW1WYWx1ZSkge1xuICAgICAgICAvLyBJZiBjYWxsYmFja1VybCBmb3JtIGZpZWxkIG9yIHF1ZXJ5IHBhcmFtZXRlciBpcyBwYXNzZWQgdHJ5IHRvIHVzZSBpdCBpZiBhbGxvd2VkXG4gICAgICAgIGNhbGxiYWNrVXJsID0gYXdhaXQgY2FsbGJhY2tzLnJlZGlyZWN0KHtcbiAgICAgICAgICAgIHVybDogcGFyYW1WYWx1ZSxcbiAgICAgICAgICAgIGJhc2VVcmw6IHVybC5vcmlnaW4sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb29raWVWYWx1ZSkge1xuICAgICAgICAvLyBJZiBubyBjYWxsYmFja1VybCBzcGVjaWZpZWQsIHRyeSB1c2luZyB0aGUgdmFsdWUgZnJvbSB0aGUgY29va2llIGlmIGFsbG93ZWRcbiAgICAgICAgY2FsbGJhY2tVcmwgPSBhd2FpdCBjYWxsYmFja3MucmVkaXJlY3Qoe1xuICAgICAgICAgICAgdXJsOiBjb29raWVWYWx1ZSxcbiAgICAgICAgICAgIGJhc2VVcmw6IHVybC5vcmlnaW4sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjYWxsYmFja1VybCxcbiAgICAgICAgLy8gU2F2ZSBjYWxsYmFjayBVUkwgaW4gYSBjb29raWUgc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBmb3Igc3Vic2VxdWVudCByZXF1ZXN0cyBpbiBzaWduaW4vc2lnbm91dC9jYWxsYmFjayBmbG93XG4gICAgICAgIGNhbGxiYWNrVXJsQ29va2llOiBjYWxsYmFja1VybCAhPT0gY29va2llVmFsdWUgPyBjYWxsYmFja1VybCA6IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/callback-url.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/callback-url.js":
/*!***********************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/callback-url.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCallbackUrl: () => (/* binding */ createCallbackUrl)\n/* harmony export */ });\n/**\n * Get callback URL based on query param / cookie + validation,\n * and add it to `req.options.callbackUrl`.\n */\nasync function createCallbackUrl({ options, paramValue, cookieValue, }) {\n    const { url, callbacks } = options;\n    let callbackUrl = url.origin;\n    if (paramValue) {\n        // If callbackUrl form field or query parameter is passed try to use it if allowed\n        callbackUrl = await callbacks.redirect({\n            url: paramValue,\n            baseUrl: url.origin,\n        });\n    }\n    else if (cookieValue) {\n        // If no callbackUrl specified, try using the value from the cookie if allowed\n        callbackUrl = await callbacks.redirect({\n            url: cookieValue,\n            baseUrl: url.origin,\n        });\n    }\n    return {\n        callbackUrl,\n        // Save callback URL in a cookie so that it can be used for subsequent requests in signin/signout/callback flow\n        callbackUrlCookie: callbackUrl !== cookieValue ? callbackUrl : undefined,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvY2FsbGJhY2stdXJsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLG1DQUFtQyxtQ0FBbUM7QUFDN0UsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxjYWxsYmFjay11cmwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHZXQgY2FsbGJhY2sgVVJMIGJhc2VkIG9uIHF1ZXJ5IHBhcmFtIC8gY29va2llICsgdmFsaWRhdGlvbixcbiAqIGFuZCBhZGQgaXQgdG8gYHJlcS5vcHRpb25zLmNhbGxiYWNrVXJsYC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNhbGxiYWNrVXJsKHsgb3B0aW9ucywgcGFyYW1WYWx1ZSwgY29va2llVmFsdWUsIH0pIHtcbiAgICBjb25zdCB7IHVybCwgY2FsbGJhY2tzIH0gPSBvcHRpb25zO1xuICAgIGxldCBjYWxsYmFja1VybCA9IHVybC5vcmlnaW47XG4gICAgaWYgKHBhcmFtVmFsdWUpIHtcbiAgICAgICAgLy8gSWYgY2FsbGJhY2tVcmwgZm9ybSBmaWVsZCBvciBxdWVyeSBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRyeSB0byB1c2UgaXQgaWYgYWxsb3dlZFxuICAgICAgICBjYWxsYmFja1VybCA9IGF3YWl0IGNhbGxiYWNrcy5yZWRpcmVjdCh7XG4gICAgICAgICAgICB1cmw6IHBhcmFtVmFsdWUsXG4gICAgICAgICAgICBiYXNlVXJsOiB1cmwub3JpZ2luLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29va2llVmFsdWUpIHtcbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2tVcmwgc3BlY2lmaWVkLCB0cnkgdXNpbmcgdGhlIHZhbHVlIGZyb20gdGhlIGNvb2tpZSBpZiBhbGxvd2VkXG4gICAgICAgIGNhbGxiYWNrVXJsID0gYXdhaXQgY2FsbGJhY2tzLnJlZGlyZWN0KHtcbiAgICAgICAgICAgIHVybDogY29va2llVmFsdWUsXG4gICAgICAgICAgICBiYXNlVXJsOiB1cmwub3JpZ2luLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FsbGJhY2tVcmwsXG4gICAgICAgIC8vIFNhdmUgY2FsbGJhY2sgVVJMIGluIGEgY29va2llIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgZm9yIHN1YnNlcXVlbnQgcmVxdWVzdHMgaW4gc2lnbmluL3NpZ25vdXQvY2FsbGJhY2sgZmxvd1xuICAgICAgICBjYWxsYmFja1VybENvb2tpZTogY2FsbGJhY2tVcmwgIT09IGNvb2tpZVZhbHVlID8gY2FsbGJhY2tVcmwgOiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/callback-url.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/cookie.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/cookie.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SessionStore: () => (/* binding */ SessionStore),\n/* harmony export */   defaultCookies: () => (/* binding */ defaultCookies)\n/* harmony export */ });\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SessionStore_instances, _SessionStore_chunks, _SessionStore_option, _SessionStore_logger, _SessionStore_chunk, _SessionStore_clean;\n// Uncomment to recalculate the estimated size\n// of an empty session cookie\n// import { serialize } from \"cookie\"\n// console.log(\n//   \"Cookie estimated to be \",\n//   serialize(`__Secure.authjs.session-token.0`, \"\", {\n//     expires: new Date(),\n//     httpOnly: true,\n//     maxAge: Number.MAX_SAFE_INTEGER,\n//     path: \"/\",\n//     sameSite: \"strict\",\n//     secure: true,\n//     domain: \"example.com\",\n//   }).length,\n//   \" bytes\"\n// )\nconst ALLOWED_COOKIE_SIZE = 4096;\n// Based on commented out section above\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 160;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n/**\n * Use secure cookies if the site uses HTTPS\n * This being conditional allows cookies to work non-HTTPS development URLs\n * Honour secure cookie option, which sets 'secure' and also adds '__Secure-'\n * prefix, but enable them by default if the site URL is HTTPS; but not for\n * non-HTTPS URLs like http://localhost which are used in development).\n * For more on prefixes see https://googlechrome.github.io/samples/cookie-prefixes/\n *\n * @TODO Review cookie settings (names, options)\n */\nfunction defaultCookies(useSecureCookies) {\n    const cookiePrefix = useSecureCookies ? \"__Secure-\" : \"\";\n    return {\n        // default cookie options\n        sessionToken: {\n            name: `${cookiePrefix}authjs.session-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        callbackUrl: {\n            name: `${cookiePrefix}authjs.callback-url`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        csrfToken: {\n            // Default to __Host- for CSRF token for additional protection if using useSecureCookies\n            // NB: The `__Host-` prefix is stricter than the `__Secure-` prefix.\n            name: `${useSecureCookies ? \"__Host-\" : \"\"}authjs.csrf-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        pkceCodeVerifier: {\n            name: `${cookiePrefix}authjs.pkce.code_verifier`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n        state: {\n            name: `${cookiePrefix}authjs.state`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n        nonce: {\n            name: `${cookiePrefix}authjs.nonce`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        webauthnChallenge: {\n            name: `${cookiePrefix}authjs.challenge`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n    };\n}\nclass SessionStore {\n    constructor(option, cookies, logger) {\n        _SessionStore_instances.add(this);\n        _SessionStore_chunks.set(this, {});\n        _SessionStore_option.set(this, void 0);\n        _SessionStore_logger.set(this, void 0);\n        __classPrivateFieldSet(this, _SessionStore_logger, logger, \"f\");\n        __classPrivateFieldSet(this, _SessionStore_option, option, \"f\");\n        if (!cookies)\n            return;\n        const { name: sessionCookiePrefix } = option;\n        for (const [name, value] of Object.entries(cookies)) {\n            if (!name.startsWith(sessionCookiePrefix) || !value)\n                continue;\n            __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[name] = value;\n        }\n    }\n    /**\n     * The JWT Session or database Session ID\n     * constructed from the cookie chunks.\n     */\n    get value() {\n        // Sort the chunks by their keys before joining\n        const sortedKeys = Object.keys(__classPrivateFieldGet(this, _SessionStore_chunks, \"f\")).sort((a, b) => {\n            const aSuffix = parseInt(a.split(\".\").pop() || \"0\");\n            const bSuffix = parseInt(b.split(\".\").pop() || \"0\");\n            return aSuffix - bSuffix;\n        });\n        // Use the sorted keys to join the chunks in the correct order\n        return sortedKeys.map((key) => __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[key]).join(\"\");\n    }\n    /**\n     * Given a cookie value, return new cookies, chunked, to fit the allowed cookie size.\n     * If the cookie has changed from chunked to unchunked or vice versa,\n     * it deletes the old cookies as well.\n     */\n    chunk(value, options) {\n        // Assume all cookies should be cleaned by default\n        const cookies = __classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_clean).call(this);\n        // Calculate new chunks\n        const chunked = __classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_chunk).call(this, {\n            name: __classPrivateFieldGet(this, _SessionStore_option, \"f\").name,\n            value,\n            options: { ...__classPrivateFieldGet(this, _SessionStore_option, \"f\").options, ...options },\n        });\n        // Update stored chunks / cookies\n        for (const chunk of chunked) {\n            cookies[chunk.name] = chunk;\n        }\n        return Object.values(cookies);\n    }\n    /** Returns a list of cookies that should be cleaned. */\n    clean() {\n        return Object.values(__classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_clean).call(this));\n    }\n}\n_SessionStore_chunks = new WeakMap(), _SessionStore_option = new WeakMap(), _SessionStore_logger = new WeakMap(), _SessionStore_instances = new WeakSet(), _SessionStore_chunk = function _SessionStore_chunk(cookie) {\n    const chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n    if (chunkCount === 1) {\n        __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[cookie.name] = cookie.value;\n        return [cookie];\n    }\n    const cookies = [];\n    for (let i = 0; i < chunkCount; i++) {\n        const name = `${cookie.name}.${i}`;\n        const value = cookie.value.substr(i * CHUNK_SIZE, CHUNK_SIZE);\n        cookies.push({ ...cookie, name, value });\n        __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[name] = value;\n    }\n    __classPrivateFieldGet(this, _SessionStore_logger, \"f\").debug(\"CHUNKING_SESSION_COOKIE\", {\n        message: `Session cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n        emptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n        valueSize: cookie.value.length,\n        chunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE),\n    });\n    return cookies;\n}, _SessionStore_clean = function _SessionStore_clean() {\n    const cleanedChunks = {};\n    for (const name in __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")) {\n        delete __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")?.[name];\n        cleanedChunks[name] = {\n            name,\n            value: \"\",\n            options: { ...__classPrivateFieldGet(this, _SessionStore_option, \"f\").options, maxAge: 0 },\n        };\n    }\n    return cleanedChunks;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9jb29raWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4QkFBOEIsU0FBSSxJQUFJLFNBQUk7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixTQUFJLElBQUksU0FBSTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixhQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtDQUFrQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLHFCQUFxQixhQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDRCQUE0QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0ZBQWdGO0FBQ3ZHLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDLHdCQUF3QixZQUFZLEdBQUcsRUFBRTtBQUN6QztBQUNBLHVCQUF1Qix3QkFBd0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHFCQUFxQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtFQUErRTtBQUN0RztBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxjb29raWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY2xhc3NQcml2YXRlRmllbGRTZXQgPSAodGhpcyAmJiB0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xufTtcbnZhciBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0ID0gKHRoaXMgJiYgdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KSB8fCBmdW5jdGlvbiAocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XG59O1xudmFyIF9TZXNzaW9uU3RvcmVfaW5zdGFuY2VzLCBfU2Vzc2lvblN0b3JlX2NodW5rcywgX1Nlc3Npb25TdG9yZV9vcHRpb24sIF9TZXNzaW9uU3RvcmVfbG9nZ2VyLCBfU2Vzc2lvblN0b3JlX2NodW5rLCBfU2Vzc2lvblN0b3JlX2NsZWFuO1xuLy8gVW5jb21tZW50IHRvIHJlY2FsY3VsYXRlIHRoZSBlc3RpbWF0ZWQgc2l6ZVxuLy8gb2YgYW4gZW1wdHkgc2Vzc2lvbiBjb29raWVcbi8vIGltcG9ydCB7IHNlcmlhbGl6ZSB9IGZyb20gXCJjb29raWVcIlxuLy8gY29uc29sZS5sb2coXG4vLyAgIFwiQ29va2llIGVzdGltYXRlZCB0byBiZSBcIixcbi8vICAgc2VyaWFsaXplKGBfX1NlY3VyZS5hdXRoanMuc2Vzc2lvbi10b2tlbi4wYCwgXCJcIiwge1xuLy8gICAgIGV4cGlyZXM6IG5ldyBEYXRlKCksXG4vLyAgICAgaHR0cE9ubHk6IHRydWUsXG4vLyAgICAgbWF4QWdlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbi8vICAgICBwYXRoOiBcIi9cIixcbi8vICAgICBzYW1lU2l0ZTogXCJzdHJpY3RcIixcbi8vICAgICBzZWN1cmU6IHRydWUsXG4vLyAgICAgZG9tYWluOiBcImV4YW1wbGUuY29tXCIsXG4vLyAgIH0pLmxlbmd0aCxcbi8vICAgXCIgYnl0ZXNcIlxuLy8gKVxuY29uc3QgQUxMT1dFRF9DT09LSUVfU0laRSA9IDQwOTY7XG4vLyBCYXNlZCBvbiBjb21tZW50ZWQgb3V0IHNlY3Rpb24gYWJvdmVcbmNvbnN0IEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSA9IDE2MDtcbmNvbnN0IENIVU5LX1NJWkUgPSBBTExPV0VEX0NPT0tJRV9TSVpFIC0gRVNUSU1BVEVEX0VNUFRZX0NPT0tJRV9TSVpFO1xuLyoqXG4gKiBVc2Ugc2VjdXJlIGNvb2tpZXMgaWYgdGhlIHNpdGUgdXNlcyBIVFRQU1xuICogVGhpcyBiZWluZyBjb25kaXRpb25hbCBhbGxvd3MgY29va2llcyB0byB3b3JrIG5vbi1IVFRQUyBkZXZlbG9wbWVudCBVUkxzXG4gKiBIb25vdXIgc2VjdXJlIGNvb2tpZSBvcHRpb24sIHdoaWNoIHNldHMgJ3NlY3VyZScgYW5kIGFsc28gYWRkcyAnX19TZWN1cmUtJ1xuICogcHJlZml4LCBidXQgZW5hYmxlIHRoZW0gYnkgZGVmYXVsdCBpZiB0aGUgc2l0ZSBVUkwgaXMgSFRUUFM7IGJ1dCBub3QgZm9yXG4gKiBub24tSFRUUFMgVVJMcyBsaWtlIGh0dHA6Ly9sb2NhbGhvc3Qgd2hpY2ggYXJlIHVzZWQgaW4gZGV2ZWxvcG1lbnQpLlxuICogRm9yIG1vcmUgb24gcHJlZml4ZXMgc2VlIGh0dHBzOi8vZ29vZ2xlY2hyb21lLmdpdGh1Yi5pby9zYW1wbGVzL2Nvb2tpZS1wcmVmaXhlcy9cbiAqXG4gKiBAVE9ETyBSZXZpZXcgY29va2llIHNldHRpbmdzIChuYW1lcywgb3B0aW9ucylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRDb29raWVzKHVzZVNlY3VyZUNvb2tpZXMpIHtcbiAgICBjb25zdCBjb29raWVQcmVmaXggPSB1c2VTZWN1cmVDb29raWVzID8gXCJfX1NlY3VyZS1cIiA6IFwiXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLy8gZGVmYXVsdCBjb29raWUgb3B0aW9uc1xuICAgICAgICBzZXNzaW9uVG9rZW46IHtcbiAgICAgICAgICAgIG5hbWU6IGAke2Nvb2tpZVByZWZpeH1hdXRoanMuc2Vzc2lvbi10b2tlbmAsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgICAgICAgICAgc2VjdXJlOiB1c2VTZWN1cmVDb29raWVzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2tVcmw6IHtcbiAgICAgICAgICAgIG5hbWU6IGAke2Nvb2tpZVByZWZpeH1hdXRoanMuY2FsbGJhY2stdXJsYCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzYW1lU2l0ZTogXCJsYXhcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBcIi9cIixcbiAgICAgICAgICAgICAgICBzZWN1cmU6IHVzZVNlY3VyZUNvb2tpZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBjc3JmVG9rZW46IHtcbiAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gX19Ib3N0LSBmb3IgQ1NSRiB0b2tlbiBmb3IgYWRkaXRpb25hbCBwcm90ZWN0aW9uIGlmIHVzaW5nIHVzZVNlY3VyZUNvb2tpZXNcbiAgICAgICAgICAgIC8vIE5COiBUaGUgYF9fSG9zdC1gIHByZWZpeCBpcyBzdHJpY3RlciB0aGFuIHRoZSBgX19TZWN1cmUtYCBwcmVmaXguXG4gICAgICAgICAgICBuYW1lOiBgJHt1c2VTZWN1cmVDb29raWVzID8gXCJfX0hvc3QtXCIgOiBcIlwifWF1dGhqcy5jc3JmLXRva2VuYCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzYW1lU2l0ZTogXCJsYXhcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBcIi9cIixcbiAgICAgICAgICAgICAgICBzZWN1cmU6IHVzZVNlY3VyZUNvb2tpZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBwa2NlQ29kZVZlcmlmaWVyOiB7XG4gICAgICAgICAgICBuYW1lOiBgJHtjb29raWVQcmVmaXh9YXV0aGpzLnBrY2UuY29kZV92ZXJpZmllcmAsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgICAgICAgICAgc2VjdXJlOiB1c2VTZWN1cmVDb29raWVzLFxuICAgICAgICAgICAgICAgIG1heEFnZTogNjAgKiAxNSwgLy8gMTUgbWludXRlcyBpbiBzZWNvbmRzXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBzdGF0ZToge1xuICAgICAgICAgICAgbmFtZTogYCR7Y29va2llUHJlZml4fWF1dGhqcy5zdGF0ZWAsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgICAgICAgICAgc2VjdXJlOiB1c2VTZWN1cmVDb29raWVzLFxuICAgICAgICAgICAgICAgIG1heEFnZTogNjAgKiAxNSwgLy8gMTUgbWludXRlcyBpbiBzZWNvbmRzXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBub25jZToge1xuICAgICAgICAgICAgbmFtZTogYCR7Y29va2llUHJlZml4fWF1dGhqcy5ub25jZWAsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgICAgICAgICAgc2VjdXJlOiB1c2VTZWN1cmVDb29raWVzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgd2ViYXV0aG5DaGFsbGVuZ2U6IHtcbiAgICAgICAgICAgIG5hbWU6IGAke2Nvb2tpZVByZWZpeH1hdXRoanMuY2hhbGxlbmdlYCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzYW1lU2l0ZTogXCJsYXhcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBcIi9cIixcbiAgICAgICAgICAgICAgICBzZWN1cmU6IHVzZVNlY3VyZUNvb2tpZXMsXG4gICAgICAgICAgICAgICAgbWF4QWdlOiA2MCAqIDE1LCAvLyAxNSBtaW51dGVzIGluIHNlY29uZHNcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBjbGFzcyBTZXNzaW9uU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbiwgY29va2llcywgbG9nZ2VyKSB7XG4gICAgICAgIF9TZXNzaW9uU3RvcmVfaW5zdGFuY2VzLmFkZCh0aGlzKTtcbiAgICAgICAgX1Nlc3Npb25TdG9yZV9jaHVua3Muc2V0KHRoaXMsIHt9KTtcbiAgICAgICAgX1Nlc3Npb25TdG9yZV9vcHRpb24uc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9TZXNzaW9uU3RvcmVfbG9nZ2VyLnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfbG9nZ2VyLCBsb2dnZXIsIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfU2Vzc2lvblN0b3JlX29wdGlvbiwgb3B0aW9uLCBcImZcIik7XG4gICAgICAgIGlmICghY29va2llcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgeyBuYW1lOiBzZXNzaW9uQ29va2llUHJlZml4IH0gPSBvcHRpb247XG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb29raWVzKSkge1xuICAgICAgICAgICAgaWYgKCFuYW1lLnN0YXJ0c1dpdGgoc2Vzc2lvbkNvb2tpZVByZWZpeCkgfHwgIXZhbHVlKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfU2Vzc2lvblN0b3JlX2NodW5rcywgXCJmXCIpW25hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIEpXVCBTZXNzaW9uIG9yIGRhdGFiYXNlIFNlc3Npb24gSURcbiAgICAgKiBjb25zdHJ1Y3RlZCBmcm9tIHRoZSBjb29raWUgY2h1bmtzLlxuICAgICAqL1xuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgLy8gU29ydCB0aGUgY2h1bmtzIGJ5IHRoZWlyIGtleXMgYmVmb3JlIGpvaW5pbmdcbiAgICAgICAgY29uc3Qgc29ydGVkS2V5cyA9IE9iamVjdC5rZXlzKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9jaHVua3MsIFwiZlwiKSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYVN1ZmZpeCA9IHBhcnNlSW50KGEuc3BsaXQoXCIuXCIpLnBvcCgpIHx8IFwiMFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGJTdWZmaXggPSBwYXJzZUludChiLnNwbGl0KFwiLlwiKS5wb3AoKSB8fCBcIjBcIik7XG4gICAgICAgICAgICByZXR1cm4gYVN1ZmZpeCAtIGJTdWZmaXg7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBVc2UgdGhlIHNvcnRlZCBrZXlzIHRvIGpvaW4gdGhlIGNodW5rcyBpbiB0aGUgY29ycmVjdCBvcmRlclxuICAgICAgICByZXR1cm4gc29ydGVkS2V5cy5tYXAoKGtleSkgPT4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfU2Vzc2lvblN0b3JlX2NodW5rcywgXCJmXCIpW2tleV0pLmpvaW4oXCJcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgY29va2llIHZhbHVlLCByZXR1cm4gbmV3IGNvb2tpZXMsIGNodW5rZWQsIHRvIGZpdCB0aGUgYWxsb3dlZCBjb29raWUgc2l6ZS5cbiAgICAgKiBJZiB0aGUgY29va2llIGhhcyBjaGFuZ2VkIGZyb20gY2h1bmtlZCB0byB1bmNodW5rZWQgb3IgdmljZSB2ZXJzYSxcbiAgICAgKiBpdCBkZWxldGVzIHRoZSBvbGQgY29va2llcyBhcyB3ZWxsLlxuICAgICAqL1xuICAgIGNodW5rKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIEFzc3VtZSBhbGwgY29va2llcyBzaG91bGQgYmUgY2xlYW5lZCBieSBkZWZhdWx0XG4gICAgICAgIGNvbnN0IGNvb2tpZXMgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfaW5zdGFuY2VzLCBcIm1cIiwgX1Nlc3Npb25TdG9yZV9jbGVhbikuY2FsbCh0aGlzKTtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIG5ldyBjaHVua3NcbiAgICAgICAgY29uc3QgY2h1bmtlZCA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9pbnN0YW5jZXMsIFwibVwiLCBfU2Vzc2lvblN0b3JlX2NodW5rKS5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIG5hbWU6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9vcHRpb24sIFwiZlwiKS5uYW1lLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBvcHRpb25zOiB7IC4uLl9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9vcHRpb24sIFwiZlwiKS5vcHRpb25zLCAuLi5vcHRpb25zIH0sXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBVcGRhdGUgc3RvcmVkIGNodW5rcyAvIGNvb2tpZXNcbiAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua2VkKSB7XG4gICAgICAgICAgICBjb29raWVzW2NodW5rLm5hbWVdID0gY2h1bms7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoY29va2llcyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbGlzdCBvZiBjb29raWVzIHRoYXQgc2hvdWxkIGJlIGNsZWFuZWQuICovXG4gICAgY2xlYW4oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9pbnN0YW5jZXMsIFwibVwiLCBfU2Vzc2lvblN0b3JlX2NsZWFuKS5jYWxsKHRoaXMpKTtcbiAgICB9XG59XG5fU2Vzc2lvblN0b3JlX2NodW5rcyA9IG5ldyBXZWFrTWFwKCksIF9TZXNzaW9uU3RvcmVfb3B0aW9uID0gbmV3IFdlYWtNYXAoKSwgX1Nlc3Npb25TdG9yZV9sb2dnZXIgPSBuZXcgV2Vha01hcCgpLCBfU2Vzc2lvblN0b3JlX2luc3RhbmNlcyA9IG5ldyBXZWFrU2V0KCksIF9TZXNzaW9uU3RvcmVfY2h1bmsgPSBmdW5jdGlvbiBfU2Vzc2lvblN0b3JlX2NodW5rKGNvb2tpZSkge1xuICAgIGNvbnN0IGNodW5rQ291bnQgPSBNYXRoLmNlaWwoY29va2llLnZhbHVlLmxlbmd0aCAvIENIVU5LX1NJWkUpO1xuICAgIGlmIChjaHVua0NvdW50ID09PSAxKSB7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9jaHVua3MsIFwiZlwiKVtjb29raWUubmFtZV0gPSBjb29raWUudmFsdWU7XG4gICAgICAgIHJldHVybiBbY29va2llXTtcbiAgICB9XG4gICAgY29uc3QgY29va2llcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bmtDb3VudDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBgJHtjb29raWUubmFtZX0uJHtpfWA7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gY29va2llLnZhbHVlLnN1YnN0cihpICogQ0hVTktfU0laRSwgQ0hVTktfU0laRSk7XG4gICAgICAgIGNvb2tpZXMucHVzaCh7IC4uLmNvb2tpZSwgbmFtZSwgdmFsdWUgfSk7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9jaHVua3MsIFwiZlwiKVtuYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfbG9nZ2VyLCBcImZcIikuZGVidWcoXCJDSFVOS0lOR19TRVNTSU9OX0NPT0tJRVwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IGBTZXNzaW9uIGNvb2tpZSBleGNlZWRzIGFsbG93ZWQgJHtBTExPV0VEX0NPT0tJRV9TSVpFfSBieXRlcy5gLFxuICAgICAgICBlbXB0eUNvb2tpZVNpemU6IEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSxcbiAgICAgICAgdmFsdWVTaXplOiBjb29raWUudmFsdWUubGVuZ3RoLFxuICAgICAgICBjaHVua3M6IGNvb2tpZXMubWFwKChjKSA9PiBjLnZhbHVlLmxlbmd0aCArIEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSksXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvb2tpZXM7XG59LCBfU2Vzc2lvblN0b3JlX2NsZWFuID0gZnVuY3Rpb24gX1Nlc3Npb25TdG9yZV9jbGVhbigpIHtcbiAgICBjb25zdCBjbGVhbmVkQ2h1bmtzID0ge307XG4gICAgZm9yIChjb25zdCBuYW1lIGluIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9jaHVua3MsIFwiZlwiKSkge1xuICAgICAgICBkZWxldGUgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfU2Vzc2lvblN0b3JlX2NodW5rcywgXCJmXCIpPy5bbmFtZV07XG4gICAgICAgIGNsZWFuZWRDaHVua3NbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgICAgICBvcHRpb25zOiB7IC4uLl9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9vcHRpb24sIFwiZlwiKS5vcHRpb25zLCBtYXhBZ2U6IDAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGNsZWFuZWRDaHVua3M7XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/cookie.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/cookie.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/cookie.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SessionStore: () => (/* binding */ SessionStore),\n/* harmony export */   defaultCookies: () => (/* binding */ defaultCookies)\n/* harmony export */ });\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SessionStore_instances, _SessionStore_chunks, _SessionStore_option, _SessionStore_logger, _SessionStore_chunk, _SessionStore_clean;\n// Uncomment to recalculate the estimated size\n// of an empty session cookie\n// import { serialize } from \"cookie\"\n// console.log(\n//   \"Cookie estimated to be \",\n//   serialize(`__Secure.authjs.session-token.0`, \"\", {\n//     expires: new Date(),\n//     httpOnly: true,\n//     maxAge: Number.MAX_SAFE_INTEGER,\n//     path: \"/\",\n//     sameSite: \"strict\",\n//     secure: true,\n//     domain: \"example.com\",\n//   }).length,\n//   \" bytes\"\n// )\nconst ALLOWED_COOKIE_SIZE = 4096;\n// Based on commented out section above\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 160;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n/**\n * Use secure cookies if the site uses HTTPS\n * This being conditional allows cookies to work non-HTTPS development URLs\n * Honour secure cookie option, which sets 'secure' and also adds '__Secure-'\n * prefix, but enable them by default if the site URL is HTTPS; but not for\n * non-HTTPS URLs like http://localhost which are used in development).\n * For more on prefixes see https://googlechrome.github.io/samples/cookie-prefixes/\n *\n * @TODO Review cookie settings (names, options)\n */\nfunction defaultCookies(useSecureCookies) {\n    const cookiePrefix = useSecureCookies ? \"__Secure-\" : \"\";\n    return {\n        // default cookie options\n        sessionToken: {\n            name: `${cookiePrefix}authjs.session-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        callbackUrl: {\n            name: `${cookiePrefix}authjs.callback-url`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        csrfToken: {\n            // Default to __Host- for CSRF token for additional protection if using useSecureCookies\n            // NB: The `__Host-` prefix is stricter than the `__Secure-` prefix.\n            name: `${useSecureCookies ? \"__Host-\" : \"\"}authjs.csrf-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        pkceCodeVerifier: {\n            name: `${cookiePrefix}authjs.pkce.code_verifier`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n        state: {\n            name: `${cookiePrefix}authjs.state`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n        nonce: {\n            name: `${cookiePrefix}authjs.nonce`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        webauthnChallenge: {\n            name: `${cookiePrefix}authjs.challenge`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n    };\n}\nclass SessionStore {\n    constructor(option, cookies, logger) {\n        _SessionStore_instances.add(this);\n        _SessionStore_chunks.set(this, {});\n        _SessionStore_option.set(this, void 0);\n        _SessionStore_logger.set(this, void 0);\n        __classPrivateFieldSet(this, _SessionStore_logger, logger, \"f\");\n        __classPrivateFieldSet(this, _SessionStore_option, option, \"f\");\n        if (!cookies)\n            return;\n        const { name: sessionCookiePrefix } = option;\n        for (const [name, value] of Object.entries(cookies)) {\n            if (!name.startsWith(sessionCookiePrefix) || !value)\n                continue;\n            __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[name] = value;\n        }\n    }\n    /**\n     * The JWT Session or database Session ID\n     * constructed from the cookie chunks.\n     */\n    get value() {\n        // Sort the chunks by their keys before joining\n        const sortedKeys = Object.keys(__classPrivateFieldGet(this, _SessionStore_chunks, \"f\")).sort((a, b) => {\n            const aSuffix = parseInt(a.split(\".\").pop() || \"0\");\n            const bSuffix = parseInt(b.split(\".\").pop() || \"0\");\n            return aSuffix - bSuffix;\n        });\n        // Use the sorted keys to join the chunks in the correct order\n        return sortedKeys.map((key) => __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[key]).join(\"\");\n    }\n    /**\n     * Given a cookie value, return new cookies, chunked, to fit the allowed cookie size.\n     * If the cookie has changed from chunked to unchunked or vice versa,\n     * it deletes the old cookies as well.\n     */\n    chunk(value, options) {\n        // Assume all cookies should be cleaned by default\n        const cookies = __classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_clean).call(this);\n        // Calculate new chunks\n        const chunked = __classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_chunk).call(this, {\n            name: __classPrivateFieldGet(this, _SessionStore_option, \"f\").name,\n            value,\n            options: { ...__classPrivateFieldGet(this, _SessionStore_option, \"f\").options, ...options },\n        });\n        // Update stored chunks / cookies\n        for (const chunk of chunked) {\n            cookies[chunk.name] = chunk;\n        }\n        return Object.values(cookies);\n    }\n    /** Returns a list of cookies that should be cleaned. */\n    clean() {\n        return Object.values(__classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_clean).call(this));\n    }\n}\n_SessionStore_chunks = new WeakMap(), _SessionStore_option = new WeakMap(), _SessionStore_logger = new WeakMap(), _SessionStore_instances = new WeakSet(), _SessionStore_chunk = function _SessionStore_chunk(cookie) {\n    const chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n    if (chunkCount === 1) {\n        __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[cookie.name] = cookie.value;\n        return [cookie];\n    }\n    const cookies = [];\n    for (let i = 0; i < chunkCount; i++) {\n        const name = `${cookie.name}.${i}`;\n        const value = cookie.value.substr(i * CHUNK_SIZE, CHUNK_SIZE);\n        cookies.push({ ...cookie, name, value });\n        __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[name] = value;\n    }\n    __classPrivateFieldGet(this, _SessionStore_logger, \"f\").debug(\"CHUNKING_SESSION_COOKIE\", {\n        message: `Session cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n        emptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n        valueSize: cookie.value.length,\n        chunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE),\n    });\n    return cookies;\n}, _SessionStore_clean = function _SessionStore_clean() {\n    const cleanedChunks = {};\n    for (const name in __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")) {\n        delete __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")?.[name];\n        cleanedChunks[name] = {\n            name,\n            value: \"\",\n            options: { ...__classPrivateFieldGet(this, _SessionStore_option, \"f\").options, maxAge: 0 },\n        };\n    }\n    return cleanedChunks;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvY29va2llLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsOEJBQThCLFNBQUksSUFBSSxTQUFJO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsU0FBSSxJQUFJLFNBQUk7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLHFCQUFxQixhQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixrQ0FBa0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLHFCQUFxQixhQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw0QkFBNEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdGQUFnRjtBQUN2RyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQyx3QkFBd0IsWUFBWSxHQUFHLEVBQUU7QUFDekM7QUFDQSx1QkFBdUIsd0JBQXdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxxQkFBcUI7QUFDeEU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrRUFBK0U7QUFDdEc7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFx1dGlsc1xcY29va2llLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0ID0gKHRoaXMgJiYgdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KSB8fCBmdW5jdGlvbiAocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcbn07XG52YXIgX19jbGFzc1ByaXZhdGVGaWVsZEdldCA9ICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldCkgfHwgZnVuY3Rpb24gKHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xufTtcbnZhciBfU2Vzc2lvblN0b3JlX2luc3RhbmNlcywgX1Nlc3Npb25TdG9yZV9jaHVua3MsIF9TZXNzaW9uU3RvcmVfb3B0aW9uLCBfU2Vzc2lvblN0b3JlX2xvZ2dlciwgX1Nlc3Npb25TdG9yZV9jaHVuaywgX1Nlc3Npb25TdG9yZV9jbGVhbjtcbi8vIFVuY29tbWVudCB0byByZWNhbGN1bGF0ZSB0aGUgZXN0aW1hdGVkIHNpemVcbi8vIG9mIGFuIGVtcHR5IHNlc3Npb24gY29va2llXG4vLyBpbXBvcnQgeyBzZXJpYWxpemUgfSBmcm9tIFwiY29va2llXCJcbi8vIGNvbnNvbGUubG9nKFxuLy8gICBcIkNvb2tpZSBlc3RpbWF0ZWQgdG8gYmUgXCIsXG4vLyAgIHNlcmlhbGl6ZShgX19TZWN1cmUuYXV0aGpzLnNlc3Npb24tdG9rZW4uMGAsIFwiXCIsIHtcbi8vICAgICBleHBpcmVzOiBuZXcgRGF0ZSgpLFxuLy8gICAgIGh0dHBPbmx5OiB0cnVlLFxuLy8gICAgIG1heEFnZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4vLyAgICAgcGF0aDogXCIvXCIsXG4vLyAgICAgc2FtZVNpdGU6IFwic3RyaWN0XCIsXG4vLyAgICAgc2VjdXJlOiB0cnVlLFxuLy8gICAgIGRvbWFpbjogXCJleGFtcGxlLmNvbVwiLFxuLy8gICB9KS5sZW5ndGgsXG4vLyAgIFwiIGJ5dGVzXCJcbi8vIClcbmNvbnN0IEFMTE9XRURfQ09PS0lFX1NJWkUgPSA0MDk2O1xuLy8gQmFzZWQgb24gY29tbWVudGVkIG91dCBzZWN0aW9uIGFib3ZlXG5jb25zdCBFU1RJTUFURURfRU1QVFlfQ09PS0lFX1NJWkUgPSAxNjA7XG5jb25zdCBDSFVOS19TSVpFID0gQUxMT1dFRF9DT09LSUVfU0laRSAtIEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRTtcbi8qKlxuICogVXNlIHNlY3VyZSBjb29raWVzIGlmIHRoZSBzaXRlIHVzZXMgSFRUUFNcbiAqIFRoaXMgYmVpbmcgY29uZGl0aW9uYWwgYWxsb3dzIGNvb2tpZXMgdG8gd29yayBub24tSFRUUFMgZGV2ZWxvcG1lbnQgVVJMc1xuICogSG9ub3VyIHNlY3VyZSBjb29raWUgb3B0aW9uLCB3aGljaCBzZXRzICdzZWN1cmUnIGFuZCBhbHNvIGFkZHMgJ19fU2VjdXJlLSdcbiAqIHByZWZpeCwgYnV0IGVuYWJsZSB0aGVtIGJ5IGRlZmF1bHQgaWYgdGhlIHNpdGUgVVJMIGlzIEhUVFBTOyBidXQgbm90IGZvclxuICogbm9uLUhUVFBTIFVSTHMgbGlrZSBodHRwOi8vbG9jYWxob3N0IHdoaWNoIGFyZSB1c2VkIGluIGRldmVsb3BtZW50KS5cbiAqIEZvciBtb3JlIG9uIHByZWZpeGVzIHNlZSBodHRwczovL2dvb2dsZWNocm9tZS5naXRodWIuaW8vc2FtcGxlcy9jb29raWUtcHJlZml4ZXMvXG4gKlxuICogQFRPRE8gUmV2aWV3IGNvb2tpZSBzZXR0aW5ncyAobmFtZXMsIG9wdGlvbnMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0Q29va2llcyh1c2VTZWN1cmVDb29raWVzKSB7XG4gICAgY29uc3QgY29va2llUHJlZml4ID0gdXNlU2VjdXJlQ29va2llcyA/IFwiX19TZWN1cmUtXCIgOiBcIlwiO1xuICAgIHJldHVybiB7XG4gICAgICAgIC8vIGRlZmF1bHQgY29va2llIG9wdGlvbnNcbiAgICAgICAgc2Vzc2lvblRva2VuOiB7XG4gICAgICAgICAgICBuYW1lOiBgJHtjb29raWVQcmVmaXh9YXV0aGpzLnNlc3Npb24tdG9rZW5gLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHNhbWVTaXRlOiBcImxheFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IFwiL1wiLFxuICAgICAgICAgICAgICAgIHNlY3VyZTogdXNlU2VjdXJlQ29va2llcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGxiYWNrVXJsOiB7XG4gICAgICAgICAgICBuYW1lOiBgJHtjb29raWVQcmVmaXh9YXV0aGpzLmNhbGxiYWNrLXVybGAsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgICAgICAgICAgc2VjdXJlOiB1c2VTZWN1cmVDb29raWVzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY3NyZlRva2VuOiB7XG4gICAgICAgICAgICAvLyBEZWZhdWx0IHRvIF9fSG9zdC0gZm9yIENTUkYgdG9rZW4gZm9yIGFkZGl0aW9uYWwgcHJvdGVjdGlvbiBpZiB1c2luZyB1c2VTZWN1cmVDb29raWVzXG4gICAgICAgICAgICAvLyBOQjogVGhlIGBfX0hvc3QtYCBwcmVmaXggaXMgc3RyaWN0ZXIgdGhhbiB0aGUgYF9fU2VjdXJlLWAgcHJlZml4LlxuICAgICAgICAgICAgbmFtZTogYCR7dXNlU2VjdXJlQ29va2llcyA/IFwiX19Ib3N0LVwiIDogXCJcIn1hdXRoanMuY3NyZi10b2tlbmAsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgICAgICAgICAgc2VjdXJlOiB1c2VTZWN1cmVDb29raWVzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcGtjZUNvZGVWZXJpZmllcjoge1xuICAgICAgICAgICAgbmFtZTogYCR7Y29va2llUHJlZml4fWF1dGhqcy5wa2NlLmNvZGVfdmVyaWZpZXJgLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHNhbWVTaXRlOiBcImxheFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IFwiL1wiLFxuICAgICAgICAgICAgICAgIHNlY3VyZTogdXNlU2VjdXJlQ29va2llcyxcbiAgICAgICAgICAgICAgICBtYXhBZ2U6IDYwICogMTUsIC8vIDE1IG1pbnV0ZXMgaW4gc2Vjb25kc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhdGU6IHtcbiAgICAgICAgICAgIG5hbWU6IGAke2Nvb2tpZVByZWZpeH1hdXRoanMuc3RhdGVgLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHNhbWVTaXRlOiBcImxheFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IFwiL1wiLFxuICAgICAgICAgICAgICAgIHNlY3VyZTogdXNlU2VjdXJlQ29va2llcyxcbiAgICAgICAgICAgICAgICBtYXhBZ2U6IDYwICogMTUsIC8vIDE1IG1pbnV0ZXMgaW4gc2Vjb25kc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbm9uY2U6IHtcbiAgICAgICAgICAgIG5hbWU6IGAke2Nvb2tpZVByZWZpeH1hdXRoanMubm9uY2VgLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHNhbWVTaXRlOiBcImxheFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IFwiL1wiLFxuICAgICAgICAgICAgICAgIHNlY3VyZTogdXNlU2VjdXJlQ29va2llcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHdlYmF1dGhuQ2hhbGxlbmdlOiB7XG4gICAgICAgICAgICBuYW1lOiBgJHtjb29raWVQcmVmaXh9YXV0aGpzLmNoYWxsZW5nZWAsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgICAgICAgICAgc2VjdXJlOiB1c2VTZWN1cmVDb29raWVzLFxuICAgICAgICAgICAgICAgIG1heEFnZTogNjAgKiAxNSwgLy8gMTUgbWludXRlcyBpbiBzZWNvbmRzXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgY2xhc3MgU2Vzc2lvblN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb24sIGNvb2tpZXMsIGxvZ2dlcikge1xuICAgICAgICBfU2Vzc2lvblN0b3JlX2luc3RhbmNlcy5hZGQodGhpcyk7XG4gICAgICAgIF9TZXNzaW9uU3RvcmVfY2h1bmtzLnNldCh0aGlzLCB7fSk7XG4gICAgICAgIF9TZXNzaW9uU3RvcmVfb3B0aW9uLnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfU2Vzc2lvblN0b3JlX2xvZ2dlci5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfU2Vzc2lvblN0b3JlX2xvZ2dlciwgbG9nZ2VyLCBcImZcIik7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX1Nlc3Npb25TdG9yZV9vcHRpb24sIG9wdGlvbiwgXCJmXCIpO1xuICAgICAgICBpZiAoIWNvb2tpZXMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgbmFtZTogc2Vzc2lvbkNvb2tpZVByZWZpeCB9ID0gb3B0aW9uO1xuICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29va2llcykpIHtcbiAgICAgICAgICAgIGlmICghbmFtZS5zdGFydHNXaXRoKHNlc3Npb25Db29raWVQcmVmaXgpIHx8ICF2YWx1ZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9jaHVua3MsIFwiZlwiKVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBKV1QgU2Vzc2lvbiBvciBkYXRhYmFzZSBTZXNzaW9uIElEXG4gICAgICogY29uc3RydWN0ZWQgZnJvbSB0aGUgY29va2llIGNodW5rcy5cbiAgICAgKi9cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIC8vIFNvcnQgdGhlIGNodW5rcyBieSB0aGVpciBrZXlzIGJlZm9yZSBqb2luaW5nXG4gICAgICAgIGNvbnN0IHNvcnRlZEtleXMgPSBPYmplY3Qua2V5cyhfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfY2h1bmtzLCBcImZcIikpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFTdWZmaXggPSBwYXJzZUludChhLnNwbGl0KFwiLlwiKS5wb3AoKSB8fCBcIjBcIik7XG4gICAgICAgICAgICBjb25zdCBiU3VmZml4ID0gcGFyc2VJbnQoYi5zcGxpdChcIi5cIikucG9wKCkgfHwgXCIwXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGFTdWZmaXggLSBiU3VmZml4O1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gVXNlIHRoZSBzb3J0ZWQga2V5cyB0byBqb2luIHRoZSBjaHVua3MgaW4gdGhlIGNvcnJlY3Qgb3JkZXJcbiAgICAgICAgcmV0dXJuIHNvcnRlZEtleXMubWFwKChrZXkpID0+IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9jaHVua3MsIFwiZlwiKVtrZXldKS5qb2luKFwiXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGNvb2tpZSB2YWx1ZSwgcmV0dXJuIG5ldyBjb29raWVzLCBjaHVua2VkLCB0byBmaXQgdGhlIGFsbG93ZWQgY29va2llIHNpemUuXG4gICAgICogSWYgdGhlIGNvb2tpZSBoYXMgY2hhbmdlZCBmcm9tIGNodW5rZWQgdG8gdW5jaHVua2VkIG9yIHZpY2UgdmVyc2EsXG4gICAgICogaXQgZGVsZXRlcyB0aGUgb2xkIGNvb2tpZXMgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBjaHVuayh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICAvLyBBc3N1bWUgYWxsIGNvb2tpZXMgc2hvdWxkIGJlIGNsZWFuZWQgYnkgZGVmYXVsdFxuICAgICAgICBjb25zdCBjb29raWVzID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfU2Vzc2lvblN0b3JlX2luc3RhbmNlcywgXCJtXCIsIF9TZXNzaW9uU3RvcmVfY2xlYW4pLmNhbGwodGhpcyk7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBuZXcgY2h1bmtzXG4gICAgICAgIGNvbnN0IGNodW5rZWQgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfaW5zdGFuY2VzLCBcIm1cIiwgX1Nlc3Npb25TdG9yZV9jaHVuaykuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBuYW1lOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfb3B0aW9uLCBcImZcIikubmFtZSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgb3B0aW9uczogeyAuLi5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfb3B0aW9uLCBcImZcIikub3B0aW9ucywgLi4ub3B0aW9ucyB9LFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gVXBkYXRlIHN0b3JlZCBjaHVua3MgLyBjb29raWVzXG4gICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtlZCkge1xuICAgICAgICAgICAgY29va2llc1tjaHVuay5uYW1lXSA9IGNodW5rO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKGNvb2tpZXMpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIGxpc3Qgb2YgY29va2llcyB0aGF0IHNob3VsZCBiZSBjbGVhbmVkLiAqL1xuICAgIGNsZWFuKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfaW5zdGFuY2VzLCBcIm1cIiwgX1Nlc3Npb25TdG9yZV9jbGVhbikuY2FsbCh0aGlzKSk7XG4gICAgfVxufVxuX1Nlc3Npb25TdG9yZV9jaHVua3MgPSBuZXcgV2Vha01hcCgpLCBfU2Vzc2lvblN0b3JlX29wdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9TZXNzaW9uU3RvcmVfbG9nZ2VyID0gbmV3IFdlYWtNYXAoKSwgX1Nlc3Npb25TdG9yZV9pbnN0YW5jZXMgPSBuZXcgV2Vha1NldCgpLCBfU2Vzc2lvblN0b3JlX2NodW5rID0gZnVuY3Rpb24gX1Nlc3Npb25TdG9yZV9jaHVuayhjb29raWUpIHtcbiAgICBjb25zdCBjaHVua0NvdW50ID0gTWF0aC5jZWlsKGNvb2tpZS52YWx1ZS5sZW5ndGggLyBDSFVOS19TSVpFKTtcbiAgICBpZiAoY2h1bmtDb3VudCA9PT0gMSkge1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfY2h1bmtzLCBcImZcIilbY29va2llLm5hbWVdID0gY29va2llLnZhbHVlO1xuICAgICAgICByZXR1cm4gW2Nvb2tpZV07XG4gICAgfVxuICAgIGNvbnN0IGNvb2tpZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNodW5rQ291bnQ7IGkrKykge1xuICAgICAgICBjb25zdCBuYW1lID0gYCR7Y29va2llLm5hbWV9LiR7aX1gO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGNvb2tpZS52YWx1ZS5zdWJzdHIoaSAqIENIVU5LX1NJWkUsIENIVU5LX1NJWkUpO1xuICAgICAgICBjb29raWVzLnB1c2goeyAuLi5jb29raWUsIG5hbWUsIHZhbHVlIH0pO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfY2h1bmtzLCBcImZcIilbbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfU2Vzc2lvblN0b3JlX2xvZ2dlciwgXCJmXCIpLmRlYnVnKFwiQ0hVTktJTkdfU0VTU0lPTl9DT09LSUVcIiwge1xuICAgICAgICBtZXNzYWdlOiBgU2Vzc2lvbiBjb29raWUgZXhjZWVkcyBhbGxvd2VkICR7QUxMT1dFRF9DT09LSUVfU0laRX0gYnl0ZXMuYCxcbiAgICAgICAgZW1wdHlDb29raWVTaXplOiBFU1RJTUFURURfRU1QVFlfQ09PS0lFX1NJWkUsXG4gICAgICAgIHZhbHVlU2l6ZTogY29va2llLnZhbHVlLmxlbmd0aCxcbiAgICAgICAgY2h1bmtzOiBjb29raWVzLm1hcCgoYykgPT4gYy52YWx1ZS5sZW5ndGggKyBFU1RJTUFURURfRU1QVFlfQ09PS0lFX1NJWkUpLFxuICAgIH0pO1xuICAgIHJldHVybiBjb29raWVzO1xufSwgX1Nlc3Npb25TdG9yZV9jbGVhbiA9IGZ1bmN0aW9uIF9TZXNzaW9uU3RvcmVfY2xlYW4oKSB7XG4gICAgY29uc3QgY2xlYW5lZENodW5rcyA9IHt9O1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfY2h1bmtzLCBcImZcIikpIHtcbiAgICAgICAgZGVsZXRlIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1Nlc3Npb25TdG9yZV9jaHVua3MsIFwiZlwiKT8uW25hbWVdO1xuICAgICAgICBjbGVhbmVkQ2h1bmtzW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgb3B0aW9uczogeyAuLi5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9TZXNzaW9uU3RvcmVfb3B0aW9uLCBcImZcIikub3B0aW9ucywgbWF4QWdlOiAwIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBjbGVhbmVkQ2h1bmtzO1xufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/cookie.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/date.js":
/*!***************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/date.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fromDate: () => (/* binding */ fromDate)\n/* harmony export */ });\n/**\n * Takes a number in seconds and returns the date in the future.\n * Optionally takes a second date parameter. In that case\n * the date in the future will be calculated from that date instead of now.\n */\nfunction fromDate(time, date = Date.now()) {\n    return new Date(date + time * 1000);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9kYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXGRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUYWtlcyBhIG51bWJlciBpbiBzZWNvbmRzIGFuZCByZXR1cm5zIHRoZSBkYXRlIGluIHRoZSBmdXR1cmUuXG4gKiBPcHRpb25hbGx5IHRha2VzIGEgc2Vjb25kIGRhdGUgcGFyYW1ldGVyLiBJbiB0aGF0IGNhc2VcbiAqIHRoZSBkYXRlIGluIHRoZSBmdXR1cmUgd2lsbCBiZSBjYWxjdWxhdGVkIGZyb20gdGhhdCBkYXRlIGluc3RlYWQgb2Ygbm93LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbURhdGUodGltZSwgZGF0ZSA9IERhdGUubm93KCkpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSArIHRpbWUgKiAxMDAwKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/date.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/date.js":
/*!***************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/date.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fromDate: () => (/* binding */ fromDate)\n/* harmony export */ });\n/**\n * Takes a number in seconds and returns the date in the future.\n * Optionally takes a second date parameter. In that case\n * the date in the future will be calculated from that date instead of now.\n */\nfunction fromDate(time, date = Date.now()) {\n    return new Date(date + time * 1000);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGFrZXMgYSBudW1iZXIgaW4gc2Vjb25kcyBhbmQgcmV0dXJucyB0aGUgZGF0ZSBpbiB0aGUgZnV0dXJlLlxuICogT3B0aW9uYWxseSB0YWtlcyBhIHNlY29uZCBkYXRlIHBhcmFtZXRlci4gSW4gdGhhdCBjYXNlXG4gKiB0aGUgZGF0ZSBpbiB0aGUgZnV0dXJlIHdpbGwgYmUgY2FsY3VsYXRlZCBmcm9tIHRoYXQgZGF0ZSBpbnN0ZWFkIG9mIG5vdy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21EYXRlKHRpbWUsIGRhdGUgPSBEYXRlLm5vdygpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUgKyB0aW1lICogMTAwMCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/date.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/env.js":
/*!**************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/env.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createActionURL: () => (/* binding */ createActionURL),\n/* harmony export */   setEnvDefaults: () => (/* binding */ setEnvDefaults)\n/* harmony export */ });\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logger.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/logger.js\");\n\n/**\n *  Set default env variables on the config object\n * @param suppressWarnings intended for framework authors.\n */\nfunction setEnvDefaults(envObject, config, suppressBasePathWarning = false) {\n    try {\n        const url = envObject.AUTH_URL;\n        if (url) {\n            if (config.basePath) {\n                if (!suppressBasePathWarning) {\n                    const logger = (0,_logger_js__WEBPACK_IMPORTED_MODULE_0__.setLogger)(config);\n                    logger.warn(\"env-url-basepath-redundant\");\n                }\n            }\n            else {\n                config.basePath = new URL(url).pathname;\n            }\n        }\n    }\n    catch {\n        // Catching and swallowing potential URL parsing errors, we'll fall\n        // back to `/auth` below.\n    }\n    finally {\n        config.basePath ?? (config.basePath = `/auth`);\n    }\n    if (!config.secret?.length) {\n        config.secret = [];\n        const secret = envObject.AUTH_SECRET;\n        if (secret)\n            config.secret.push(secret);\n        for (const i of [1, 2, 3]) {\n            const secret = envObject[`AUTH_SECRET_${i}`];\n            if (secret)\n                config.secret.unshift(secret);\n        }\n    }\n    config.redirectProxyUrl ?? (config.redirectProxyUrl = envObject.AUTH_REDIRECT_PROXY_URL);\n    config.trustHost ?? (config.trustHost = !!(envObject.AUTH_URL ??\n        envObject.AUTH_TRUST_HOST ??\n        envObject.VERCEL ??\n        envObject.CF_PAGES ??\n        envObject.NODE_ENV !== \"production\"));\n    config.providers = config.providers.map((provider) => {\n        const { id } = typeof provider === \"function\" ? provider({}) : provider;\n        const ID = id.toUpperCase().replace(/-/g, \"_\");\n        const clientId = envObject[`AUTH_${ID}_ID`];\n        const clientSecret = envObject[`AUTH_${ID}_SECRET`];\n        const issuer = envObject[`AUTH_${ID}_ISSUER`];\n        const apiKey = envObject[`AUTH_${ID}_KEY`];\n        const finalProvider = typeof provider === \"function\"\n            ? provider({ clientId, clientSecret, issuer, apiKey })\n            : provider;\n        if (finalProvider.type === \"oauth\" || finalProvider.type === \"oidc\") {\n            finalProvider.clientId ?? (finalProvider.clientId = clientId);\n            finalProvider.clientSecret ?? (finalProvider.clientSecret = clientSecret);\n            finalProvider.issuer ?? (finalProvider.issuer = issuer);\n        }\n        else if (finalProvider.type === \"email\") {\n            finalProvider.apiKey ?? (finalProvider.apiKey = apiKey);\n        }\n        return finalProvider;\n    });\n}\nfunction createActionURL(action, protocol, headers, envObject, config) {\n    const basePath = config?.basePath;\n    const envUrl = envObject.AUTH_URL ?? envObject.NEXTAUTH_URL;\n    let url;\n    if (envUrl) {\n        url = new URL(envUrl);\n        if (basePath && basePath !== \"/\" && url.pathname !== \"/\") {\n            if (url.pathname !== basePath) {\n                const logger = (0,_logger_js__WEBPACK_IMPORTED_MODULE_0__.setLogger)(config);\n                logger.warn(\"env-url-basepath-mismatch\");\n            }\n            url.pathname = \"/\";\n        }\n    }\n    else {\n        const detectedHost = headers.get(\"x-forwarded-host\") ?? headers.get(\"host\");\n        const detectedProtocol = headers.get(\"x-forwarded-proto\") ?? protocol ?? \"https\";\n        const _protocol = detectedProtocol.endsWith(\":\")\n            ? detectedProtocol\n            : detectedProtocol + \":\";\n        url = new URL(`${_protocol}//${detectedHost}`);\n    }\n    // remove trailing slash\n    const sanitizedUrl = url.toString().replace(/\\/$/, \"\");\n    if (basePath) {\n        // remove leading and trailing slash\n        const sanitizedBasePath = basePath?.replace(/(^\\/|\\/$)/g, \"\") ?? \"\";\n        return new URL(`${sanitizedUrl}/${sanitizedBasePath}/${action}`);\n    }\n    return new URL(`${sanitizedUrl}/${action}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHFEQUFTO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxFQUFFO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsS0FBSyw4Q0FBOEM7QUFDbkU7QUFDQSwyQ0FBMkMsR0FBRztBQUM5QywrQ0FBK0MsR0FBRztBQUNsRCx5Q0FBeUMsR0FBRztBQUM1Qyx5Q0FBeUMsR0FBRztBQUM1QztBQUNBLHlCQUF5Qix3Q0FBd0M7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHFEQUFTO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsVUFBVSxJQUFJLGFBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGFBQWEsR0FBRyxrQkFBa0IsR0FBRyxPQUFPO0FBQ3RFO0FBQ0Esc0JBQXNCLGFBQWEsR0FBRyxPQUFPO0FBQzdDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXGVudi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIuanNcIjtcbi8qKlxuICogIFNldCBkZWZhdWx0IGVudiB2YXJpYWJsZXMgb24gdGhlIGNvbmZpZyBvYmplY3RcbiAqIEBwYXJhbSBzdXBwcmVzc1dhcm5pbmdzIGludGVuZGVkIGZvciBmcmFtZXdvcmsgYXV0aG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEVudkRlZmF1bHRzKGVudk9iamVjdCwgY29uZmlnLCBzdXBwcmVzc0Jhc2VQYXRoV2FybmluZyA9IGZhbHNlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsID0gZW52T2JqZWN0LkFVVEhfVVJMO1xuICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLmJhc2VQYXRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdXBwcmVzc0Jhc2VQYXRoV2FybmluZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dnZXIgPSBzZXRMb2dnZXIoY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJlbnYtdXJsLWJhc2VwYXRoLXJlZHVuZGFudFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25maWcuYmFzZVBhdGggPSBuZXcgVVJMKHVybCkucGF0aG5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICAvLyBDYXRjaGluZyBhbmQgc3dhbGxvd2luZyBwb3RlbnRpYWwgVVJMIHBhcnNpbmcgZXJyb3JzLCB3ZSdsbCBmYWxsXG4gICAgICAgIC8vIGJhY2sgdG8gYC9hdXRoYCBiZWxvdy5cbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGNvbmZpZy5iYXNlUGF0aCA/PyAoY29uZmlnLmJhc2VQYXRoID0gYC9hdXRoYCk7XG4gICAgfVxuICAgIGlmICghY29uZmlnLnNlY3JldD8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbmZpZy5zZWNyZXQgPSBbXTtcbiAgICAgICAgY29uc3Qgc2VjcmV0ID0gZW52T2JqZWN0LkFVVEhfU0VDUkVUO1xuICAgICAgICBpZiAoc2VjcmV0KVxuICAgICAgICAgICAgY29uZmlnLnNlY3JldC5wdXNoKHNlY3JldCk7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBbMSwgMiwgM10pIHtcbiAgICAgICAgICAgIGNvbnN0IHNlY3JldCA9IGVudk9iamVjdFtgQVVUSF9TRUNSRVRfJHtpfWBdO1xuICAgICAgICAgICAgaWYgKHNlY3JldClcbiAgICAgICAgICAgICAgICBjb25maWcuc2VjcmV0LnVuc2hpZnQoc2VjcmV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25maWcucmVkaXJlY3RQcm94eVVybCA/PyAoY29uZmlnLnJlZGlyZWN0UHJveHlVcmwgPSBlbnZPYmplY3QuQVVUSF9SRURJUkVDVF9QUk9YWV9VUkwpO1xuICAgIGNvbmZpZy50cnVzdEhvc3QgPz8gKGNvbmZpZy50cnVzdEhvc3QgPSAhIShlbnZPYmplY3QuQVVUSF9VUkwgPz9cbiAgICAgICAgZW52T2JqZWN0LkFVVEhfVFJVU1RfSE9TVCA/P1xuICAgICAgICBlbnZPYmplY3QuVkVSQ0VMID8/XG4gICAgICAgIGVudk9iamVjdC5DRl9QQUdFUyA/P1xuICAgICAgICBlbnZPYmplY3QuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSk7XG4gICAgY29uZmlnLnByb3ZpZGVycyA9IGNvbmZpZy5wcm92aWRlcnMubWFwKChwcm92aWRlcikgPT4ge1xuICAgICAgICBjb25zdCB7IGlkIH0gPSB0eXBlb2YgcHJvdmlkZXIgPT09IFwiZnVuY3Rpb25cIiA/IHByb3ZpZGVyKHt9KSA6IHByb3ZpZGVyO1xuICAgICAgICBjb25zdCBJRCA9IGlkLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvLS9nLCBcIl9cIik7XG4gICAgICAgIGNvbnN0IGNsaWVudElkID0gZW52T2JqZWN0W2BBVVRIXyR7SUR9X0lEYF07XG4gICAgICAgIGNvbnN0IGNsaWVudFNlY3JldCA9IGVudk9iamVjdFtgQVVUSF8ke0lEfV9TRUNSRVRgXTtcbiAgICAgICAgY29uc3QgaXNzdWVyID0gZW52T2JqZWN0W2BBVVRIXyR7SUR9X0lTU1VFUmBdO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBlbnZPYmplY3RbYEFVVEhfJHtJRH1fS0VZYF07XG4gICAgICAgIGNvbnN0IGZpbmFsUHJvdmlkZXIgPSB0eXBlb2YgcHJvdmlkZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBwcm92aWRlcih7IGNsaWVudElkLCBjbGllbnRTZWNyZXQsIGlzc3VlciwgYXBpS2V5IH0pXG4gICAgICAgICAgICA6IHByb3ZpZGVyO1xuICAgICAgICBpZiAoZmluYWxQcm92aWRlci50eXBlID09PSBcIm9hdXRoXCIgfHwgZmluYWxQcm92aWRlci50eXBlID09PSBcIm9pZGNcIikge1xuICAgICAgICAgICAgZmluYWxQcm92aWRlci5jbGllbnRJZCA/PyAoZmluYWxQcm92aWRlci5jbGllbnRJZCA9IGNsaWVudElkKTtcbiAgICAgICAgICAgIGZpbmFsUHJvdmlkZXIuY2xpZW50U2VjcmV0ID8/IChmaW5hbFByb3ZpZGVyLmNsaWVudFNlY3JldCA9IGNsaWVudFNlY3JldCk7XG4gICAgICAgICAgICBmaW5hbFByb3ZpZGVyLmlzc3VlciA/PyAoZmluYWxQcm92aWRlci5pc3N1ZXIgPSBpc3N1ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZpbmFsUHJvdmlkZXIudHlwZSA9PT0gXCJlbWFpbFwiKSB7XG4gICAgICAgICAgICBmaW5hbFByb3ZpZGVyLmFwaUtleSA/PyAoZmluYWxQcm92aWRlci5hcGlLZXkgPSBhcGlLZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaW5hbFByb3ZpZGVyO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFjdGlvblVSTChhY3Rpb24sIHByb3RvY29sLCBoZWFkZXJzLCBlbnZPYmplY3QsIGNvbmZpZykge1xuICAgIGNvbnN0IGJhc2VQYXRoID0gY29uZmlnPy5iYXNlUGF0aDtcbiAgICBjb25zdCBlbnZVcmwgPSBlbnZPYmplY3QuQVVUSF9VUkwgPz8gZW52T2JqZWN0Lk5FWFRBVVRIX1VSTDtcbiAgICBsZXQgdXJsO1xuICAgIGlmIChlbnZVcmwpIHtcbiAgICAgICAgdXJsID0gbmV3IFVSTChlbnZVcmwpO1xuICAgICAgICBpZiAoYmFzZVBhdGggJiYgYmFzZVBhdGggIT09IFwiL1wiICYmIHVybC5wYXRobmFtZSAhPT0gXCIvXCIpIHtcbiAgICAgICAgICAgIGlmICh1cmwucGF0aG5hbWUgIT09IGJhc2VQYXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nZ2VyID0gc2V0TG9nZ2VyKGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJlbnYtdXJsLWJhc2VwYXRoLW1pc21hdGNoXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsLnBhdGhuYW1lID0gXCIvXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGRldGVjdGVkSG9zdCA9IGhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKSA/PyBoZWFkZXJzLmdldChcImhvc3RcIik7XG4gICAgICAgIGNvbnN0IGRldGVjdGVkUHJvdG9jb2wgPSBoZWFkZXJzLmdldChcIngtZm9yd2FyZGVkLXByb3RvXCIpID8/IHByb3RvY29sID8/IFwiaHR0cHNcIjtcbiAgICAgICAgY29uc3QgX3Byb3RvY29sID0gZGV0ZWN0ZWRQcm90b2NvbC5lbmRzV2l0aChcIjpcIilcbiAgICAgICAgICAgID8gZGV0ZWN0ZWRQcm90b2NvbFxuICAgICAgICAgICAgOiBkZXRlY3RlZFByb3RvY29sICsgXCI6XCI7XG4gICAgICAgIHVybCA9IG5ldyBVUkwoYCR7X3Byb3RvY29sfS8vJHtkZXRlY3RlZEhvc3R9YCk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICAgIGNvbnN0IHNhbml0aXplZFVybCA9IHVybC50b1N0cmluZygpLnJlcGxhY2UoL1xcLyQvLCBcIlwiKTtcbiAgICBpZiAoYmFzZVBhdGgpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoXG4gICAgICAgIGNvbnN0IHNhbml0aXplZEJhc2VQYXRoID0gYmFzZVBhdGg/LnJlcGxhY2UoLyheXFwvfFxcLyQpL2csIFwiXCIpID8/IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgVVJMKGAke3Nhbml0aXplZFVybH0vJHtzYW5pdGl6ZWRCYXNlUGF0aH0vJHthY3Rpb259YCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVVJMKGAke3Nhbml0aXplZFVybH0vJHthY3Rpb259YCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/env.js":
/*!**************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/env.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createActionURL: () => (/* binding */ createActionURL),\n/* harmony export */   setEnvDefaults: () => (/* binding */ setEnvDefaults)\n/* harmony export */ });\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/logger.js\");\n\n/**\n *  Set default env variables on the config object\n * @param suppressWarnings intended for framework authors.\n */\nfunction setEnvDefaults(envObject, config, suppressBasePathWarning = false) {\n    try {\n        const url = envObject.AUTH_URL;\n        if (url) {\n            if (config.basePath) {\n                if (!suppressBasePathWarning) {\n                    const logger = (0,_logger_js__WEBPACK_IMPORTED_MODULE_0__.setLogger)(config);\n                    logger.warn(\"env-url-basepath-redundant\");\n                }\n            }\n            else {\n                config.basePath = new URL(url).pathname;\n            }\n        }\n    }\n    catch {\n        // Catching and swallowing potential URL parsing errors, we'll fall\n        // back to `/auth` below.\n    }\n    finally {\n        config.basePath ?? (config.basePath = `/auth`);\n    }\n    if (!config.secret?.length) {\n        config.secret = [];\n        const secret = envObject.AUTH_SECRET;\n        if (secret)\n            config.secret.push(secret);\n        for (const i of [1, 2, 3]) {\n            const secret = envObject[`AUTH_SECRET_${i}`];\n            if (secret)\n                config.secret.unshift(secret);\n        }\n    }\n    config.redirectProxyUrl ?? (config.redirectProxyUrl = envObject.AUTH_REDIRECT_PROXY_URL);\n    config.trustHost ?? (config.trustHost = !!(envObject.AUTH_URL ??\n        envObject.AUTH_TRUST_HOST ??\n        envObject.VERCEL ??\n        envObject.CF_PAGES ??\n        envObject.NODE_ENV !== \"production\"));\n    config.providers = config.providers.map((provider) => {\n        const { id } = typeof provider === \"function\" ? provider({}) : provider;\n        const ID = id.toUpperCase().replace(/-/g, \"_\");\n        const clientId = envObject[`AUTH_${ID}_ID`];\n        const clientSecret = envObject[`AUTH_${ID}_SECRET`];\n        const issuer = envObject[`AUTH_${ID}_ISSUER`];\n        const apiKey = envObject[`AUTH_${ID}_KEY`];\n        const finalProvider = typeof provider === \"function\"\n            ? provider({ clientId, clientSecret, issuer, apiKey })\n            : provider;\n        if (finalProvider.type === \"oauth\" || finalProvider.type === \"oidc\") {\n            finalProvider.clientId ?? (finalProvider.clientId = clientId);\n            finalProvider.clientSecret ?? (finalProvider.clientSecret = clientSecret);\n            finalProvider.issuer ?? (finalProvider.issuer = issuer);\n        }\n        else if (finalProvider.type === \"email\") {\n            finalProvider.apiKey ?? (finalProvider.apiKey = apiKey);\n        }\n        return finalProvider;\n    });\n}\nfunction createActionURL(action, protocol, headers, envObject, config) {\n    const basePath = config?.basePath;\n    const envUrl = envObject.AUTH_URL ?? envObject.NEXTAUTH_URL;\n    let url;\n    if (envUrl) {\n        url = new URL(envUrl);\n        if (basePath && basePath !== \"/\" && url.pathname !== \"/\") {\n            if (url.pathname !== basePath) {\n                const logger = (0,_logger_js__WEBPACK_IMPORTED_MODULE_0__.setLogger)(config);\n                logger.warn(\"env-url-basepath-mismatch\");\n            }\n            url.pathname = \"/\";\n        }\n    }\n    else {\n        const detectedHost = headers.get(\"x-forwarded-host\") ?? headers.get(\"host\");\n        const detectedProtocol = headers.get(\"x-forwarded-proto\") ?? protocol ?? \"https\";\n        const _protocol = detectedProtocol.endsWith(\":\")\n            ? detectedProtocol\n            : detectedProtocol + \":\";\n        url = new URL(`${_protocol}//${detectedHost}`);\n    }\n    // remove trailing slash\n    const sanitizedUrl = url.toString().replace(/\\/$/, \"\");\n    if (basePath) {\n        // remove leading and trailing slash\n        const sanitizedBasePath = basePath?.replace(/(^\\/|\\/$)/g, \"\") ?? \"\";\n        return new URL(`${sanitizedUrl}/${sanitizedBasePath}/${action}`);\n    }\n    return new URL(`${sanitizedUrl}/${action}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxxREFBUztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsRUFBRTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLEtBQUssOENBQThDO0FBQ25FO0FBQ0EsMkNBQTJDLEdBQUc7QUFDOUMsK0NBQStDLEdBQUc7QUFDbEQseUNBQXlDLEdBQUc7QUFDNUMseUNBQXlDLEdBQUc7QUFDNUM7QUFDQSx5QkFBeUIsd0NBQXdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixxREFBUztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFVBQVUsSUFBSSxhQUFhO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixhQUFhLEdBQUcsa0JBQWtCLEdBQUcsT0FBTztBQUN0RTtBQUNBLHNCQUFzQixhQUFhLEdBQUcsT0FBTztBQUM3QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxlbnYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLmpzXCI7XG4vKipcbiAqICBTZXQgZGVmYXVsdCBlbnYgdmFyaWFibGVzIG9uIHRoZSBjb25maWcgb2JqZWN0XG4gKiBAcGFyYW0gc3VwcHJlc3NXYXJuaW5ncyBpbnRlbmRlZCBmb3IgZnJhbWV3b3JrIGF1dGhvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRFbnZEZWZhdWx0cyhlbnZPYmplY3QsIGNvbmZpZywgc3VwcHJlc3NCYXNlUGF0aFdhcm5pbmcgPSBmYWxzZSkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGVudk9iamVjdC5BVVRIX1VSTDtcbiAgICAgICAgaWYgKHVybCkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5iYXNlUGF0aCkge1xuICAgICAgICAgICAgICAgIGlmICghc3VwcHJlc3NCYXNlUGF0aFdhcm5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nZ2VyID0gc2V0TG9nZ2VyKGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwiZW52LXVybC1iYXNlcGF0aC1yZWR1bmRhbnRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmJhc2VQYXRoID0gbmV3IFVSTCh1cmwpLnBhdGhuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgLy8gQ2F0Y2hpbmcgYW5kIHN3YWxsb3dpbmcgcG90ZW50aWFsIFVSTCBwYXJzaW5nIGVycm9ycywgd2UnbGwgZmFsbFxuICAgICAgICAvLyBiYWNrIHRvIGAvYXV0aGAgYmVsb3cuXG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBjb25maWcuYmFzZVBhdGggPz8gKGNvbmZpZy5iYXNlUGF0aCA9IGAvYXV0aGApO1xuICAgIH1cbiAgICBpZiAoIWNvbmZpZy5zZWNyZXQ/Lmxlbmd0aCkge1xuICAgICAgICBjb25maWcuc2VjcmV0ID0gW107XG4gICAgICAgIGNvbnN0IHNlY3JldCA9IGVudk9iamVjdC5BVVRIX1NFQ1JFVDtcbiAgICAgICAgaWYgKHNlY3JldClcbiAgICAgICAgICAgIGNvbmZpZy5zZWNyZXQucHVzaChzZWNyZXQpO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgWzEsIDIsIDNdKSB7XG4gICAgICAgICAgICBjb25zdCBzZWNyZXQgPSBlbnZPYmplY3RbYEFVVEhfU0VDUkVUXyR7aX1gXTtcbiAgICAgICAgICAgIGlmIChzZWNyZXQpXG4gICAgICAgICAgICAgICAgY29uZmlnLnNlY3JldC51bnNoaWZ0KHNlY3JldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uZmlnLnJlZGlyZWN0UHJveHlVcmwgPz8gKGNvbmZpZy5yZWRpcmVjdFByb3h5VXJsID0gZW52T2JqZWN0LkFVVEhfUkVESVJFQ1RfUFJPWFlfVVJMKTtcbiAgICBjb25maWcudHJ1c3RIb3N0ID8/IChjb25maWcudHJ1c3RIb3N0ID0gISEoZW52T2JqZWN0LkFVVEhfVVJMID8/XG4gICAgICAgIGVudk9iamVjdC5BVVRIX1RSVVNUX0hPU1QgPz9cbiAgICAgICAgZW52T2JqZWN0LlZFUkNFTCA/P1xuICAgICAgICBlbnZPYmplY3QuQ0ZfUEFHRVMgPz9cbiAgICAgICAgZW52T2JqZWN0Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpO1xuICAgIGNvbmZpZy5wcm92aWRlcnMgPSBjb25maWcucHJvdmlkZXJzLm1hcCgocHJvdmlkZXIpID0+IHtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gdHlwZW9mIHByb3ZpZGVyID09PSBcImZ1bmN0aW9uXCIgPyBwcm92aWRlcih7fSkgOiBwcm92aWRlcjtcbiAgICAgICAgY29uc3QgSUQgPSBpZC50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoLy0vZywgXCJfXCIpO1xuICAgICAgICBjb25zdCBjbGllbnRJZCA9IGVudk9iamVjdFtgQVVUSF8ke0lEfV9JRGBdO1xuICAgICAgICBjb25zdCBjbGllbnRTZWNyZXQgPSBlbnZPYmplY3RbYEFVVEhfJHtJRH1fU0VDUkVUYF07XG4gICAgICAgIGNvbnN0IGlzc3VlciA9IGVudk9iamVjdFtgQVVUSF8ke0lEfV9JU1NVRVJgXTtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gZW52T2JqZWN0W2BBVVRIXyR7SUR9X0tFWWBdO1xuICAgICAgICBjb25zdCBmaW5hbFByb3ZpZGVyID0gdHlwZW9mIHByb3ZpZGVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gcHJvdmlkZXIoeyBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCBpc3N1ZXIsIGFwaUtleSB9KVxuICAgICAgICAgICAgOiBwcm92aWRlcjtcbiAgICAgICAgaWYgKGZpbmFsUHJvdmlkZXIudHlwZSA9PT0gXCJvYXV0aFwiIHx8IGZpbmFsUHJvdmlkZXIudHlwZSA9PT0gXCJvaWRjXCIpIHtcbiAgICAgICAgICAgIGZpbmFsUHJvdmlkZXIuY2xpZW50SWQgPz8gKGZpbmFsUHJvdmlkZXIuY2xpZW50SWQgPSBjbGllbnRJZCk7XG4gICAgICAgICAgICBmaW5hbFByb3ZpZGVyLmNsaWVudFNlY3JldCA/PyAoZmluYWxQcm92aWRlci5jbGllbnRTZWNyZXQgPSBjbGllbnRTZWNyZXQpO1xuICAgICAgICAgICAgZmluYWxQcm92aWRlci5pc3N1ZXIgPz8gKGZpbmFsUHJvdmlkZXIuaXNzdWVyID0gaXNzdWVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaW5hbFByb3ZpZGVyLnR5cGUgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgZmluYWxQcm92aWRlci5hcGlLZXkgPz8gKGZpbmFsUHJvdmlkZXIuYXBpS2V5ID0gYXBpS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmluYWxQcm92aWRlcjtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY3Rpb25VUkwoYWN0aW9uLCBwcm90b2NvbCwgaGVhZGVycywgZW52T2JqZWN0LCBjb25maWcpIHtcbiAgICBjb25zdCBiYXNlUGF0aCA9IGNvbmZpZz8uYmFzZVBhdGg7XG4gICAgY29uc3QgZW52VXJsID0gZW52T2JqZWN0LkFVVEhfVVJMID8/IGVudk9iamVjdC5ORVhUQVVUSF9VUkw7XG4gICAgbGV0IHVybDtcbiAgICBpZiAoZW52VXJsKSB7XG4gICAgICAgIHVybCA9IG5ldyBVUkwoZW52VXJsKTtcbiAgICAgICAgaWYgKGJhc2VQYXRoICYmIGJhc2VQYXRoICE9PSBcIi9cIiAmJiB1cmwucGF0aG5hbWUgIT09IFwiL1wiKSB7XG4gICAgICAgICAgICBpZiAodXJsLnBhdGhuYW1lICE9PSBiYXNlUGF0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvZ2dlciA9IHNldExvZ2dlcihjb25maWcpO1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwiZW52LXVybC1iYXNlcGF0aC1taXNtYXRjaFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybC5wYXRobmFtZSA9IFwiL1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBkZXRlY3RlZEhvc3QgPSBoZWFkZXJzLmdldChcIngtZm9yd2FyZGVkLWhvc3RcIikgPz8gaGVhZGVycy5nZXQoXCJob3N0XCIpO1xuICAgICAgICBjb25zdCBkZXRlY3RlZFByb3RvY29sID0gaGVhZGVycy5nZXQoXCJ4LWZvcndhcmRlZC1wcm90b1wiKSA/PyBwcm90b2NvbCA/PyBcImh0dHBzXCI7XG4gICAgICAgIGNvbnN0IF9wcm90b2NvbCA9IGRldGVjdGVkUHJvdG9jb2wuZW5kc1dpdGgoXCI6XCIpXG4gICAgICAgICAgICA/IGRldGVjdGVkUHJvdG9jb2xcbiAgICAgICAgICAgIDogZGV0ZWN0ZWRQcm90b2NvbCArIFwiOlwiO1xuICAgICAgICB1cmwgPSBuZXcgVVJMKGAke19wcm90b2NvbH0vLyR7ZGV0ZWN0ZWRIb3N0fWApO1xuICAgIH1cbiAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICBjb25zdCBzYW5pdGl6ZWRVcmwgPSB1cmwudG9TdHJpbmcoKS5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG4gICAgaWYgKGJhc2VQYXRoKSB7XG4gICAgICAgIC8vIHJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaFxuICAgICAgICBjb25zdCBzYW5pdGl6ZWRCYXNlUGF0aCA9IGJhc2VQYXRoPy5yZXBsYWNlKC8oXlxcL3xcXC8kKS9nLCBcIlwiKSA/PyBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IFVSTChgJHtzYW5pdGl6ZWRVcmx9LyR7c2FuaXRpemVkQmFzZVBhdGh9LyR7YWN0aW9ufWApO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFVSTChgJHtzYW5pdGl6ZWRVcmx9LyR7YWN0aW9ufWApO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/env.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/logger.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/logger.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setLogger: () => (/* binding */ setLogger)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n\nconst red = \"\\x1b[31m\";\nconst yellow = \"\\x1b[33m\";\nconst grey = \"\\x1b[90m\";\nconst reset = \"\\x1b[0m\";\nconst defaultLogger = {\n    error(error) {\n        const name = error instanceof _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError ? error.type : error.name;\n        console.error(`${red}[auth][error]${reset} ${name}: ${error.message}`);\n        if (error.cause &&\n            typeof error.cause === \"object\" &&\n            \"err\" in error.cause &&\n            error.cause.err instanceof Error) {\n            const { err, ...data } = error.cause;\n            console.error(`${red}[auth][cause]${reset}:`, err.stack);\n            if (data)\n                console.error(`${red}[auth][details]${reset}:`, JSON.stringify(data, null, 2));\n        }\n        else if (error.stack) {\n            console.error(error.stack.replace(/.*/, \"\").substring(1));\n        }\n    },\n    warn(code) {\n        const url = `https://warnings.authjs.dev#${code}`;\n        console.warn(`${yellow}[auth][warn][${code}]${reset}`, `Read more: ${url}`);\n    },\n    debug(message, metadata) {\n        console.log(`${grey}[auth][debug]:${reset} ${message}`, JSON.stringify(metadata, null, 2));\n    },\n};\n/**\n * Override the built-in logger with user's implementation.\n * Any `undefined` level will use the default logger.\n */\nfunction setLogger(config) {\n    const newLogger = {\n        ...defaultLogger,\n    };\n    // Turn off debug logging if `debug` isn't set to `true`\n    if (!config.debug)\n        newLogger.debug = () => { };\n    if (config.logger?.error)\n        newLogger.error = config.logger.error;\n    if (config.logger?.warn)\n        newLogger.warn = config.logger.warn;\n    if (config.logger?.debug)\n        newLogger.debug = config.logger.debug;\n    config.logger ?? (config.logger = newLogger);\n    return newLogger;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9sb2dnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGlEQUFTO0FBQy9DLHlCQUF5QixJQUFJLGVBQWUsT0FBTyxFQUFFLEtBQUssSUFBSSxjQUFjO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGVBQWU7QUFDbkMsNkJBQTZCLElBQUksZUFBZSxNQUFNO0FBQ3REO0FBQ0EsaUNBQWlDLElBQUksaUJBQWlCLE1BQU07QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxtREFBbUQsS0FBSztBQUN4RCx3QkFBd0IsT0FBTyxlQUFlLEtBQUssR0FBRyxNQUFNLGlCQUFpQixJQUFJO0FBQ2pGLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixLQUFLLGdCQUFnQixPQUFPLEVBQUUsUUFBUTtBQUM3RCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXGxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBdXRoRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3JzLmpzXCI7XG5jb25zdCByZWQgPSBcIlxceDFiWzMxbVwiO1xuY29uc3QgeWVsbG93ID0gXCJcXHgxYlszM21cIjtcbmNvbnN0IGdyZXkgPSBcIlxceDFiWzkwbVwiO1xuY29uc3QgcmVzZXQgPSBcIlxceDFiWzBtXCI7XG5jb25zdCBkZWZhdWx0TG9nZ2VyID0ge1xuICAgIGVycm9yKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlcnJvciBpbnN0YW5jZW9mIEF1dGhFcnJvciA/IGVycm9yLnR5cGUgOiBlcnJvci5uYW1lO1xuICAgICAgICBjb25zb2xlLmVycm9yKGAke3JlZH1bYXV0aF1bZXJyb3JdJHtyZXNldH0gJHtuYW1lfTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICBpZiAoZXJyb3IuY2F1c2UgJiZcbiAgICAgICAgICAgIHR5cGVvZiBlcnJvci5jYXVzZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgXCJlcnJcIiBpbiBlcnJvci5jYXVzZSAmJlxuICAgICAgICAgICAgZXJyb3IuY2F1c2UuZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZXJyLCAuLi5kYXRhIH0gPSBlcnJvci5jYXVzZTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7cmVkfVthdXRoXVtjYXVzZV0ke3Jlc2V0fTpgLCBlcnIuc3RhY2spO1xuICAgICAgICAgICAgaWYgKGRhdGEpXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgJHtyZWR9W2F1dGhdW2RldGFpbHNdJHtyZXNldH06YCwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVycm9yLnN0YWNrKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLnN0YWNrLnJlcGxhY2UoLy4qLywgXCJcIikuc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgd2Fybihjb2RlKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL3dhcm5pbmdzLmF1dGhqcy5kZXYjJHtjb2RlfWA7XG4gICAgICAgIGNvbnNvbGUud2FybihgJHt5ZWxsb3d9W2F1dGhdW3dhcm5dWyR7Y29kZX1dJHtyZXNldH1gLCBgUmVhZCBtb3JlOiAke3VybH1gKTtcbiAgICB9LFxuICAgIGRlYnVnKG1lc3NhZ2UsIG1ldGFkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2dyZXl9W2F1dGhdW2RlYnVnXToke3Jlc2V0fSAke21lc3NhZ2V9YCwgSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEsIG51bGwsIDIpKTtcbiAgICB9LFxufTtcbi8qKlxuICogT3ZlcnJpZGUgdGhlIGJ1aWx0LWluIGxvZ2dlciB3aXRoIHVzZXIncyBpbXBsZW1lbnRhdGlvbi5cbiAqIEFueSBgdW5kZWZpbmVkYCBsZXZlbCB3aWxsIHVzZSB0aGUgZGVmYXVsdCBsb2dnZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRMb2dnZXIoY29uZmlnKSB7XG4gICAgY29uc3QgbmV3TG9nZ2VyID0ge1xuICAgICAgICAuLi5kZWZhdWx0TG9nZ2VyLFxuICAgIH07XG4gICAgLy8gVHVybiBvZmYgZGVidWcgbG9nZ2luZyBpZiBgZGVidWdgIGlzbid0IHNldCB0byBgdHJ1ZWBcbiAgICBpZiAoIWNvbmZpZy5kZWJ1ZylcbiAgICAgICAgbmV3TG9nZ2VyLmRlYnVnID0gKCkgPT4geyB9O1xuICAgIGlmIChjb25maWcubG9nZ2VyPy5lcnJvcilcbiAgICAgICAgbmV3TG9nZ2VyLmVycm9yID0gY29uZmlnLmxvZ2dlci5lcnJvcjtcbiAgICBpZiAoY29uZmlnLmxvZ2dlcj8ud2FybilcbiAgICAgICAgbmV3TG9nZ2VyLndhcm4gPSBjb25maWcubG9nZ2VyLndhcm47XG4gICAgaWYgKGNvbmZpZy5sb2dnZXI/LmRlYnVnKVxuICAgICAgICBuZXdMb2dnZXIuZGVidWcgPSBjb25maWcubG9nZ2VyLmRlYnVnO1xuICAgIGNvbmZpZy5sb2dnZXIgPz8gKGNvbmZpZy5sb2dnZXIgPSBuZXdMb2dnZXIpO1xuICAgIHJldHVybiBuZXdMb2dnZXI7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/logger.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/logger.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/logger.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setLogger: () => (/* binding */ setLogger)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n\nconst red = \"\\x1b[31m\";\nconst yellow = \"\\x1b[33m\";\nconst grey = \"\\x1b[90m\";\nconst reset = \"\\x1b[0m\";\nconst defaultLogger = {\n    error(error) {\n        const name = error instanceof _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError ? error.type : error.name;\n        console.error(`${red}[auth][error]${reset} ${name}: ${error.message}`);\n        if (error.cause &&\n            typeof error.cause === \"object\" &&\n            \"err\" in error.cause &&\n            error.cause.err instanceof Error) {\n            const { err, ...data } = error.cause;\n            console.error(`${red}[auth][cause]${reset}:`, err.stack);\n            if (data)\n                console.error(`${red}[auth][details]${reset}:`, JSON.stringify(data, null, 2));\n        }\n        else if (error.stack) {\n            console.error(error.stack.replace(/.*/, \"\").substring(1));\n        }\n    },\n    warn(code) {\n        const url = `https://warnings.authjs.dev#${code}`;\n        console.warn(`${yellow}[auth][warn][${code}]${reset}`, `Read more: ${url}`);\n    },\n    debug(message, metadata) {\n        console.log(`${grey}[auth][debug]:${reset} ${message}`, JSON.stringify(metadata, null, 2));\n    },\n};\n/**\n * Override the built-in logger with user's implementation.\n * Any `undefined` level will use the default logger.\n */\nfunction setLogger(config) {\n    const newLogger = {\n        ...defaultLogger,\n    };\n    // Turn off debug logging if `debug` isn't set to `true`\n    if (!config.debug)\n        newLogger.debug = () => { };\n    if (config.logger?.error)\n        newLogger.error = config.logger.error;\n    if (config.logger?.warn)\n        newLogger.warn = config.logger.warn;\n    if (config.logger?.debug)\n        newLogger.debug = config.logger.debug;\n    config.logger ?? (config.logger = newLogger);\n    return newLogger;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvbG9nZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxpREFBUztBQUMvQyx5QkFBeUIsSUFBSSxlQUFlLE9BQU8sRUFBRSxLQUFLLElBQUksY0FBYztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DLDZCQUE2QixJQUFJLGVBQWUsTUFBTTtBQUN0RDtBQUNBLGlDQUFpQyxJQUFJLGlCQUFpQixNQUFNO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsbURBQW1ELEtBQUs7QUFDeEQsd0JBQXdCLE9BQU8sZUFBZSxLQUFLLEdBQUcsTUFBTSxpQkFBaUIsSUFBSTtBQUNqRixLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsS0FBSyxnQkFBZ0IsT0FBTyxFQUFFLFFBQVE7QUFDN0QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxsb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIi4uLy4uL2Vycm9ycy5qc1wiO1xuY29uc3QgcmVkID0gXCJcXHgxYlszMW1cIjtcbmNvbnN0IHllbGxvdyA9IFwiXFx4MWJbMzNtXCI7XG5jb25zdCBncmV5ID0gXCJcXHgxYls5MG1cIjtcbmNvbnN0IHJlc2V0ID0gXCJcXHgxYlswbVwiO1xuY29uc3QgZGVmYXVsdExvZ2dlciA9IHtcbiAgICBlcnJvcihlcnJvcikge1xuICAgICAgICBjb25zdCBuYW1lID0gZXJyb3IgaW5zdGFuY2VvZiBBdXRoRXJyb3IgPyBlcnJvci50eXBlIDogZXJyb3IubmFtZTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgJHtyZWR9W2F1dGhdW2Vycm9yXSR7cmVzZXR9ICR7bmFtZX06ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgaWYgKGVycm9yLmNhdXNlICYmXG4gICAgICAgICAgICB0eXBlb2YgZXJyb3IuY2F1c2UgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIFwiZXJyXCIgaW4gZXJyb3IuY2F1c2UgJiZcbiAgICAgICAgICAgIGVycm9yLmNhdXNlLmVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCB7IGVyciwgLi4uZGF0YSB9ID0gZXJyb3IuY2F1c2U7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGAke3JlZH1bYXV0aF1bY2F1c2VdJHtyZXNldH06YCwgZXJyLnN0YWNrKTtcbiAgICAgICAgICAgIGlmIChkYXRhKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7cmVkfVthdXRoXVtkZXRhaWxzXSR7cmVzZXR9OmAsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlcnJvci5zdGFjaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5zdGFjay5yZXBsYWNlKC8uKi8sIFwiXCIpLnN1YnN0cmluZygxKSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHdhcm4oY29kZSkge1xuICAgICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93YXJuaW5ncy5hdXRoanMuZGV2IyR7Y29kZX1gO1xuICAgICAgICBjb25zb2xlLndhcm4oYCR7eWVsbG93fVthdXRoXVt3YXJuXVske2NvZGV9XSR7cmVzZXR9YCwgYFJlYWQgbW9yZTogJHt1cmx9YCk7XG4gICAgfSxcbiAgICBkZWJ1ZyhtZXNzYWdlLCBtZXRhZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtncmV5fVthdXRoXVtkZWJ1Z106JHtyZXNldH0gJHttZXNzYWdlfWAsIEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhLCBudWxsLCAyKSk7XG4gICAgfSxcbn07XG4vKipcbiAqIE92ZXJyaWRlIHRoZSBidWlsdC1pbiBsb2dnZXIgd2l0aCB1c2VyJ3MgaW1wbGVtZW50YXRpb24uXG4gKiBBbnkgYHVuZGVmaW5lZGAgbGV2ZWwgd2lsbCB1c2UgdGhlIGRlZmF1bHQgbG9nZ2VyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9nZ2VyKGNvbmZpZykge1xuICAgIGNvbnN0IG5ld0xvZ2dlciA9IHtcbiAgICAgICAgLi4uZGVmYXVsdExvZ2dlcixcbiAgICB9O1xuICAgIC8vIFR1cm4gb2ZmIGRlYnVnIGxvZ2dpbmcgaWYgYGRlYnVnYCBpc24ndCBzZXQgdG8gYHRydWVgXG4gICAgaWYgKCFjb25maWcuZGVidWcpXG4gICAgICAgIG5ld0xvZ2dlci5kZWJ1ZyA9ICgpID0+IHsgfTtcbiAgICBpZiAoY29uZmlnLmxvZ2dlcj8uZXJyb3IpXG4gICAgICAgIG5ld0xvZ2dlci5lcnJvciA9IGNvbmZpZy5sb2dnZXIuZXJyb3I7XG4gICAgaWYgKGNvbmZpZy5sb2dnZXI/Lndhcm4pXG4gICAgICAgIG5ld0xvZ2dlci53YXJuID0gY29uZmlnLmxvZ2dlci53YXJuO1xuICAgIGlmIChjb25maWcubG9nZ2VyPy5kZWJ1ZylcbiAgICAgICAgbmV3TG9nZ2VyLmRlYnVnID0gY29uZmlnLmxvZ2dlci5kZWJ1ZztcbiAgICBjb25maWcubG9nZ2VyID8/IChjb25maWcubG9nZ2VyID0gbmV3TG9nZ2VyKTtcbiAgICByZXR1cm4gbmV3TG9nZ2VyO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/logger.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/merge.js":
/*!****************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/merge.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   merge: () => (/* binding */ merge)\n/* harmony export */ });\nfunction isObject(item) {\n    return item !== null && typeof item === \"object\";\n}\n/** Deep merge two or more objects */\nfunction merge(target, ...sources) {\n    if (!sources.length)\n        return target;\n    const source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!isObject(target[key]))\n                    target[key] = Array.isArray(source[key])\n                        ? []\n                        : {};\n                merge(target[key], source[key]);\n            }\n            else if (source[key] !== undefined)\n                target[key] = source[key];\n        }\n    }\n    return merge(target, ...sources);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9tZXJnZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxtZXJnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBpc09iamVjdChpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0gIT09IG51bGwgJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCI7XG59XG4vKiogRGVlcCBtZXJnZSB0d28gb3IgbW9yZSBvYmplY3RzICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UodGFyZ2V0LCAuLi5zb3VyY2VzKSB7XG4gICAgaWYgKCFzb3VyY2VzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XG4gICAgaWYgKGlzT2JqZWN0KHRhcmdldCkgJiYgaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChpc09iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzT2JqZWN0KHRhcmdldFtrZXldKSlcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBBcnJheS5pc0FycmF5KHNvdXJjZVtrZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgICAgICAgICBtZXJnZSh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2tleV0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZSh0YXJnZXQsIC4uLnNvdXJjZXMpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/merge.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/merge.js":
/*!****************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/merge.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   merge: () => (/* binding */ merge)\n/* harmony export */ });\nfunction isObject(item) {\n    return item !== null && typeof item === \"object\";\n}\n/** Deep merge two or more objects */\nfunction merge(target, ...sources) {\n    if (!sources.length)\n        return target;\n    const source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!isObject(target[key]))\n                    target[key] = Array.isArray(source[key])\n                        ? []\n                        : {};\n                merge(target[key], source[key]);\n            }\n            else if (source[key] !== undefined)\n                target[key] = source[key];\n        }\n    }\n    return merge(target, ...sources);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvbWVyZ2UuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFx1dGlsc1xcbWVyZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaXNPYmplY3QoaXRlbSkge1xuICAgIHJldHVybiBpdGVtICE9PSBudWxsICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiO1xufVxuLyoqIERlZXAgbWVyZ2UgdHdvIG9yIG1vcmUgb2JqZWN0cyAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKHRhcmdldCwgLi4uc291cmNlcykge1xuICAgIGlmICghc291cmNlcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgY29uc3Qgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xuICAgIGlmIChpc09iamVjdCh0YXJnZXQpICYmIGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBpZiAoaXNPYmplY3Qoc291cmNlW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc09iamVjdCh0YXJnZXRba2V5XSkpXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gQXJyYXkuaXNBcnJheShzb3VyY2Vba2V5XSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgICAgICAgICAgICAgIDoge307XG4gICAgICAgICAgICAgICAgbWVyZ2UodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNvdXJjZVtrZXldICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVyZ2UodGFyZ2V0LCAuLi5zb3VyY2VzKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/merge.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/providers.js":
/*!********************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/providers.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ parseProviders),\n/* harmony export */   isOAuth2Provider: () => (/* binding */ isOAuth2Provider),\n/* harmony export */   isOAuthProvider: () => (/* binding */ isOAuthProvider),\n/* harmony export */   isOIDCProvider: () => (/* binding */ isOIDCProvider)\n/* harmony export */ });\n/* harmony import */ var _merge_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./merge.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/merge.js\");\n/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../symbols.js */ \"(action-browser)/./node_modules/@auth/core/lib/symbols.js\");\n\n\n/**\n * Adds `signinUrl` and `callbackUrl` to each provider\n * and deep merge user-defined options.\n */\nfunction parseProviders(params) {\n    const { providerId, config } = params;\n    const url = new URL(config.basePath ?? \"/auth\", params.url.origin);\n    const providers = config.providers.map((p) => {\n        const provider = typeof p === \"function\" ? p() : p;\n        const { options: userOptions, ...defaults } = provider;\n        const id = (userOptions?.id ?? defaults.id);\n        // TODO: Support if properties have different types, e.g. authorization: string or object\n        const merged = (0,_merge_js__WEBPACK_IMPORTED_MODULE_0__.merge)(defaults, userOptions, {\n            signinUrl: `${url}/signin/${id}`,\n            callbackUrl: `${url}/callback/${id}`,\n        });\n        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n            merged.redirectProxyUrl ?? (merged.redirectProxyUrl = userOptions?.redirectProxyUrl ?? config.redirectProxyUrl);\n            const normalized = normalizeOAuth(merged);\n            // We currently don't support redirect proxies for response_mode=form_post\n            if (normalized.authorization?.url.searchParams.get(\"response_mode\") ===\n                \"form_post\") {\n                delete normalized.redirectProxyUrl;\n            }\n            // @ts-expect-error Symbols don't get merged by the `merge` function\n            // so we need to do it manually.\n            normalized[_symbols_js__WEBPACK_IMPORTED_MODULE_1__.customFetch] ?? (normalized[_symbols_js__WEBPACK_IMPORTED_MODULE_1__.customFetch] = userOptions?.[_symbols_js__WEBPACK_IMPORTED_MODULE_1__.customFetch]);\n            return normalized;\n        }\n        return merged;\n    });\n    return {\n        providers,\n        provider: providers.find(({ id }) => id === providerId),\n    };\n}\n// TODO: Also add discovery here, if some endpoints/config are missing.\n// We should return both a client and authorization server config.\nfunction normalizeOAuth(c) {\n    if (c.issuer)\n        c.wellKnown ?? (c.wellKnown = `${c.issuer}/.well-known/openid-configuration`);\n    const authorization = normalizeEndpoint(c.authorization, c.issuer);\n    if (authorization && !authorization.url?.searchParams.has(\"scope\")) {\n        authorization.url.searchParams.set(\"scope\", \"openid profile email\");\n    }\n    const token = normalizeEndpoint(c.token, c.issuer);\n    const userinfo = normalizeEndpoint(c.userinfo, c.issuer);\n    const checks = c.checks ?? [\"pkce\"];\n    if (c.redirectProxyUrl) {\n        if (!checks.includes(\"state\"))\n            checks.push(\"state\");\n        c.redirectProxyUrl = `${c.redirectProxyUrl}/callback/${c.id}`;\n    }\n    return {\n        ...c,\n        authorization,\n        token,\n        checks,\n        userinfo,\n        profile: c.profile ?? defaultProfile,\n        account: c.account ?? defaultAccount,\n    };\n}\n/**\n * Returns basic user profile from the userinfo response/`id_token` claims.\n * The returned `id` will become the `account.providerAccountId`. `user.id`\n * and `account.id` are auto-generated UUID's.\n *\n * The result if this function is used to create the `User` in the database.\n * @see https://authjs.dev/reference/core/adapters#user\n * @see https://openid.net/specs/openid-connect-core-1_0.html#IDToken\n * @see https://openid.net/specs/openid-connect-core-1_0.html#\n */\nconst defaultProfile = (profile) => {\n    return stripUndefined({\n        id: profile.sub ?? profile.id ?? crypto.randomUUID(),\n        name: profile.name ?? profile.nickname ?? profile.preferred_username,\n        email: profile.email,\n        image: profile.picture,\n    });\n};\n/**\n * Returns basic OAuth/OIDC values from the token response.\n * @see https://www.ietf.org/rfc/rfc6749.html#section-5.1\n * @see https://openid.net/specs/openid-connect-core-1_0.html#TokenResponse\n * @see https://authjs.dev/reference/core/adapters#account\n */\nconst defaultAccount = (account) => {\n    return stripUndefined({\n        access_token: account.access_token,\n        id_token: account.id_token,\n        refresh_token: account.refresh_token,\n        expires_at: account.expires_at,\n        scope: account.scope,\n        token_type: account.token_type,\n        session_state: account.session_state,\n    });\n};\nfunction stripUndefined(o) {\n    const result = {};\n    for (const [k, v] of Object.entries(o)) {\n        if (v !== undefined)\n            result[k] = v;\n    }\n    return result;\n}\nfunction normalizeEndpoint(e, issuer) {\n    if (!e && issuer)\n        return;\n    if (typeof e === \"string\") {\n        return { url: new URL(e) };\n    }\n    // If e.url is undefined, it's because the provider config\n    // assumes that we will use the issuer endpoint.\n    // The existence of either e.url or provider.issuer is checked in\n    // assert.ts. We fallback to \"https://authjs.dev\" to be able to pass around\n    // a valid URL even if the user only provided params.\n    // NOTE: This need to be checked when constructing the URL\n    // for the authorization, token and userinfo endpoints.\n    const url = new URL(e?.url ?? \"https://authjs.dev\");\n    if (e?.params != null) {\n        for (let [key, value] of Object.entries(e.params)) {\n            if (key === \"claims\") {\n                value = JSON.stringify(value);\n            }\n            url.searchParams.set(key, String(value));\n        }\n    }\n    return {\n        url,\n        request: e?.request,\n        conform: e?.conform,\n        ...(e?.clientPrivateKey ? { clientPrivateKey: e?.clientPrivateKey } : null),\n    };\n}\nfunction isOIDCProvider(provider) {\n    return provider.type === \"oidc\";\n}\nfunction isOAuth2Provider(provider) {\n    return provider.type === \"oauth\";\n}\n/** Either OAuth 2 or OIDC */\nfunction isOAuthProvider(provider) {\n    return provider.type === \"oauth\" || provider.type === \"oidc\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9wcm92aWRlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW1DO0FBQ1M7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvQ0FBb0M7QUFDcEQ7QUFDQTtBQUNBLHVCQUF1QixnREFBSztBQUM1QiwwQkFBMEIsSUFBSSxVQUFVLEdBQUc7QUFDM0MsNEJBQTRCLElBQUksWUFBWSxHQUFHO0FBQy9DLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvREFBVyxpQkFBaUIsb0RBQVcsa0JBQWtCLG9EQUFXO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esb0NBQW9DLElBQUk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFNBQVM7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsbUJBQW1CLFlBQVksS0FBSztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHdDQUF3QztBQUM1RTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFx1dGlsc1xccHJvdmlkZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1lcmdlIH0gZnJvbSBcIi4vbWVyZ2UuanNcIjtcbmltcG9ydCB7IGN1c3RvbUZldGNoIH0gZnJvbSBcIi4uL3N5bWJvbHMuanNcIjtcbi8qKlxuICogQWRkcyBgc2lnbmluVXJsYCBhbmQgYGNhbGxiYWNrVXJsYCB0byBlYWNoIHByb3ZpZGVyXG4gKiBhbmQgZGVlcCBtZXJnZSB1c2VyLWRlZmluZWQgb3B0aW9ucy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VQcm92aWRlcnMocGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm92aWRlcklkLCBjb25maWcgfSA9IHBhcmFtcztcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGNvbmZpZy5iYXNlUGF0aCA/PyBcIi9hdXRoXCIsIHBhcmFtcy51cmwub3JpZ2luKTtcbiAgICBjb25zdCBwcm92aWRlcnMgPSBjb25maWcucHJvdmlkZXJzLm1hcCgocCkgPT4ge1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHR5cGVvZiBwID09PSBcImZ1bmN0aW9uXCIgPyBwKCkgOiBwO1xuICAgICAgICBjb25zdCB7IG9wdGlvbnM6IHVzZXJPcHRpb25zLCAuLi5kZWZhdWx0cyB9ID0gcHJvdmlkZXI7XG4gICAgICAgIGNvbnN0IGlkID0gKHVzZXJPcHRpb25zPy5pZCA/PyBkZWZhdWx0cy5pZCk7XG4gICAgICAgIC8vIFRPRE86IFN1cHBvcnQgaWYgcHJvcGVydGllcyBoYXZlIGRpZmZlcmVudCB0eXBlcywgZS5nLiBhdXRob3JpemF0aW9uOiBzdHJpbmcgb3Igb2JqZWN0XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlKGRlZmF1bHRzLCB1c2VyT3B0aW9ucywge1xuICAgICAgICAgICAgc2lnbmluVXJsOiBgJHt1cmx9L3NpZ25pbi8ke2lkfWAsXG4gICAgICAgICAgICBjYWxsYmFja1VybDogYCR7dXJsfS9jYWxsYmFjay8ke2lkfWAsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocHJvdmlkZXIudHlwZSA9PT0gXCJvYXV0aFwiIHx8IHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiKSB7XG4gICAgICAgICAgICBtZXJnZWQucmVkaXJlY3RQcm94eVVybCA/PyAobWVyZ2VkLnJlZGlyZWN0UHJveHlVcmwgPSB1c2VyT3B0aW9ucz8ucmVkaXJlY3RQcm94eVVybCA/PyBjb25maWcucmVkaXJlY3RQcm94eVVybCk7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplT0F1dGgobWVyZ2VkKTtcbiAgICAgICAgICAgIC8vIFdlIGN1cnJlbnRseSBkb24ndCBzdXBwb3J0IHJlZGlyZWN0IHByb3hpZXMgZm9yIHJlc3BvbnNlX21vZGU9Zm9ybV9wb3N0XG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZC5hdXRob3JpemF0aW9uPy51cmwuc2VhcmNoUGFyYW1zLmdldChcInJlc3BvbnNlX21vZGVcIikgPT09XG4gICAgICAgICAgICAgICAgXCJmb3JtX3Bvc3RcIikge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBub3JtYWxpemVkLnJlZGlyZWN0UHJveHlVcmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFN5bWJvbHMgZG9uJ3QgZ2V0IG1lcmdlZCBieSB0aGUgYG1lcmdlYCBmdW5jdGlvblxuICAgICAgICAgICAgLy8gc28gd2UgbmVlZCB0byBkbyBpdCBtYW51YWxseS5cbiAgICAgICAgICAgIG5vcm1hbGl6ZWRbY3VzdG9tRmV0Y2hdID8/IChub3JtYWxpemVkW2N1c3RvbUZldGNoXSA9IHVzZXJPcHRpb25zPy5bY3VzdG9tRmV0Y2hdKTtcbiAgICAgICAgICAgIHJldHVybiBub3JtYWxpemVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvdmlkZXJzLFxuICAgICAgICBwcm92aWRlcjogcHJvdmlkZXJzLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09IHByb3ZpZGVySWQpLFxuICAgIH07XG59XG4vLyBUT0RPOiBBbHNvIGFkZCBkaXNjb3ZlcnkgaGVyZSwgaWYgc29tZSBlbmRwb2ludHMvY29uZmlnIGFyZSBtaXNzaW5nLlxuLy8gV2Ugc2hvdWxkIHJldHVybiBib3RoIGEgY2xpZW50IGFuZCBhdXRob3JpemF0aW9uIHNlcnZlciBjb25maWcuXG5mdW5jdGlvbiBub3JtYWxpemVPQXV0aChjKSB7XG4gICAgaWYgKGMuaXNzdWVyKVxuICAgICAgICBjLndlbGxLbm93biA/PyAoYy53ZWxsS25vd24gPSBgJHtjLmlzc3Vlcn0vLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25gKTtcbiAgICBjb25zdCBhdXRob3JpemF0aW9uID0gbm9ybWFsaXplRW5kcG9pbnQoYy5hdXRob3JpemF0aW9uLCBjLmlzc3Vlcik7XG4gICAgaWYgKGF1dGhvcml6YXRpb24gJiYgIWF1dGhvcml6YXRpb24udXJsPy5zZWFyY2hQYXJhbXMuaGFzKFwic2NvcGVcIikpIHtcbiAgICAgICAgYXV0aG9yaXphdGlvbi51cmwuc2VhcmNoUGFyYW1zLnNldChcInNjb3BlXCIsIFwib3BlbmlkIHByb2ZpbGUgZW1haWxcIik7XG4gICAgfVxuICAgIGNvbnN0IHRva2VuID0gbm9ybWFsaXplRW5kcG9pbnQoYy50b2tlbiwgYy5pc3N1ZXIpO1xuICAgIGNvbnN0IHVzZXJpbmZvID0gbm9ybWFsaXplRW5kcG9pbnQoYy51c2VyaW5mbywgYy5pc3N1ZXIpO1xuICAgIGNvbnN0IGNoZWNrcyA9IGMuY2hlY2tzID8/IFtcInBrY2VcIl07XG4gICAgaWYgKGMucmVkaXJlY3RQcm94eVVybCkge1xuICAgICAgICBpZiAoIWNoZWNrcy5pbmNsdWRlcyhcInN0YXRlXCIpKVxuICAgICAgICAgICAgY2hlY2tzLnB1c2goXCJzdGF0ZVwiKTtcbiAgICAgICAgYy5yZWRpcmVjdFByb3h5VXJsID0gYCR7Yy5yZWRpcmVjdFByb3h5VXJsfS9jYWxsYmFjay8ke2MuaWR9YDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uYyxcbiAgICAgICAgYXV0aG9yaXphdGlvbixcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIGNoZWNrcyxcbiAgICAgICAgdXNlcmluZm8sXG4gICAgICAgIHByb2ZpbGU6IGMucHJvZmlsZSA/PyBkZWZhdWx0UHJvZmlsZSxcbiAgICAgICAgYWNjb3VudDogYy5hY2NvdW50ID8/IGRlZmF1bHRBY2NvdW50LFxuICAgIH07XG59XG4vKipcbiAqIFJldHVybnMgYmFzaWMgdXNlciBwcm9maWxlIGZyb20gdGhlIHVzZXJpbmZvIHJlc3BvbnNlL2BpZF90b2tlbmAgY2xhaW1zLlxuICogVGhlIHJldHVybmVkIGBpZGAgd2lsbCBiZWNvbWUgdGhlIGBhY2NvdW50LnByb3ZpZGVyQWNjb3VudElkYC4gYHVzZXIuaWRgXG4gKiBhbmQgYGFjY291bnQuaWRgIGFyZSBhdXRvLWdlbmVyYXRlZCBVVUlEJ3MuXG4gKlxuICogVGhlIHJlc3VsdCBpZiB0aGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIHRoZSBgVXNlcmAgaW4gdGhlIGRhdGFiYXNlLlxuICogQHNlZSBodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUvYWRhcHRlcnMjdXNlclxuICogQHNlZSBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtY29yZS0xXzAuaHRtbCNJRFRva2VuXG4gKiBAc2VlIGh0dHBzOi8vb3BlbmlkLm5ldC9zcGVjcy9vcGVuaWQtY29ubmVjdC1jb3JlLTFfMC5odG1sI1xuICovXG5jb25zdCBkZWZhdWx0UHJvZmlsZSA9IChwcm9maWxlKSA9PiB7XG4gICAgcmV0dXJuIHN0cmlwVW5kZWZpbmVkKHtcbiAgICAgICAgaWQ6IHByb2ZpbGUuc3ViID8/IHByb2ZpbGUuaWQgPz8gY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lID8/IHByb2ZpbGUubmlja25hbWUgPz8gcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUsXG4gICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICBpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuICAgIH0pO1xufTtcbi8qKlxuICogUmV0dXJucyBiYXNpYyBPQXV0aC9PSURDIHZhbHVlcyBmcm9tIHRoZSB0b2tlbiByZXNwb25zZS5cbiAqIEBzZWUgaHR0cHM6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzY3NDkuaHRtbCNzZWN0aW9uLTUuMVxuICogQHNlZSBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtY29yZS0xXzAuaHRtbCNUb2tlblJlc3BvbnNlXG4gKiBAc2VlIGh0dHBzOi8vYXV0aGpzLmRldi9yZWZlcmVuY2UvY29yZS9hZGFwdGVycyNhY2NvdW50XG4gKi9cbmNvbnN0IGRlZmF1bHRBY2NvdW50ID0gKGFjY291bnQpID0+IHtcbiAgICByZXR1cm4gc3RyaXBVbmRlZmluZWQoe1xuICAgICAgICBhY2Nlc3NfdG9rZW46IGFjY291bnQuYWNjZXNzX3Rva2VuLFxuICAgICAgICBpZF90b2tlbjogYWNjb3VudC5pZF90b2tlbixcbiAgICAgICAgcmVmcmVzaF90b2tlbjogYWNjb3VudC5yZWZyZXNoX3Rva2VuLFxuICAgICAgICBleHBpcmVzX2F0OiBhY2NvdW50LmV4cGlyZXNfYXQsXG4gICAgICAgIHNjb3BlOiBhY2NvdW50LnNjb3BlLFxuICAgICAgICB0b2tlbl90eXBlOiBhY2NvdW50LnRva2VuX3R5cGUsXG4gICAgICAgIHNlc3Npb25fc3RhdGU6IGFjY291bnQuc2Vzc2lvbl9zdGF0ZSxcbiAgICB9KTtcbn07XG5mdW5jdGlvbiBzdHJpcFVuZGVmaW5lZChvKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMobykpIHtcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlc3VsdFtrXSA9IHY7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBub3JtYWxpemVFbmRwb2ludChlLCBpc3N1ZXIpIHtcbiAgICBpZiAoIWUgJiYgaXNzdWVyKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB7IHVybDogbmV3IFVSTChlKSB9O1xuICAgIH1cbiAgICAvLyBJZiBlLnVybCBpcyB1bmRlZmluZWQsIGl0J3MgYmVjYXVzZSB0aGUgcHJvdmlkZXIgY29uZmlnXG4gICAgLy8gYXNzdW1lcyB0aGF0IHdlIHdpbGwgdXNlIHRoZSBpc3N1ZXIgZW5kcG9pbnQuXG4gICAgLy8gVGhlIGV4aXN0ZW5jZSBvZiBlaXRoZXIgZS51cmwgb3IgcHJvdmlkZXIuaXNzdWVyIGlzIGNoZWNrZWQgaW5cbiAgICAvLyBhc3NlcnQudHMuIFdlIGZhbGxiYWNrIHRvIFwiaHR0cHM6Ly9hdXRoanMuZGV2XCIgdG8gYmUgYWJsZSB0byBwYXNzIGFyb3VuZFxuICAgIC8vIGEgdmFsaWQgVVJMIGV2ZW4gaWYgdGhlIHVzZXIgb25seSBwcm92aWRlZCBwYXJhbXMuXG4gICAgLy8gTk9URTogVGhpcyBuZWVkIHRvIGJlIGNoZWNrZWQgd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIFVSTFxuICAgIC8vIGZvciB0aGUgYXV0aG9yaXphdGlvbiwgdG9rZW4gYW5kIHVzZXJpbmZvIGVuZHBvaW50cy5cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGU/LnVybCA/PyBcImh0dHBzOi8vYXV0aGpzLmRldlwiKTtcbiAgICBpZiAoZT8ucGFyYW1zICE9IG51bGwpIHtcbiAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGUucGFyYW1zKSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJjbGFpbXNcIikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCBTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB1cmwsXG4gICAgICAgIHJlcXVlc3Q6IGU/LnJlcXVlc3QsXG4gICAgICAgIGNvbmZvcm06IGU/LmNvbmZvcm0sXG4gICAgICAgIC4uLihlPy5jbGllbnRQcml2YXRlS2V5ID8geyBjbGllbnRQcml2YXRlS2V5OiBlPy5jbGllbnRQcml2YXRlS2V5IH0gOiBudWxsKSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzT0lEQ1Byb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgcmV0dXJuIHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzT0F1dGgyUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICByZXR1cm4gcHJvdmlkZXIudHlwZSA9PT0gXCJvYXV0aFwiO1xufVxuLyoqIEVpdGhlciBPQXV0aCAyIG9yIE9JREMgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09BdXRoUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICByZXR1cm4gcHJvdmlkZXIudHlwZSA9PT0gXCJvYXV0aFwiIHx8IHByb3ZpZGVyLnR5cGUgPT09IFwib2lkY1wiO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/providers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/providers.js":
/*!********************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/providers.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ parseProviders),\n/* harmony export */   isOAuth2Provider: () => (/* binding */ isOAuth2Provider),\n/* harmony export */   isOAuthProvider: () => (/* binding */ isOAuthProvider),\n/* harmony export */   isOIDCProvider: () => (/* binding */ isOIDCProvider)\n/* harmony export */ });\n/* harmony import */ var _merge_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./merge.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/merge.js\");\n/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../symbols.js */ \"(rsc)/./node_modules/@auth/core/lib/symbols.js\");\n\n\n/**\n * Adds `signinUrl` and `callbackUrl` to each provider\n * and deep merge user-defined options.\n */\nfunction parseProviders(params) {\n    const { providerId, config } = params;\n    const url = new URL(config.basePath ?? \"/auth\", params.url.origin);\n    const providers = config.providers.map((p) => {\n        const provider = typeof p === \"function\" ? p() : p;\n        const { options: userOptions, ...defaults } = provider;\n        const id = (userOptions?.id ?? defaults.id);\n        // TODO: Support if properties have different types, e.g. authorization: string or object\n        const merged = (0,_merge_js__WEBPACK_IMPORTED_MODULE_0__.merge)(defaults, userOptions, {\n            signinUrl: `${url}/signin/${id}`,\n            callbackUrl: `${url}/callback/${id}`,\n        });\n        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n            merged.redirectProxyUrl ?? (merged.redirectProxyUrl = userOptions?.redirectProxyUrl ?? config.redirectProxyUrl);\n            const normalized = normalizeOAuth(merged);\n            // We currently don't support redirect proxies for response_mode=form_post\n            if (normalized.authorization?.url.searchParams.get(\"response_mode\") ===\n                \"form_post\") {\n                delete normalized.redirectProxyUrl;\n            }\n            // @ts-expect-error Symbols don't get merged by the `merge` function\n            // so we need to do it manually.\n            normalized[_symbols_js__WEBPACK_IMPORTED_MODULE_1__.customFetch] ?? (normalized[_symbols_js__WEBPACK_IMPORTED_MODULE_1__.customFetch] = userOptions?.[_symbols_js__WEBPACK_IMPORTED_MODULE_1__.customFetch]);\n            return normalized;\n        }\n        return merged;\n    });\n    return {\n        providers,\n        provider: providers.find(({ id }) => id === providerId),\n    };\n}\n// TODO: Also add discovery here, if some endpoints/config are missing.\n// We should return both a client and authorization server config.\nfunction normalizeOAuth(c) {\n    if (c.issuer)\n        c.wellKnown ?? (c.wellKnown = `${c.issuer}/.well-known/openid-configuration`);\n    const authorization = normalizeEndpoint(c.authorization, c.issuer);\n    if (authorization && !authorization.url?.searchParams.has(\"scope\")) {\n        authorization.url.searchParams.set(\"scope\", \"openid profile email\");\n    }\n    const token = normalizeEndpoint(c.token, c.issuer);\n    const userinfo = normalizeEndpoint(c.userinfo, c.issuer);\n    const checks = c.checks ?? [\"pkce\"];\n    if (c.redirectProxyUrl) {\n        if (!checks.includes(\"state\"))\n            checks.push(\"state\");\n        c.redirectProxyUrl = `${c.redirectProxyUrl}/callback/${c.id}`;\n    }\n    return {\n        ...c,\n        authorization,\n        token,\n        checks,\n        userinfo,\n        profile: c.profile ?? defaultProfile,\n        account: c.account ?? defaultAccount,\n    };\n}\n/**\n * Returns basic user profile from the userinfo response/`id_token` claims.\n * The returned `id` will become the `account.providerAccountId`. `user.id`\n * and `account.id` are auto-generated UUID's.\n *\n * The result if this function is used to create the `User` in the database.\n * @see https://authjs.dev/reference/core/adapters#user\n * @see https://openid.net/specs/openid-connect-core-1_0.html#IDToken\n * @see https://openid.net/specs/openid-connect-core-1_0.html#\n */\nconst defaultProfile = (profile) => {\n    return stripUndefined({\n        id: profile.sub ?? profile.id ?? crypto.randomUUID(),\n        name: profile.name ?? profile.nickname ?? profile.preferred_username,\n        email: profile.email,\n        image: profile.picture,\n    });\n};\n/**\n * Returns basic OAuth/OIDC values from the token response.\n * @see https://www.ietf.org/rfc/rfc6749.html#section-5.1\n * @see https://openid.net/specs/openid-connect-core-1_0.html#TokenResponse\n * @see https://authjs.dev/reference/core/adapters#account\n */\nconst defaultAccount = (account) => {\n    return stripUndefined({\n        access_token: account.access_token,\n        id_token: account.id_token,\n        refresh_token: account.refresh_token,\n        expires_at: account.expires_at,\n        scope: account.scope,\n        token_type: account.token_type,\n        session_state: account.session_state,\n    });\n};\nfunction stripUndefined(o) {\n    const result = {};\n    for (const [k, v] of Object.entries(o)) {\n        if (v !== undefined)\n            result[k] = v;\n    }\n    return result;\n}\nfunction normalizeEndpoint(e, issuer) {\n    if (!e && issuer)\n        return;\n    if (typeof e === \"string\") {\n        return { url: new URL(e) };\n    }\n    // If e.url is undefined, it's because the provider config\n    // assumes that we will use the issuer endpoint.\n    // The existence of either e.url or provider.issuer is checked in\n    // assert.ts. We fallback to \"https://authjs.dev\" to be able to pass around\n    // a valid URL even if the user only provided params.\n    // NOTE: This need to be checked when constructing the URL\n    // for the authorization, token and userinfo endpoints.\n    const url = new URL(e?.url ?? \"https://authjs.dev\");\n    if (e?.params != null) {\n        for (let [key, value] of Object.entries(e.params)) {\n            if (key === \"claims\") {\n                value = JSON.stringify(value);\n            }\n            url.searchParams.set(key, String(value));\n        }\n    }\n    return {\n        url,\n        request: e?.request,\n        conform: e?.conform,\n        ...(e?.clientPrivateKey ? { clientPrivateKey: e?.clientPrivateKey } : null),\n    };\n}\nfunction isOIDCProvider(provider) {\n    return provider.type === \"oidc\";\n}\nfunction isOAuth2Provider(provider) {\n    return provider.type === \"oauth\";\n}\n/** Either OAuth 2 or OIDC */\nfunction isOAuthProvider(provider) {\n    return provider.type === \"oauth\" || provider.type === \"oidc\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvcHJvdmlkZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFtQztBQUNTO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZixZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0NBQW9DO0FBQ3BEO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQUs7QUFDNUIsMEJBQTBCLElBQUksVUFBVSxHQUFHO0FBQzNDLDRCQUE0QixJQUFJLFlBQVksR0FBRztBQUMvQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0RBQVcsaUJBQWlCLG9EQUFXLGtCQUFrQixvREFBVztBQUMzRjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG9DQUFvQyxJQUFJO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxTQUFTO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG1CQUFtQixZQUFZLEtBQUs7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx3Q0FBd0M7QUFDNUU7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXHByb3ZpZGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZXJnZSB9IGZyb20gXCIuL21lcmdlLmpzXCI7XG5pbXBvcnQgeyBjdXN0b21GZXRjaCB9IGZyb20gXCIuLi9zeW1ib2xzLmpzXCI7XG4vKipcbiAqIEFkZHMgYHNpZ25pblVybGAgYW5kIGBjYWxsYmFja1VybGAgdG8gZWFjaCBwcm92aWRlclxuICogYW5kIGRlZXAgbWVyZ2UgdXNlci1kZWZpbmVkIG9wdGlvbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlUHJvdmlkZXJzKHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvdmlkZXJJZCwgY29uZmlnIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChjb25maWcuYmFzZVBhdGggPz8gXCIvYXV0aFwiLCBwYXJhbXMudXJsLm9yaWdpbik7XG4gICAgY29uc3QgcHJvdmlkZXJzID0gY29uZmlnLnByb3ZpZGVycy5tYXAoKHApID0+IHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0eXBlb2YgcCA9PT0gXCJmdW5jdGlvblwiID8gcCgpIDogcDtcbiAgICAgICAgY29uc3QgeyBvcHRpb25zOiB1c2VyT3B0aW9ucywgLi4uZGVmYXVsdHMgfSA9IHByb3ZpZGVyO1xuICAgICAgICBjb25zdCBpZCA9ICh1c2VyT3B0aW9ucz8uaWQgPz8gZGVmYXVsdHMuaWQpO1xuICAgICAgICAvLyBUT0RPOiBTdXBwb3J0IGlmIHByb3BlcnRpZXMgaGF2ZSBkaWZmZXJlbnQgdHlwZXMsIGUuZy4gYXV0aG9yaXphdGlvbjogc3RyaW5nIG9yIG9iamVjdFxuICAgICAgICBjb25zdCBtZXJnZWQgPSBtZXJnZShkZWZhdWx0cywgdXNlck9wdGlvbnMsIHtcbiAgICAgICAgICAgIHNpZ25pblVybDogYCR7dXJsfS9zaWduaW4vJHtpZH1gLFxuICAgICAgICAgICAgY2FsbGJhY2tVcmw6IGAke3VybH0vY2FsbGJhY2svJHtpZH1gLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHByb3ZpZGVyLnR5cGUgPT09IFwib2F1dGhcIiB8fCBwcm92aWRlci50eXBlID09PSBcIm9pZGNcIikge1xuICAgICAgICAgICAgbWVyZ2VkLnJlZGlyZWN0UHJveHlVcmwgPz8gKG1lcmdlZC5yZWRpcmVjdFByb3h5VXJsID0gdXNlck9wdGlvbnM/LnJlZGlyZWN0UHJveHlVcmwgPz8gY29uZmlnLnJlZGlyZWN0UHJveHlVcmwpO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZU9BdXRoKG1lcmdlZCk7XG4gICAgICAgICAgICAvLyBXZSBjdXJyZW50bHkgZG9uJ3Qgc3VwcG9ydCByZWRpcmVjdCBwcm94aWVzIGZvciByZXNwb25zZV9tb2RlPWZvcm1fcG9zdFxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWQuYXV0aG9yaXphdGlvbj8udXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJyZXNwb25zZV9tb2RlXCIpID09PVxuICAgICAgICAgICAgICAgIFwiZm9ybV9wb3N0XCIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgbm9ybWFsaXplZC5yZWRpcmVjdFByb3h5VXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBTeW1ib2xzIGRvbid0IGdldCBtZXJnZWQgYnkgdGhlIGBtZXJnZWAgZnVuY3Rpb25cbiAgICAgICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gZG8gaXQgbWFudWFsbHkuXG4gICAgICAgICAgICBub3JtYWxpemVkW2N1c3RvbUZldGNoXSA/PyAobm9ybWFsaXplZFtjdXN0b21GZXRjaF0gPSB1c2VyT3B0aW9ucz8uW2N1c3RvbUZldGNoXSk7XG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVyZ2VkO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb3ZpZGVycyxcbiAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVycy5maW5kKCh7IGlkIH0pID0+IGlkID09PSBwcm92aWRlcklkKSxcbiAgICB9O1xufVxuLy8gVE9ETzogQWxzbyBhZGQgZGlzY292ZXJ5IGhlcmUsIGlmIHNvbWUgZW5kcG9pbnRzL2NvbmZpZyBhcmUgbWlzc2luZy5cbi8vIFdlIHNob3VsZCByZXR1cm4gYm90aCBhIGNsaWVudCBhbmQgYXV0aG9yaXphdGlvbiBzZXJ2ZXIgY29uZmlnLlxuZnVuY3Rpb24gbm9ybWFsaXplT0F1dGgoYykge1xuICAgIGlmIChjLmlzc3VlcilcbiAgICAgICAgYy53ZWxsS25vd24gPz8gKGMud2VsbEtub3duID0gYCR7Yy5pc3N1ZXJ9Ly53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uYCk7XG4gICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IG5vcm1hbGl6ZUVuZHBvaW50KGMuYXV0aG9yaXphdGlvbiwgYy5pc3N1ZXIpO1xuICAgIGlmIChhdXRob3JpemF0aW9uICYmICFhdXRob3JpemF0aW9uLnVybD8uc2VhcmNoUGFyYW1zLmhhcyhcInNjb3BlXCIpKSB7XG4gICAgICAgIGF1dGhvcml6YXRpb24udXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzY29wZVwiLCBcIm9wZW5pZCBwcm9maWxlIGVtYWlsXCIpO1xuICAgIH1cbiAgICBjb25zdCB0b2tlbiA9IG5vcm1hbGl6ZUVuZHBvaW50KGMudG9rZW4sIGMuaXNzdWVyKTtcbiAgICBjb25zdCB1c2VyaW5mbyA9IG5vcm1hbGl6ZUVuZHBvaW50KGMudXNlcmluZm8sIGMuaXNzdWVyKTtcbiAgICBjb25zdCBjaGVja3MgPSBjLmNoZWNrcyA/PyBbXCJwa2NlXCJdO1xuICAgIGlmIChjLnJlZGlyZWN0UHJveHlVcmwpIHtcbiAgICAgICAgaWYgKCFjaGVja3MuaW5jbHVkZXMoXCJzdGF0ZVwiKSlcbiAgICAgICAgICAgIGNoZWNrcy5wdXNoKFwic3RhdGVcIik7XG4gICAgICAgIGMucmVkaXJlY3RQcm94eVVybCA9IGAke2MucmVkaXJlY3RQcm94eVVybH0vY2FsbGJhY2svJHtjLmlkfWA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmMsXG4gICAgICAgIGF1dGhvcml6YXRpb24sXG4gICAgICAgIHRva2VuLFxuICAgICAgICBjaGVja3MsXG4gICAgICAgIHVzZXJpbmZvLFxuICAgICAgICBwcm9maWxlOiBjLnByb2ZpbGUgPz8gZGVmYXVsdFByb2ZpbGUsXG4gICAgICAgIGFjY291bnQ6IGMuYWNjb3VudCA/PyBkZWZhdWx0QWNjb3VudCxcbiAgICB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIGJhc2ljIHVzZXIgcHJvZmlsZSBmcm9tIHRoZSB1c2VyaW5mbyByZXNwb25zZS9gaWRfdG9rZW5gIGNsYWltcy5cbiAqIFRoZSByZXR1cm5lZCBgaWRgIHdpbGwgYmVjb21lIHRoZSBgYWNjb3VudC5wcm92aWRlckFjY291bnRJZGAuIGB1c2VyLmlkYFxuICogYW5kIGBhY2NvdW50LmlkYCBhcmUgYXV0by1nZW5lcmF0ZWQgVVVJRCdzLlxuICpcbiAqIFRoZSByZXN1bHQgaWYgdGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgYFVzZXJgIGluIHRoZSBkYXRhYmFzZS5cbiAqIEBzZWUgaHR0cHM6Ly9hdXRoanMuZGV2L3JlZmVyZW5jZS9jb3JlL2FkYXB0ZXJzI3VzZXJcbiAqIEBzZWUgaHR0cHM6Ly9vcGVuaWQubmV0L3NwZWNzL29wZW5pZC1jb25uZWN0LWNvcmUtMV8wLmh0bWwjSURUb2tlblxuICogQHNlZSBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtY29yZS0xXzAuaHRtbCNcbiAqL1xuY29uc3QgZGVmYXVsdFByb2ZpbGUgPSAocHJvZmlsZSkgPT4ge1xuICAgIHJldHVybiBzdHJpcFVuZGVmaW5lZCh7XG4gICAgICAgIGlkOiBwcm9maWxlLnN1YiA/PyBwcm9maWxlLmlkID8/IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSA/PyBwcm9maWxlLm5pY2tuYW1lID8/IHByb2ZpbGUucHJlZmVycmVkX3VzZXJuYW1lLFxuICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgaW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcbiAgICB9KTtcbn07XG4vKipcbiAqIFJldHVybnMgYmFzaWMgT0F1dGgvT0lEQyB2YWx1ZXMgZnJvbSB0aGUgdG9rZW4gcmVzcG9uc2UuXG4gKiBAc2VlIGh0dHBzOi8vd3d3LmlldGYub3JnL3JmYy9yZmM2NzQ5Lmh0bWwjc2VjdGlvbi01LjFcbiAqIEBzZWUgaHR0cHM6Ly9vcGVuaWQubmV0L3NwZWNzL29wZW5pZC1jb25uZWN0LWNvcmUtMV8wLmh0bWwjVG9rZW5SZXNwb25zZVxuICogQHNlZSBodHRwczovL2F1dGhqcy5kZXYvcmVmZXJlbmNlL2NvcmUvYWRhcHRlcnMjYWNjb3VudFxuICovXG5jb25zdCBkZWZhdWx0QWNjb3VudCA9IChhY2NvdW50KSA9PiB7XG4gICAgcmV0dXJuIHN0cmlwVW5kZWZpbmVkKHtcbiAgICAgICAgYWNjZXNzX3Rva2VuOiBhY2NvdW50LmFjY2Vzc190b2tlbixcbiAgICAgICAgaWRfdG9rZW46IGFjY291bnQuaWRfdG9rZW4sXG4gICAgICAgIHJlZnJlc2hfdG9rZW46IGFjY291bnQucmVmcmVzaF90b2tlbixcbiAgICAgICAgZXhwaXJlc19hdDogYWNjb3VudC5leHBpcmVzX2F0LFxuICAgICAgICBzY29wZTogYWNjb3VudC5zY29wZSxcbiAgICAgICAgdG9rZW5fdHlwZTogYWNjb3VudC50b2tlbl90eXBlLFxuICAgICAgICBzZXNzaW9uX3N0YXRlOiBhY2NvdW50LnNlc3Npb25fc3RhdGUsXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gc3RyaXBVbmRlZmluZWQobykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKG8pKSB7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXN1bHRba10gPSB2O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbm9ybWFsaXplRW5kcG9pbnQoZSwgaXNzdWVyKSB7XG4gICAgaWYgKCFlICYmIGlzc3VlcilcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4geyB1cmw6IG5ldyBVUkwoZSkgfTtcbiAgICB9XG4gICAgLy8gSWYgZS51cmwgaXMgdW5kZWZpbmVkLCBpdCdzIGJlY2F1c2UgdGhlIHByb3ZpZGVyIGNvbmZpZ1xuICAgIC8vIGFzc3VtZXMgdGhhdCB3ZSB3aWxsIHVzZSB0aGUgaXNzdWVyIGVuZHBvaW50LlxuICAgIC8vIFRoZSBleGlzdGVuY2Ugb2YgZWl0aGVyIGUudXJsIG9yIHByb3ZpZGVyLmlzc3VlciBpcyBjaGVja2VkIGluXG4gICAgLy8gYXNzZXJ0LnRzLiBXZSBmYWxsYmFjayB0byBcImh0dHBzOi8vYXV0aGpzLmRldlwiIHRvIGJlIGFibGUgdG8gcGFzcyBhcm91bmRcbiAgICAvLyBhIHZhbGlkIFVSTCBldmVuIGlmIHRoZSB1c2VyIG9ubHkgcHJvdmlkZWQgcGFyYW1zLlxuICAgIC8vIE5PVEU6IFRoaXMgbmVlZCB0byBiZSBjaGVja2VkIHdoZW4gY29uc3RydWN0aW5nIHRoZSBVUkxcbiAgICAvLyBmb3IgdGhlIGF1dGhvcml6YXRpb24sIHRva2VuIGFuZCB1c2VyaW5mbyBlbmRwb2ludHMuXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChlPy51cmwgPz8gXCJodHRwczovL2F1dGhqcy5kZXZcIik7XG4gICAgaWYgKGU/LnBhcmFtcyAhPSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhlLnBhcmFtcykpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiY2xhaW1zXCIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXJsLFxuICAgICAgICByZXF1ZXN0OiBlPy5yZXF1ZXN0LFxuICAgICAgICBjb25mb3JtOiBlPy5jb25mb3JtLFxuICAgICAgICAuLi4oZT8uY2xpZW50UHJpdmF0ZUtleSA/IHsgY2xpZW50UHJpdmF0ZUtleTogZT8uY2xpZW50UHJpdmF0ZUtleSB9IDogbnVsbCksXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc09JRENQcm92aWRlcihwcm92aWRlcikge1xuICAgIHJldHVybiBwcm92aWRlci50eXBlID09PSBcIm9pZGNcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc09BdXRoMlByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgcmV0dXJuIHByb3ZpZGVyLnR5cGUgPT09IFwib2F1dGhcIjtcbn1cbi8qKiBFaXRoZXIgT0F1dGggMiBvciBPSURDICovXG5leHBvcnQgZnVuY3Rpb24gaXNPQXV0aFByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgcmV0dXJuIHByb3ZpZGVyLnR5cGUgPT09IFwib2F1dGhcIiB8fCBwcm92aWRlci50eXBlID09PSBcIm9pZGNcIjtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/providers.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/session.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/session.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLoggedInUser: () => (/* binding */ getLoggedInUser)\n/* harmony export */ });\n/**\n * Returns the currently logged in user, if any.\n */\nasync function getLoggedInUser(options, sessionStore) {\n    const { adapter, jwt, session: { strategy: sessionStrategy }, } = options;\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return null;\n    // Try to decode JWT\n    if (sessionStrategy === \"jwt\") {\n        const salt = options.cookies.sessionToken.name;\n        const payload = await jwt.decode({ ...jwt, token: sessionToken, salt });\n        if (payload && payload.sub) {\n            return {\n                id: payload.sub,\n                name: payload.name,\n                email: payload.email,\n                image: payload.picture,\n            };\n        }\n    }\n    else {\n        const userAndSession = await adapter?.getSessionAndUser(sessionToken);\n        if (userAndSession) {\n            return userAndSession.user;\n        }\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy9zZXNzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVkseUJBQXlCLDJCQUEyQixJQUFJO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxtQ0FBbUM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjb2xlcFxcRGVza3RvcFxcZ2l0XFxOZXh0anMtRWNvbW1lcmNlXFxub2RlX21vZHVsZXNcXEBhdXRoXFxjb3JlXFxsaWJcXHV0aWxzXFxzZXNzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudGx5IGxvZ2dlZCBpbiB1c2VyLCBpZiBhbnkuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMb2dnZWRJblVzZXIob3B0aW9ucywgc2Vzc2lvblN0b3JlKSB7XG4gICAgY29uc3QgeyBhZGFwdGVyLCBqd3QsIHNlc3Npb246IHsgc3RyYXRlZ3k6IHNlc3Npb25TdHJhdGVneSB9LCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBzZXNzaW9uU3RvcmUudmFsdWU7XG4gICAgaWYgKCFzZXNzaW9uVG9rZW4pXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIC8vIFRyeSB0byBkZWNvZGUgSldUXG4gICAgaWYgKHNlc3Npb25TdHJhdGVneSA9PT0gXCJqd3RcIikge1xuICAgICAgICBjb25zdCBzYWx0ID0gb3B0aW9ucy5jb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgand0LmRlY29kZSh7IC4uLmp3dCwgdG9rZW46IHNlc3Npb25Ub2tlbiwgc2FsdCB9KTtcbiAgICAgICAgaWYgKHBheWxvYWQgJiYgcGF5bG9hZC5zdWIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IHBheWxvYWQuc3ViLFxuICAgICAgICAgICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCxcbiAgICAgICAgICAgICAgICBpbWFnZTogcGF5bG9hZC5waWN0dXJlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdXNlckFuZFNlc3Npb24gPSBhd2FpdCBhZGFwdGVyPy5nZXRTZXNzaW9uQW5kVXNlcihzZXNzaW9uVG9rZW4pO1xuICAgICAgICBpZiAodXNlckFuZFNlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiB1c2VyQW5kU2Vzc2lvbi51c2VyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/session.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/session.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/session.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLoggedInUser: () => (/* binding */ getLoggedInUser)\n/* harmony export */ });\n/**\n * Returns the currently logged in user, if any.\n */\nasync function getLoggedInUser(options, sessionStore) {\n    const { adapter, jwt, session: { strategy: sessionStrategy }, } = options;\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return null;\n    // Try to decode JWT\n    if (sessionStrategy === \"jwt\") {\n        const salt = options.cookies.sessionToken.name;\n        const payload = await jwt.decode({ ...jwt, token: sessionToken, salt });\n        if (payload && payload.sub) {\n            return {\n                id: payload.sub,\n                name: payload.name,\n                email: payload.email,\n                image: payload.picture,\n            };\n        }\n    }\n    else {\n        const userAndSession = await adapter?.getSessionAndUser(sessionToken);\n        if (userAndSession) {\n            return userAndSession.user;\n        }\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvc2Vzc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLHlCQUF5QiwyQkFBMkIsSUFBSTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsbUNBQW1DO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFx1dGlsc1xcc2Vzc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBsb2dnZWQgaW4gdXNlciwgaWYgYW55LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TG9nZ2VkSW5Vc2VyKG9wdGlvbnMsIHNlc3Npb25TdG9yZSkge1xuICAgIGNvbnN0IHsgYWRhcHRlciwgand0LCBzZXNzaW9uOiB7IHN0cmF0ZWd5OiBzZXNzaW9uU3RyYXRlZ3kgfSwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3Qgc2Vzc2lvblRva2VuID0gc2Vzc2lvblN0b3JlLnZhbHVlO1xuICAgIGlmICghc2Vzc2lvblRva2VuKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAvLyBUcnkgdG8gZGVjb2RlIEpXVFxuICAgIGlmIChzZXNzaW9uU3RyYXRlZ3kgPT09IFwiand0XCIpIHtcbiAgICAgICAgY29uc3Qgc2FsdCA9IG9wdGlvbnMuY29va2llcy5zZXNzaW9uVG9rZW4ubmFtZTtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGp3dC5kZWNvZGUoeyAuLi5qd3QsIHRva2VuOiBzZXNzaW9uVG9rZW4sIHNhbHQgfSk7XG4gICAgICAgIGlmIChwYXlsb2FkICYmIHBheWxvYWQuc3ViKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBwYXlsb2FkLnN1YixcbiAgICAgICAgICAgICAgICBuYW1lOiBwYXlsb2FkLm5hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHBheWxvYWQucGljdHVyZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHVzZXJBbmRTZXNzaW9uID0gYXdhaXQgYWRhcHRlcj8uZ2V0U2Vzc2lvbkFuZFVzZXIoc2Vzc2lvblRva2VuKTtcbiAgICAgICAgaWYgKHVzZXJBbmRTZXNzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlckFuZFNlc3Npb24udXNlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/session.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/web.js":
/*!**************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/web.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createHash: () => (/* binding */ createHash),\n/* harmony export */   parseActionAndProviderId: () => (/* binding */ parseActionAndProviderId),\n/* harmony export */   randomString: () => (/* binding */ randomString),\n/* harmony export */   toInternalRequest: () => (/* binding */ toInternalRequest),\n/* harmony export */   toRequest: () => (/* binding */ toRequest),\n/* harmony export */   toResponse: () => (/* binding */ toResponse)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"(action-browser)/./node_modules/cookie/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/logger.js\");\n/* harmony import */ var _actions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/actions.js\");\n\n\n\n\nasync function getBody(req) {\n    if (!(\"body\" in req) || !req.body || req.method !== \"POST\")\n        return;\n    const contentType = req.headers.get(\"content-type\");\n    if (contentType?.includes(\"application/json\")) {\n        return await req.json();\n    }\n    else if (contentType?.includes(\"application/x-www-form-urlencoded\")) {\n        const params = new URLSearchParams(await req.text());\n        return Object.fromEntries(params);\n    }\n}\nasync function toInternalRequest(req, config) {\n    try {\n        if (req.method !== \"GET\" && req.method !== \"POST\")\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(\"Only GET and POST requests are supported\");\n        // Defaults are usually set in the `init` function, but this is needed below\n        config.basePath ?? (config.basePath = \"/auth\");\n        const url = new URL(req.url);\n        const { action, providerId } = parseActionAndProviderId(url.pathname, config.basePath);\n        return {\n            url,\n            action,\n            providerId,\n            method: req.method,\n            headers: Object.fromEntries(req.headers),\n            body: req.body ? await getBody(req) : undefined,\n            cookies: (0,cookie__WEBPACK_IMPORTED_MODULE_0__.parse)(req.headers.get(\"cookie\") ?? \"\") ?? {},\n            error: url.searchParams.get(\"error\") ?? undefined,\n            query: Object.fromEntries(url.searchParams),\n        };\n    }\n    catch (e) {\n        const logger = (0,_logger_js__WEBPACK_IMPORTED_MODULE_2__.setLogger)(config);\n        logger.error(e);\n        logger.debug(\"request\", req);\n    }\n}\nfunction toRequest(request) {\n    return new Request(request.url, {\n        headers: request.headers,\n        method: request.method,\n        body: request.method === \"POST\"\n            ? JSON.stringify(request.body ?? {})\n            : undefined,\n    });\n}\nfunction toResponse(res) {\n    const headers = new Headers(res.headers);\n    res.cookies?.forEach((cookie) => {\n        const { name, value, options } = cookie;\n        const cookieHeader = (0,cookie__WEBPACK_IMPORTED_MODULE_0__.serialize)(name, value, options);\n        if (headers.has(\"Set-Cookie\"))\n            headers.append(\"Set-Cookie\", cookieHeader);\n        else\n            headers.set(\"Set-Cookie\", cookieHeader);\n    });\n    let body = res.body;\n    if (headers.get(\"content-type\") === \"application/json\")\n        body = JSON.stringify(res.body);\n    else if (headers.get(\"content-type\") === \"application/x-www-form-urlencoded\")\n        body = new URLSearchParams(res.body).toString();\n    const status = res.redirect ? 302 : (res.status ?? 200);\n    const response = new Response(body, { headers, status });\n    if (res.redirect)\n        response.headers.set(\"Location\", res.redirect);\n    return response;\n}\n/** Web compatible method to create a hash, using SHA256 */\nasync function createHash(message) {\n    const data = new TextEncoder().encode(message);\n    const hash = await crypto.subtle.digest(\"SHA-256\", data);\n    return Array.from(new Uint8Array(hash))\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\")\n        .toString();\n}\n/** Web compatible method to create a random string of a given length */\nfunction randomString(size) {\n    const i2hex = (i) => (\"0\" + i.toString(16)).slice(-2);\n    const r = (a, i) => a + i2hex(i);\n    const bytes = crypto.getRandomValues(new Uint8Array(size));\n    return Array.from(bytes).reduce(r, \"\");\n}\n/** @internal Parse the action and provider id from a URL pathname. */\nfunction parseActionAndProviderId(pathname, base) {\n    const a = pathname.match(new RegExp(`^${base}(.+)`));\n    if (a === null)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(`Cannot parse action at ${pathname}`);\n    const actionAndProviderId = a.at(-1);\n    const b = actionAndProviderId.replace(/^\\//, \"\").split(\"/\").filter(Boolean);\n    if (b.length !== 1 && b.length !== 2)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(`Cannot parse action at ${pathname}`);\n    const [action, providerId] = b;\n    if (!(0,_actions_js__WEBPACK_IMPORTED_MODULE_3__.isAuthAction)(action))\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(`Cannot parse action at ${pathname}`);\n    if (providerId &&\n        ![\"signin\", \"callback\", \"webauthn-options\"].includes(action))\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(`Cannot parse action at ${pathname}`);\n    return { action, providerId };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy93ZWIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF5RDtBQUNUO0FBQ1I7QUFDSTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxzQkFBc0IscURBQWE7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFCQUFxQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw2Q0FBVyx1Q0FBdUM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixxREFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQSxnQkFBZ0IsdUJBQXVCO0FBQ3ZDLDZCQUE2QixpREFBUztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsaUJBQWlCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsNENBQTRDLEtBQUs7QUFDakQ7QUFDQSxrQkFBa0IscURBQWEsMkJBQTJCLFNBQVM7QUFDbkU7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFhLDJCQUEyQixTQUFTO0FBQ25FO0FBQ0EsU0FBUyx5REFBWTtBQUNyQixrQkFBa0IscURBQWEsMkJBQTJCLFNBQVM7QUFDbkU7QUFDQTtBQUNBLGtCQUFrQixxREFBYSwyQkFBMkIsU0FBUztBQUNuRSxhQUFhO0FBQ2IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFx1dGlsc1xcd2ViLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlIGFzIHBhcnNlQ29va2llLCBzZXJpYWxpemUgfSBmcm9tIFwiY29va2llXCI7XG5pbXBvcnQgeyBVbmtub3duQWN0aW9uIH0gZnJvbSBcIi4uLy4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgc2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLmpzXCI7XG5pbXBvcnQgeyBpc0F1dGhBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25zLmpzXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRCb2R5KHJlcSkge1xuICAgIGlmICghKFwiYm9keVwiIGluIHJlcSkgfHwgIXJlcS5ib2R5IHx8IHJlcS5tZXRob2QgIT09IFwiUE9TVFwiKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgY29udGVudFR5cGUgPSByZXEuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik7XG4gICAgaWYgKGNvbnRlbnRUeXBlPy5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlcS5qc29uKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbnRlbnRUeXBlPy5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGF3YWl0IHJlcS50ZXh0KCkpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKHBhcmFtcyk7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvSW50ZXJuYWxSZXF1ZXN0KHJlcSwgY29uZmlnKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHJlcS5tZXRob2QgIT09IFwiR0VUXCIgJiYgcmVxLm1ldGhvZCAhPT0gXCJQT1NUXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5rbm93bkFjdGlvbihcIk9ubHkgR0VUIGFuZCBQT1NUIHJlcXVlc3RzIGFyZSBzdXBwb3J0ZWRcIik7XG4gICAgICAgIC8vIERlZmF1bHRzIGFyZSB1c3VhbGx5IHNldCBpbiB0aGUgYGluaXRgIGZ1bmN0aW9uLCBidXQgdGhpcyBpcyBuZWVkZWQgYmVsb3dcbiAgICAgICAgY29uZmlnLmJhc2VQYXRoID8/IChjb25maWcuYmFzZVBhdGggPSBcIi9hdXRoXCIpO1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgICAgICBjb25zdCB7IGFjdGlvbiwgcHJvdmlkZXJJZCB9ID0gcGFyc2VBY3Rpb25BbmRQcm92aWRlcklkKHVybC5wYXRobmFtZSwgY29uZmlnLmJhc2VQYXRoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGFjdGlvbixcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXG4gICAgICAgICAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgICAgICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMocmVxLmhlYWRlcnMpLFxuICAgICAgICAgICAgYm9keTogcmVxLmJvZHkgPyBhd2FpdCBnZXRCb2R5KHJlcSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb29raWVzOiBwYXJzZUNvb2tpZShyZXEuaGVhZGVycy5nZXQoXCJjb29raWVcIikgPz8gXCJcIikgPz8ge30sXG4gICAgICAgICAgICBlcnJvcjogdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvclwiKSA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBxdWVyeTogT2JqZWN0LmZyb21FbnRyaWVzKHVybC5zZWFyY2hQYXJhbXMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBsb2dnZXIgPSBzZXRMb2dnZXIoY29uZmlnKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJyZXF1ZXN0XCIsIHJlcSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHRvUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHJlcXVlc3QudXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHJlcXVlc3QuaGVhZGVycyxcbiAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcbiAgICAgICAgYm9keTogcmVxdWVzdC5tZXRob2QgPT09IFwiUE9TVFwiXG4gICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QuYm9keSA/PyB7fSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRvUmVzcG9uc2UocmVzKSB7XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlcy5oZWFkZXJzKTtcbiAgICByZXMuY29va2llcz8uZm9yRWFjaCgoY29va2llKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSA9IGNvb2tpZTtcbiAgICAgICAgY29uc3QgY29va2llSGVhZGVyID0gc2VyaWFsaXplKG5hbWUsIHZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGhlYWRlcnMuaGFzKFwiU2V0LUNvb2tpZVwiKSlcbiAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiU2V0LUNvb2tpZVwiLCBjb29raWVIZWFkZXIpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBoZWFkZXJzLnNldChcIlNldC1Db29raWVcIiwgY29va2llSGVhZGVyKTtcbiAgICB9KTtcbiAgICBsZXQgYm9keSA9IHJlcy5ib2R5O1xuICAgIGlmIChoZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpXG4gICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeShyZXMuYm9keSk7XG4gICAgZWxzZSBpZiAoaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikgPT09IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpXG4gICAgICAgIGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHJlcy5ib2R5KS50b1N0cmluZygpO1xuICAgIGNvbnN0IHN0YXR1cyA9IHJlcy5yZWRpcmVjdCA/IDMwMiA6IChyZXMuc3RhdHVzID8/IDIwMCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoYm9keSwgeyBoZWFkZXJzLCBzdGF0dXMgfSk7XG4gICAgaWYgKHJlcy5yZWRpcmVjdClcbiAgICAgICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoXCJMb2NhdGlvblwiLCByZXMucmVkaXJlY3QpO1xuICAgIHJldHVybiByZXNwb25zZTtcbn1cbi8qKiBXZWIgY29tcGF0aWJsZSBtZXRob2QgdG8gY3JlYXRlIGEgaGFzaCwgdXNpbmcgU0hBMjU2ICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlSGFzaChtZXNzYWdlKSB7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShtZXNzYWdlKTtcbiAgICBjb25zdCBoYXNoID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoXCJTSEEtMjU2XCIsIGRhdGEpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2gpKVxuICAgICAgICAubWFwKChiKSA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikpXG4gICAgICAgIC5qb2luKFwiXCIpXG4gICAgICAgIC50b1N0cmluZygpO1xufVxuLyoqIFdlYiBjb21wYXRpYmxlIG1ldGhvZCB0byBjcmVhdGUgYSByYW5kb20gc3RyaW5nIG9mIGEgZ2l2ZW4gbGVuZ3RoICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tU3RyaW5nKHNpemUpIHtcbiAgICBjb25zdCBpMmhleCA9IChpKSA9PiAoXCIwXCIgKyBpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICAgIGNvbnN0IHIgPSAoYSwgaSkgPT4gYSArIGkyaGV4KGkpO1xuICAgIGNvbnN0IGJ5dGVzID0gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheShzaXplKSk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oYnl0ZXMpLnJlZHVjZShyLCBcIlwiKTtcbn1cbi8qKiBAaW50ZXJuYWwgUGFyc2UgdGhlIGFjdGlvbiBhbmQgcHJvdmlkZXIgaWQgZnJvbSBhIFVSTCBwYXRobmFtZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFjdGlvbkFuZFByb3ZpZGVySWQocGF0aG5hbWUsIGJhc2UpIHtcbiAgICBjb25zdCBhID0gcGF0aG5hbWUubWF0Y2gobmV3IFJlZ0V4cChgXiR7YmFzZX0oLispYCkpO1xuICAgIGlmIChhID09PSBudWxsKVxuICAgICAgICB0aHJvdyBuZXcgVW5rbm93bkFjdGlvbihgQ2Fubm90IHBhcnNlIGFjdGlvbiBhdCAke3BhdGhuYW1lfWApO1xuICAgIGNvbnN0IGFjdGlvbkFuZFByb3ZpZGVySWQgPSBhLmF0KC0xKTtcbiAgICBjb25zdCBiID0gYWN0aW9uQW5kUHJvdmlkZXJJZC5yZXBsYWNlKC9eXFwvLywgXCJcIikuc3BsaXQoXCIvXCIpLmZpbHRlcihCb29sZWFuKTtcbiAgICBpZiAoYi5sZW5ndGggIT09IDEgJiYgYi5sZW5ndGggIT09IDIpXG4gICAgICAgIHRocm93IG5ldyBVbmtub3duQWN0aW9uKGBDYW5ub3QgcGFyc2UgYWN0aW9uIGF0ICR7cGF0aG5hbWV9YCk7XG4gICAgY29uc3QgW2FjdGlvbiwgcHJvdmlkZXJJZF0gPSBiO1xuICAgIGlmICghaXNBdXRoQWN0aW9uKGFjdGlvbikpXG4gICAgICAgIHRocm93IG5ldyBVbmtub3duQWN0aW9uKGBDYW5ub3QgcGFyc2UgYWN0aW9uIGF0ICR7cGF0aG5hbWV9YCk7XG4gICAgaWYgKHByb3ZpZGVySWQgJiZcbiAgICAgICAgIVtcInNpZ25pblwiLCBcImNhbGxiYWNrXCIsIFwid2ViYXV0aG4tb3B0aW9uc1wiXS5pbmNsdWRlcyhhY3Rpb24pKVxuICAgICAgICB0aHJvdyBuZXcgVW5rbm93bkFjdGlvbihgQ2Fubm90IHBhcnNlIGFjdGlvbiBhdCAke3BhdGhuYW1lfWApO1xuICAgIHJldHVybiB7IGFjdGlvbiwgcHJvdmlkZXJJZCB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/web.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/web.js":
/*!**************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/web.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createHash: () => (/* binding */ createHash),\n/* harmony export */   parseActionAndProviderId: () => (/* binding */ parseActionAndProviderId),\n/* harmony export */   randomString: () => (/* binding */ randomString),\n/* harmony export */   toInternalRequest: () => (/* binding */ toInternalRequest),\n/* harmony export */   toRequest: () => (/* binding */ toRequest),\n/* harmony export */   toResponse: () => (/* binding */ toResponse)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/logger.js\");\n/* harmony import */ var _actions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/actions.js\");\n\n\n\n\nasync function getBody(req) {\n    if (!(\"body\" in req) || !req.body || req.method !== \"POST\")\n        return;\n    const contentType = req.headers.get(\"content-type\");\n    if (contentType?.includes(\"application/json\")) {\n        return await req.json();\n    }\n    else if (contentType?.includes(\"application/x-www-form-urlencoded\")) {\n        const params = new URLSearchParams(await req.text());\n        return Object.fromEntries(params);\n    }\n}\nasync function toInternalRequest(req, config) {\n    try {\n        if (req.method !== \"GET\" && req.method !== \"POST\")\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(\"Only GET and POST requests are supported\");\n        // Defaults are usually set in the `init` function, but this is needed below\n        config.basePath ?? (config.basePath = \"/auth\");\n        const url = new URL(req.url);\n        const { action, providerId } = parseActionAndProviderId(url.pathname, config.basePath);\n        return {\n            url,\n            action,\n            providerId,\n            method: req.method,\n            headers: Object.fromEntries(req.headers),\n            body: req.body ? await getBody(req) : undefined,\n            cookies: (0,cookie__WEBPACK_IMPORTED_MODULE_0__.parse)(req.headers.get(\"cookie\") ?? \"\") ?? {},\n            error: url.searchParams.get(\"error\") ?? undefined,\n            query: Object.fromEntries(url.searchParams),\n        };\n    }\n    catch (e) {\n        const logger = (0,_logger_js__WEBPACK_IMPORTED_MODULE_2__.setLogger)(config);\n        logger.error(e);\n        logger.debug(\"request\", req);\n    }\n}\nfunction toRequest(request) {\n    return new Request(request.url, {\n        headers: request.headers,\n        method: request.method,\n        body: request.method === \"POST\"\n            ? JSON.stringify(request.body ?? {})\n            : undefined,\n    });\n}\nfunction toResponse(res) {\n    const headers = new Headers(res.headers);\n    res.cookies?.forEach((cookie) => {\n        const { name, value, options } = cookie;\n        const cookieHeader = (0,cookie__WEBPACK_IMPORTED_MODULE_0__.serialize)(name, value, options);\n        if (headers.has(\"Set-Cookie\"))\n            headers.append(\"Set-Cookie\", cookieHeader);\n        else\n            headers.set(\"Set-Cookie\", cookieHeader);\n    });\n    let body = res.body;\n    if (headers.get(\"content-type\") === \"application/json\")\n        body = JSON.stringify(res.body);\n    else if (headers.get(\"content-type\") === \"application/x-www-form-urlencoded\")\n        body = new URLSearchParams(res.body).toString();\n    const status = res.redirect ? 302 : (res.status ?? 200);\n    const response = new Response(body, { headers, status });\n    if (res.redirect)\n        response.headers.set(\"Location\", res.redirect);\n    return response;\n}\n/** Web compatible method to create a hash, using SHA256 */\nasync function createHash(message) {\n    const data = new TextEncoder().encode(message);\n    const hash = await crypto.subtle.digest(\"SHA-256\", data);\n    return Array.from(new Uint8Array(hash))\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\")\n        .toString();\n}\n/** Web compatible method to create a random string of a given length */\nfunction randomString(size) {\n    const i2hex = (i) => (\"0\" + i.toString(16)).slice(-2);\n    const r = (a, i) => a + i2hex(i);\n    const bytes = crypto.getRandomValues(new Uint8Array(size));\n    return Array.from(bytes).reduce(r, \"\");\n}\n/** @internal Parse the action and provider id from a URL pathname. */\nfunction parseActionAndProviderId(pathname, base) {\n    const a = pathname.match(new RegExp(`^${base}(.+)`));\n    if (a === null)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(`Cannot parse action at ${pathname}`);\n    const actionAndProviderId = a.at(-1);\n    const b = actionAndProviderId.replace(/^\\//, \"\").split(\"/\").filter(Boolean);\n    if (b.length !== 1 && b.length !== 2)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(`Cannot parse action at ${pathname}`);\n    const [action, providerId] = b;\n    if (!(0,_actions_js__WEBPACK_IMPORTED_MODULE_3__.isAuthAction)(action))\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(`Cannot parse action at ${pathname}`);\n    if (providerId &&\n        ![\"signin\", \"callback\", \"webauthn-options\"].includes(action))\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnknownAction(`Cannot parse action at ${pathname}`);\n    return { action, providerId };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvd2ViLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDVDtBQUNSO0FBQ0k7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0Esc0JBQXNCLHFEQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsNkNBQVcsdUNBQXVDO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscURBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0EsZ0JBQWdCLHVCQUF1QjtBQUN2Qyw2QkFBNkIsaURBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGlCQUFpQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDRDQUE0QyxLQUFLO0FBQ2pEO0FBQ0Esa0JBQWtCLHFEQUFhLDJCQUEyQixTQUFTO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxREFBYSwyQkFBMkIsU0FBUztBQUNuRTtBQUNBLFNBQVMseURBQVk7QUFDckIsa0JBQWtCLHFEQUFhLDJCQUEyQixTQUFTO0FBQ25FO0FBQ0E7QUFDQSxrQkFBa0IscURBQWEsMkJBQTJCLFNBQVM7QUFDbkUsYUFBYTtBQUNiIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXHdlYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZSBhcyBwYXJzZUNvb2tpZSwgc2VyaWFsaXplIH0gZnJvbSBcImNvb2tpZVwiO1xuaW1wb3J0IHsgVW5rbm93bkFjdGlvbiB9IGZyb20gXCIuLi8uLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHNldExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgaXNBdXRoQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9ucy5qc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0Qm9keShyZXEpIHtcbiAgICBpZiAoIShcImJvZHlcIiBpbiByZXEpIHx8ICFyZXEuYm9keSB8fCByZXEubWV0aG9kICE9PSBcIlBPU1RcIilcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVxLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpO1xuICAgIGlmIChjb250ZW50VHlwZT8uaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXEuanNvbigpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250ZW50VHlwZT8uaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhhd2FpdCByZXEudGV4dCgpKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhwYXJhbXMpO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b0ludGVybmFsUmVxdWVzdChyZXEsIGNvbmZpZykge1xuICAgIHRyeSB7XG4gICAgICAgIGlmIChyZXEubWV0aG9kICE9PSBcIkdFVFwiICYmIHJlcS5tZXRob2QgIT09IFwiUE9TVFwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFVua25vd25BY3Rpb24oXCJPbmx5IEdFVCBhbmQgUE9TVCByZXF1ZXN0cyBhcmUgc3VwcG9ydGVkXCIpO1xuICAgICAgICAvLyBEZWZhdWx0cyBhcmUgdXN1YWxseSBzZXQgaW4gdGhlIGBpbml0YCBmdW5jdGlvbiwgYnV0IHRoaXMgaXMgbmVlZGVkIGJlbG93XG4gICAgICAgIGNvbmZpZy5iYXNlUGF0aCA/PyAoY29uZmlnLmJhc2VQYXRoID0gXCIvYXV0aFwiKTtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICAgICAgY29uc3QgeyBhY3Rpb24sIHByb3ZpZGVySWQgfSA9IHBhcnNlQWN0aW9uQW5kUHJvdmlkZXJJZCh1cmwucGF0aG5hbWUsIGNvbmZpZy5iYXNlUGF0aCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICAgICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgICAgICAgICAgaGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlcS5oZWFkZXJzKSxcbiAgICAgICAgICAgIGJvZHk6IHJlcS5ib2R5ID8gYXdhaXQgZ2V0Qm9keShyZXEpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29va2llczogcGFyc2VDb29raWUocmVxLmhlYWRlcnMuZ2V0KFwiY29va2llXCIpID8/IFwiXCIpID8/IHt9LFxuICAgICAgICAgICAgZXJyb3I6IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiZXJyb3JcIikgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgcXVlcnk6IE9iamVjdC5mcm9tRW50cmllcyh1cmwuc2VhcmNoUGFyYW1zKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgbG9nZ2VyID0gc2V0TG9nZ2VyKGNvbmZpZyk7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwicmVxdWVzdFwiLCByZXEpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB0b1JlcXVlc3QocmVxdWVzdCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdChyZXF1ZXN0LnVybCwge1xuICAgICAgICBoZWFkZXJzOiByZXF1ZXN0LmhlYWRlcnMsXG4gICAgICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG4gICAgICAgIGJvZHk6IHJlcXVlc3QubWV0aG9kID09PSBcIlBPU1RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShyZXF1ZXN0LmJvZHkgPz8ge30pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0b1Jlc3BvbnNlKHJlcykge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyhyZXMuaGVhZGVycyk7XG4gICAgcmVzLmNvb2tpZXM/LmZvckVhY2goKGNvb2tpZSkgPT4ge1xuICAgICAgICBjb25zdCB7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0gPSBjb29raWU7XG4gICAgICAgIGNvbnN0IGNvb2tpZUhlYWRlciA9IHNlcmlhbGl6ZShuYW1lLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChoZWFkZXJzLmhhcyhcIlNldC1Db29raWVcIikpXG4gICAgICAgICAgICBoZWFkZXJzLmFwcGVuZChcIlNldC1Db29raWVcIiwgY29va2llSGVhZGVyKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaGVhZGVycy5zZXQoXCJTZXQtQ29va2llXCIsIGNvb2tpZUhlYWRlcik7XG4gICAgfSk7XG4gICAgbGV0IGJvZHkgPSByZXMuYm9keTtcbiAgICBpZiAoaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikgPT09IFwiYXBwbGljYXRpb24vanNvblwiKVxuICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkocmVzLmJvZHkpO1xuICAgIGVsc2UgaWYgKGhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpID09PSBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKVxuICAgICAgICBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhyZXMuYm9keSkudG9TdHJpbmcoKTtcbiAgICBjb25zdCBzdGF0dXMgPSByZXMucmVkaXJlY3QgPyAzMDIgOiAocmVzLnN0YXR1cyA/PyAyMDApO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKGJvZHksIHsgaGVhZGVycywgc3RhdHVzIH0pO1xuICAgIGlmIChyZXMucmVkaXJlY3QpXG4gICAgICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFwiTG9jYXRpb25cIiwgcmVzLnJlZGlyZWN0KTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG4vKiogV2ViIGNvbXBhdGlibGUgbWV0aG9kIHRvIGNyZWF0ZSBhIGhhc2gsIHVzaW5nIFNIQTI1NiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUhhc2gobWVzc2FnZSkge1xuICAgIGNvbnN0IGRhdGEgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUobWVzc2FnZSk7XG4gICAgY29uc3QgaGFzaCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTI1NlwiLCBkYXRhKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShoYXNoKSlcbiAgICAgICAgLm1hcCgoYikgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpKVxuICAgICAgICAuam9pbihcIlwiKVxuICAgICAgICAudG9TdHJpbmcoKTtcbn1cbi8qKiBXZWIgY29tcGF0aWJsZSBtZXRob2QgdG8gY3JlYXRlIGEgcmFuZG9tIHN0cmluZyBvZiBhIGdpdmVuIGxlbmd0aCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbVN0cmluZyhzaXplKSB7XG4gICAgY29uc3QgaTJoZXggPSAoaSkgPT4gKFwiMFwiICsgaS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICBjb25zdCByID0gKGEsIGkpID0+IGEgKyBpMmhleChpKTtcbiAgICBjb25zdCBieXRlcyA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoc2l6ZSkpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKGJ5dGVzKS5yZWR1Y2UociwgXCJcIik7XG59XG4vKiogQGludGVybmFsIFBhcnNlIHRoZSBhY3Rpb24gYW5kIHByb3ZpZGVyIGlkIGZyb20gYSBVUkwgcGF0aG5hbWUuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBY3Rpb25BbmRQcm92aWRlcklkKHBhdGhuYW1lLCBiYXNlKSB7XG4gICAgY29uc3QgYSA9IHBhdGhuYW1lLm1hdGNoKG5ldyBSZWdFeHAoYF4ke2Jhc2V9KC4rKWApKTtcbiAgICBpZiAoYSA9PT0gbnVsbClcbiAgICAgICAgdGhyb3cgbmV3IFVua25vd25BY3Rpb24oYENhbm5vdCBwYXJzZSBhY3Rpb24gYXQgJHtwYXRobmFtZX1gKTtcbiAgICBjb25zdCBhY3Rpb25BbmRQcm92aWRlcklkID0gYS5hdCgtMSk7XG4gICAgY29uc3QgYiA9IGFjdGlvbkFuZFByb3ZpZGVySWQucmVwbGFjZSgvXlxcLy8sIFwiXCIpLnNwbGl0KFwiL1wiKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKGIubGVuZ3RoICE9PSAxICYmIGIubGVuZ3RoICE9PSAyKVxuICAgICAgICB0aHJvdyBuZXcgVW5rbm93bkFjdGlvbihgQ2Fubm90IHBhcnNlIGFjdGlvbiBhdCAke3BhdGhuYW1lfWApO1xuICAgIGNvbnN0IFthY3Rpb24sIHByb3ZpZGVySWRdID0gYjtcbiAgICBpZiAoIWlzQXV0aEFjdGlvbihhY3Rpb24pKVxuICAgICAgICB0aHJvdyBuZXcgVW5rbm93bkFjdGlvbihgQ2Fubm90IHBhcnNlIGFjdGlvbiBhdCAke3BhdGhuYW1lfWApO1xuICAgIGlmIChwcm92aWRlcklkICYmXG4gICAgICAgICFbXCJzaWduaW5cIiwgXCJjYWxsYmFja1wiLCBcIndlYmF1dGhuLW9wdGlvbnNcIl0uaW5jbHVkZXMoYWN0aW9uKSlcbiAgICAgICAgdGhyb3cgbmV3IFVua25vd25BY3Rpb24oYENhbm5vdCBwYXJzZSBhY3Rpb24gYXQgJHtwYXRobmFtZX1gKTtcbiAgICByZXR1cm4geyBhY3Rpb24sIHByb3ZpZGVySWQgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/web.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/webauthn-client.js":
/*!**************************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/webauthn-client.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   webauthnScript: () => (/* binding */ webauthnScript)\n/* harmony export */ });\n//@ts-check\n// Declare a SimpleWebAuthnBrowser variable as part of \"window\"\n/** @typedef {\"authenticate\"} WebAuthnAuthenticate */\n/** @typedef {\"register\"} WebAuthnRegister */\n/** @typedef {WebAuthnRegister | WebAuthnAuthenticate} WebAuthnOptionsAction */\n/**\n * @template {WebAuthnOptionsAction} T\n * @typedef {T extends WebAuthnAuthenticate ?\n *  { options: import(\"@simplewebauthn/types\").PublicKeyCredentialRequestOptionsJSON; action: \"authenticate\" } :\n *  T extends WebAuthnRegister ?\n *  { options: import(\"@simplewebauthn/types\").PublicKeyCredentialCreationOptionsJSON; action: \"register\" } :\n * never\n * } WebAuthnOptionsReturn\n */\n/**\n * webauthnScript is the client-side script that handles the webauthn form\n *\n * @param {string} authURL is the URL of the auth API\n * @param {string} providerID is the ID of the webauthn provider\n */\nasync function webauthnScript(authURL, providerID) {\n    /** @type {typeof import(\"@simplewebauthn/browser\")} */\n    // @ts-ignore\n    const WebAuthnBrowser = window.SimpleWebAuthnBrowser;\n    /**\n     * Fetch webauthn options from the server\n     *\n     * @template {WebAuthnOptionsAction} T\n     * @param {T | undefined} action action to fetch options for\n     * @returns {Promise<WebAuthnOptionsReturn<T> | undefined>}\n     */\n    async function fetchOptions(action) {\n        // Create the options URL with the action and query parameters\n        const url = new URL(`${authURL}/webauthn-options/${providerID}`);\n        if (action)\n            url.searchParams.append(\"action\", action);\n        const formFields = getFormFields();\n        formFields.forEach((field) => {\n            url.searchParams.append(field.name, field.value);\n        });\n        const res = await fetch(url);\n        if (!res.ok) {\n            console.error(\"Failed to fetch options\", res);\n            return;\n        }\n        return res.json();\n    }\n    /**\n     * Get the webauthn form from the page\n     *\n     * @returns {HTMLFormElement}\n     */\n    function getForm() {\n        const formID = `#${providerID}-form`;\n        /** @type {HTMLFormElement | null} */\n        const form = document.querySelector(formID);\n        if (!form)\n            throw new Error(`Form '${formID}' not found`);\n        return form;\n    }\n    /**\n     * Get formFields from the form\n     *\n     * @returns {HTMLInputElement[]}\n     */\n    function getFormFields() {\n        const form = getForm();\n        /** @type {HTMLInputElement[]} */\n        const formFields = Array.from(form.querySelectorAll(\"input[data-form-field]\"));\n        return formFields;\n    }\n    /**\n     * Passkey form submission handler.\n     * Takes the input from the form and a few other parameters and submits it to the server.\n     *\n     * @param {WebAuthnOptionsAction} action action to submit\n     * @param {unknown | undefined} data optional data to submit\n     * @returns {Promise<void>}\n     */\n    async function submitForm(action, data) {\n        const form = getForm();\n        // If a POST request, create hidden fields in the form\n        // and submit it so the browser redirects on login\n        if (action) {\n            const actionInput = document.createElement(\"input\");\n            actionInput.type = \"hidden\";\n            actionInput.name = \"action\";\n            actionInput.value = action;\n            form.appendChild(actionInput);\n        }\n        if (data) {\n            const dataInput = document.createElement(\"input\");\n            dataInput.type = \"hidden\";\n            dataInput.name = \"data\";\n            dataInput.value = JSON.stringify(data);\n            form.appendChild(dataInput);\n        }\n        return form.submit();\n    }\n    /**\n     * Executes the authentication flow by fetching options from the server,\n     * starting the authentication, and submitting the response to the server.\n     *\n     * @param {WebAuthnOptionsReturn<WebAuthnAuthenticate>['options']} options\n     * @param {boolean} autofill Whether or not to use the browser's autofill\n     * @returns {Promise<void>}\n     */\n    async function authenticationFlow(options, autofill) {\n        // Start authentication\n        const authResp = await WebAuthnBrowser.startAuthentication(options, autofill);\n        // Submit authentication response to server\n        return await submitForm(\"authenticate\", authResp);\n    }\n    /**\n     * @param {WebAuthnOptionsReturn<WebAuthnRegister>['options']} options\n     */\n    async function registrationFlow(options) {\n        // Check if all required formFields are set\n        const formFields = getFormFields();\n        formFields.forEach((field) => {\n            if (field.required && !field.value) {\n                throw new Error(`Missing required field: ${field.name}`);\n            }\n        });\n        // Start registration\n        const regResp = await WebAuthnBrowser.startRegistration(options);\n        // Submit registration response to server\n        return await submitForm(\"register\", regResp);\n    }\n    /**\n     * Attempts to authenticate the user when the page loads\n     * using the browser's autofill popup.\n     *\n     * @returns {Promise<void>}\n     */\n    async function autofillAuthentication() {\n        // if the browser can't handle autofill, don't try\n        if (!WebAuthnBrowser.browserSupportsWebAuthnAutofill())\n            return;\n        const res = await fetchOptions(\"authenticate\");\n        if (!res) {\n            console.error(\"Failed to fetch option for autofill authentication\");\n            return;\n        }\n        try {\n            await authenticationFlow(res.options, true);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    /**\n     * Sets up the passkey form by overriding the form submission handler\n     * so that it attempts to authenticate the user when the form is submitted.\n     * If the user is not registered, it will attempt to register them instead.\n     */\n    async function setupForm() {\n        const form = getForm();\n        // If the browser can't do WebAuthn, hide the form\n        if (!WebAuthnBrowser.browserSupportsWebAuthn()) {\n            form.style.display = \"none\";\n            return;\n        }\n        if (form) {\n            form.addEventListener(\"submit\", async (e) => {\n                e.preventDefault();\n                // Fetch options from the server without assuming that\n                // the user is registered\n                const res = await fetchOptions(undefined);\n                if (!res) {\n                    console.error(\"Failed to fetch options for form submission\");\n                    return;\n                }\n                // Then execute the appropriate flow\n                if (res.action === \"authenticate\") {\n                    try {\n                        await authenticationFlow(res.options, false);\n                    }\n                    catch (e) {\n                        console.error(e);\n                    }\n                }\n                else if (res.action === \"register\") {\n                    try {\n                        await registrationFlow(res.options);\n                    }\n                    catch (e) {\n                        console.error(e);\n                    }\n                }\n            });\n        }\n    }\n    // On page load, setup the form and attempt to authenticate the user.\n    setupForm();\n    autofillAuthentication();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy93ZWJhdXRobi1jbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQjtBQUM5QixjQUFjLFlBQVk7QUFDMUIsY0FBYyx5Q0FBeUM7QUFDdkQ7QUFDQSxjQUFjLHVCQUF1QjtBQUNyQyxhQUFhO0FBQ2IsTUFBTSxnRkFBZ0YseUJBQXlCO0FBQy9HO0FBQ0EsTUFBTSxpRkFBaUYscUJBQXFCO0FBQzVHO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNPO0FBQ1AsZUFBZSwwQ0FBMEM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekMsZUFBZSxlQUFlO0FBQzlCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUSxvQkFBb0IsV0FBVztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSwyQkFBMkIsV0FBVztBQUN0QyxtQkFBbUIsd0JBQXdCO0FBQzNDO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixvQkFBb0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVCQUF1QjtBQUN0QyxlQUFlLHFCQUFxQjtBQUNwQyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdEQUF3RDtBQUN2RSxlQUFlLFNBQVM7QUFDeEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9EQUFvRDtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsV0FBVztBQUN0RTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFx1dGlsc1xcd2ViYXV0aG4tY2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vQHRzLWNoZWNrXG4vLyBEZWNsYXJlIGEgU2ltcGxlV2ViQXV0aG5Ccm93c2VyIHZhcmlhYmxlIGFzIHBhcnQgb2YgXCJ3aW5kb3dcIlxuLyoqIEB0eXBlZGVmIHtcImF1dGhlbnRpY2F0ZVwifSBXZWJBdXRobkF1dGhlbnRpY2F0ZSAqL1xuLyoqIEB0eXBlZGVmIHtcInJlZ2lzdGVyXCJ9IFdlYkF1dGhuUmVnaXN0ZXIgKi9cbi8qKiBAdHlwZWRlZiB7V2ViQXV0aG5SZWdpc3RlciB8IFdlYkF1dGhuQXV0aGVudGljYXRlfSBXZWJBdXRobk9wdGlvbnNBY3Rpb24gKi9cbi8qKlxuICogQHRlbXBsYXRlIHtXZWJBdXRobk9wdGlvbnNBY3Rpb259IFRcbiAqIEB0eXBlZGVmIHtUIGV4dGVuZHMgV2ViQXV0aG5BdXRoZW50aWNhdGUgP1xuICogIHsgb3B0aW9uczogaW1wb3J0KFwiQHNpbXBsZXdlYmF1dGhuL3R5cGVzXCIpLlB1YmxpY0tleUNyZWRlbnRpYWxSZXF1ZXN0T3B0aW9uc0pTT047IGFjdGlvbjogXCJhdXRoZW50aWNhdGVcIiB9IDpcbiAqICBUIGV4dGVuZHMgV2ViQXV0aG5SZWdpc3RlciA/XG4gKiAgeyBvcHRpb25zOiBpbXBvcnQoXCJAc2ltcGxld2ViYXV0aG4vdHlwZXNcIikuUHVibGljS2V5Q3JlZGVudGlhbENyZWF0aW9uT3B0aW9uc0pTT047IGFjdGlvbjogXCJyZWdpc3RlclwiIH0gOlxuICogbmV2ZXJcbiAqIH0gV2ViQXV0aG5PcHRpb25zUmV0dXJuXG4gKi9cbi8qKlxuICogd2ViYXV0aG5TY3JpcHQgaXMgdGhlIGNsaWVudC1zaWRlIHNjcmlwdCB0aGF0IGhhbmRsZXMgdGhlIHdlYmF1dGhuIGZvcm1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYXV0aFVSTCBpcyB0aGUgVVJMIG9mIHRoZSBhdXRoIEFQSVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVySUQgaXMgdGhlIElEIG9mIHRoZSB3ZWJhdXRobiBwcm92aWRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2ViYXV0aG5TY3JpcHQoYXV0aFVSTCwgcHJvdmlkZXJJRCkge1xuICAgIC8qKiBAdHlwZSB7dHlwZW9mIGltcG9ydChcIkBzaW1wbGV3ZWJhdXRobi9icm93c2VyXCIpfSAqL1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBXZWJBdXRobkJyb3dzZXIgPSB3aW5kb3cuU2ltcGxlV2ViQXV0aG5Ccm93c2VyO1xuICAgIC8qKlxuICAgICAqIEZldGNoIHdlYmF1dGhuIG9wdGlvbnMgZnJvbSB0aGUgc2VydmVyXG4gICAgICpcbiAgICAgKiBAdGVtcGxhdGUge1dlYkF1dGhuT3B0aW9uc0FjdGlvbn0gVFxuICAgICAqIEBwYXJhbSB7VCB8IHVuZGVmaW5lZH0gYWN0aW9uIGFjdGlvbiB0byBmZXRjaCBvcHRpb25zIGZvclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFdlYkF1dGhuT3B0aW9uc1JldHVybjxUPiB8IHVuZGVmaW5lZD59XG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPcHRpb25zKGFjdGlvbikge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIG9wdGlvbnMgVVJMIHdpdGggdGhlIGFjdGlvbiBhbmQgcXVlcnkgcGFyYW1ldGVyc1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke2F1dGhVUkx9L3dlYmF1dGhuLW9wdGlvbnMvJHtwcm92aWRlcklEfWApO1xuICAgICAgICBpZiAoYWN0aW9uKVxuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJhY3Rpb25cIiwgYWN0aW9uKTtcbiAgICAgICAgY29uc3QgZm9ybUZpZWxkcyA9IGdldEZvcm1GaWVsZHMoKTtcbiAgICAgICAgZm9ybUZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoZmllbGQubmFtZSwgZmllbGQudmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggb3B0aW9uc1wiLCByZXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHdlYmF1dGhuIGZvcm0gZnJvbSB0aGUgcGFnZVxuICAgICAqXG4gICAgICogQHJldHVybnMge0hUTUxGb3JtRWxlbWVudH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRGb3JtKCkge1xuICAgICAgICBjb25zdCBmb3JtSUQgPSBgIyR7cHJvdmlkZXJJRH0tZm9ybWA7XG4gICAgICAgIC8qKiBAdHlwZSB7SFRNTEZvcm1FbGVtZW50IHwgbnVsbH0gKi9cbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybUlEKTtcbiAgICAgICAgaWYgKCFmb3JtKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGb3JtICcke2Zvcm1JRH0nIG5vdCBmb3VuZGApO1xuICAgICAgICByZXR1cm4gZm9ybTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGZvcm1GaWVsZHMgZnJvbSB0aGUgZm9ybVxuICAgICAqXG4gICAgICogQHJldHVybnMge0hUTUxJbnB1dEVsZW1lbnRbXX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRGb3JtRmllbGRzKCkge1xuICAgICAgICBjb25zdCBmb3JtID0gZ2V0Rm9ybSgpO1xuICAgICAgICAvKiogQHR5cGUge0hUTUxJbnB1dEVsZW1lbnRbXX0gKi9cbiAgICAgICAgY29uc3QgZm9ybUZpZWxkcyA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbZGF0YS1mb3JtLWZpZWxkXVwiKSk7XG4gICAgICAgIHJldHVybiBmb3JtRmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXNza2V5IGZvcm0gc3VibWlzc2lvbiBoYW5kbGVyLlxuICAgICAqIFRha2VzIHRoZSBpbnB1dCBmcm9tIHRoZSBmb3JtIGFuZCBhIGZldyBvdGhlciBwYXJhbWV0ZXJzIGFuZCBzdWJtaXRzIGl0IHRvIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1dlYkF1dGhuT3B0aW9uc0FjdGlvbn0gYWN0aW9uIGFjdGlvbiB0byBzdWJtaXRcbiAgICAgKiBAcGFyYW0ge3Vua25vd24gfCB1bmRlZmluZWR9IGRhdGEgb3B0aW9uYWwgZGF0YSB0byBzdWJtaXRcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICAgKi9cbiAgICBhc3luYyBmdW5jdGlvbiBzdWJtaXRGb3JtKGFjdGlvbiwgZGF0YSkge1xuICAgICAgICBjb25zdCBmb3JtID0gZ2V0Rm9ybSgpO1xuICAgICAgICAvLyBJZiBhIFBPU1QgcmVxdWVzdCwgY3JlYXRlIGhpZGRlbiBmaWVsZHMgaW4gdGhlIGZvcm1cbiAgICAgICAgLy8gYW5kIHN1Ym1pdCBpdCBzbyB0aGUgYnJvd3NlciByZWRpcmVjdHMgb24gbG9naW5cbiAgICAgICAgaWYgKGFjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgICAgICBhY3Rpb25JbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIGFjdGlvbklucHV0Lm5hbWUgPSBcImFjdGlvblwiO1xuICAgICAgICAgICAgYWN0aW9uSW5wdXQudmFsdWUgPSBhY3Rpb247XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGFjdGlvbklucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgZGF0YUlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgZGF0YUlucHV0Lm5hbWUgPSBcImRhdGFcIjtcbiAgICAgICAgICAgIGRhdGFJbnB1dC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChkYXRhSW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtLnN1Ym1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYXV0aGVudGljYXRpb24gZmxvdyBieSBmZXRjaGluZyBvcHRpb25zIGZyb20gdGhlIHNlcnZlcixcbiAgICAgKiBzdGFydGluZyB0aGUgYXV0aGVudGljYXRpb24sIGFuZCBzdWJtaXR0aW5nIHRoZSByZXNwb25zZSB0byB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtXZWJBdXRobk9wdGlvbnNSZXR1cm48V2ViQXV0aG5BdXRoZW50aWNhdGU+WydvcHRpb25zJ119IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGF1dG9maWxsIFdoZXRoZXIgb3Igbm90IHRvIHVzZSB0aGUgYnJvd3NlcidzIGF1dG9maWxsXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gYXV0aGVudGljYXRpb25GbG93KG9wdGlvbnMsIGF1dG9maWxsKSB7XG4gICAgICAgIC8vIFN0YXJ0IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgIGNvbnN0IGF1dGhSZXNwID0gYXdhaXQgV2ViQXV0aG5Ccm93c2VyLnN0YXJ0QXV0aGVudGljYXRpb24ob3B0aW9ucywgYXV0b2ZpbGwpO1xuICAgICAgICAvLyBTdWJtaXQgYXV0aGVudGljYXRpb24gcmVzcG9uc2UgdG8gc2VydmVyXG4gICAgICAgIHJldHVybiBhd2FpdCBzdWJtaXRGb3JtKFwiYXV0aGVudGljYXRlXCIsIGF1dGhSZXNwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtXZWJBdXRobk9wdGlvbnNSZXR1cm48V2ViQXV0aG5SZWdpc3Rlcj5bJ29wdGlvbnMnXX0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdHJhdGlvbkZsb3cob3B0aW9ucykge1xuICAgICAgICAvLyBDaGVjayBpZiBhbGwgcmVxdWlyZWQgZm9ybUZpZWxkcyBhcmUgc2V0XG4gICAgICAgIGNvbnN0IGZvcm1GaWVsZHMgPSBnZXRGb3JtRmllbGRzKCk7XG4gICAgICAgIGZvcm1GaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWVsZC5yZXF1aXJlZCAmJiAhZmllbGQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgZmllbGQ6ICR7ZmllbGQubmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFN0YXJ0IHJlZ2lzdHJhdGlvblxuICAgICAgICBjb25zdCByZWdSZXNwID0gYXdhaXQgV2ViQXV0aG5Ccm93c2VyLnN0YXJ0UmVnaXN0cmF0aW9uKG9wdGlvbnMpO1xuICAgICAgICAvLyBTdWJtaXQgcmVnaXN0cmF0aW9uIHJlc3BvbnNlIHRvIHNlcnZlclxuICAgICAgICByZXR1cm4gYXdhaXQgc3VibWl0Rm9ybShcInJlZ2lzdGVyXCIsIHJlZ1Jlc3ApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0cyB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIgd2hlbiB0aGUgcGFnZSBsb2Fkc1xuICAgICAqIHVzaW5nIHRoZSBicm93c2VyJ3MgYXV0b2ZpbGwgcG9wdXAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICAgKi9cbiAgICBhc3luYyBmdW5jdGlvbiBhdXRvZmlsbEF1dGhlbnRpY2F0aW9uKCkge1xuICAgICAgICAvLyBpZiB0aGUgYnJvd3NlciBjYW4ndCBoYW5kbGUgYXV0b2ZpbGwsIGRvbid0IHRyeVxuICAgICAgICBpZiAoIVdlYkF1dGhuQnJvd3Nlci5icm93c2VyU3VwcG9ydHNXZWJBdXRobkF1dG9maWxsKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoT3B0aW9ucyhcImF1dGhlbnRpY2F0ZVwiKTtcbiAgICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggb3B0aW9uIGZvciBhdXRvZmlsbCBhdXRoZW50aWNhdGlvblwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRpb25GbG93KHJlcy5vcHRpb25zLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHRoZSBwYXNza2V5IGZvcm0gYnkgb3ZlcnJpZGluZyB0aGUgZm9ybSBzdWJtaXNzaW9uIGhhbmRsZXJcbiAgICAgKiBzbyB0aGF0IGl0IGF0dGVtcHRzIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlciB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZC5cbiAgICAgKiBJZiB0aGUgdXNlciBpcyBub3QgcmVnaXN0ZXJlZCwgaXQgd2lsbCBhdHRlbXB0IHRvIHJlZ2lzdGVyIHRoZW0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBhc3luYyBmdW5jdGlvbiBzZXR1cEZvcm0oKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBnZXRGb3JtKCk7XG4gICAgICAgIC8vIElmIHRoZSBicm93c2VyIGNhbid0IGRvIFdlYkF1dGhuLCBoaWRlIHRoZSBmb3JtXG4gICAgICAgIGlmICghV2ViQXV0aG5Ccm93c2VyLmJyb3dzZXJTdXBwb3J0c1dlYkF1dGhuKCkpIHtcbiAgICAgICAgICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtKSB7XG4gICAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgLy8gRmV0Y2ggb3B0aW9ucyBmcm9tIHRoZSBzZXJ2ZXIgd2l0aG91dCBhc3N1bWluZyB0aGF0XG4gICAgICAgICAgICAgICAgLy8gdGhlIHVzZXIgaXMgcmVnaXN0ZXJlZFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoT3B0aW9ucyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggb3B0aW9ucyBmb3IgZm9ybSBzdWJtaXNzaW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRoZW4gZXhlY3V0ZSB0aGUgYXBwcm9wcmlhdGUgZmxvd1xuICAgICAgICAgICAgICAgIGlmIChyZXMuYWN0aW9uID09PSBcImF1dGhlbnRpY2F0ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhdXRoZW50aWNhdGlvbkZsb3cocmVzLm9wdGlvbnMsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXMuYWN0aW9uID09PSBcInJlZ2lzdGVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlZ2lzdHJhdGlvbkZsb3cocmVzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gT24gcGFnZSBsb2FkLCBzZXR1cCB0aGUgZm9ybSBhbmQgYXR0ZW1wdCB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIuXG4gICAgc2V0dXBGb3JtKCk7XG4gICAgYXV0b2ZpbGxBdXRoZW50aWNhdGlvbigpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/webauthn-client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/webauthn-client.js":
/*!**************************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/webauthn-client.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   webauthnScript: () => (/* binding */ webauthnScript)\n/* harmony export */ });\n//@ts-check\n// Declare a SimpleWebAuthnBrowser variable as part of \"window\"\n/** @typedef {\"authenticate\"} WebAuthnAuthenticate */\n/** @typedef {\"register\"} WebAuthnRegister */\n/** @typedef {WebAuthnRegister | WebAuthnAuthenticate} WebAuthnOptionsAction */\n/**\n * @template {WebAuthnOptionsAction} T\n * @typedef {T extends WebAuthnAuthenticate ?\n *  { options: import(\"@simplewebauthn/types\").PublicKeyCredentialRequestOptionsJSON; action: \"authenticate\" } :\n *  T extends WebAuthnRegister ?\n *  { options: import(\"@simplewebauthn/types\").PublicKeyCredentialCreationOptionsJSON; action: \"register\" } :\n * never\n * } WebAuthnOptionsReturn\n */\n/**\n * webauthnScript is the client-side script that handles the webauthn form\n *\n * @param {string} authURL is the URL of the auth API\n * @param {string} providerID is the ID of the webauthn provider\n */\nasync function webauthnScript(authURL, providerID) {\n    /** @type {typeof import(\"@simplewebauthn/browser\")} */\n    // @ts-ignore\n    const WebAuthnBrowser = window.SimpleWebAuthnBrowser;\n    /**\n     * Fetch webauthn options from the server\n     *\n     * @template {WebAuthnOptionsAction} T\n     * @param {T | undefined} action action to fetch options for\n     * @returns {Promise<WebAuthnOptionsReturn<T> | undefined>}\n     */\n    async function fetchOptions(action) {\n        // Create the options URL with the action and query parameters\n        const url = new URL(`${authURL}/webauthn-options/${providerID}`);\n        if (action)\n            url.searchParams.append(\"action\", action);\n        const formFields = getFormFields();\n        formFields.forEach((field) => {\n            url.searchParams.append(field.name, field.value);\n        });\n        const res = await fetch(url);\n        if (!res.ok) {\n            console.error(\"Failed to fetch options\", res);\n            return;\n        }\n        return res.json();\n    }\n    /**\n     * Get the webauthn form from the page\n     *\n     * @returns {HTMLFormElement}\n     */\n    function getForm() {\n        const formID = `#${providerID}-form`;\n        /** @type {HTMLFormElement | null} */\n        const form = document.querySelector(formID);\n        if (!form)\n            throw new Error(`Form '${formID}' not found`);\n        return form;\n    }\n    /**\n     * Get formFields from the form\n     *\n     * @returns {HTMLInputElement[]}\n     */\n    function getFormFields() {\n        const form = getForm();\n        /** @type {HTMLInputElement[]} */\n        const formFields = Array.from(form.querySelectorAll(\"input[data-form-field]\"));\n        return formFields;\n    }\n    /**\n     * Passkey form submission handler.\n     * Takes the input from the form and a few other parameters and submits it to the server.\n     *\n     * @param {WebAuthnOptionsAction} action action to submit\n     * @param {unknown | undefined} data optional data to submit\n     * @returns {Promise<void>}\n     */\n    async function submitForm(action, data) {\n        const form = getForm();\n        // If a POST request, create hidden fields in the form\n        // and submit it so the browser redirects on login\n        if (action) {\n            const actionInput = document.createElement(\"input\");\n            actionInput.type = \"hidden\";\n            actionInput.name = \"action\";\n            actionInput.value = action;\n            form.appendChild(actionInput);\n        }\n        if (data) {\n            const dataInput = document.createElement(\"input\");\n            dataInput.type = \"hidden\";\n            dataInput.name = \"data\";\n            dataInput.value = JSON.stringify(data);\n            form.appendChild(dataInput);\n        }\n        return form.submit();\n    }\n    /**\n     * Executes the authentication flow by fetching options from the server,\n     * starting the authentication, and submitting the response to the server.\n     *\n     * @param {WebAuthnOptionsReturn<WebAuthnAuthenticate>['options']} options\n     * @param {boolean} autofill Whether or not to use the browser's autofill\n     * @returns {Promise<void>}\n     */\n    async function authenticationFlow(options, autofill) {\n        // Start authentication\n        const authResp = await WebAuthnBrowser.startAuthentication(options, autofill);\n        // Submit authentication response to server\n        return await submitForm(\"authenticate\", authResp);\n    }\n    /**\n     * @param {WebAuthnOptionsReturn<WebAuthnRegister>['options']} options\n     */\n    async function registrationFlow(options) {\n        // Check if all required formFields are set\n        const formFields = getFormFields();\n        formFields.forEach((field) => {\n            if (field.required && !field.value) {\n                throw new Error(`Missing required field: ${field.name}`);\n            }\n        });\n        // Start registration\n        const regResp = await WebAuthnBrowser.startRegistration(options);\n        // Submit registration response to server\n        return await submitForm(\"register\", regResp);\n    }\n    /**\n     * Attempts to authenticate the user when the page loads\n     * using the browser's autofill popup.\n     *\n     * @returns {Promise<void>}\n     */\n    async function autofillAuthentication() {\n        // if the browser can't handle autofill, don't try\n        if (!WebAuthnBrowser.browserSupportsWebAuthnAutofill())\n            return;\n        const res = await fetchOptions(\"authenticate\");\n        if (!res) {\n            console.error(\"Failed to fetch option for autofill authentication\");\n            return;\n        }\n        try {\n            await authenticationFlow(res.options, true);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    /**\n     * Sets up the passkey form by overriding the form submission handler\n     * so that it attempts to authenticate the user when the form is submitted.\n     * If the user is not registered, it will attempt to register them instead.\n     */\n    async function setupForm() {\n        const form = getForm();\n        // If the browser can't do WebAuthn, hide the form\n        if (!WebAuthnBrowser.browserSupportsWebAuthn()) {\n            form.style.display = \"none\";\n            return;\n        }\n        if (form) {\n            form.addEventListener(\"submit\", async (e) => {\n                e.preventDefault();\n                // Fetch options from the server without assuming that\n                // the user is registered\n                const res = await fetchOptions(undefined);\n                if (!res) {\n                    console.error(\"Failed to fetch options for form submission\");\n                    return;\n                }\n                // Then execute the appropriate flow\n                if (res.action === \"authenticate\") {\n                    try {\n                        await authenticationFlow(res.options, false);\n                    }\n                    catch (e) {\n                        console.error(e);\n                    }\n                }\n                else if (res.action === \"register\") {\n                    try {\n                        await registrationFlow(res.options);\n                    }\n                    catch (e) {\n                        console.error(e);\n                    }\n                }\n            });\n        }\n    }\n    // On page load, setup the form and attempt to authenticate the user.\n    setupForm();\n    autofillAuthentication();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvd2ViYXV0aG4tY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0EsY0FBYyxnQkFBZ0I7QUFDOUIsY0FBYyxZQUFZO0FBQzFCLGNBQWMseUNBQXlDO0FBQ3ZEO0FBQ0EsY0FBYyx1QkFBdUI7QUFDckMsYUFBYTtBQUNiLE1BQU0sZ0ZBQWdGLHlCQUF5QjtBQUMvRztBQUNBLE1BQU0saUZBQWlGLHFCQUFxQjtBQUM1RztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDTztBQUNQLGVBQWUsMENBQTBDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCO0FBQ3pDLGVBQWUsZUFBZTtBQUM5QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFFBQVEsb0JBQW9CLFdBQVc7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsMkJBQTJCLFdBQVc7QUFDdEMsbUJBQW1CLHdCQUF3QjtBQUMzQztBQUNBO0FBQ0EscUNBQXFDLE9BQU87QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUI7QUFDdEMsZUFBZSxxQkFBcUI7QUFDcEMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3REFBd0Q7QUFDdkUsZUFBZSxTQUFTO0FBQ3hCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvREFBb0Q7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELFdBQVc7QUFDdEU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXHdlYmF1dGhuLWNsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL0B0cy1jaGVja1xuLy8gRGVjbGFyZSBhIFNpbXBsZVdlYkF1dGhuQnJvd3NlciB2YXJpYWJsZSBhcyBwYXJ0IG9mIFwid2luZG93XCJcbi8qKiBAdHlwZWRlZiB7XCJhdXRoZW50aWNhdGVcIn0gV2ViQXV0aG5BdXRoZW50aWNhdGUgKi9cbi8qKiBAdHlwZWRlZiB7XCJyZWdpc3RlclwifSBXZWJBdXRoblJlZ2lzdGVyICovXG4vKiogQHR5cGVkZWYge1dlYkF1dGhuUmVnaXN0ZXIgfCBXZWJBdXRobkF1dGhlbnRpY2F0ZX0gV2ViQXV0aG5PcHRpb25zQWN0aW9uICovXG4vKipcbiAqIEB0ZW1wbGF0ZSB7V2ViQXV0aG5PcHRpb25zQWN0aW9ufSBUXG4gKiBAdHlwZWRlZiB7VCBleHRlbmRzIFdlYkF1dGhuQXV0aGVudGljYXRlID9cbiAqICB7IG9wdGlvbnM6IGltcG9ydChcIkBzaW1wbGV3ZWJhdXRobi90eXBlc1wiKS5QdWJsaWNLZXlDcmVkZW50aWFsUmVxdWVzdE9wdGlvbnNKU09OOyBhY3Rpb246IFwiYXV0aGVudGljYXRlXCIgfSA6XG4gKiAgVCBleHRlbmRzIFdlYkF1dGhuUmVnaXN0ZXIgP1xuICogIHsgb3B0aW9uczogaW1wb3J0KFwiQHNpbXBsZXdlYmF1dGhuL3R5cGVzXCIpLlB1YmxpY0tleUNyZWRlbnRpYWxDcmVhdGlvbk9wdGlvbnNKU09OOyBhY3Rpb246IFwicmVnaXN0ZXJcIiB9IDpcbiAqIG5ldmVyXG4gKiB9IFdlYkF1dGhuT3B0aW9uc1JldHVyblxuICovXG4vKipcbiAqIHdlYmF1dGhuU2NyaXB0IGlzIHRoZSBjbGllbnQtc2lkZSBzY3JpcHQgdGhhdCBoYW5kbGVzIHRoZSB3ZWJhdXRobiBmb3JtXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGF1dGhVUkwgaXMgdGhlIFVSTCBvZiB0aGUgYXV0aCBBUElcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm92aWRlcklEIGlzIHRoZSBJRCBvZiB0aGUgd2ViYXV0aG4gcHJvdmlkZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdlYmF1dGhuU2NyaXB0KGF1dGhVUkwsIHByb3ZpZGVySUQpIHtcbiAgICAvKiogQHR5cGUge3R5cGVvZiBpbXBvcnQoXCJAc2ltcGxld2ViYXV0aG4vYnJvd3NlclwiKX0gKi9cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgV2ViQXV0aG5Ccm93c2VyID0gd2luZG93LlNpbXBsZVdlYkF1dGhuQnJvd3NlcjtcbiAgICAvKipcbiAgICAgKiBGZXRjaCB3ZWJhdXRobiBvcHRpb25zIGZyb20gdGhlIHNlcnZlclxuICAgICAqXG4gICAgICogQHRlbXBsYXRlIHtXZWJBdXRobk9wdGlvbnNBY3Rpb259IFRcbiAgICAgKiBAcGFyYW0ge1QgfCB1bmRlZmluZWR9IGFjdGlvbiBhY3Rpb24gdG8gZmV0Y2ggb3B0aW9ucyBmb3JcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxXZWJBdXRobk9wdGlvbnNSZXR1cm48VD4gfCB1bmRlZmluZWQ+fVxuICAgICAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoT3B0aW9ucyhhY3Rpb24pIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBvcHRpb25zIFVSTCB3aXRoIHRoZSBhY3Rpb24gYW5kIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHthdXRoVVJMfS93ZWJhdXRobi1vcHRpb25zLyR7cHJvdmlkZXJJRH1gKTtcbiAgICAgICAgaWYgKGFjdGlvbilcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiYWN0aW9uXCIsIGFjdGlvbik7XG4gICAgICAgIGNvbnN0IGZvcm1GaWVsZHMgPSBnZXRGb3JtRmllbGRzKCk7XG4gICAgICAgIGZvcm1GaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGZpZWxkLm5hbWUsIGZpZWxkLnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIG9wdGlvbnNcIiwgcmVzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3ZWJhdXRobiBmb3JtIGZyb20gdGhlIHBhZ2VcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtIVE1MRm9ybUVsZW1lbnR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Rm9ybSgpIHtcbiAgICAgICAgY29uc3QgZm9ybUlEID0gYCMke3Byb3ZpZGVySUR9LWZvcm1gO1xuICAgICAgICAvKiogQHR5cGUge0hUTUxGb3JtRWxlbWVudCB8IG51bGx9ICovXG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1JRCk7XG4gICAgICAgIGlmICghZm9ybSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRm9ybSAnJHtmb3JtSUR9JyBub3QgZm91bmRgKTtcbiAgICAgICAgcmV0dXJuIGZvcm07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBmb3JtRmllbGRzIGZyb20gdGhlIGZvcm1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtIVE1MSW5wdXRFbGVtZW50W119XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Rm9ybUZpZWxkcygpIHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGdldEZvcm0oKTtcbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50W119ICovXG4gICAgICAgIGNvbnN0IGZvcm1GaWVsZHMgPSBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0W2RhdGEtZm9ybS1maWVsZF1cIikpO1xuICAgICAgICByZXR1cm4gZm9ybUZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFzc2tleSBmb3JtIHN1Ym1pc3Npb24gaGFuZGxlci5cbiAgICAgKiBUYWtlcyB0aGUgaW5wdXQgZnJvbSB0aGUgZm9ybSBhbmQgYSBmZXcgb3RoZXIgcGFyYW1ldGVycyBhbmQgc3VibWl0cyBpdCB0byB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtXZWJBdXRobk9wdGlvbnNBY3Rpb259IGFjdGlvbiBhY3Rpb24gdG8gc3VibWl0XG4gICAgICogQHBhcmFtIHt1bmtub3duIHwgdW5kZWZpbmVkfSBkYXRhIG9wdGlvbmFsIGRhdGEgdG8gc3VibWl0XG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gc3VibWl0Rm9ybShhY3Rpb24sIGRhdGEpIHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGdldEZvcm0oKTtcbiAgICAgICAgLy8gSWYgYSBQT1NUIHJlcXVlc3QsIGNyZWF0ZSBoaWRkZW4gZmllbGRzIGluIHRoZSBmb3JtXG4gICAgICAgIC8vIGFuZCBzdWJtaXQgaXQgc28gdGhlIGJyb3dzZXIgcmVkaXJlY3RzIG9uIGxvZ2luXG4gICAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgYWN0aW9uSW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBhY3Rpb25JbnB1dC5uYW1lID0gXCJhY3Rpb25cIjtcbiAgICAgICAgICAgIGFjdGlvbklucHV0LnZhbHVlID0gYWN0aW9uO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChhY3Rpb25JbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgIGRhdGFJbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIGRhdGFJbnB1dC5uYW1lID0gXCJkYXRhXCI7XG4gICAgICAgICAgICBkYXRhSW5wdXQudmFsdWUgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZGF0YUlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybS5zdWJtaXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGF1dGhlbnRpY2F0aW9uIGZsb3cgYnkgZmV0Y2hpbmcgb3B0aW9ucyBmcm9tIHRoZSBzZXJ2ZXIsXG4gICAgICogc3RhcnRpbmcgdGhlIGF1dGhlbnRpY2F0aW9uLCBhbmQgc3VibWl0dGluZyB0aGUgcmVzcG9uc2UgdG8gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7V2ViQXV0aG5PcHRpb25zUmV0dXJuPFdlYkF1dGhuQXV0aGVudGljYXRlPlsnb3B0aW9ucyddfSBvcHRpb25zXG4gICAgICogQHBhcmFtIHtib29sZWFufSBhdXRvZmlsbCBXaGV0aGVyIG9yIG5vdCB0byB1c2UgdGhlIGJyb3dzZXIncyBhdXRvZmlsbFxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICAgICAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uIGF1dGhlbnRpY2F0aW9uRmxvdyhvcHRpb25zLCBhdXRvZmlsbCkge1xuICAgICAgICAvLyBTdGFydCBhdXRoZW50aWNhdGlvblxuICAgICAgICBjb25zdCBhdXRoUmVzcCA9IGF3YWl0IFdlYkF1dGhuQnJvd3Nlci5zdGFydEF1dGhlbnRpY2F0aW9uKG9wdGlvbnMsIGF1dG9maWxsKTtcbiAgICAgICAgLy8gU3VibWl0IGF1dGhlbnRpY2F0aW9uIHJlc3BvbnNlIHRvIHNlcnZlclxuICAgICAgICByZXR1cm4gYXdhaXQgc3VibWl0Rm9ybShcImF1dGhlbnRpY2F0ZVwiLCBhdXRoUmVzcCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7V2ViQXV0aG5PcHRpb25zUmV0dXJuPFdlYkF1dGhuUmVnaXN0ZXI+WydvcHRpb25zJ119IG9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyBmdW5jdGlvbiByZWdpc3RyYXRpb25GbG93KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgYWxsIHJlcXVpcmVkIGZvcm1GaWVsZHMgYXJlIHNldFxuICAgICAgICBjb25zdCBmb3JtRmllbGRzID0gZ2V0Rm9ybUZpZWxkcygpO1xuICAgICAgICBmb3JtRmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmllbGQucmVxdWlyZWQgJiYgIWZpZWxkLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiAke2ZpZWxkLm5hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTdGFydCByZWdpc3RyYXRpb25cbiAgICAgICAgY29uc3QgcmVnUmVzcCA9IGF3YWl0IFdlYkF1dGhuQnJvd3Nlci5zdGFydFJlZ2lzdHJhdGlvbihvcHRpb25zKTtcbiAgICAgICAgLy8gU3VibWl0IHJlZ2lzdHJhdGlvbiByZXNwb25zZSB0byBzZXJ2ZXJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHN1Ym1pdEZvcm0oXCJyZWdpc3RlclwiLCByZWdSZXNwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdHMgdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyIHdoZW4gdGhlIHBhZ2UgbG9hZHNcbiAgICAgKiB1c2luZyB0aGUgYnJvd3NlcidzIGF1dG9maWxsIHBvcHVwLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gYXV0b2ZpbGxBdXRoZW50aWNhdGlvbigpIHtcbiAgICAgICAgLy8gaWYgdGhlIGJyb3dzZXIgY2FuJ3QgaGFuZGxlIGF1dG9maWxsLCBkb24ndCB0cnlcbiAgICAgICAgaWYgKCFXZWJBdXRobkJyb3dzZXIuYnJvd3NlclN1cHBvcnRzV2ViQXV0aG5BdXRvZmlsbCgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaE9wdGlvbnMoXCJhdXRoZW50aWNhdGVcIik7XG4gICAgICAgIGlmICghcmVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIG9wdGlvbiBmb3IgYXV0b2ZpbGwgYXV0aGVudGljYXRpb25cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGF1dGhlbnRpY2F0aW9uRmxvdyhyZXMub3B0aW9ucywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgcGFzc2tleSBmb3JtIGJ5IG92ZXJyaWRpbmcgdGhlIGZvcm0gc3VibWlzc2lvbiBoYW5kbGVyXG4gICAgICogc28gdGhhdCBpdCBhdHRlbXB0cyB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIgd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWQuXG4gICAgICogSWYgdGhlIHVzZXIgaXMgbm90IHJlZ2lzdGVyZWQsIGl0IHdpbGwgYXR0ZW1wdCB0byByZWdpc3RlciB0aGVtIGluc3RlYWQuXG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gc2V0dXBGb3JtKCkge1xuICAgICAgICBjb25zdCBmb3JtID0gZ2V0Rm9ybSgpO1xuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBjYW4ndCBkbyBXZWJBdXRobiwgaGlkZSB0aGUgZm9ybVxuICAgICAgICBpZiAoIVdlYkF1dGhuQnJvd3Nlci5icm93c2VyU3VwcG9ydHNXZWJBdXRobigpKSB7XG4gICAgICAgICAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybSkge1xuICAgICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIC8vIEZldGNoIG9wdGlvbnMgZnJvbSB0aGUgc2VydmVyIHdpdGhvdXQgYXNzdW1pbmcgdGhhdFxuICAgICAgICAgICAgICAgIC8vIHRoZSB1c2VyIGlzIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaE9wdGlvbnModW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIG9wdGlvbnMgZm9yIGZvcm0gc3VibWlzc2lvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUaGVuIGV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIGZsb3dcbiAgICAgICAgICAgICAgICBpZiAocmVzLmFjdGlvbiA9PT0gXCJhdXRoZW50aWNhdGVcIikge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRpb25GbG93KHJlcy5vcHRpb25zLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzLmFjdGlvbiA9PT0gXCJyZWdpc3RlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByZWdpc3RyYXRpb25GbG93KHJlcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIE9uIHBhZ2UgbG9hZCwgc2V0dXAgdGhlIGZvcm0gYW5kIGF0dGVtcHQgdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLlxuICAgIHNldHVwRm9ybSgpO1xuICAgIGF1dG9maWxsQXV0aGVudGljYXRpb24oKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/webauthn-client.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/lib/utils/webauthn-utils.js":
/*!*************************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/webauthn-utils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertInternalOptionsWebAuthn: () => (/* binding */ assertInternalOptionsWebAuthn),\n/* harmony export */   fromBase64: () => (/* binding */ fromBase64),\n/* harmony export */   getAuthenticationResponse: () => (/* binding */ getAuthenticationResponse),\n/* harmony export */   getRegistrationResponse: () => (/* binding */ getRegistrationResponse),\n/* harmony export */   inferWebAuthnOptions: () => (/* binding */ inferWebAuthnOptions),\n/* harmony export */   stringToTransports: () => (/* binding */ stringToTransports),\n/* harmony export */   toBase64: () => (/* binding */ toBase64),\n/* harmony export */   transportsToString: () => (/* binding */ transportsToString),\n/* harmony export */   verifyAuthenticate: () => (/* binding */ verifyAuthenticate),\n/* harmony export */   verifyRegister: () => (/* binding */ verifyRegister)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(action-browser)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../actions/callback/oauth/checks.js */ \"(action-browser)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\");\n/* harmony import */ var _web_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./web.js */ \"(action-browser)/./node_modules/@auth/core/lib/utils/web.js\");\n\n\n\n/**\n * Infers the WebAuthn options based on the provided parameters.\n *\n * @param action - The WebAuthn action to perform (optional).\n * @param loggedInUser - The logged-in user (optional).\n * @param userInfoResponse - The response containing user information (optional).\n *\n * @returns The WebAuthn action to perform, or null if no inference could be made.\n */\nfunction inferWebAuthnOptions(action, loggedIn, userInfoResponse) {\n    const { user, exists = false } = userInfoResponse ?? {};\n    switch (action) {\n        case \"authenticate\": {\n            /**\n             * Always allow explicit authentication requests.\n             */\n            return \"authenticate\";\n        }\n        case \"register\": {\n            /**\n             * Registration is only allowed if:\n             * - The user is logged in, meaning the user wants to register a new authenticator.\n             * - The user is not logged in and provided user info that does NOT exist, meaning the user wants to register a new account.\n             */\n            if (user && loggedIn === exists)\n                return \"register\";\n            break;\n        }\n        case undefined: {\n            /**\n             * When no explicit action is provided, we try to infer it based on the user info provided. These are the possible cases:\n             * - Logged in users must always send an explit action, so we bail out in this case.\n             * - Otherwise, if no user info is provided, the desired action is authentication without pre-defined authenticators.\n             * - Otherwise, if the user info provided is of an existing user, the desired action is authentication with their pre-defined authenticators.\n             * - Finally, if the user info provided is of a non-existing user, the desired action is registration.\n             */\n            if (!loggedIn) {\n                if (user) {\n                    if (exists) {\n                        return \"authenticate\";\n                    }\n                    else {\n                        return \"register\";\n                    }\n                }\n                else {\n                    return \"authenticate\";\n                }\n            }\n            break;\n        }\n    }\n    // No decision could be made\n    return null;\n}\n/**\n * Retrieves the registration response for WebAuthn options request.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - The user information.\n * @param resCookies - Optional cookies to be included in the response.\n * @returns A promise that resolves to the WebAuthnOptionsResponse.\n */\nasync function getRegistrationResponse(options, request, user, resCookies) {\n    // Get registration options\n    const regOptions = await getRegistrationOptions(options, request, user);\n    // Get signed cookie\n    const { cookie } = await _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__.webauthnChallenge.create(options, regOptions.challenge, user);\n    return {\n        status: 200,\n        cookies: [...(resCookies ?? []), cookie],\n        body: {\n            action: \"register\",\n            options: regOptions,\n        },\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n    };\n}\n/**\n * Retrieves the authentication response for WebAuthn options request.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - Optional user information.\n * @param resCookies - Optional array of cookies to be included in the response.\n * @returns A promise that resolves to a WebAuthnOptionsResponse object.\n */\nasync function getAuthenticationResponse(options, request, user, resCookies) {\n    // Get authentication options\n    const authOptions = await getAuthenticationOptions(options, request, user);\n    // Get signed cookie\n    const { cookie } = await _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__.webauthnChallenge.create(options, authOptions.challenge);\n    return {\n        status: 200,\n        cookies: [...(resCookies ?? []), cookie],\n        body: {\n            action: \"authenticate\",\n            options: authOptions,\n        },\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n    };\n}\nasync function verifyAuthenticate(options, request, resCookies) {\n    const { adapter, provider } = options;\n    // Get WebAuthn response from request body\n    const data = request.body && typeof request.body.data === \"string\"\n        ? JSON.parse(request.body.data)\n        : undefined;\n    if (!data ||\n        typeof data !== \"object\" ||\n        !(\"id\" in data) ||\n        typeof data.id !== \"string\") {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Invalid WebAuthn Authentication response\");\n    }\n    // Reset the ID so we smooth out implementation differences\n    const credentialID = toBase64(fromBase64(data.id));\n    // Get authenticator from database\n    const authenticator = await adapter.getAuthenticator(credentialID);\n    if (!authenticator) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(`WebAuthn authenticator not found in database: ${JSON.stringify({\n            credentialID,\n        })}`);\n    }\n    // Get challenge from request cookies\n    const { challenge: expectedChallenge } = await _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__.webauthnChallenge.use(options, request.cookies, resCookies);\n    // Verify the response\n    let verification;\n    try {\n        const relayingParty = provider.getRelayingParty(options, request);\n        verification = await provider.simpleWebAuthn.verifyAuthenticationResponse({\n            ...provider.verifyAuthenticationOptions,\n            expectedChallenge,\n            response: data,\n            authenticator: fromAdapterAuthenticator(authenticator),\n            expectedOrigin: relayingParty.origin,\n            expectedRPID: relayingParty.id,\n        });\n    }\n    catch (e) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.WebAuthnVerificationError(e);\n    }\n    const { verified, authenticationInfo } = verification;\n    // Make sure the response was verified\n    if (!verified) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.WebAuthnVerificationError(\"WebAuthn authentication response could not be verified\");\n    }\n    // Update authenticator counter\n    try {\n        const { newCounter } = authenticationInfo;\n        await adapter.updateAuthenticatorCounter(authenticator.credentialID, newCounter);\n    }\n    catch (e) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AdapterError(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({\n            credentialID,\n            oldCounter: authenticator.counter,\n            newCounter: authenticationInfo.newCounter,\n        })}`, e);\n    }\n    // Get the account and user\n    const account = await adapter.getAccount(authenticator.providerAccountId, provider.id);\n    if (!account) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(`WebAuthn account not found in database: ${JSON.stringify({\n            credentialID,\n            providerAccountId: authenticator.providerAccountId,\n        })}`);\n    }\n    const user = await adapter.getUser(account.userId);\n    if (!user) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(`WebAuthn user not found in database: ${JSON.stringify({\n            credentialID,\n            providerAccountId: authenticator.providerAccountId,\n            userID: account.userId,\n        })}`);\n    }\n    return {\n        account,\n        user,\n    };\n}\nasync function verifyRegister(options, request, resCookies) {\n    const { provider } = options;\n    // Get WebAuthn response from request body\n    const data = request.body && typeof request.body.data === \"string\"\n        ? JSON.parse(request.body.data)\n        : undefined;\n    if (!data ||\n        typeof data !== \"object\" ||\n        !(\"id\" in data) ||\n        typeof data.id !== \"string\") {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Invalid WebAuthn Registration response\");\n    }\n    // Get challenge from request cookies\n    const { challenge: expectedChallenge, registerData: user } = await _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__.webauthnChallenge.use(options, request.cookies, resCookies);\n    if (!user) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Missing user registration data in WebAuthn challenge cookie\");\n    }\n    // Verify the response\n    let verification;\n    try {\n        const relayingParty = provider.getRelayingParty(options, request);\n        verification = await provider.simpleWebAuthn.verifyRegistrationResponse({\n            ...provider.verifyRegistrationOptions,\n            expectedChallenge,\n            response: data,\n            expectedOrigin: relayingParty.origin,\n            expectedRPID: relayingParty.id,\n        });\n    }\n    catch (e) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.WebAuthnVerificationError(e);\n    }\n    // Make sure the response was verified\n    if (!verification.verified || !verification.registrationInfo) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.WebAuthnVerificationError(\"WebAuthn registration response could not be verified\");\n    }\n    // Build a new account\n    const account = {\n        providerAccountId: toBase64(verification.registrationInfo.credentialID),\n        provider: options.provider.id,\n        type: provider.type,\n    };\n    // Build a new authenticator\n    const authenticator = {\n        providerAccountId: account.providerAccountId,\n        counter: verification.registrationInfo.counter,\n        credentialID: toBase64(verification.registrationInfo.credentialID),\n        credentialPublicKey: toBase64(verification.registrationInfo.credentialPublicKey),\n        credentialBackedUp: verification.registrationInfo.credentialBackedUp,\n        credentialDeviceType: verification.registrationInfo.credentialDeviceType,\n        transports: transportsToString(data.response\n            .transports),\n    };\n    // Return created stuff\n    return {\n        user,\n        account,\n        authenticator,\n    };\n}\n/**\n * Generates WebAuthn authentication options.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - Optional user information.\n * @returns The authentication options.\n */\nasync function getAuthenticationOptions(options, request, user) {\n    const { provider, adapter } = options;\n    // Get the user's authenticators.\n    const authenticators = user && user[\"id\"]\n        ? await adapter.listAuthenticatorsByUserId(user.id)\n        : null;\n    const relayingParty = provider.getRelayingParty(options, request);\n    // Return the authentication options.\n    return await provider.simpleWebAuthn.generateAuthenticationOptions({\n        ...provider.authenticationOptions,\n        rpID: relayingParty.id,\n        allowCredentials: authenticators?.map((a) => ({\n            id: fromBase64(a.credentialID),\n            type: \"public-key\",\n            transports: stringToTransports(a.transports),\n        })),\n    });\n}\n/**\n * Generates WebAuthn registration options.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - The user information.\n * @returns The registration options.\n */\nasync function getRegistrationOptions(options, request, user) {\n    const { provider, adapter } = options;\n    // Get the user's authenticators.\n    const authenticators = user[\"id\"]\n        ? await adapter.listAuthenticatorsByUserId(user.id)\n        : null;\n    // Generate a random user ID for the credential.\n    // We can do this because we don't use this user ID to link the\n    // credential to the user. Instead, we store actual userID in the\n    // Authenticator object and fetch it via it's credential ID.\n    const userID = (0,_web_js__WEBPACK_IMPORTED_MODULE_2__.randomString)(32);\n    const relayingParty = provider.getRelayingParty(options, request);\n    // Return the registration options.\n    return await provider.simpleWebAuthn.generateRegistrationOptions({\n        ...provider.registrationOptions,\n        userID,\n        userName: user.email,\n        userDisplayName: user.name ?? undefined,\n        rpID: relayingParty.id,\n        rpName: relayingParty.name,\n        excludeCredentials: authenticators?.map((a) => ({\n            id: fromBase64(a.credentialID),\n            type: \"public-key\",\n            transports: stringToTransports(a.transports),\n        })),\n    });\n}\nfunction assertInternalOptionsWebAuthn(options) {\n    const { provider, adapter } = options;\n    // Adapter is required for WebAuthn\n    if (!adapter)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.MissingAdapter(\"An adapter is required for the WebAuthn provider\");\n    // Provider must be WebAuthn\n    if (!provider || provider.type !== \"webauthn\") {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidProvider(\"Provider must be WebAuthn\");\n    }\n    // Narrow the options type for typed usage later\n    return { ...options, provider, adapter };\n}\nfunction fromAdapterAuthenticator(authenticator) {\n    return {\n        ...authenticator,\n        credentialDeviceType: authenticator.credentialDeviceType,\n        transports: stringToTransports(authenticator.transports),\n        credentialID: fromBase64(authenticator.credentialID),\n        credentialPublicKey: fromBase64(authenticator.credentialPublicKey),\n    };\n}\nfunction fromBase64(base64) {\n    return new Uint8Array(Buffer.from(base64, \"base64\"));\n}\nfunction toBase64(bytes) {\n    return Buffer.from(bytes).toString(\"base64\");\n}\nfunction transportsToString(transports) {\n    return transports?.join(\",\");\n}\nfunction stringToTransports(tstring) {\n    return tstring\n        ? tstring.split(\",\")\n        : undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL2xpYi91dGlscy93ZWJhdXRobi11dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXVIO0FBQy9DO0FBQ2hDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSx1QkFBdUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTLFFBQVEsZ0ZBQWlCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUyxRQUFRLGdGQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ087QUFDUCxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlEQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpREFBUyxrREFBa0Q7QUFDN0U7QUFDQSxTQUFTLEVBQUU7QUFDWDtBQUNBO0FBQ0EsWUFBWSwrQkFBK0IsUUFBUSxnRkFBaUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esa0JBQWtCLGlFQUF5QjtBQUMzQztBQUNBLFlBQVksK0JBQStCO0FBQzNDO0FBQ0E7QUFDQSxrQkFBa0IsaUVBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBWSxtR0FBbUc7QUFDakk7QUFDQTtBQUNBO0FBQ0EsU0FBUyxFQUFFO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaURBQVMsNENBQTRDO0FBQ3ZFO0FBQ0E7QUFDQSxTQUFTLEVBQUU7QUFDWDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaURBQVMseUNBQXlDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLFNBQVMsRUFBRTtBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaURBQVM7QUFDM0I7QUFDQTtBQUNBLFlBQVksbURBQW1ELFFBQVEsZ0ZBQWlCO0FBQ3hGO0FBQ0Esa0JBQWtCLGlEQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtCQUFrQixpRUFBeUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlFQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscURBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0Esa0JBQWtCLHNEQUFjO0FBQ2hDO0FBQ0E7QUFDQSxrQkFBa0IsdURBQWU7QUFDakM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxcbGliXFx1dGlsc1xcd2ViYXV0aG4tdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWRhcHRlckVycm9yLCBBdXRoRXJyb3IsIEludmFsaWRQcm92aWRlciwgTWlzc2luZ0FkYXB0ZXIsIFdlYkF1dGhuVmVyaWZpY2F0aW9uRXJyb3IsIH0gZnJvbSBcIi4uLy4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgd2ViYXV0aG5DaGFsbGVuZ2UgfSBmcm9tIFwiLi4vYWN0aW9ucy9jYWxsYmFjay9vYXV0aC9jaGVja3MuanNcIjtcbmltcG9ydCB7IHJhbmRvbVN0cmluZyB9IGZyb20gXCIuL3dlYi5qc1wiO1xuLyoqXG4gKiBJbmZlcnMgdGhlIFdlYkF1dGhuIG9wdGlvbnMgYmFzZWQgb24gdGhlIHByb3ZpZGVkIHBhcmFtZXRlcnMuXG4gKlxuICogQHBhcmFtIGFjdGlvbiAtIFRoZSBXZWJBdXRobiBhY3Rpb24gdG8gcGVyZm9ybSAob3B0aW9uYWwpLlxuICogQHBhcmFtIGxvZ2dlZEluVXNlciAtIFRoZSBsb2dnZWQtaW4gdXNlciAob3B0aW9uYWwpLlxuICogQHBhcmFtIHVzZXJJbmZvUmVzcG9uc2UgLSBUaGUgcmVzcG9uc2UgY29udGFpbmluZyB1c2VyIGluZm9ybWF0aW9uIChvcHRpb25hbCkuXG4gKlxuICogQHJldHVybnMgVGhlIFdlYkF1dGhuIGFjdGlvbiB0byBwZXJmb3JtLCBvciBudWxsIGlmIG5vIGluZmVyZW5jZSBjb3VsZCBiZSBtYWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mZXJXZWJBdXRobk9wdGlvbnMoYWN0aW9uLCBsb2dnZWRJbiwgdXNlckluZm9SZXNwb25zZSkge1xuICAgIGNvbnN0IHsgdXNlciwgZXhpc3RzID0gZmFsc2UgfSA9IHVzZXJJbmZvUmVzcG9uc2UgPz8ge307XG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgY2FzZSBcImF1dGhlbnRpY2F0ZVwiOiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFsd2F5cyBhbGxvdyBleHBsaWNpdCBhdXRoZW50aWNhdGlvbiByZXF1ZXN0cy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmV0dXJuIFwiYXV0aGVudGljYXRlXCI7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInJlZ2lzdGVyXCI6IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVnaXN0cmF0aW9uIGlzIG9ubHkgYWxsb3dlZCBpZjpcbiAgICAgICAgICAgICAqIC0gVGhlIHVzZXIgaXMgbG9nZ2VkIGluLCBtZWFuaW5nIHRoZSB1c2VyIHdhbnRzIHRvIHJlZ2lzdGVyIGEgbmV3IGF1dGhlbnRpY2F0b3IuXG4gICAgICAgICAgICAgKiAtIFRoZSB1c2VyIGlzIG5vdCBsb2dnZWQgaW4gYW5kIHByb3ZpZGVkIHVzZXIgaW5mbyB0aGF0IGRvZXMgTk9UIGV4aXN0LCBtZWFuaW5nIHRoZSB1c2VyIHdhbnRzIHRvIHJlZ2lzdGVyIGEgbmV3IGFjY291bnQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICh1c2VyICYmIGxvZ2dlZEluID09PSBleGlzdHMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicmVnaXN0ZXJcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgdW5kZWZpbmVkOiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFdoZW4gbm8gZXhwbGljaXQgYWN0aW9uIGlzIHByb3ZpZGVkLCB3ZSB0cnkgdG8gaW5mZXIgaXQgYmFzZWQgb24gdGhlIHVzZXIgaW5mbyBwcm92aWRlZC4gVGhlc2UgYXJlIHRoZSBwb3NzaWJsZSBjYXNlczpcbiAgICAgICAgICAgICAqIC0gTG9nZ2VkIGluIHVzZXJzIG11c3QgYWx3YXlzIHNlbmQgYW4gZXhwbGl0IGFjdGlvbiwgc28gd2UgYmFpbCBvdXQgaW4gdGhpcyBjYXNlLlxuICAgICAgICAgICAgICogLSBPdGhlcndpc2UsIGlmIG5vIHVzZXIgaW5mbyBpcyBwcm92aWRlZCwgdGhlIGRlc2lyZWQgYWN0aW9uIGlzIGF1dGhlbnRpY2F0aW9uIHdpdGhvdXQgcHJlLWRlZmluZWQgYXV0aGVudGljYXRvcnMuXG4gICAgICAgICAgICAgKiAtIE90aGVyd2lzZSwgaWYgdGhlIHVzZXIgaW5mbyBwcm92aWRlZCBpcyBvZiBhbiBleGlzdGluZyB1c2VyLCB0aGUgZGVzaXJlZCBhY3Rpb24gaXMgYXV0aGVudGljYXRpb24gd2l0aCB0aGVpciBwcmUtZGVmaW5lZCBhdXRoZW50aWNhdG9ycy5cbiAgICAgICAgICAgICAqIC0gRmluYWxseSwgaWYgdGhlIHVzZXIgaW5mbyBwcm92aWRlZCBpcyBvZiBhIG5vbi1leGlzdGluZyB1c2VyLCB0aGUgZGVzaXJlZCBhY3Rpb24gaXMgcmVnaXN0cmF0aW9uLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoIWxvZ2dlZEluKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYXV0aGVudGljYXRlXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZWdpc3RlclwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhdXRoZW50aWNhdGVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBObyBkZWNpc2lvbiBjb3VsZCBiZSBtYWRlXG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgcmVnaXN0cmF0aW9uIHJlc3BvbnNlIGZvciBXZWJBdXRobiBvcHRpb25zIHJlcXVlc3QuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgaW50ZXJuYWwgb3B0aW9ucyBmb3IgV2ViQXV0aG4uXG4gKiBAcGFyYW0gcmVxdWVzdCAtIFRoZSByZXF1ZXN0IG9iamVjdC5cbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgaW5mb3JtYXRpb24uXG4gKiBAcGFyYW0gcmVzQ29va2llcyAtIE9wdGlvbmFsIGNvb2tpZXMgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIFdlYkF1dGhuT3B0aW9uc1Jlc3BvbnNlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVnaXN0cmF0aW9uUmVzcG9uc2Uob3B0aW9ucywgcmVxdWVzdCwgdXNlciwgcmVzQ29va2llcykge1xuICAgIC8vIEdldCByZWdpc3RyYXRpb24gb3B0aW9uc1xuICAgIGNvbnN0IHJlZ09wdGlvbnMgPSBhd2FpdCBnZXRSZWdpc3RyYXRpb25PcHRpb25zKG9wdGlvbnMsIHJlcXVlc3QsIHVzZXIpO1xuICAgIC8vIEdldCBzaWduZWQgY29va2llXG4gICAgY29uc3QgeyBjb29raWUgfSA9IGF3YWl0IHdlYmF1dGhuQ2hhbGxlbmdlLmNyZWF0ZShvcHRpb25zLCByZWdPcHRpb25zLmNoYWxsZW5nZSwgdXNlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGNvb2tpZXM6IFsuLi4ocmVzQ29va2llcyA/PyBbXSksIGNvb2tpZV0sXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIGFjdGlvbjogXCJyZWdpc3RlclwiLFxuICAgICAgICAgICAgb3B0aW9uczogcmVnT3B0aW9ucyxcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogUmV0cmlldmVzIHRoZSBhdXRoZW50aWNhdGlvbiByZXNwb25zZSBmb3IgV2ViQXV0aG4gb3B0aW9ucyByZXF1ZXN0LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIGludGVybmFsIG9wdGlvbnMgZm9yIFdlYkF1dGhuLlxuICogQHBhcmFtIHJlcXVlc3QgLSBUaGUgcmVxdWVzdCBvYmplY3QuXG4gKiBAcGFyYW0gdXNlciAtIE9wdGlvbmFsIHVzZXIgaW5mb3JtYXRpb24uXG4gKiBAcGFyYW0gcmVzQ29va2llcyAtIE9wdGlvbmFsIGFycmF5IG9mIGNvb2tpZXMgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBXZWJBdXRobk9wdGlvbnNSZXNwb25zZSBvYmplY3QuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGlvblJlc3BvbnNlKG9wdGlvbnMsIHJlcXVlc3QsIHVzZXIsIHJlc0Nvb2tpZXMpIHtcbiAgICAvLyBHZXQgYXV0aGVudGljYXRpb24gb3B0aW9uc1xuICAgIGNvbnN0IGF1dGhPcHRpb25zID0gYXdhaXQgZ2V0QXV0aGVudGljYXRpb25PcHRpb25zKG9wdGlvbnMsIHJlcXVlc3QsIHVzZXIpO1xuICAgIC8vIEdldCBzaWduZWQgY29va2llXG4gICAgY29uc3QgeyBjb29raWUgfSA9IGF3YWl0IHdlYmF1dGhuQ2hhbGxlbmdlLmNyZWF0ZShvcHRpb25zLCBhdXRoT3B0aW9ucy5jaGFsbGVuZ2UpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBjb29raWVzOiBbLi4uKHJlc0Nvb2tpZXMgPz8gW10pLCBjb29raWVdLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBhY3Rpb246IFwiYXV0aGVudGljYXRlXCIsXG4gICAgICAgICAgICBvcHRpb25zOiBhdXRoT3B0aW9ucyxcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlBdXRoZW50aWNhdGUob3B0aW9ucywgcmVxdWVzdCwgcmVzQ29va2llcykge1xuICAgIGNvbnN0IHsgYWRhcHRlciwgcHJvdmlkZXIgfSA9IG9wdGlvbnM7XG4gICAgLy8gR2V0IFdlYkF1dGhuIHJlc3BvbnNlIGZyb20gcmVxdWVzdCBib2R5XG4gICAgY29uc3QgZGF0YSA9IHJlcXVlc3QuYm9keSAmJiB0eXBlb2YgcmVxdWVzdC5ib2R5LmRhdGEgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBKU09OLnBhcnNlKHJlcXVlc3QuYm9keS5kYXRhKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIWRhdGEgfHxcbiAgICAgICAgdHlwZW9mIGRhdGEgIT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgIShcImlkXCIgaW4gZGF0YSkgfHxcbiAgICAgICAgdHlwZW9mIGRhdGEuaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIkludmFsaWQgV2ViQXV0aG4gQXV0aGVudGljYXRpb24gcmVzcG9uc2VcIik7XG4gICAgfVxuICAgIC8vIFJlc2V0IHRoZSBJRCBzbyB3ZSBzbW9vdGggb3V0IGltcGxlbWVudGF0aW9uIGRpZmZlcmVuY2VzXG4gICAgY29uc3QgY3JlZGVudGlhbElEID0gdG9CYXNlNjQoZnJvbUJhc2U2NChkYXRhLmlkKSk7XG4gICAgLy8gR2V0IGF1dGhlbnRpY2F0b3IgZnJvbSBkYXRhYmFzZVxuICAgIGNvbnN0IGF1dGhlbnRpY2F0b3IgPSBhd2FpdCBhZGFwdGVyLmdldEF1dGhlbnRpY2F0b3IoY3JlZGVudGlhbElEKTtcbiAgICBpZiAoIWF1dGhlbnRpY2F0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihgV2ViQXV0aG4gYXV0aGVudGljYXRvciBub3QgZm91bmQgaW4gZGF0YWJhc2U6ICR7SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY3JlZGVudGlhbElELFxuICAgICAgICB9KX1gKTtcbiAgICB9XG4gICAgLy8gR2V0IGNoYWxsZW5nZSBmcm9tIHJlcXVlc3QgY29va2llc1xuICAgIGNvbnN0IHsgY2hhbGxlbmdlOiBleHBlY3RlZENoYWxsZW5nZSB9ID0gYXdhaXQgd2ViYXV0aG5DaGFsbGVuZ2UudXNlKG9wdGlvbnMsIHJlcXVlc3QuY29va2llcywgcmVzQ29va2llcyk7XG4gICAgLy8gVmVyaWZ5IHRoZSByZXNwb25zZVxuICAgIGxldCB2ZXJpZmljYXRpb247XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVsYXlpbmdQYXJ0eSA9IHByb3ZpZGVyLmdldFJlbGF5aW5nUGFydHkob3B0aW9ucywgcmVxdWVzdCk7XG4gICAgICAgIHZlcmlmaWNhdGlvbiA9IGF3YWl0IHByb3ZpZGVyLnNpbXBsZVdlYkF1dGhuLnZlcmlmeUF1dGhlbnRpY2F0aW9uUmVzcG9uc2Uoe1xuICAgICAgICAgICAgLi4ucHJvdmlkZXIudmVyaWZ5QXV0aGVudGljYXRpb25PcHRpb25zLFxuICAgICAgICAgICAgZXhwZWN0ZWRDaGFsbGVuZ2UsXG4gICAgICAgICAgICByZXNwb25zZTogZGF0YSxcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0b3I6IGZyb21BZGFwdGVyQXV0aGVudGljYXRvcihhdXRoZW50aWNhdG9yKSxcbiAgICAgICAgICAgIGV4cGVjdGVkT3JpZ2luOiByZWxheWluZ1BhcnR5Lm9yaWdpbixcbiAgICAgICAgICAgIGV4cGVjdGVkUlBJRDogcmVsYXlpbmdQYXJ0eS5pZCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBXZWJBdXRoblZlcmlmaWNhdGlvbkVycm9yKGUpO1xuICAgIH1cbiAgICBjb25zdCB7IHZlcmlmaWVkLCBhdXRoZW50aWNhdGlvbkluZm8gfSA9IHZlcmlmaWNhdGlvbjtcbiAgICAvLyBNYWtlIHN1cmUgdGhlIHJlc3BvbnNlIHdhcyB2ZXJpZmllZFxuICAgIGlmICghdmVyaWZpZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdlYkF1dGhuVmVyaWZpY2F0aW9uRXJyb3IoXCJXZWJBdXRobiBhdXRoZW50aWNhdGlvbiByZXNwb25zZSBjb3VsZCBub3QgYmUgdmVyaWZpZWRcIik7XG4gICAgfVxuICAgIC8vIFVwZGF0ZSBhdXRoZW50aWNhdG9yIGNvdW50ZXJcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IG5ld0NvdW50ZXIgfSA9IGF1dGhlbnRpY2F0aW9uSW5mbztcbiAgICAgICAgYXdhaXQgYWRhcHRlci51cGRhdGVBdXRoZW50aWNhdG9yQ291bnRlcihhdXRoZW50aWNhdG9yLmNyZWRlbnRpYWxJRCwgbmV3Q291bnRlcik7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBBZGFwdGVyRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgYXV0aGVudGljYXRvciBjb3VudGVyLiBUaGlzIG1heSBjYXVzZSBmdXR1cmUgYXV0aGVudGljYXRpb24gYXR0ZW1wdHMgdG8gZmFpbC4gJHtKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBjcmVkZW50aWFsSUQsXG4gICAgICAgICAgICBvbGRDb3VudGVyOiBhdXRoZW50aWNhdG9yLmNvdW50ZXIsXG4gICAgICAgICAgICBuZXdDb3VudGVyOiBhdXRoZW50aWNhdGlvbkluZm8ubmV3Q291bnRlcixcbiAgICAgICAgfSl9YCwgZSk7XG4gICAgfVxuICAgIC8vIEdldCB0aGUgYWNjb3VudCBhbmQgdXNlclxuICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhZGFwdGVyLmdldEFjY291bnQoYXV0aGVudGljYXRvci5wcm92aWRlckFjY291bnRJZCwgcHJvdmlkZXIuaWQpO1xuICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKGBXZWJBdXRobiBhY2NvdW50IG5vdCBmb3VuZCBpbiBkYXRhYmFzZTogJHtKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBjcmVkZW50aWFsSUQsXG4gICAgICAgICAgICBwcm92aWRlckFjY291bnRJZDogYXV0aGVudGljYXRvci5wcm92aWRlckFjY291bnRJZCxcbiAgICAgICAgfSl9YCk7XG4gICAgfVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhZGFwdGVyLmdldFVzZXIoYWNjb3VudC51c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKGBXZWJBdXRobiB1c2VyIG5vdCBmb3VuZCBpbiBkYXRhYmFzZTogJHtKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBjcmVkZW50aWFsSUQsXG4gICAgICAgICAgICBwcm92aWRlckFjY291bnRJZDogYXV0aGVudGljYXRvci5wcm92aWRlckFjY291bnRJZCxcbiAgICAgICAgICAgIHVzZXJJRDogYWNjb3VudC51c2VySWQsXG4gICAgICAgIH0pfWApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBhY2NvdW50LFxuICAgICAgICB1c2VyLFxuICAgIH07XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UmVnaXN0ZXIob3B0aW9ucywgcmVxdWVzdCwgcmVzQ29va2llcykge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIgfSA9IG9wdGlvbnM7XG4gICAgLy8gR2V0IFdlYkF1dGhuIHJlc3BvbnNlIGZyb20gcmVxdWVzdCBib2R5XG4gICAgY29uc3QgZGF0YSA9IHJlcXVlc3QuYm9keSAmJiB0eXBlb2YgcmVxdWVzdC5ib2R5LmRhdGEgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBKU09OLnBhcnNlKHJlcXVlc3QuYm9keS5kYXRhKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIWRhdGEgfHxcbiAgICAgICAgdHlwZW9mIGRhdGEgIT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgIShcImlkXCIgaW4gZGF0YSkgfHxcbiAgICAgICAgdHlwZW9mIGRhdGEuaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIkludmFsaWQgV2ViQXV0aG4gUmVnaXN0cmF0aW9uIHJlc3BvbnNlXCIpO1xuICAgIH1cbiAgICAvLyBHZXQgY2hhbGxlbmdlIGZyb20gcmVxdWVzdCBjb29raWVzXG4gICAgY29uc3QgeyBjaGFsbGVuZ2U6IGV4cGVjdGVkQ2hhbGxlbmdlLCByZWdpc3RlckRhdGE6IHVzZXIgfSA9IGF3YWl0IHdlYmF1dGhuQ2hhbGxlbmdlLnVzZShvcHRpb25zLCByZXF1ZXN0LmNvb2tpZXMsIHJlc0Nvb2tpZXMpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiTWlzc2luZyB1c2VyIHJlZ2lzdHJhdGlvbiBkYXRhIGluIFdlYkF1dGhuIGNoYWxsZW5nZSBjb29raWVcIik7XG4gICAgfVxuICAgIC8vIFZlcmlmeSB0aGUgcmVzcG9uc2VcbiAgICBsZXQgdmVyaWZpY2F0aW9uO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlbGF5aW5nUGFydHkgPSBwcm92aWRlci5nZXRSZWxheWluZ1BhcnR5KG9wdGlvbnMsIHJlcXVlc3QpO1xuICAgICAgICB2ZXJpZmljYXRpb24gPSBhd2FpdCBwcm92aWRlci5zaW1wbGVXZWJBdXRobi52ZXJpZnlSZWdpc3RyYXRpb25SZXNwb25zZSh7XG4gICAgICAgICAgICAuLi5wcm92aWRlci52ZXJpZnlSZWdpc3RyYXRpb25PcHRpb25zLFxuICAgICAgICAgICAgZXhwZWN0ZWRDaGFsbGVuZ2UsXG4gICAgICAgICAgICByZXNwb25zZTogZGF0YSxcbiAgICAgICAgICAgIGV4cGVjdGVkT3JpZ2luOiByZWxheWluZ1BhcnR5Lm9yaWdpbixcbiAgICAgICAgICAgIGV4cGVjdGVkUlBJRDogcmVsYXlpbmdQYXJ0eS5pZCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBXZWJBdXRoblZlcmlmaWNhdGlvbkVycm9yKGUpO1xuICAgIH1cbiAgICAvLyBNYWtlIHN1cmUgdGhlIHJlc3BvbnNlIHdhcyB2ZXJpZmllZFxuICAgIGlmICghdmVyaWZpY2F0aW9uLnZlcmlmaWVkIHx8ICF2ZXJpZmljYXRpb24ucmVnaXN0cmF0aW9uSW5mbykge1xuICAgICAgICB0aHJvdyBuZXcgV2ViQXV0aG5WZXJpZmljYXRpb25FcnJvcihcIldlYkF1dGhuIHJlZ2lzdHJhdGlvbiByZXNwb25zZSBjb3VsZCBub3QgYmUgdmVyaWZpZWRcIik7XG4gICAgfVxuICAgIC8vIEJ1aWxkIGEgbmV3IGFjY291bnRcbiAgICBjb25zdCBhY2NvdW50ID0ge1xuICAgICAgICBwcm92aWRlckFjY291bnRJZDogdG9CYXNlNjQodmVyaWZpY2F0aW9uLnJlZ2lzdHJhdGlvbkluZm8uY3JlZGVudGlhbElEKSxcbiAgICAgICAgcHJvdmlkZXI6IG9wdGlvbnMucHJvdmlkZXIuaWQsXG4gICAgICAgIHR5cGU6IHByb3ZpZGVyLnR5cGUsXG4gICAgfTtcbiAgICAvLyBCdWlsZCBhIG5ldyBhdXRoZW50aWNhdG9yXG4gICAgY29uc3QgYXV0aGVudGljYXRvciA9IHtcbiAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgIGNvdW50ZXI6IHZlcmlmaWNhdGlvbi5yZWdpc3RyYXRpb25JbmZvLmNvdW50ZXIsXG4gICAgICAgIGNyZWRlbnRpYWxJRDogdG9CYXNlNjQodmVyaWZpY2F0aW9uLnJlZ2lzdHJhdGlvbkluZm8uY3JlZGVudGlhbElEKSxcbiAgICAgICAgY3JlZGVudGlhbFB1YmxpY0tleTogdG9CYXNlNjQodmVyaWZpY2F0aW9uLnJlZ2lzdHJhdGlvbkluZm8uY3JlZGVudGlhbFB1YmxpY0tleSksXG4gICAgICAgIGNyZWRlbnRpYWxCYWNrZWRVcDogdmVyaWZpY2F0aW9uLnJlZ2lzdHJhdGlvbkluZm8uY3JlZGVudGlhbEJhY2tlZFVwLFxuICAgICAgICBjcmVkZW50aWFsRGV2aWNlVHlwZTogdmVyaWZpY2F0aW9uLnJlZ2lzdHJhdGlvbkluZm8uY3JlZGVudGlhbERldmljZVR5cGUsXG4gICAgICAgIHRyYW5zcG9ydHM6IHRyYW5zcG9ydHNUb1N0cmluZyhkYXRhLnJlc3BvbnNlXG4gICAgICAgICAgICAudHJhbnNwb3J0cyksXG4gICAgfTtcbiAgICAvLyBSZXR1cm4gY3JlYXRlZCBzdHVmZlxuICAgIHJldHVybiB7XG4gICAgICAgIHVzZXIsXG4gICAgICAgIGFjY291bnQsXG4gICAgICAgIGF1dGhlbnRpY2F0b3IsXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIFdlYkF1dGhuIGF1dGhlbnRpY2F0aW9uIG9wdGlvbnMuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgaW50ZXJuYWwgb3B0aW9ucyBmb3IgV2ViQXV0aG4uXG4gKiBAcGFyYW0gcmVxdWVzdCAtIFRoZSByZXF1ZXN0IG9iamVjdC5cbiAqIEBwYXJhbSB1c2VyIC0gT3B0aW9uYWwgdXNlciBpbmZvcm1hdGlvbi5cbiAqIEByZXR1cm5zIFRoZSBhdXRoZW50aWNhdGlvbiBvcHRpb25zLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGlvbk9wdGlvbnMob3B0aW9ucywgcmVxdWVzdCwgdXNlcikge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIGFkYXB0ZXIgfSA9IG9wdGlvbnM7XG4gICAgLy8gR2V0IHRoZSB1c2VyJ3MgYXV0aGVudGljYXRvcnMuXG4gICAgY29uc3QgYXV0aGVudGljYXRvcnMgPSB1c2VyICYmIHVzZXJbXCJpZFwiXVxuICAgICAgICA/IGF3YWl0IGFkYXB0ZXIubGlzdEF1dGhlbnRpY2F0b3JzQnlVc2VySWQodXNlci5pZClcbiAgICAgICAgOiBudWxsO1xuICAgIGNvbnN0IHJlbGF5aW5nUGFydHkgPSBwcm92aWRlci5nZXRSZWxheWluZ1BhcnR5KG9wdGlvbnMsIHJlcXVlc3QpO1xuICAgIC8vIFJldHVybiB0aGUgYXV0aGVudGljYXRpb24gb3B0aW9ucy5cbiAgICByZXR1cm4gYXdhaXQgcHJvdmlkZXIuc2ltcGxlV2ViQXV0aG4uZ2VuZXJhdGVBdXRoZW50aWNhdGlvbk9wdGlvbnMoe1xuICAgICAgICAuLi5wcm92aWRlci5hdXRoZW50aWNhdGlvbk9wdGlvbnMsXG4gICAgICAgIHJwSUQ6IHJlbGF5aW5nUGFydHkuaWQsXG4gICAgICAgIGFsbG93Q3JlZGVudGlhbHM6IGF1dGhlbnRpY2F0b3JzPy5tYXAoKGEpID0+ICh7XG4gICAgICAgICAgICBpZDogZnJvbUJhc2U2NChhLmNyZWRlbnRpYWxJRCksXG4gICAgICAgICAgICB0eXBlOiBcInB1YmxpYy1rZXlcIixcbiAgICAgICAgICAgIHRyYW5zcG9ydHM6IHN0cmluZ1RvVHJhbnNwb3J0cyhhLnRyYW5zcG9ydHMpLFxuICAgICAgICB9KSksXG4gICAgfSk7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBXZWJBdXRobiByZWdpc3RyYXRpb24gb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBpbnRlcm5hbCBvcHRpb25zIGZvciBXZWJBdXRobi5cbiAqIEBwYXJhbSByZXF1ZXN0IC0gVGhlIHJlcXVlc3Qgb2JqZWN0LlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlciBpbmZvcm1hdGlvbi5cbiAqIEByZXR1cm5zIFRoZSByZWdpc3RyYXRpb24gb3B0aW9ucy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0UmVnaXN0cmF0aW9uT3B0aW9ucyhvcHRpb25zLCByZXF1ZXN0LCB1c2VyKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgYWRhcHRlciB9ID0gb3B0aW9ucztcbiAgICAvLyBHZXQgdGhlIHVzZXIncyBhdXRoZW50aWNhdG9ycy5cbiAgICBjb25zdCBhdXRoZW50aWNhdG9ycyA9IHVzZXJbXCJpZFwiXVxuICAgICAgICA/IGF3YWl0IGFkYXB0ZXIubGlzdEF1dGhlbnRpY2F0b3JzQnlVc2VySWQodXNlci5pZClcbiAgICAgICAgOiBudWxsO1xuICAgIC8vIEdlbmVyYXRlIGEgcmFuZG9tIHVzZXIgSUQgZm9yIHRoZSBjcmVkZW50aWFsLlxuICAgIC8vIFdlIGNhbiBkbyB0aGlzIGJlY2F1c2Ugd2UgZG9uJ3QgdXNlIHRoaXMgdXNlciBJRCB0byBsaW5rIHRoZVxuICAgIC8vIGNyZWRlbnRpYWwgdG8gdGhlIHVzZXIuIEluc3RlYWQsIHdlIHN0b3JlIGFjdHVhbCB1c2VySUQgaW4gdGhlXG4gICAgLy8gQXV0aGVudGljYXRvciBvYmplY3QgYW5kIGZldGNoIGl0IHZpYSBpdCdzIGNyZWRlbnRpYWwgSUQuXG4gICAgY29uc3QgdXNlcklEID0gcmFuZG9tU3RyaW5nKDMyKTtcbiAgICBjb25zdCByZWxheWluZ1BhcnR5ID0gcHJvdmlkZXIuZ2V0UmVsYXlpbmdQYXJ0eShvcHRpb25zLCByZXF1ZXN0KTtcbiAgICAvLyBSZXR1cm4gdGhlIHJlZ2lzdHJhdGlvbiBvcHRpb25zLlxuICAgIHJldHVybiBhd2FpdCBwcm92aWRlci5zaW1wbGVXZWJBdXRobi5nZW5lcmF0ZVJlZ2lzdHJhdGlvbk9wdGlvbnMoe1xuICAgICAgICAuLi5wcm92aWRlci5yZWdpc3RyYXRpb25PcHRpb25zLFxuICAgICAgICB1c2VySUQsXG4gICAgICAgIHVzZXJOYW1lOiB1c2VyLmVtYWlsLFxuICAgICAgICB1c2VyRGlzcGxheU5hbWU6IHVzZXIubmFtZSA/PyB1bmRlZmluZWQsXG4gICAgICAgIHJwSUQ6IHJlbGF5aW5nUGFydHkuaWQsXG4gICAgICAgIHJwTmFtZTogcmVsYXlpbmdQYXJ0eS5uYW1lLFxuICAgICAgICBleGNsdWRlQ3JlZGVudGlhbHM6IGF1dGhlbnRpY2F0b3JzPy5tYXAoKGEpID0+ICh7XG4gICAgICAgICAgICBpZDogZnJvbUJhc2U2NChhLmNyZWRlbnRpYWxJRCksXG4gICAgICAgICAgICB0eXBlOiBcInB1YmxpYy1rZXlcIixcbiAgICAgICAgICAgIHRyYW5zcG9ydHM6IHN0cmluZ1RvVHJhbnNwb3J0cyhhLnRyYW5zcG9ydHMpLFxuICAgICAgICB9KSksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0SW50ZXJuYWxPcHRpb25zV2ViQXV0aG4ob3B0aW9ucykge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIGFkYXB0ZXIgfSA9IG9wdGlvbnM7XG4gICAgLy8gQWRhcHRlciBpcyByZXF1aXJlZCBmb3IgV2ViQXV0aG5cbiAgICBpZiAoIWFkYXB0ZXIpXG4gICAgICAgIHRocm93IG5ldyBNaXNzaW5nQWRhcHRlcihcIkFuIGFkYXB0ZXIgaXMgcmVxdWlyZWQgZm9yIHRoZSBXZWJBdXRobiBwcm92aWRlclwiKTtcbiAgICAvLyBQcm92aWRlciBtdXN0IGJlIFdlYkF1dGhuXG4gICAgaWYgKCFwcm92aWRlciB8fCBwcm92aWRlci50eXBlICE9PSBcIndlYmF1dGhuXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRQcm92aWRlcihcIlByb3ZpZGVyIG11c3QgYmUgV2ViQXV0aG5cIik7XG4gICAgfVxuICAgIC8vIE5hcnJvdyB0aGUgb3B0aW9ucyB0eXBlIGZvciB0eXBlZCB1c2FnZSBsYXRlclxuICAgIHJldHVybiB7IC4uLm9wdGlvbnMsIHByb3ZpZGVyLCBhZGFwdGVyIH07XG59XG5mdW5jdGlvbiBmcm9tQWRhcHRlckF1dGhlbnRpY2F0b3IoYXV0aGVudGljYXRvcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmF1dGhlbnRpY2F0b3IsXG4gICAgICAgIGNyZWRlbnRpYWxEZXZpY2VUeXBlOiBhdXRoZW50aWNhdG9yLmNyZWRlbnRpYWxEZXZpY2VUeXBlLFxuICAgICAgICB0cmFuc3BvcnRzOiBzdHJpbmdUb1RyYW5zcG9ydHMoYXV0aGVudGljYXRvci50cmFuc3BvcnRzKSxcbiAgICAgICAgY3JlZGVudGlhbElEOiBmcm9tQmFzZTY0KGF1dGhlbnRpY2F0b3IuY3JlZGVudGlhbElEKSxcbiAgICAgICAgY3JlZGVudGlhbFB1YmxpY0tleTogZnJvbUJhc2U2NChhdXRoZW50aWNhdG9yLmNyZWRlbnRpYWxQdWJsaWNLZXkpLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUJhc2U2NChiYXNlNjQpIHtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoQnVmZmVyLmZyb20oYmFzZTY0LCBcImJhc2U2NFwiKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9CYXNlNjQoYnl0ZXMpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oYnl0ZXMpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zcG9ydHNUb1N0cmluZyh0cmFuc3BvcnRzKSB7XG4gICAgcmV0dXJuIHRyYW5zcG9ydHM/LmpvaW4oXCIsXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvVHJhbnNwb3J0cyh0c3RyaW5nKSB7XG4gICAgcmV0dXJuIHRzdHJpbmdcbiAgICAgICAgPyB0c3RyaW5nLnNwbGl0KFwiLFwiKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/lib/utils/webauthn-utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/lib/utils/webauthn-utils.js":
/*!*************************************************************!*\
  !*** ./node_modules/@auth/core/lib/utils/webauthn-utils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertInternalOptionsWebAuthn: () => (/* binding */ assertInternalOptionsWebAuthn),\n/* harmony export */   fromBase64: () => (/* binding */ fromBase64),\n/* harmony export */   getAuthenticationResponse: () => (/* binding */ getAuthenticationResponse),\n/* harmony export */   getRegistrationResponse: () => (/* binding */ getRegistrationResponse),\n/* harmony export */   inferWebAuthnOptions: () => (/* binding */ inferWebAuthnOptions),\n/* harmony export */   stringToTransports: () => (/* binding */ stringToTransports),\n/* harmony export */   toBase64: () => (/* binding */ toBase64),\n/* harmony export */   transportsToString: () => (/* binding */ transportsToString),\n/* harmony export */   verifyAuthenticate: () => (/* binding */ verifyAuthenticate),\n/* harmony export */   verifyRegister: () => (/* binding */ verifyRegister)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(rsc)/./node_modules/@auth/core/errors.js\");\n/* harmony import */ var _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../actions/callback/oauth/checks.js */ \"(rsc)/./node_modules/@auth/core/lib/actions/callback/oauth/checks.js\");\n/* harmony import */ var _web_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./web.js */ \"(rsc)/./node_modules/@auth/core/lib/utils/web.js\");\n\n\n\n/**\n * Infers the WebAuthn options based on the provided parameters.\n *\n * @param action - The WebAuthn action to perform (optional).\n * @param loggedInUser - The logged-in user (optional).\n * @param userInfoResponse - The response containing user information (optional).\n *\n * @returns The WebAuthn action to perform, or null if no inference could be made.\n */\nfunction inferWebAuthnOptions(action, loggedIn, userInfoResponse) {\n    const { user, exists = false } = userInfoResponse ?? {};\n    switch (action) {\n        case \"authenticate\": {\n            /**\n             * Always allow explicit authentication requests.\n             */\n            return \"authenticate\";\n        }\n        case \"register\": {\n            /**\n             * Registration is only allowed if:\n             * - The user is logged in, meaning the user wants to register a new authenticator.\n             * - The user is not logged in and provided user info that does NOT exist, meaning the user wants to register a new account.\n             */\n            if (user && loggedIn === exists)\n                return \"register\";\n            break;\n        }\n        case undefined: {\n            /**\n             * When no explicit action is provided, we try to infer it based on the user info provided. These are the possible cases:\n             * - Logged in users must always send an explit action, so we bail out in this case.\n             * - Otherwise, if no user info is provided, the desired action is authentication without pre-defined authenticators.\n             * - Otherwise, if the user info provided is of an existing user, the desired action is authentication with their pre-defined authenticators.\n             * - Finally, if the user info provided is of a non-existing user, the desired action is registration.\n             */\n            if (!loggedIn) {\n                if (user) {\n                    if (exists) {\n                        return \"authenticate\";\n                    }\n                    else {\n                        return \"register\";\n                    }\n                }\n                else {\n                    return \"authenticate\";\n                }\n            }\n            break;\n        }\n    }\n    // No decision could be made\n    return null;\n}\n/**\n * Retrieves the registration response for WebAuthn options request.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - The user information.\n * @param resCookies - Optional cookies to be included in the response.\n * @returns A promise that resolves to the WebAuthnOptionsResponse.\n */\nasync function getRegistrationResponse(options, request, user, resCookies) {\n    // Get registration options\n    const regOptions = await getRegistrationOptions(options, request, user);\n    // Get signed cookie\n    const { cookie } = await _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__.webauthnChallenge.create(options, regOptions.challenge, user);\n    return {\n        status: 200,\n        cookies: [...(resCookies ?? []), cookie],\n        body: {\n            action: \"register\",\n            options: regOptions,\n        },\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n    };\n}\n/**\n * Retrieves the authentication response for WebAuthn options request.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - Optional user information.\n * @param resCookies - Optional array of cookies to be included in the response.\n * @returns A promise that resolves to a WebAuthnOptionsResponse object.\n */\nasync function getAuthenticationResponse(options, request, user, resCookies) {\n    // Get authentication options\n    const authOptions = await getAuthenticationOptions(options, request, user);\n    // Get signed cookie\n    const { cookie } = await _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__.webauthnChallenge.create(options, authOptions.challenge);\n    return {\n        status: 200,\n        cookies: [...(resCookies ?? []), cookie],\n        body: {\n            action: \"authenticate\",\n            options: authOptions,\n        },\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n    };\n}\nasync function verifyAuthenticate(options, request, resCookies) {\n    const { adapter, provider } = options;\n    // Get WebAuthn response from request body\n    const data = request.body && typeof request.body.data === \"string\"\n        ? JSON.parse(request.body.data)\n        : undefined;\n    if (!data ||\n        typeof data !== \"object\" ||\n        !(\"id\" in data) ||\n        typeof data.id !== \"string\") {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Invalid WebAuthn Authentication response\");\n    }\n    // Reset the ID so we smooth out implementation differences\n    const credentialID = toBase64(fromBase64(data.id));\n    // Get authenticator from database\n    const authenticator = await adapter.getAuthenticator(credentialID);\n    if (!authenticator) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(`WebAuthn authenticator not found in database: ${JSON.stringify({\n            credentialID,\n        })}`);\n    }\n    // Get challenge from request cookies\n    const { challenge: expectedChallenge } = await _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__.webauthnChallenge.use(options, request.cookies, resCookies);\n    // Verify the response\n    let verification;\n    try {\n        const relayingParty = provider.getRelayingParty(options, request);\n        verification = await provider.simpleWebAuthn.verifyAuthenticationResponse({\n            ...provider.verifyAuthenticationOptions,\n            expectedChallenge,\n            response: data,\n            authenticator: fromAdapterAuthenticator(authenticator),\n            expectedOrigin: relayingParty.origin,\n            expectedRPID: relayingParty.id,\n        });\n    }\n    catch (e) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.WebAuthnVerificationError(e);\n    }\n    const { verified, authenticationInfo } = verification;\n    // Make sure the response was verified\n    if (!verified) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.WebAuthnVerificationError(\"WebAuthn authentication response could not be verified\");\n    }\n    // Update authenticator counter\n    try {\n        const { newCounter } = authenticationInfo;\n        await adapter.updateAuthenticatorCounter(authenticator.credentialID, newCounter);\n    }\n    catch (e) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AdapterError(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({\n            credentialID,\n            oldCounter: authenticator.counter,\n            newCounter: authenticationInfo.newCounter,\n        })}`, e);\n    }\n    // Get the account and user\n    const account = await adapter.getAccount(authenticator.providerAccountId, provider.id);\n    if (!account) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(`WebAuthn account not found in database: ${JSON.stringify({\n            credentialID,\n            providerAccountId: authenticator.providerAccountId,\n        })}`);\n    }\n    const user = await adapter.getUser(account.userId);\n    if (!user) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(`WebAuthn user not found in database: ${JSON.stringify({\n            credentialID,\n            providerAccountId: authenticator.providerAccountId,\n            userID: account.userId,\n        })}`);\n    }\n    return {\n        account,\n        user,\n    };\n}\nasync function verifyRegister(options, request, resCookies) {\n    const { provider } = options;\n    // Get WebAuthn response from request body\n    const data = request.body && typeof request.body.data === \"string\"\n        ? JSON.parse(request.body.data)\n        : undefined;\n    if (!data ||\n        typeof data !== \"object\" ||\n        !(\"id\" in data) ||\n        typeof data.id !== \"string\") {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Invalid WebAuthn Registration response\");\n    }\n    // Get challenge from request cookies\n    const { challenge: expectedChallenge, registerData: user } = await _actions_callback_oauth_checks_js__WEBPACK_IMPORTED_MODULE_1__.webauthnChallenge.use(options, request.cookies, resCookies);\n    if (!user) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.AuthError(\"Missing user registration data in WebAuthn challenge cookie\");\n    }\n    // Verify the response\n    let verification;\n    try {\n        const relayingParty = provider.getRelayingParty(options, request);\n        verification = await provider.simpleWebAuthn.verifyRegistrationResponse({\n            ...provider.verifyRegistrationOptions,\n            expectedChallenge,\n            response: data,\n            expectedOrigin: relayingParty.origin,\n            expectedRPID: relayingParty.id,\n        });\n    }\n    catch (e) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.WebAuthnVerificationError(e);\n    }\n    // Make sure the response was verified\n    if (!verification.verified || !verification.registrationInfo) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.WebAuthnVerificationError(\"WebAuthn registration response could not be verified\");\n    }\n    // Build a new account\n    const account = {\n        providerAccountId: toBase64(verification.registrationInfo.credentialID),\n        provider: options.provider.id,\n        type: provider.type,\n    };\n    // Build a new authenticator\n    const authenticator = {\n        providerAccountId: account.providerAccountId,\n        counter: verification.registrationInfo.counter,\n        credentialID: toBase64(verification.registrationInfo.credentialID),\n        credentialPublicKey: toBase64(verification.registrationInfo.credentialPublicKey),\n        credentialBackedUp: verification.registrationInfo.credentialBackedUp,\n        credentialDeviceType: verification.registrationInfo.credentialDeviceType,\n        transports: transportsToString(data.response\n            .transports),\n    };\n    // Return created stuff\n    return {\n        user,\n        account,\n        authenticator,\n    };\n}\n/**\n * Generates WebAuthn authentication options.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - Optional user information.\n * @returns The authentication options.\n */\nasync function getAuthenticationOptions(options, request, user) {\n    const { provider, adapter } = options;\n    // Get the user's authenticators.\n    const authenticators = user && user[\"id\"]\n        ? await adapter.listAuthenticatorsByUserId(user.id)\n        : null;\n    const relayingParty = provider.getRelayingParty(options, request);\n    // Return the authentication options.\n    return await provider.simpleWebAuthn.generateAuthenticationOptions({\n        ...provider.authenticationOptions,\n        rpID: relayingParty.id,\n        allowCredentials: authenticators?.map((a) => ({\n            id: fromBase64(a.credentialID),\n            type: \"public-key\",\n            transports: stringToTransports(a.transports),\n        })),\n    });\n}\n/**\n * Generates WebAuthn registration options.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - The user information.\n * @returns The registration options.\n */\nasync function getRegistrationOptions(options, request, user) {\n    const { provider, adapter } = options;\n    // Get the user's authenticators.\n    const authenticators = user[\"id\"]\n        ? await adapter.listAuthenticatorsByUserId(user.id)\n        : null;\n    // Generate a random user ID for the credential.\n    // We can do this because we don't use this user ID to link the\n    // credential to the user. Instead, we store actual userID in the\n    // Authenticator object and fetch it via it's credential ID.\n    const userID = (0,_web_js__WEBPACK_IMPORTED_MODULE_2__.randomString)(32);\n    const relayingParty = provider.getRelayingParty(options, request);\n    // Return the registration options.\n    return await provider.simpleWebAuthn.generateRegistrationOptions({\n        ...provider.registrationOptions,\n        userID,\n        userName: user.email,\n        userDisplayName: user.name ?? undefined,\n        rpID: relayingParty.id,\n        rpName: relayingParty.name,\n        excludeCredentials: authenticators?.map((a) => ({\n            id: fromBase64(a.credentialID),\n            type: \"public-key\",\n            transports: stringToTransports(a.transports),\n        })),\n    });\n}\nfunction assertInternalOptionsWebAuthn(options) {\n    const { provider, adapter } = options;\n    // Adapter is required for WebAuthn\n    if (!adapter)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.MissingAdapter(\"An adapter is required for the WebAuthn provider\");\n    // Provider must be WebAuthn\n    if (!provider || provider.type !== \"webauthn\") {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidProvider(\"Provider must be WebAuthn\");\n    }\n    // Narrow the options type for typed usage later\n    return { ...options, provider, adapter };\n}\nfunction fromAdapterAuthenticator(authenticator) {\n    return {\n        ...authenticator,\n        credentialDeviceType: authenticator.credentialDeviceType,\n        transports: stringToTransports(authenticator.transports),\n        credentialID: fromBase64(authenticator.credentialID),\n        credentialPublicKey: fromBase64(authenticator.credentialPublicKey),\n    };\n}\nfunction fromBase64(base64) {\n    return new Uint8Array(Buffer.from(base64, \"base64\"));\n}\nfunction toBase64(bytes) {\n    return Buffer.from(bytes).toString(\"base64\");\n}\nfunction transportsToString(transports) {\n    return transports?.join(\",\");\n}\nfunction stringToTransports(tstring) {\n    return tstring\n        ? tstring.split(\",\")\n        : undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9saWIvdXRpbHMvd2ViYXV0aG4tdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUF1SDtBQUMvQztBQUNoQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUyxRQUFRLGdGQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVMsUUFBUSxnRkFBaUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNPO0FBQ1AsWUFBWSxvQkFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpREFBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaURBQVMsa0RBQWtEO0FBQzdFO0FBQ0EsU0FBUyxFQUFFO0FBQ1g7QUFDQTtBQUNBLFlBQVksK0JBQStCLFFBQVEsZ0ZBQWlCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtCQUFrQixpRUFBeUI7QUFDM0M7QUFDQSxZQUFZLCtCQUErQjtBQUMzQztBQUNBO0FBQ0Esa0JBQWtCLGlFQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQVksbUdBQW1HO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBLFNBQVMsRUFBRTtBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlEQUFTLDRDQUE0QztBQUN2RTtBQUNBO0FBQ0EsU0FBUyxFQUFFO0FBQ1g7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlEQUFTLHlDQUF5QztBQUNwRTtBQUNBO0FBQ0E7QUFDQSxTQUFTLEVBQUU7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlEQUFTO0FBQzNCO0FBQ0E7QUFDQSxZQUFZLG1EQUFtRCxRQUFRLGdGQUFpQjtBQUN4RjtBQUNBLGtCQUFrQixpREFBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxrQkFBa0IsaUVBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpRUFBeUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFEQUFZO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1AsWUFBWSxvQkFBb0I7QUFDaEM7QUFDQTtBQUNBLGtCQUFrQixzREFBYztBQUNoQztBQUNBO0FBQ0Esa0JBQWtCLHVEQUFlO0FBQ2pDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXGxpYlxcdXRpbHNcXHdlYmF1dGhuLXV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFkYXB0ZXJFcnJvciwgQXV0aEVycm9yLCBJbnZhbGlkUHJvdmlkZXIsIE1pc3NpbmdBZGFwdGVyLCBXZWJBdXRoblZlcmlmaWNhdGlvbkVycm9yLCB9IGZyb20gXCIuLi8uLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHdlYmF1dGhuQ2hhbGxlbmdlIH0gZnJvbSBcIi4uL2FjdGlvbnMvY2FsbGJhY2svb2F1dGgvY2hlY2tzLmpzXCI7XG5pbXBvcnQgeyByYW5kb21TdHJpbmcgfSBmcm9tIFwiLi93ZWIuanNcIjtcbi8qKlxuICogSW5mZXJzIHRoZSBXZWJBdXRobiBvcHRpb25zIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzLlxuICpcbiAqIEBwYXJhbSBhY3Rpb24gLSBUaGUgV2ViQXV0aG4gYWN0aW9uIHRvIHBlcmZvcm0gKG9wdGlvbmFsKS5cbiAqIEBwYXJhbSBsb2dnZWRJblVzZXIgLSBUaGUgbG9nZ2VkLWluIHVzZXIgKG9wdGlvbmFsKS5cbiAqIEBwYXJhbSB1c2VySW5mb1Jlc3BvbnNlIC0gVGhlIHJlc3BvbnNlIGNvbnRhaW5pbmcgdXNlciBpbmZvcm1hdGlvbiAob3B0aW9uYWwpLlxuICpcbiAqIEByZXR1cm5zIFRoZSBXZWJBdXRobiBhY3Rpb24gdG8gcGVyZm9ybSwgb3IgbnVsbCBpZiBubyBpbmZlcmVuY2UgY291bGQgYmUgbWFkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmVyV2ViQXV0aG5PcHRpb25zKGFjdGlvbiwgbG9nZ2VkSW4sIHVzZXJJbmZvUmVzcG9uc2UpIHtcbiAgICBjb25zdCB7IHVzZXIsIGV4aXN0cyA9IGZhbHNlIH0gPSB1c2VySW5mb1Jlc3BvbnNlID8/IHt9O1xuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgXCJhdXRoZW50aWNhdGVcIjoge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBbHdheXMgYWxsb3cgZXhwbGljaXQgYXV0aGVudGljYXRpb24gcmVxdWVzdHMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHVybiBcImF1dGhlbnRpY2F0ZVwiO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyZWdpc3RlclwiOiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlZ2lzdHJhdGlvbiBpcyBvbmx5IGFsbG93ZWQgaWY6XG4gICAgICAgICAgICAgKiAtIFRoZSB1c2VyIGlzIGxvZ2dlZCBpbiwgbWVhbmluZyB0aGUgdXNlciB3YW50cyB0byByZWdpc3RlciBhIG5ldyBhdXRoZW50aWNhdG9yLlxuICAgICAgICAgICAgICogLSBUaGUgdXNlciBpcyBub3QgbG9nZ2VkIGluIGFuZCBwcm92aWRlZCB1c2VyIGluZm8gdGhhdCBkb2VzIE5PVCBleGlzdCwgbWVhbmluZyB0aGUgdXNlciB3YW50cyB0byByZWdpc3RlciBhIG5ldyBhY2NvdW50LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAodXNlciAmJiBsb2dnZWRJbiA9PT0gZXhpc3RzKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInJlZ2lzdGVyXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIHVuZGVmaW5lZDoge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXaGVuIG5vIGV4cGxpY2l0IGFjdGlvbiBpcyBwcm92aWRlZCwgd2UgdHJ5IHRvIGluZmVyIGl0IGJhc2VkIG9uIHRoZSB1c2VyIGluZm8gcHJvdmlkZWQuIFRoZXNlIGFyZSB0aGUgcG9zc2libGUgY2FzZXM6XG4gICAgICAgICAgICAgKiAtIExvZ2dlZCBpbiB1c2VycyBtdXN0IGFsd2F5cyBzZW5kIGFuIGV4cGxpdCBhY3Rpb24sIHNvIHdlIGJhaWwgb3V0IGluIHRoaXMgY2FzZS5cbiAgICAgICAgICAgICAqIC0gT3RoZXJ3aXNlLCBpZiBubyB1c2VyIGluZm8gaXMgcHJvdmlkZWQsIHRoZSBkZXNpcmVkIGFjdGlvbiBpcyBhdXRoZW50aWNhdGlvbiB3aXRob3V0IHByZS1kZWZpbmVkIGF1dGhlbnRpY2F0b3JzLlxuICAgICAgICAgICAgICogLSBPdGhlcndpc2UsIGlmIHRoZSB1c2VyIGluZm8gcHJvdmlkZWQgaXMgb2YgYW4gZXhpc3RpbmcgdXNlciwgdGhlIGRlc2lyZWQgYWN0aW9uIGlzIGF1dGhlbnRpY2F0aW9uIHdpdGggdGhlaXIgcHJlLWRlZmluZWQgYXV0aGVudGljYXRvcnMuXG4gICAgICAgICAgICAgKiAtIEZpbmFsbHksIGlmIHRoZSB1c2VyIGluZm8gcHJvdmlkZWQgaXMgb2YgYSBub24tZXhpc3RpbmcgdXNlciwgdGhlIGRlc2lyZWQgYWN0aW9uIGlzIHJlZ2lzdHJhdGlvbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCFsb2dnZWRJbikge1xuICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImF1dGhlbnRpY2F0ZVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVnaXN0ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYXV0aGVudGljYXRlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTm8gZGVjaXNpb24gY291bGQgYmUgbWFkZVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIHJlZ2lzdHJhdGlvbiByZXNwb25zZSBmb3IgV2ViQXV0aG4gb3B0aW9ucyByZXF1ZXN0LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIGludGVybmFsIG9wdGlvbnMgZm9yIFdlYkF1dGhuLlxuICogQHBhcmFtIHJlcXVlc3QgLSBUaGUgcmVxdWVzdCBvYmplY3QuXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyIGluZm9ybWF0aW9uLlxuICogQHBhcmFtIHJlc0Nvb2tpZXMgLSBPcHRpb25hbCBjb29raWVzIHRvIGJlIGluY2x1ZGVkIGluIHRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBXZWJBdXRobk9wdGlvbnNSZXNwb25zZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlZ2lzdHJhdGlvblJlc3BvbnNlKG9wdGlvbnMsIHJlcXVlc3QsIHVzZXIsIHJlc0Nvb2tpZXMpIHtcbiAgICAvLyBHZXQgcmVnaXN0cmF0aW9uIG9wdGlvbnNcbiAgICBjb25zdCByZWdPcHRpb25zID0gYXdhaXQgZ2V0UmVnaXN0cmF0aW9uT3B0aW9ucyhvcHRpb25zLCByZXF1ZXN0LCB1c2VyKTtcbiAgICAvLyBHZXQgc2lnbmVkIGNvb2tpZVxuICAgIGNvbnN0IHsgY29va2llIH0gPSBhd2FpdCB3ZWJhdXRobkNoYWxsZW5nZS5jcmVhdGUob3B0aW9ucywgcmVnT3B0aW9ucy5jaGFsbGVuZ2UsIHVzZXIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBjb29raWVzOiBbLi4uKHJlc0Nvb2tpZXMgPz8gW10pLCBjb29raWVdLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBhY3Rpb246IFwicmVnaXN0ZXJcIixcbiAgICAgICAgICAgIG9wdGlvbnM6IHJlZ09wdGlvbnMsXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgYXV0aGVudGljYXRpb24gcmVzcG9uc2UgZm9yIFdlYkF1dGhuIG9wdGlvbnMgcmVxdWVzdC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBpbnRlcm5hbCBvcHRpb25zIGZvciBXZWJBdXRobi5cbiAqIEBwYXJhbSByZXF1ZXN0IC0gVGhlIHJlcXVlc3Qgb2JqZWN0LlxuICogQHBhcmFtIHVzZXIgLSBPcHRpb25hbCB1c2VyIGluZm9ybWF0aW9uLlxuICogQHBhcmFtIHJlc0Nvb2tpZXMgLSBPcHRpb25hbCBhcnJheSBvZiBjb29raWVzIHRvIGJlIGluY2x1ZGVkIGluIHRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgV2ViQXV0aG5PcHRpb25zUmVzcG9uc2Ugb2JqZWN0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXV0aGVudGljYXRpb25SZXNwb25zZShvcHRpb25zLCByZXF1ZXN0LCB1c2VyLCByZXNDb29raWVzKSB7XG4gICAgLy8gR2V0IGF1dGhlbnRpY2F0aW9uIG9wdGlvbnNcbiAgICBjb25zdCBhdXRoT3B0aW9ucyA9IGF3YWl0IGdldEF1dGhlbnRpY2F0aW9uT3B0aW9ucyhvcHRpb25zLCByZXF1ZXN0LCB1c2VyKTtcbiAgICAvLyBHZXQgc2lnbmVkIGNvb2tpZVxuICAgIGNvbnN0IHsgY29va2llIH0gPSBhd2FpdCB3ZWJhdXRobkNoYWxsZW5nZS5jcmVhdGUob3B0aW9ucywgYXV0aE9wdGlvbnMuY2hhbGxlbmdlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgY29va2llczogWy4uLihyZXNDb29raWVzID8/IFtdKSwgY29va2llXSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgICAgYWN0aW9uOiBcImF1dGhlbnRpY2F0ZVwiLFxuICAgICAgICAgICAgb3B0aW9uczogYXV0aE9wdGlvbnMsXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QXV0aGVudGljYXRlKG9wdGlvbnMsIHJlcXVlc3QsIHJlc0Nvb2tpZXMpIHtcbiAgICBjb25zdCB7IGFkYXB0ZXIsIHByb3ZpZGVyIH0gPSBvcHRpb25zO1xuICAgIC8vIEdldCBXZWJBdXRobiByZXNwb25zZSBmcm9tIHJlcXVlc3QgYm9keVxuICAgIGNvbnN0IGRhdGEgPSByZXF1ZXN0LmJvZHkgJiYgdHlwZW9mIHJlcXVlc3QuYm9keS5kYXRhID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gSlNPTi5wYXJzZShyZXF1ZXN0LmJvZHkuZGF0YSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKCFkYXRhIHx8XG4gICAgICAgIHR5cGVvZiBkYXRhICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgICEoXCJpZFwiIGluIGRhdGEpIHx8XG4gICAgICAgIHR5cGVvZiBkYXRhLmlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJJbnZhbGlkIFdlYkF1dGhuIEF1dGhlbnRpY2F0aW9uIHJlc3BvbnNlXCIpO1xuICAgIH1cbiAgICAvLyBSZXNldCB0aGUgSUQgc28gd2Ugc21vb3RoIG91dCBpbXBsZW1lbnRhdGlvbiBkaWZmZXJlbmNlc1xuICAgIGNvbnN0IGNyZWRlbnRpYWxJRCA9IHRvQmFzZTY0KGZyb21CYXNlNjQoZGF0YS5pZCkpO1xuICAgIC8vIEdldCBhdXRoZW50aWNhdG9yIGZyb20gZGF0YWJhc2VcbiAgICBjb25zdCBhdXRoZW50aWNhdG9yID0gYXdhaXQgYWRhcHRlci5nZXRBdXRoZW50aWNhdG9yKGNyZWRlbnRpYWxJRCk7XG4gICAgaWYgKCFhdXRoZW50aWNhdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoYFdlYkF1dGhuIGF1dGhlbnRpY2F0b3Igbm90IGZvdW5kIGluIGRhdGFiYXNlOiAke0pTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxJRCxcbiAgICAgICAgfSl9YCk7XG4gICAgfVxuICAgIC8vIEdldCBjaGFsbGVuZ2UgZnJvbSByZXF1ZXN0IGNvb2tpZXNcbiAgICBjb25zdCB7IGNoYWxsZW5nZTogZXhwZWN0ZWRDaGFsbGVuZ2UgfSA9IGF3YWl0IHdlYmF1dGhuQ2hhbGxlbmdlLnVzZShvcHRpb25zLCByZXF1ZXN0LmNvb2tpZXMsIHJlc0Nvb2tpZXMpO1xuICAgIC8vIFZlcmlmeSB0aGUgcmVzcG9uc2VcbiAgICBsZXQgdmVyaWZpY2F0aW9uO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlbGF5aW5nUGFydHkgPSBwcm92aWRlci5nZXRSZWxheWluZ1BhcnR5KG9wdGlvbnMsIHJlcXVlc3QpO1xuICAgICAgICB2ZXJpZmljYXRpb24gPSBhd2FpdCBwcm92aWRlci5zaW1wbGVXZWJBdXRobi52ZXJpZnlBdXRoZW50aWNhdGlvblJlc3BvbnNlKHtcbiAgICAgICAgICAgIC4uLnByb3ZpZGVyLnZlcmlmeUF1dGhlbnRpY2F0aW9uT3B0aW9ucyxcbiAgICAgICAgICAgIGV4cGVjdGVkQ2hhbGxlbmdlLFxuICAgICAgICAgICAgcmVzcG9uc2U6IGRhdGEsXG4gICAgICAgICAgICBhdXRoZW50aWNhdG9yOiBmcm9tQWRhcHRlckF1dGhlbnRpY2F0b3IoYXV0aGVudGljYXRvciksXG4gICAgICAgICAgICBleHBlY3RlZE9yaWdpbjogcmVsYXlpbmdQYXJ0eS5vcmlnaW4sXG4gICAgICAgICAgICBleHBlY3RlZFJQSUQ6IHJlbGF5aW5nUGFydHkuaWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgV2ViQXV0aG5WZXJpZmljYXRpb25FcnJvcihlKTtcbiAgICB9XG4gICAgY29uc3QgeyB2ZXJpZmllZCwgYXV0aGVudGljYXRpb25JbmZvIH0gPSB2ZXJpZmljYXRpb247XG4gICAgLy8gTWFrZSBzdXJlIHRoZSByZXNwb25zZSB3YXMgdmVyaWZpZWRcbiAgICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBXZWJBdXRoblZlcmlmaWNhdGlvbkVycm9yKFwiV2ViQXV0aG4gYXV0aGVudGljYXRpb24gcmVzcG9uc2UgY291bGQgbm90IGJlIHZlcmlmaWVkXCIpO1xuICAgIH1cbiAgICAvLyBVcGRhdGUgYXV0aGVudGljYXRvciBjb3VudGVyXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBuZXdDb3VudGVyIH0gPSBhdXRoZW50aWNhdGlvbkluZm87XG4gICAgICAgIGF3YWl0IGFkYXB0ZXIudXBkYXRlQXV0aGVudGljYXRvckNvdW50ZXIoYXV0aGVudGljYXRvci5jcmVkZW50aWFsSUQsIG5ld0NvdW50ZXIpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgQWRhcHRlckVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIGF1dGhlbnRpY2F0b3IgY291bnRlci4gVGhpcyBtYXkgY2F1c2UgZnV0dXJlIGF1dGhlbnRpY2F0aW9uIGF0dGVtcHRzIHRvIGZhaWwuICR7SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY3JlZGVudGlhbElELFxuICAgICAgICAgICAgb2xkQ291bnRlcjogYXV0aGVudGljYXRvci5jb3VudGVyLFxuICAgICAgICAgICAgbmV3Q291bnRlcjogYXV0aGVudGljYXRpb25JbmZvLm5ld0NvdW50ZXIsXG4gICAgICAgIH0pfWAsIGUpO1xuICAgIH1cbiAgICAvLyBHZXQgdGhlIGFjY291bnQgYW5kIHVzZXJcbiAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYWRhcHRlci5nZXRBY2NvdW50KGF1dGhlbnRpY2F0b3IucHJvdmlkZXJBY2NvdW50SWQsIHByb3ZpZGVyLmlkKTtcbiAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihgV2ViQXV0aG4gYWNjb3VudCBub3QgZm91bmQgaW4gZGF0YWJhc2U6ICR7SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY3JlZGVudGlhbElELFxuICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IGF1dGhlbnRpY2F0b3IucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgIH0pfWApO1xuICAgIH1cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgYWRhcHRlci5nZXRVc2VyKGFjY291bnQudXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihgV2ViQXV0aG4gdXNlciBub3QgZm91bmQgaW4gZGF0YWJhc2U6ICR7SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY3JlZGVudGlhbElELFxuICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IGF1dGhlbnRpY2F0b3IucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgICB1c2VySUQ6IGFjY291bnQudXNlcklkLFxuICAgICAgICB9KX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWNjb3VudCxcbiAgICAgICAgdXNlcixcbiAgICB9O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVJlZ2lzdGVyKG9wdGlvbnMsIHJlcXVlc3QsIHJlc0Nvb2tpZXMpIHtcbiAgICBjb25zdCB7IHByb3ZpZGVyIH0gPSBvcHRpb25zO1xuICAgIC8vIEdldCBXZWJBdXRobiByZXNwb25zZSBmcm9tIHJlcXVlc3QgYm9keVxuICAgIGNvbnN0IGRhdGEgPSByZXF1ZXN0LmJvZHkgJiYgdHlwZW9mIHJlcXVlc3QuYm9keS5kYXRhID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gSlNPTi5wYXJzZShyZXF1ZXN0LmJvZHkuZGF0YSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKCFkYXRhIHx8XG4gICAgICAgIHR5cGVvZiBkYXRhICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgICEoXCJpZFwiIGluIGRhdGEpIHx8XG4gICAgICAgIHR5cGVvZiBkYXRhLmlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJJbnZhbGlkIFdlYkF1dGhuIFJlZ2lzdHJhdGlvbiByZXNwb25zZVwiKTtcbiAgICB9XG4gICAgLy8gR2V0IGNoYWxsZW5nZSBmcm9tIHJlcXVlc3QgY29va2llc1xuICAgIGNvbnN0IHsgY2hhbGxlbmdlOiBleHBlY3RlZENoYWxsZW5nZSwgcmVnaXN0ZXJEYXRhOiB1c2VyIH0gPSBhd2FpdCB3ZWJhdXRobkNoYWxsZW5nZS51c2Uob3B0aW9ucywgcmVxdWVzdC5jb29raWVzLCByZXNDb29raWVzKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIk1pc3NpbmcgdXNlciByZWdpc3RyYXRpb24gZGF0YSBpbiBXZWJBdXRobiBjaGFsbGVuZ2UgY29va2llXCIpO1xuICAgIH1cbiAgICAvLyBWZXJpZnkgdGhlIHJlc3BvbnNlXG4gICAgbGV0IHZlcmlmaWNhdGlvbjtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZWxheWluZ1BhcnR5ID0gcHJvdmlkZXIuZ2V0UmVsYXlpbmdQYXJ0eShvcHRpb25zLCByZXF1ZXN0KTtcbiAgICAgICAgdmVyaWZpY2F0aW9uID0gYXdhaXQgcHJvdmlkZXIuc2ltcGxlV2ViQXV0aG4udmVyaWZ5UmVnaXN0cmF0aW9uUmVzcG9uc2Uoe1xuICAgICAgICAgICAgLi4ucHJvdmlkZXIudmVyaWZ5UmVnaXN0cmF0aW9uT3B0aW9ucyxcbiAgICAgICAgICAgIGV4cGVjdGVkQ2hhbGxlbmdlLFxuICAgICAgICAgICAgcmVzcG9uc2U6IGRhdGEsXG4gICAgICAgICAgICBleHBlY3RlZE9yaWdpbjogcmVsYXlpbmdQYXJ0eS5vcmlnaW4sXG4gICAgICAgICAgICBleHBlY3RlZFJQSUQ6IHJlbGF5aW5nUGFydHkuaWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgV2ViQXV0aG5WZXJpZmljYXRpb25FcnJvcihlKTtcbiAgICB9XG4gICAgLy8gTWFrZSBzdXJlIHRoZSByZXNwb25zZSB3YXMgdmVyaWZpZWRcbiAgICBpZiAoIXZlcmlmaWNhdGlvbi52ZXJpZmllZCB8fCAhdmVyaWZpY2F0aW9uLnJlZ2lzdHJhdGlvbkluZm8pIHtcbiAgICAgICAgdGhyb3cgbmV3IFdlYkF1dGhuVmVyaWZpY2F0aW9uRXJyb3IoXCJXZWJBdXRobiByZWdpc3RyYXRpb24gcmVzcG9uc2UgY291bGQgbm90IGJlIHZlcmlmaWVkXCIpO1xuICAgIH1cbiAgICAvLyBCdWlsZCBhIG5ldyBhY2NvdW50XG4gICAgY29uc3QgYWNjb3VudCA9IHtcbiAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IHRvQmFzZTY0KHZlcmlmaWNhdGlvbi5yZWdpc3RyYXRpb25JbmZvLmNyZWRlbnRpYWxJRCksXG4gICAgICAgIHByb3ZpZGVyOiBvcHRpb25zLnByb3ZpZGVyLmlkLFxuICAgICAgICB0eXBlOiBwcm92aWRlci50eXBlLFxuICAgIH07XG4gICAgLy8gQnVpbGQgYSBuZXcgYXV0aGVudGljYXRvclxuICAgIGNvbnN0IGF1dGhlbnRpY2F0b3IgPSB7XG4gICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiBhY2NvdW50LnByb3ZpZGVyQWNjb3VudElkLFxuICAgICAgICBjb3VudGVyOiB2ZXJpZmljYXRpb24ucmVnaXN0cmF0aW9uSW5mby5jb3VudGVyLFxuICAgICAgICBjcmVkZW50aWFsSUQ6IHRvQmFzZTY0KHZlcmlmaWNhdGlvbi5yZWdpc3RyYXRpb25JbmZvLmNyZWRlbnRpYWxJRCksXG4gICAgICAgIGNyZWRlbnRpYWxQdWJsaWNLZXk6IHRvQmFzZTY0KHZlcmlmaWNhdGlvbi5yZWdpc3RyYXRpb25JbmZvLmNyZWRlbnRpYWxQdWJsaWNLZXkpLFxuICAgICAgICBjcmVkZW50aWFsQmFja2VkVXA6IHZlcmlmaWNhdGlvbi5yZWdpc3RyYXRpb25JbmZvLmNyZWRlbnRpYWxCYWNrZWRVcCxcbiAgICAgICAgY3JlZGVudGlhbERldmljZVR5cGU6IHZlcmlmaWNhdGlvbi5yZWdpc3RyYXRpb25JbmZvLmNyZWRlbnRpYWxEZXZpY2VUeXBlLFxuICAgICAgICB0cmFuc3BvcnRzOiB0cmFuc3BvcnRzVG9TdHJpbmcoZGF0YS5yZXNwb25zZVxuICAgICAgICAgICAgLnRyYW5zcG9ydHMpLFxuICAgIH07XG4gICAgLy8gUmV0dXJuIGNyZWF0ZWQgc3R1ZmZcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2VyLFxuICAgICAgICBhY2NvdW50LFxuICAgICAgICBhdXRoZW50aWNhdG9yLFxuICAgIH07XG59XG4vKipcbiAqIEdlbmVyYXRlcyBXZWJBdXRobiBhdXRoZW50aWNhdGlvbiBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIGludGVybmFsIG9wdGlvbnMgZm9yIFdlYkF1dGhuLlxuICogQHBhcmFtIHJlcXVlc3QgLSBUaGUgcmVxdWVzdCBvYmplY3QuXG4gKiBAcGFyYW0gdXNlciAtIE9wdGlvbmFsIHVzZXIgaW5mb3JtYXRpb24uXG4gKiBAcmV0dXJucyBUaGUgYXV0aGVudGljYXRpb24gb3B0aW9ucy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0QXV0aGVudGljYXRpb25PcHRpb25zKG9wdGlvbnMsIHJlcXVlc3QsIHVzZXIpIHtcbiAgICBjb25zdCB7IHByb3ZpZGVyLCBhZGFwdGVyIH0gPSBvcHRpb25zO1xuICAgIC8vIEdldCB0aGUgdXNlcidzIGF1dGhlbnRpY2F0b3JzLlxuICAgIGNvbnN0IGF1dGhlbnRpY2F0b3JzID0gdXNlciAmJiB1c2VyW1wiaWRcIl1cbiAgICAgICAgPyBhd2FpdCBhZGFwdGVyLmxpc3RBdXRoZW50aWNhdG9yc0J5VXNlcklkKHVzZXIuaWQpXG4gICAgICAgIDogbnVsbDtcbiAgICBjb25zdCByZWxheWluZ1BhcnR5ID0gcHJvdmlkZXIuZ2V0UmVsYXlpbmdQYXJ0eShvcHRpb25zLCByZXF1ZXN0KTtcbiAgICAvLyBSZXR1cm4gdGhlIGF1dGhlbnRpY2F0aW9uIG9wdGlvbnMuXG4gICAgcmV0dXJuIGF3YWl0IHByb3ZpZGVyLnNpbXBsZVdlYkF1dGhuLmdlbmVyYXRlQXV0aGVudGljYXRpb25PcHRpb25zKHtcbiAgICAgICAgLi4ucHJvdmlkZXIuYXV0aGVudGljYXRpb25PcHRpb25zLFxuICAgICAgICBycElEOiByZWxheWluZ1BhcnR5LmlkLFxuICAgICAgICBhbGxvd0NyZWRlbnRpYWxzOiBhdXRoZW50aWNhdG9ycz8ubWFwKChhKSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGZyb21CYXNlNjQoYS5jcmVkZW50aWFsSUQpLFxuICAgICAgICAgICAgdHlwZTogXCJwdWJsaWMta2V5XCIsXG4gICAgICAgICAgICB0cmFuc3BvcnRzOiBzdHJpbmdUb1RyYW5zcG9ydHMoYS50cmFuc3BvcnRzKSxcbiAgICAgICAgfSkpLFxuICAgIH0pO1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgV2ViQXV0aG4gcmVnaXN0cmF0aW9uIG9wdGlvbnMuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgaW50ZXJuYWwgb3B0aW9ucyBmb3IgV2ViQXV0aG4uXG4gKiBAcGFyYW0gcmVxdWVzdCAtIFRoZSByZXF1ZXN0IG9iamVjdC5cbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgaW5mb3JtYXRpb24uXG4gKiBAcmV0dXJucyBUaGUgcmVnaXN0cmF0aW9uIG9wdGlvbnMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFJlZ2lzdHJhdGlvbk9wdGlvbnMob3B0aW9ucywgcmVxdWVzdCwgdXNlcikge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIGFkYXB0ZXIgfSA9IG9wdGlvbnM7XG4gICAgLy8gR2V0IHRoZSB1c2VyJ3MgYXV0aGVudGljYXRvcnMuXG4gICAgY29uc3QgYXV0aGVudGljYXRvcnMgPSB1c2VyW1wiaWRcIl1cbiAgICAgICAgPyBhd2FpdCBhZGFwdGVyLmxpc3RBdXRoZW50aWNhdG9yc0J5VXNlcklkKHVzZXIuaWQpXG4gICAgICAgIDogbnVsbDtcbiAgICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSB1c2VyIElEIGZvciB0aGUgY3JlZGVudGlhbC5cbiAgICAvLyBXZSBjYW4gZG8gdGhpcyBiZWNhdXNlIHdlIGRvbid0IHVzZSB0aGlzIHVzZXIgSUQgdG8gbGluayB0aGVcbiAgICAvLyBjcmVkZW50aWFsIHRvIHRoZSB1c2VyLiBJbnN0ZWFkLCB3ZSBzdG9yZSBhY3R1YWwgdXNlcklEIGluIHRoZVxuICAgIC8vIEF1dGhlbnRpY2F0b3Igb2JqZWN0IGFuZCBmZXRjaCBpdCB2aWEgaXQncyBjcmVkZW50aWFsIElELlxuICAgIGNvbnN0IHVzZXJJRCA9IHJhbmRvbVN0cmluZygzMik7XG4gICAgY29uc3QgcmVsYXlpbmdQYXJ0eSA9IHByb3ZpZGVyLmdldFJlbGF5aW5nUGFydHkob3B0aW9ucywgcmVxdWVzdCk7XG4gICAgLy8gUmV0dXJuIHRoZSByZWdpc3RyYXRpb24gb3B0aW9ucy5cbiAgICByZXR1cm4gYXdhaXQgcHJvdmlkZXIuc2ltcGxlV2ViQXV0aG4uZ2VuZXJhdGVSZWdpc3RyYXRpb25PcHRpb25zKHtcbiAgICAgICAgLi4ucHJvdmlkZXIucmVnaXN0cmF0aW9uT3B0aW9ucyxcbiAgICAgICAgdXNlcklELFxuICAgICAgICB1c2VyTmFtZTogdXNlci5lbWFpbCxcbiAgICAgICAgdXNlckRpc3BsYXlOYW1lOiB1c2VyLm5hbWUgPz8gdW5kZWZpbmVkLFxuICAgICAgICBycElEOiByZWxheWluZ1BhcnR5LmlkLFxuICAgICAgICBycE5hbWU6IHJlbGF5aW5nUGFydHkubmFtZSxcbiAgICAgICAgZXhjbHVkZUNyZWRlbnRpYWxzOiBhdXRoZW50aWNhdG9ycz8ubWFwKChhKSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGZyb21CYXNlNjQoYS5jcmVkZW50aWFsSUQpLFxuICAgICAgICAgICAgdHlwZTogXCJwdWJsaWMta2V5XCIsXG4gICAgICAgICAgICB0cmFuc3BvcnRzOiBzdHJpbmdUb1RyYW5zcG9ydHMoYS50cmFuc3BvcnRzKSxcbiAgICAgICAgfSkpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEludGVybmFsT3B0aW9uc1dlYkF1dGhuKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHByb3ZpZGVyLCBhZGFwdGVyIH0gPSBvcHRpb25zO1xuICAgIC8vIEFkYXB0ZXIgaXMgcmVxdWlyZWQgZm9yIFdlYkF1dGhuXG4gICAgaWYgKCFhZGFwdGVyKVxuICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0FkYXB0ZXIoXCJBbiBhZGFwdGVyIGlzIHJlcXVpcmVkIGZvciB0aGUgV2ViQXV0aG4gcHJvdmlkZXJcIik7XG4gICAgLy8gUHJvdmlkZXIgbXVzdCBiZSBXZWJBdXRoblxuICAgIGlmICghcHJvdmlkZXIgfHwgcHJvdmlkZXIudHlwZSAhPT0gXCJ3ZWJhdXRoblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkUHJvdmlkZXIoXCJQcm92aWRlciBtdXN0IGJlIFdlYkF1dGhuXCIpO1xuICAgIH1cbiAgICAvLyBOYXJyb3cgdGhlIG9wdGlvbnMgdHlwZSBmb3IgdHlwZWQgdXNhZ2UgbGF0ZXJcbiAgICByZXR1cm4geyAuLi5vcHRpb25zLCBwcm92aWRlciwgYWRhcHRlciB9O1xufVxuZnVuY3Rpb24gZnJvbUFkYXB0ZXJBdXRoZW50aWNhdG9yKGF1dGhlbnRpY2F0b3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5hdXRoZW50aWNhdG9yLFxuICAgICAgICBjcmVkZW50aWFsRGV2aWNlVHlwZTogYXV0aGVudGljYXRvci5jcmVkZW50aWFsRGV2aWNlVHlwZSxcbiAgICAgICAgdHJhbnNwb3J0czogc3RyaW5nVG9UcmFuc3BvcnRzKGF1dGhlbnRpY2F0b3IudHJhbnNwb3J0cyksXG4gICAgICAgIGNyZWRlbnRpYWxJRDogZnJvbUJhc2U2NChhdXRoZW50aWNhdG9yLmNyZWRlbnRpYWxJRCksXG4gICAgICAgIGNyZWRlbnRpYWxQdWJsaWNLZXk6IGZyb21CYXNlNjQoYXV0aGVudGljYXRvci5jcmVkZW50aWFsUHVibGljS2V5KSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21CYXNlNjQoYmFzZTY0KSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KEJ1ZmZlci5mcm9tKGJhc2U2NCwgXCJiYXNlNjRcIikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRvQmFzZTY0KGJ5dGVzKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ5dGVzKS50b1N0cmluZyhcImJhc2U2NFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc3BvcnRzVG9TdHJpbmcodHJhbnNwb3J0cykge1xuICAgIHJldHVybiB0cmFuc3BvcnRzPy5qb2luKFwiLFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdUb1RyYW5zcG9ydHModHN0cmluZykge1xuICAgIHJldHVybiB0c3RyaW5nXG4gICAgICAgID8gdHN0cmluZy5zcGxpdChcIixcIilcbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/lib/utils/webauthn-utils.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/core/providers/credentials.js":
/*!**********************************************************!*\
  !*** ./node_modules/@auth/core/providers/credentials.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Credentials)\n/* harmony export */ });\n/**\n * The Credentials provider allows you to handle signing in with arbitrary credentials,\n * such as a username and password, domain, or two factor authentication or hardware device (e.g. YubiKey U2F / FIDO).\n *\n * It is intended to support use cases where you have an existing system you need to authenticate users against.\n *\n * It comes with the constraint that users authenticated in this manner are not persisted in the database,\n * and consequently that the Credentials provider can only be used if JSON Web Tokens are enabled for sessions.\n *\n * :::caution\n * The functionality provided for credentials-based authentication is intentionally limited to discourage the use of passwords due to the inherent security risks of the username-password model.\n *\n * OAuth providers spend significant amounts of money, time, and engineering effort to build:\n *\n * - abuse detection (bot-protection, rate-limiting)\n * - password management (password reset, credential stuffing, rotation)\n * - data security (encryption/salting, strength validation)\n *\n * and much more for authentication solutions. It is likely that your application would benefit from leveraging these battle-tested solutions rather than try to rebuild them from scratch.\n *\n * If you'd still like to build password-based authentication for your application despite these risks, Auth.js gives you full control to do so.\n *\n * :::\n *\n * See the [callbacks documentation](/reference/core#authconfig#callbacks) for more information on how to interact with the token. For example, you can add additional information to the token by returning an object from the `jwt()` callback:\n *\n * ```ts\n * callbacks: {\n *   async jwt({ token, user, account, profile, isNewUser }) {\n *     if (user) {\n *       token.id = user.id\n *     }\n *     return token\n *   }\n * }\n * ```\n *\n * @example\n * ```ts\n * import { Auth } from \"@auth/core\"\n * import Credentials from \"@auth/core/providers/credentials\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await AuthHandler(request, {\n *   providers: [\n *     Credentials({\n *       credentials: {\n *         username: { label: \"Username\" },\n *         password: {  label: \"Password\", type: \"password\" }\n *       },\n *       async authorize({ request }) {\n *         const response = await fetch(request)\n *         if(!response.ok) return null\n *         return await response.json() ?? null\n *       }\n *     })\n *   ],\n *   secret: \"...\",\n *   trustHost: true,\n * })\n * ```\n * @see [Username/Password Example](https://authjs.dev/getting-started/authentication/credentials)\n */\nfunction Credentials(config) {\n    return {\n        id: \"credentials\",\n        name: \"Credentials\",\n        type: \"credentials\",\n        credentials: {},\n        authorize: () => null,\n        // @ts-expect-error\n        options: config,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9jb3JlL3Byb3ZpZGVycy9jcmVkZW50aWFscy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMENBQTBDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQyx3QkFBd0I7QUFDeEIsVUFBVTtBQUNWLDJCQUEyQixTQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxcY29yZVxccHJvdmlkZXJzXFxjcmVkZW50aWFscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBDcmVkZW50aWFscyBwcm92aWRlciBhbGxvd3MgeW91IHRvIGhhbmRsZSBzaWduaW5nIGluIHdpdGggYXJiaXRyYXJ5IGNyZWRlbnRpYWxzLFxuICogc3VjaCBhcyBhIHVzZXJuYW1lIGFuZCBwYXNzd29yZCwgZG9tYWluLCBvciB0d28gZmFjdG9yIGF1dGhlbnRpY2F0aW9uIG9yIGhhcmR3YXJlIGRldmljZSAoZS5nLiBZdWJpS2V5IFUyRiAvIEZJRE8pLlxuICpcbiAqIEl0IGlzIGludGVuZGVkIHRvIHN1cHBvcnQgdXNlIGNhc2VzIHdoZXJlIHlvdSBoYXZlIGFuIGV4aXN0aW5nIHN5c3RlbSB5b3UgbmVlZCB0byBhdXRoZW50aWNhdGUgdXNlcnMgYWdhaW5zdC5cbiAqXG4gKiBJdCBjb21lcyB3aXRoIHRoZSBjb25zdHJhaW50IHRoYXQgdXNlcnMgYXV0aGVudGljYXRlZCBpbiB0aGlzIG1hbm5lciBhcmUgbm90IHBlcnNpc3RlZCBpbiB0aGUgZGF0YWJhc2UsXG4gKiBhbmQgY29uc2VxdWVudGx5IHRoYXQgdGhlIENyZWRlbnRpYWxzIHByb3ZpZGVyIGNhbiBvbmx5IGJlIHVzZWQgaWYgSlNPTiBXZWIgVG9rZW5zIGFyZSBlbmFibGVkIGZvciBzZXNzaW9ucy5cbiAqXG4gKiA6OjpjYXV0aW9uXG4gKiBUaGUgZnVuY3Rpb25hbGl0eSBwcm92aWRlZCBmb3IgY3JlZGVudGlhbHMtYmFzZWQgYXV0aGVudGljYXRpb24gaXMgaW50ZW50aW9uYWxseSBsaW1pdGVkIHRvIGRpc2NvdXJhZ2UgdGhlIHVzZSBvZiBwYXNzd29yZHMgZHVlIHRvIHRoZSBpbmhlcmVudCBzZWN1cml0eSByaXNrcyBvZiB0aGUgdXNlcm5hbWUtcGFzc3dvcmQgbW9kZWwuXG4gKlxuICogT0F1dGggcHJvdmlkZXJzIHNwZW5kIHNpZ25pZmljYW50IGFtb3VudHMgb2YgbW9uZXksIHRpbWUsIGFuZCBlbmdpbmVlcmluZyBlZmZvcnQgdG8gYnVpbGQ6XG4gKlxuICogLSBhYnVzZSBkZXRlY3Rpb24gKGJvdC1wcm90ZWN0aW9uLCByYXRlLWxpbWl0aW5nKVxuICogLSBwYXNzd29yZCBtYW5hZ2VtZW50IChwYXNzd29yZCByZXNldCwgY3JlZGVudGlhbCBzdHVmZmluZywgcm90YXRpb24pXG4gKiAtIGRhdGEgc2VjdXJpdHkgKGVuY3J5cHRpb24vc2FsdGluZywgc3RyZW5ndGggdmFsaWRhdGlvbilcbiAqXG4gKiBhbmQgbXVjaCBtb3JlIGZvciBhdXRoZW50aWNhdGlvbiBzb2x1dGlvbnMuIEl0IGlzIGxpa2VseSB0aGF0IHlvdXIgYXBwbGljYXRpb24gd291bGQgYmVuZWZpdCBmcm9tIGxldmVyYWdpbmcgdGhlc2UgYmF0dGxlLXRlc3RlZCBzb2x1dGlvbnMgcmF0aGVyIHRoYW4gdHJ5IHRvIHJlYnVpbGQgdGhlbSBmcm9tIHNjcmF0Y2guXG4gKlxuICogSWYgeW91J2Qgc3RpbGwgbGlrZSB0byBidWlsZCBwYXNzd29yZC1iYXNlZCBhdXRoZW50aWNhdGlvbiBmb3IgeW91ciBhcHBsaWNhdGlvbiBkZXNwaXRlIHRoZXNlIHJpc2tzLCBBdXRoLmpzIGdpdmVzIHlvdSBmdWxsIGNvbnRyb2wgdG8gZG8gc28uXG4gKlxuICogOjo6XG4gKlxuICogU2VlIHRoZSBbY2FsbGJhY2tzIGRvY3VtZW50YXRpb25dKC9yZWZlcmVuY2UvY29yZSNhdXRoY29uZmlnI2NhbGxiYWNrcykgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gaG93IHRvIGludGVyYWN0IHdpdGggdGhlIHRva2VuLiBGb3IgZXhhbXBsZSwgeW91IGNhbiBhZGQgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byB0aGUgdG9rZW4gYnkgcmV0dXJuaW5nIGFuIG9iamVjdCBmcm9tIHRoZSBgand0KClgIGNhbGxiYWNrOlxuICpcbiAqIGBgYHRzXG4gKiBjYWxsYmFja3M6IHtcbiAqICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIsIGFjY291bnQsIHByb2ZpbGUsIGlzTmV3VXNlciB9KSB7XG4gKiAgICAgaWYgKHVzZXIpIHtcbiAqICAgICAgIHRva2VuLmlkID0gdXNlci5pZFxuICogICAgIH1cbiAqICAgICByZXR1cm4gdG9rZW5cbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBBdXRoIH0gZnJvbSBcIkBhdXRoL2NvcmVcIlxuICogaW1wb3J0IENyZWRlbnRpYWxzIGZyb20gXCJAYXV0aC9jb3JlL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiXG4gKlxuICogY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiKVxuICogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBdXRoSGFuZGxlcihyZXF1ZXN0LCB7XG4gKiAgIHByb3ZpZGVyczogW1xuICogICAgIENyZWRlbnRpYWxzKHtcbiAqICAgICAgIGNyZWRlbnRpYWxzOiB7XG4gKiAgICAgICAgIHVzZXJuYW1lOiB7IGxhYmVsOiBcIlVzZXJuYW1lXCIgfSxcbiAqICAgICAgICAgcGFzc3dvcmQ6IHsgIGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9XG4gKiAgICAgICB9LFxuICogICAgICAgYXN5bmMgYXV0aG9yaXplKHsgcmVxdWVzdCB9KSB7XG4gKiAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVxdWVzdClcbiAqICAgICAgICAgaWYoIXJlc3BvbnNlLm9rKSByZXR1cm4gbnVsbFxuICogICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpID8/IG51bGxcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICogICBdLFxuICogICBzZWNyZXQ6IFwiLi4uXCIsXG4gKiAgIHRydXN0SG9zdDogdHJ1ZSxcbiAqIH0pXG4gKiBgYGBcbiAqIEBzZWUgW1VzZXJuYW1lL1Bhc3N3b3JkIEV4YW1wbGVdKGh0dHBzOi8vYXV0aGpzLmRldi9nZXR0aW5nLXN0YXJ0ZWQvYXV0aGVudGljYXRpb24vY3JlZGVudGlhbHMpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWRlbnRpYWxzKGNvbmZpZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBcImNyZWRlbnRpYWxzXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlZGVudGlhbHNcIixcbiAgICAgICAgdHlwZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgICBjcmVkZW50aWFsczoge30sXG4gICAgICAgIGF1dGhvcml6ZTogKCkgPT4gbnVsbCxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBvcHRpb25zOiBjb25maWcsXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/core/providers/credentials.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/core/providers/credentials.js":
/*!**********************************************************!*\
  !*** ./node_modules/@auth/core/providers/credentials.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Credentials)\n/* harmony export */ });\n/**\n * The Credentials provider allows you to handle signing in with arbitrary credentials,\n * such as a username and password, domain, or two factor authentication or hardware device (e.g. YubiKey U2F / FIDO).\n *\n * It is intended to support use cases where you have an existing system you need to authenticate users against.\n *\n * It comes with the constraint that users authenticated in this manner are not persisted in the database,\n * and consequently that the Credentials provider can only be used if JSON Web Tokens are enabled for sessions.\n *\n * :::caution\n * The functionality provided for credentials-based authentication is intentionally limited to discourage the use of passwords due to the inherent security risks of the username-password model.\n *\n * OAuth providers spend significant amounts of money, time, and engineering effort to build:\n *\n * - abuse detection (bot-protection, rate-limiting)\n * - password management (password reset, credential stuffing, rotation)\n * - data security (encryption/salting, strength validation)\n *\n * and much more for authentication solutions. It is likely that your application would benefit from leveraging these battle-tested solutions rather than try to rebuild them from scratch.\n *\n * If you'd still like to build password-based authentication for your application despite these risks, Auth.js gives you full control to do so.\n *\n * :::\n *\n * See the [callbacks documentation](/reference/core#authconfig#callbacks) for more information on how to interact with the token. For example, you can add additional information to the token by returning an object from the `jwt()` callback:\n *\n * ```ts\n * callbacks: {\n *   async jwt({ token, user, account, profile, isNewUser }) {\n *     if (user) {\n *       token.id = user.id\n *     }\n *     return token\n *   }\n * }\n * ```\n *\n * @example\n * ```ts\n * import { Auth } from \"@auth/core\"\n * import Credentials from \"@auth/core/providers/credentials\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await AuthHandler(request, {\n *   providers: [\n *     Credentials({\n *       credentials: {\n *         username: { label: \"Username\" },\n *         password: {  label: \"Password\", type: \"password\" }\n *       },\n *       async authorize({ request }) {\n *         const response = await fetch(request)\n *         if(!response.ok) return null\n *         return await response.json() ?? null\n *       }\n *     })\n *   ],\n *   secret: \"...\",\n *   trustHost: true,\n * })\n * ```\n * @see [Username/Password Example](https://authjs.dev/getting-started/authentication/credentials)\n */\nfunction Credentials(config) {\n    return {\n        id: \"credentials\",\n        name: \"Credentials\",\n        type: \"credentials\",\n        credentials: {},\n        authorize: () => null,\n        // @ts-expect-error\n        options: config,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvY29yZS9wcm92aWRlcnMvY3JlZGVudGlhbHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBDQUEwQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUMsd0JBQXdCO0FBQ3hCLFVBQVU7QUFDViwyQkFBMkIsU0FBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXGNvcmVcXHByb3ZpZGVyc1xcY3JlZGVudGlhbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgQ3JlZGVudGlhbHMgcHJvdmlkZXIgYWxsb3dzIHlvdSB0byBoYW5kbGUgc2lnbmluZyBpbiB3aXRoIGFyYml0cmFyeSBjcmVkZW50aWFscyxcbiAqIHN1Y2ggYXMgYSB1c2VybmFtZSBhbmQgcGFzc3dvcmQsIGRvbWFpbiwgb3IgdHdvIGZhY3RvciBhdXRoZW50aWNhdGlvbiBvciBoYXJkd2FyZSBkZXZpY2UgKGUuZy4gWXViaUtleSBVMkYgLyBGSURPKS5cbiAqXG4gKiBJdCBpcyBpbnRlbmRlZCB0byBzdXBwb3J0IHVzZSBjYXNlcyB3aGVyZSB5b3UgaGF2ZSBhbiBleGlzdGluZyBzeXN0ZW0geW91IG5lZWQgdG8gYXV0aGVudGljYXRlIHVzZXJzIGFnYWluc3QuXG4gKlxuICogSXQgY29tZXMgd2l0aCB0aGUgY29uc3RyYWludCB0aGF0IHVzZXJzIGF1dGhlbnRpY2F0ZWQgaW4gdGhpcyBtYW5uZXIgYXJlIG5vdCBwZXJzaXN0ZWQgaW4gdGhlIGRhdGFiYXNlLFxuICogYW5kIGNvbnNlcXVlbnRseSB0aGF0IHRoZSBDcmVkZW50aWFscyBwcm92aWRlciBjYW4gb25seSBiZSB1c2VkIGlmIEpTT04gV2ViIFRva2VucyBhcmUgZW5hYmxlZCBmb3Igc2Vzc2lvbnMuXG4gKlxuICogOjo6Y2F1dGlvblxuICogVGhlIGZ1bmN0aW9uYWxpdHkgcHJvdmlkZWQgZm9yIGNyZWRlbnRpYWxzLWJhc2VkIGF1dGhlbnRpY2F0aW9uIGlzIGludGVudGlvbmFsbHkgbGltaXRlZCB0byBkaXNjb3VyYWdlIHRoZSB1c2Ugb2YgcGFzc3dvcmRzIGR1ZSB0byB0aGUgaW5oZXJlbnQgc2VjdXJpdHkgcmlza3Mgb2YgdGhlIHVzZXJuYW1lLXBhc3N3b3JkIG1vZGVsLlxuICpcbiAqIE9BdXRoIHByb3ZpZGVycyBzcGVuZCBzaWduaWZpY2FudCBhbW91bnRzIG9mIG1vbmV5LCB0aW1lLCBhbmQgZW5naW5lZXJpbmcgZWZmb3J0IHRvIGJ1aWxkOlxuICpcbiAqIC0gYWJ1c2UgZGV0ZWN0aW9uIChib3QtcHJvdGVjdGlvbiwgcmF0ZS1saW1pdGluZylcbiAqIC0gcGFzc3dvcmQgbWFuYWdlbWVudCAocGFzc3dvcmQgcmVzZXQsIGNyZWRlbnRpYWwgc3R1ZmZpbmcsIHJvdGF0aW9uKVxuICogLSBkYXRhIHNlY3VyaXR5IChlbmNyeXB0aW9uL3NhbHRpbmcsIHN0cmVuZ3RoIHZhbGlkYXRpb24pXG4gKlxuICogYW5kIG11Y2ggbW9yZSBmb3IgYXV0aGVudGljYXRpb24gc29sdXRpb25zLiBJdCBpcyBsaWtlbHkgdGhhdCB5b3VyIGFwcGxpY2F0aW9uIHdvdWxkIGJlbmVmaXQgZnJvbSBsZXZlcmFnaW5nIHRoZXNlIGJhdHRsZS10ZXN0ZWQgc29sdXRpb25zIHJhdGhlciB0aGFuIHRyeSB0byByZWJ1aWxkIHRoZW0gZnJvbSBzY3JhdGNoLlxuICpcbiAqIElmIHlvdSdkIHN0aWxsIGxpa2UgdG8gYnVpbGQgcGFzc3dvcmQtYmFzZWQgYXV0aGVudGljYXRpb24gZm9yIHlvdXIgYXBwbGljYXRpb24gZGVzcGl0ZSB0aGVzZSByaXNrcywgQXV0aC5qcyBnaXZlcyB5b3UgZnVsbCBjb250cm9sIHRvIGRvIHNvLlxuICpcbiAqIDo6OlxuICpcbiAqIFNlZSB0aGUgW2NhbGxiYWNrcyBkb2N1bWVudGF0aW9uXSgvcmVmZXJlbmNlL2NvcmUjYXV0aGNvbmZpZyNjYWxsYmFja3MpIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGhvdyB0byBpbnRlcmFjdCB3aXRoIHRoZSB0b2tlbi4gRm9yIGV4YW1wbGUsIHlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gdG8gdGhlIHRva2VuIGJ5IHJldHVybmluZyBhbiBvYmplY3QgZnJvbSB0aGUgYGp3dCgpYCBjYWxsYmFjazpcbiAqXG4gKiBgYGB0c1xuICogY2FsbGJhY2tzOiB7XG4gKiAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyLCBhY2NvdW50LCBwcm9maWxlLCBpc05ld1VzZXIgfSkge1xuICogICAgIGlmICh1c2VyKSB7XG4gKiAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWRcbiAqICAgICB9XG4gKiAgICAgcmV0dXJuIHRva2VuXG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQXV0aCB9IGZyb20gXCJAYXV0aC9jb3JlXCJcbiAqIGltcG9ydCBDcmVkZW50aWFscyBmcm9tIFwiQGF1dGgvY29yZS9wcm92aWRlcnMvY3JlZGVudGlhbHNcIlxuICpcbiAqIGNvbnN0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdChcImh0dHBzOi8vZXhhbXBsZS5jb21cIilcbiAqIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXV0aEhhbmRsZXIocmVxdWVzdCwge1xuICogICBwcm92aWRlcnM6IFtcbiAqICAgICBDcmVkZW50aWFscyh7XG4gKiAgICAgICBjcmVkZW50aWFsczoge1xuICogICAgICAgICB1c2VybmFtZTogeyBsYWJlbDogXCJVc2VybmFtZVwiIH0sXG4gKiAgICAgICAgIHBhc3N3b3JkOiB7ICBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfVxuICogICAgICAgfSxcbiAqICAgICAgIGFzeW5jIGF1dGhvcml6ZSh7IHJlcXVlc3QgfSkge1xuICogICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3QpXG4gKiAgICAgICAgIGlmKCFyZXNwb25zZS5vaykgcmV0dXJuIG51bGxcbiAqICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKSA/PyBudWxsXG4gKiAgICAgICB9XG4gKiAgICAgfSlcbiAqICAgXSxcbiAqICAgc2VjcmV0OiBcIi4uLlwiLFxuICogICB0cnVzdEhvc3Q6IHRydWUsXG4gKiB9KVxuICogYGBgXG4gKiBAc2VlIFtVc2VybmFtZS9QYXNzd29yZCBFeGFtcGxlXShodHRwczovL2F1dGhqcy5kZXYvZ2V0dGluZy1zdGFydGVkL2F1dGhlbnRpY2F0aW9uL2NyZWRlbnRpYWxzKVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVkZW50aWFscyhjb25maWcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpZDogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgICBuYW1lOiBcIkNyZWRlbnRpYWxzXCIsXG4gICAgICAgIHR5cGU6IFwiY3JlZGVudGlhbHNcIixcbiAgICAgICAgY3JlZGVudGlhbHM6IHt9LFxuICAgICAgICBhdXRob3JpemU6ICgpID0+IG51bGwsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgb3B0aW9uczogY29uZmlnLFxuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/core/providers/credentials.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@auth/prisma-adapter/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@auth/prisma-adapter/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrismaAdapter: () => (/* binding */ PrismaAdapter)\n/* harmony export */ });\n/* harmony import */ var _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client/runtime/library */ \"@prisma/client/runtime/library\");\n\nfunction PrismaAdapter(prisma) {\n    const p = prisma;\n    return {\n        // We need to let Prisma generate the ID because our default UUID is incompatible with MongoDB\n        createUser: ({ id, ...data }) => p.user.create(stripUndefined(data)),\n        getUser: (id) => p.user.findUnique({ where: { id } }),\n        getUserByEmail: (email) => p.user.findUnique({ where: { email } }),\n        async getUserByAccount(provider_providerAccountId) {\n            const account = await p.account.findUnique({\n                where: { provider_providerAccountId },\n                include: { user: true },\n            });\n            return account?.user ?? null;\n        },\n        updateUser: ({ id, ...data }) => p.user.update({\n            where: { id },\n            ...stripUndefined(data),\n        }),\n        deleteUser: (id) => p.user.delete({ where: { id } }),\n        linkAccount: (data) => p.account.create({ data }),\n        unlinkAccount: (provider_providerAccountId) => p.account.delete({\n            where: { provider_providerAccountId },\n        }),\n        async getSessionAndUser(sessionToken) {\n            const userAndSession = await p.session.findUnique({\n                where: { sessionToken },\n                include: { user: true },\n            });\n            if (!userAndSession)\n                return null;\n            const { user, ...session } = userAndSession;\n            return { user, session };\n        },\n        createSession: (data) => p.session.create(stripUndefined(data)),\n        updateSession: (data) => p.session.update({\n            where: { sessionToken: data.sessionToken },\n            ...stripUndefined(data),\n        }),\n        deleteSession: (sessionToken) => p.session.delete({ where: { sessionToken } }),\n        async createVerificationToken(data) {\n            const verificationToken = await p.verificationToken.create(stripUndefined(data));\n            if (\"id\" in verificationToken && verificationToken.id)\n                delete verificationToken.id;\n            return verificationToken;\n        },\n        async useVerificationToken(identifier_token) {\n            try {\n                const verificationToken = await p.verificationToken.delete({\n                    where: { identifier_token },\n                });\n                if (\"id\" in verificationToken && verificationToken.id)\n                    delete verificationToken.id;\n                return verificationToken;\n            }\n            catch (error) {\n                // If token already used/deleted, just return null\n                // https://www.prisma.io/docs/reference/api-reference/error-reference#p2025\n                if (error instanceof _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_0__.PrismaClientKnownRequestError &&\n                    error.code === \"P2025\")\n                    return null;\n                throw error;\n            }\n        },\n        async getAccount(providerAccountId, provider) {\n            return p.account.findFirst({\n                where: { providerAccountId, provider },\n            });\n        },\n        async createAuthenticator(data) {\n            return p.authenticator.create(stripUndefined(data));\n        },\n        async getAuthenticator(credentialID) {\n            return p.authenticator.findUnique({\n                where: { credentialID },\n            });\n        },\n        async listAuthenticatorsByUserId(userId) {\n            return p.authenticator.findMany({\n                where: { userId },\n            });\n        },\n        async updateAuthenticatorCounter(credentialID, counter) {\n            return p.authenticator.update({\n                where: { credentialID },\n                data: { counter },\n            });\n        },\n    };\n}\n/** @see https://www.prisma.io/docs/orm/prisma-client/special-fields-and-types/null-and-undefined */\nfunction stripUndefined(obj) {\n    const data = {};\n    for (const key in obj)\n        if (obj[key] !== undefined)\n            data[key] = obj[key];\n    return { data };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AYXV0aC9wcmlzbWEtYWRhcHRlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErRTtBQUN4RTtBQUNQO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixhQUFhO0FBQ3BDLDZDQUE2QyxTQUFTLE1BQU07QUFDNUQsdURBQXVELFNBQVMsU0FBUztBQUN6RTtBQUNBO0FBQ0EseUJBQXlCLDRCQUE0QjtBQUNyRCwyQkFBMkIsWUFBWTtBQUN2QyxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1QsdUJBQXVCLGFBQWE7QUFDcEMscUJBQXFCLElBQUk7QUFDekI7QUFDQSxTQUFTO0FBQ1QsNENBQTRDLFNBQVMsTUFBTTtBQUMzRCxrREFBa0QsTUFBTTtBQUN4RDtBQUNBLHFCQUFxQiw0QkFBNEI7QUFDakQsU0FBUztBQUNUO0FBQ0E7QUFDQSx5QkFBeUIsY0FBYztBQUN2QywyQkFBMkIsWUFBWTtBQUN2QyxhQUFhO0FBQ2I7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkMscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0EscUJBQXFCLGlDQUFpQztBQUN0RDtBQUNBLFNBQVM7QUFDVCw0REFBNEQsU0FBUyxnQkFBZ0I7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsa0JBQWtCO0FBQy9DLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx5RkFBNkI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlCQUF5Qiw2QkFBNkI7QUFDdEQsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx5QkFBeUIsY0FBYztBQUN2QyxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSx5QkFBeUIsUUFBUTtBQUNqQyxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSx5QkFBeUIsY0FBYztBQUN2Qyx3QkFBd0IsU0FBUztBQUNqQyxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY29sZXBcXERlc2t0b3BcXGdpdFxcTmV4dGpzLUVjb21tZXJjZVxcbm9kZV9tb2R1bGVzXFxAYXV0aFxccHJpc21hLWFkYXB0ZXJcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50L3J1bnRpbWUvbGlicmFyeVwiO1xuZXhwb3J0IGZ1bmN0aW9uIFByaXNtYUFkYXB0ZXIocHJpc21hKSB7XG4gICAgY29uc3QgcCA9IHByaXNtYTtcbiAgICByZXR1cm4ge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIGxldCBQcmlzbWEgZ2VuZXJhdGUgdGhlIElEIGJlY2F1c2Ugb3VyIGRlZmF1bHQgVVVJRCBpcyBpbmNvbXBhdGlibGUgd2l0aCBNb25nb0RCXG4gICAgICAgIGNyZWF0ZVVzZXI6ICh7IGlkLCAuLi5kYXRhIH0pID0+IHAudXNlci5jcmVhdGUoc3RyaXBVbmRlZmluZWQoZGF0YSkpLFxuICAgICAgICBnZXRVc2VyOiAoaWQpID0+IHAudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KSxcbiAgICAgICAgZ2V0VXNlckJ5RW1haWw6IChlbWFpbCkgPT4gcC51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pLFxuICAgICAgICBhc3luYyBnZXRVc2VyQnlBY2NvdW50KHByb3ZpZGVyX3Byb3ZpZGVyQWNjb3VudElkKSB7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgcC5hY2NvdW50LmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHByb3ZpZGVyX3Byb3ZpZGVyQWNjb3VudElkIH0sXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogeyB1c2VyOiB0cnVlIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBhY2NvdW50Py51c2VyID8/IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZVVzZXI6ICh7IGlkLCAuLi5kYXRhIH0pID0+IHAudXNlci51cGRhdGUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICAgIC4uLnN0cmlwVW5kZWZpbmVkKGRhdGEpLFxuICAgICAgICB9KSxcbiAgICAgICAgZGVsZXRlVXNlcjogKGlkKSA9PiBwLnVzZXIuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KSxcbiAgICAgICAgbGlua0FjY291bnQ6IChkYXRhKSA9PiBwLmFjY291bnQuY3JlYXRlKHsgZGF0YSB9KSxcbiAgICAgICAgdW5saW5rQWNjb3VudDogKHByb3ZpZGVyX3Byb3ZpZGVyQWNjb3VudElkKSA9PiBwLmFjY291bnQuZGVsZXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHByb3ZpZGVyX3Byb3ZpZGVyQWNjb3VudElkIH0sXG4gICAgICAgIH0pLFxuICAgICAgICBhc3luYyBnZXRTZXNzaW9uQW5kVXNlcihzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJBbmRTZXNzaW9uID0gYXdhaXQgcC5zZXNzaW9uLmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHNlc3Npb25Ub2tlbiB9LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHsgdXNlcjogdHJ1ZSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXVzZXJBbmRTZXNzaW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgeyB1c2VyLCAuLi5zZXNzaW9uIH0gPSB1c2VyQW5kU2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiB7IHVzZXIsIHNlc3Npb24gfTtcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlU2Vzc2lvbjogKGRhdGEpID0+IHAuc2Vzc2lvbi5jcmVhdGUoc3RyaXBVbmRlZmluZWQoZGF0YSkpLFxuICAgICAgICB1cGRhdGVTZXNzaW9uOiAoZGF0YSkgPT4gcC5zZXNzaW9uLnVwZGF0ZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBzZXNzaW9uVG9rZW46IGRhdGEuc2Vzc2lvblRva2VuIH0sXG4gICAgICAgICAgICAuLi5zdHJpcFVuZGVmaW5lZChkYXRhKSxcbiAgICAgICAgfSksXG4gICAgICAgIGRlbGV0ZVNlc3Npb246IChzZXNzaW9uVG9rZW4pID0+IHAuc2Vzc2lvbi5kZWxldGUoeyB3aGVyZTogeyBzZXNzaW9uVG9rZW4gfSB9KSxcbiAgICAgICAgYXN5bmMgY3JlYXRlVmVyaWZpY2F0aW9uVG9rZW4oZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgdmVyaWZpY2F0aW9uVG9rZW4gPSBhd2FpdCBwLnZlcmlmaWNhdGlvblRva2VuLmNyZWF0ZShzdHJpcFVuZGVmaW5lZChkYXRhKSk7XG4gICAgICAgICAgICBpZiAoXCJpZFwiIGluIHZlcmlmaWNhdGlvblRva2VuICYmIHZlcmlmaWNhdGlvblRva2VuLmlkKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB2ZXJpZmljYXRpb25Ub2tlbi5pZDtcbiAgICAgICAgICAgIHJldHVybiB2ZXJpZmljYXRpb25Ub2tlbjtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgdXNlVmVyaWZpY2F0aW9uVG9rZW4oaWRlbnRpZmllcl90b2tlbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZmljYXRpb25Ub2tlbiA9IGF3YWl0IHAudmVyaWZpY2F0aW9uVG9rZW4uZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWRlbnRpZmllcl90b2tlbiB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChcImlkXCIgaW4gdmVyaWZpY2F0aW9uVG9rZW4gJiYgdmVyaWZpY2F0aW9uVG9rZW4uaWQpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2ZXJpZmljYXRpb25Ub2tlbi5pZDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVyaWZpY2F0aW9uVG9rZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0b2tlbiBhbHJlYWR5IHVzZWQvZGVsZXRlZCwganVzdCByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LnByaXNtYS5pby9kb2NzL3JlZmVyZW5jZS9hcGktcmVmZXJlbmNlL2Vycm9yLXJlZmVyZW5jZSNwMjAyNVxuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yICYmXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPT09IFwiUDIwMjVcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldEFjY291bnQocHJvdmlkZXJBY2NvdW50SWQsIHByb3ZpZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5hY2NvdW50LmZpbmRGaXJzdCh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcHJvdmlkZXJBY2NvdW50SWQsIHByb3ZpZGVyIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY3JlYXRlQXV0aGVudGljYXRvcihkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5hdXRoZW50aWNhdG9yLmNyZWF0ZShzdHJpcFVuZGVmaW5lZChkYXRhKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldEF1dGhlbnRpY2F0b3IoY3JlZGVudGlhbElEKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5hdXRoZW50aWNhdG9yLmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNyZWRlbnRpYWxJRCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGxpc3RBdXRoZW50aWNhdG9yc0J5VXNlcklkKHVzZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHAuYXV0aGVudGljYXRvci5maW5kTWFueSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgdXBkYXRlQXV0aGVudGljYXRvckNvdW50ZXIoY3JlZGVudGlhbElELCBjb3VudGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5hdXRoZW50aWNhdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgY3JlZGVudGlhbElEIH0sXG4gICAgICAgICAgICAgICAgZGF0YTogeyBjb3VudGVyIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLyoqIEBzZWUgaHR0cHM6Ly93d3cucHJpc21hLmlvL2RvY3Mvb3JtL3ByaXNtYS1jbGllbnQvc3BlY2lhbC1maWVsZHMtYW5kLXR5cGVzL251bGwtYW5kLXVuZGVmaW5lZCAqL1xuZnVuY3Rpb24gc3RyaXBVbmRlZmluZWQob2JqKSB7XG4gICAgY29uc3QgZGF0YSA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iailcbiAgICAgICAgaWYgKG9ialtrZXldICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBkYXRhW2tleV0gPSBvYmpba2V5XTtcbiAgICByZXR1cm4geyBkYXRhIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@auth/prisma-adapter/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@auth/prisma-adapter/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@auth/prisma-adapter/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrismaAdapter: () => (/* binding */ PrismaAdapter)\n/* harmony export */ });\n/* harmony import */ var _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client/runtime/library */ \"@prisma/client/runtime/library\");\n\nfunction PrismaAdapter(prisma) {\n    const p = prisma;\n    return {\n        // We need to let Prisma generate the ID because our default UUID is incompatible with MongoDB\n        createUser: ({ id, ...data }) => p.user.create(stripUndefined(data)),\n        getUser: (id) => p.user.findUnique({ where: { id } }),\n        getUserByEmail: (email) => p.user.findUnique({ where: { email } }),\n        async getUserByAccount(provider_providerAccountId) {\n            const account = await p.account.findUnique({\n                where: { provider_providerAccountId },\n                include: { user: true },\n            });\n            return account?.user ?? null;\n        },\n        updateUser: ({ id, ...data }) => p.user.update({\n            where: { id },\n            ...stripUndefined(data),\n        }),\n        deleteUser: (id) => p.user.delete({ where: { id } }),\n        linkAccount: (data) => p.account.create({ data }),\n        unlinkAccount: (provider_providerAccountId) => p.account.delete({\n            where: { provider_providerAccountId },\n        }),\n        async getSessionAndUser(sessionToken) {\n            const userAndSession = await p.session.findUnique({\n                where: { sessionToken },\n                include: { user: true },\n            });\n            if (!userAndSession)\n                return null;\n            const { user, ...session } = userAndSession;\n            return { user, session };\n        },\n        createSession: (data) => p.session.create(stripUndefined(data)),\n        updateSession: (data) => p.session.update({\n            where: { sessionToken: data.sessionToken },\n            ...stripUndefined(data),\n        }),\n        deleteSession: (sessionToken) => p.session.delete({ where: { sessionToken } }),\n        async createVerificationToken(data) {\n            const verificationToken = await p.verificationToken.create(stripUndefined(data));\n            if (\"id\" in verificationToken && verificationToken.id)\n                delete verificationToken.id;\n            return verificationToken;\n        },\n        async useVerificationToken(identifier_token) {\n            try {\n                const verificationToken = await p.verificationToken.delete({\n                    where: { identifier_token },\n                });\n                if (\"id\" in verificationToken && verificationToken.id)\n                    delete verificationToken.id;\n                return verificationToken;\n            }\n            catch (error) {\n                // If token already used/deleted, just return null\n                // https://www.prisma.io/docs/reference/api-reference/error-reference#p2025\n                if (error instanceof _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_0__.PrismaClientKnownRequestError &&\n                    error.code === \"P2025\")\n                    return null;\n                throw error;\n            }\n        },\n        async getAccount(providerAccountId, provider) {\n            return p.account.findFirst({\n                where: { providerAccountId, provider },\n            });\n        },\n        async createAuthenticator(data) {\n            return p.authenticator.create(stripUndefined(data));\n        },\n        async getAuthenticator(credentialID) {\n            return p.authenticator.findUnique({\n                where: { credentialID },\n            });\n        },\n        async listAuthenticatorsByUserId(userId) {\n            return p.authenticator.findMany({\n                where: { userId },\n            });\n        },\n        async updateAuthenticatorCounter(credentialID, counter) {\n            return p.authenticator.update({\n                where: { credentialID },\n                data: { counter },\n            });\n        },\n    };\n}\n/** @see https://www.prisma.io/docs/orm/prisma-client/special-fields-and-types/null-and-undefined */\nfunction stripUndefined(obj) {\n    const data = {};\n    for (const key in obj)\n        if (obj[key] !== undefined)\n            data[key] = obj[key];\n    return { data };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvcHJpc21hLWFkYXB0ZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0U7QUFDeEU7QUFDUDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsYUFBYTtBQUNwQyw2Q0FBNkMsU0FBUyxNQUFNO0FBQzVELHVEQUF1RCxTQUFTLFNBQVM7QUFDekU7QUFDQTtBQUNBLHlCQUF5Qiw0QkFBNEI7QUFDckQsMkJBQTJCLFlBQVk7QUFDdkMsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNULHVCQUF1QixhQUFhO0FBQ3BDLHFCQUFxQixJQUFJO0FBQ3pCO0FBQ0EsU0FBUztBQUNULDRDQUE0QyxTQUFTLE1BQU07QUFDM0Qsa0RBQWtELE1BQU07QUFDeEQ7QUFDQSxxQkFBcUIsNEJBQTRCO0FBQ2pELFNBQVM7QUFDVDtBQUNBO0FBQ0EseUJBQXlCLGNBQWM7QUFDdkMsMkJBQTJCLFlBQVk7QUFDdkMsYUFBYTtBQUNiO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHFCQUFxQixpQ0FBaUM7QUFDdEQ7QUFDQSxTQUFTO0FBQ1QsNERBQTRELFNBQVMsZ0JBQWdCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGtCQUFrQjtBQUMvQyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMseUZBQTZCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx5QkFBeUIsNkJBQTZCO0FBQ3RELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUJBQXlCLGNBQWM7QUFDdkMsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUJBQXlCLFFBQVE7QUFDakMsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUJBQXlCLGNBQWM7QUFDdkMsd0JBQXdCLFNBQVM7QUFDakMsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNvbGVwXFxEZXNrdG9wXFxnaXRcXE5leHRqcy1FY29tbWVyY2VcXG5vZGVfbW9kdWxlc1xcQGF1dGhcXHByaXNtYS1hZGFwdGVyXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvciB9IGZyb20gXCJAcHJpc21hL2NsaWVudC9ydW50aW1lL2xpYnJhcnlcIjtcbmV4cG9ydCBmdW5jdGlvbiBQcmlzbWFBZGFwdGVyKHByaXNtYSkge1xuICAgIGNvbnN0IHAgPSBwcmlzbWE7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byBsZXQgUHJpc21hIGdlbmVyYXRlIHRoZSBJRCBiZWNhdXNlIG91ciBkZWZhdWx0IFVVSUQgaXMgaW5jb21wYXRpYmxlIHdpdGggTW9uZ29EQlxuICAgICAgICBjcmVhdGVVc2VyOiAoeyBpZCwgLi4uZGF0YSB9KSA9PiBwLnVzZXIuY3JlYXRlKHN0cmlwVW5kZWZpbmVkKGRhdGEpKSxcbiAgICAgICAgZ2V0VXNlcjogKGlkKSA9PiBwLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkIH0gfSksXG4gICAgICAgIGdldFVzZXJCeUVtYWlsOiAoZW1haWwpID0+IHAudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KSxcbiAgICAgICAgYXN5bmMgZ2V0VXNlckJ5QWNjb3VudChwcm92aWRlcl9wcm92aWRlckFjY291bnRJZCkge1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IHAuYWNjb3VudC5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBwcm92aWRlcl9wcm92aWRlckFjY291bnRJZCB9LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHsgdXNlcjogdHJ1ZSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYWNjb3VudD8udXNlciA/PyBudWxsO1xuICAgICAgICB9LFxuICAgICAgICB1cGRhdGVVc2VyOiAoeyBpZCwgLi4uZGF0YSB9KSA9PiBwLnVzZXIudXBkYXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgICAgICAuLi5zdHJpcFVuZGVmaW5lZChkYXRhKSxcbiAgICAgICAgfSksXG4gICAgICAgIGRlbGV0ZVVzZXI6IChpZCkgPT4gcC51c2VyLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSksXG4gICAgICAgIGxpbmtBY2NvdW50OiAoZGF0YSkgPT4gcC5hY2NvdW50LmNyZWF0ZSh7IGRhdGEgfSksXG4gICAgICAgIHVubGlua0FjY291bnQ6IChwcm92aWRlcl9wcm92aWRlckFjY291bnRJZCkgPT4gcC5hY2NvdW50LmRlbGV0ZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBwcm92aWRlcl9wcm92aWRlckFjY291bnRJZCB9LFxuICAgICAgICB9KSxcbiAgICAgICAgYXN5bmMgZ2V0U2Vzc2lvbkFuZFVzZXIoc2Vzc2lvblRva2VuKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyQW5kU2Vzc2lvbiA9IGF3YWl0IHAuc2Vzc2lvbi5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBzZXNzaW9uVG9rZW4gfSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiB7IHVzZXI6IHRydWUgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF1c2VyQW5kU2Vzc2lvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlciwgLi4uc2Vzc2lvbiB9ID0gdXNlckFuZFNlc3Npb247XG4gICAgICAgICAgICByZXR1cm4geyB1c2VyLCBzZXNzaW9uIH07XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZVNlc3Npb246IChkYXRhKSA9PiBwLnNlc3Npb24uY3JlYXRlKHN0cmlwVW5kZWZpbmVkKGRhdGEpKSxcbiAgICAgICAgdXBkYXRlU2Vzc2lvbjogKGRhdGEpID0+IHAuc2Vzc2lvbi51cGRhdGUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgc2Vzc2lvblRva2VuOiBkYXRhLnNlc3Npb25Ub2tlbiB9LFxuICAgICAgICAgICAgLi4uc3RyaXBVbmRlZmluZWQoZGF0YSksXG4gICAgICAgIH0pLFxuICAgICAgICBkZWxldGVTZXNzaW9uOiAoc2Vzc2lvblRva2VuKSA9PiBwLnNlc3Npb24uZGVsZXRlKHsgd2hlcmU6IHsgc2Vzc2lvblRva2VuIH0gfSksXG4gICAgICAgIGFzeW5jIGNyZWF0ZVZlcmlmaWNhdGlvblRva2VuKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHZlcmlmaWNhdGlvblRva2VuID0gYXdhaXQgcC52ZXJpZmljYXRpb25Ub2tlbi5jcmVhdGUoc3RyaXBVbmRlZmluZWQoZGF0YSkpO1xuICAgICAgICAgICAgaWYgKFwiaWRcIiBpbiB2ZXJpZmljYXRpb25Ub2tlbiAmJiB2ZXJpZmljYXRpb25Ub2tlbi5pZClcbiAgICAgICAgICAgICAgICBkZWxldGUgdmVyaWZpY2F0aW9uVG9rZW4uaWQ7XG4gICAgICAgICAgICByZXR1cm4gdmVyaWZpY2F0aW9uVG9rZW47XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVzZVZlcmlmaWNhdGlvblRva2VuKGlkZW50aWZpZXJfdG9rZW4pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyaWZpY2F0aW9uVG9rZW4gPSBhd2FpdCBwLnZlcmlmaWNhdGlvblRva2VuLmRlbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkZW50aWZpZXJfdG9rZW4gfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoXCJpZFwiIGluIHZlcmlmaWNhdGlvblRva2VuICYmIHZlcmlmaWNhdGlvblRva2VuLmlkKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdmVyaWZpY2F0aW9uVG9rZW4uaWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZlcmlmaWNhdGlvblRva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdG9rZW4gYWxyZWFkeSB1c2VkL2RlbGV0ZWQsIGp1c3QgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3d3dy5wcmlzbWEuaW8vZG9jcy9yZWZlcmVuY2UvYXBpLXJlZmVyZW5jZS9lcnJvci1yZWZlcmVuY2UjcDIwMjVcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBlcnJvci5jb2RlID09PSBcIlAyMDI1XCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRBY2NvdW50KHByb3ZpZGVyQWNjb3VudElkLCBwcm92aWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHAuYWNjb3VudC5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHByb3ZpZGVyQWNjb3VudElkLCBwcm92aWRlciB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNyZWF0ZUF1dGhlbnRpY2F0b3IoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHAuYXV0aGVudGljYXRvci5jcmVhdGUoc3RyaXBVbmRlZmluZWQoZGF0YSkpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRBdXRoZW50aWNhdG9yKGNyZWRlbnRpYWxJRCkge1xuICAgICAgICAgICAgcmV0dXJuIHAuYXV0aGVudGljYXRvci5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjcmVkZW50aWFsSUQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBsaXN0QXV0aGVudGljYXRvcnNCeVVzZXJJZCh1c2VySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBwLmF1dGhlbnRpY2F0b3IuZmluZE1hbnkoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVwZGF0ZUF1dGhlbnRpY2F0b3JDb3VudGVyKGNyZWRlbnRpYWxJRCwgY291bnRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHAuYXV0aGVudGljYXRvci51cGRhdGUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNyZWRlbnRpYWxJRCB9LFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY291bnRlciB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKiBAc2VlIGh0dHBzOi8vd3d3LnByaXNtYS5pby9kb2NzL29ybS9wcmlzbWEtY2xpZW50L3NwZWNpYWwtZmllbGRzLWFuZC10eXBlcy9udWxsLWFuZC11bmRlZmluZWQgKi9cbmZ1bmN0aW9uIHN0cmlwVW5kZWZpbmVkKG9iaikge1xuICAgIGNvbnN0IGRhdGEgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopXG4gICAgICAgIGlmIChvYmpba2V5XSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgZGF0YVtrZXldID0gb2JqW2tleV07XG4gICAgcmV0dXJuIHsgZGF0YSB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/prisma-adapter/index.js\n");

/***/ })

};
;